(this["webpackJsonpVeto-react"]=this["webpackJsonpVeto-react"]||[]).push([[0],{409:function(e,t,n){},411:function(e,t,n){},548:function(e,t,n){},565:function(e,t){},608:function(e,t,n){"use strict";n.r(t);var c=n(2),r=n.n(c),a=n(56),i=n.n(a),s=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,673)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),a(e),i(e)}))},d=n(10),o=n(21),l=n(27),u=n(31),j=n(50),b=n(51),O=n(4),m=n(1),h=function(e){var t=e.title,n=e.route,c=Object(o.h)().pathname==n;return Object(m.jsx)("li",{class:"nav-item",children:Object(m.jsxs)(d.b,{as:d.c,to:n,class:"text-white nav-link ".concat(c?"active":""),children:[Object(m.jsx)("i",{class:"far fa-circle nav-icon"}),Object(m.jsx)("p",{children:t})]})})},x=function(e){var t=e.children,n=e.title,r=Object(c.useState)(!1),a=Object(O.a)(r,2),i=a[0];a[1];return Object(m.jsxs)("li",{as:d.c,class:"nav-item ".concat(i?"menu-is-opening":null," menu-open"),children:[Object(m.jsxs)("a",{href:"#",class:"nav-link",children:[Object(m.jsx)("i",{class:"nav-icon fas fa-tachometer-alt"}),Object(m.jsxs)("p",{children:[n,Object(m.jsx)("i",{className:"right fas fa-angle-left"})]})]}),Object(m.jsx)("ul",{className:"nav nav-treeview",style:{display:"block"},children:t})]})};var v="/tdb-depot-magasin",p="/tdb-vente-cbv",f="/tdb-facture",g="/create-product",y="/products",C="/perimes",N="/rupture",E="/credit/normal",S="/credit/vaccinateur",P="/direct",q="/parametres",A="/product/fournisseur",w="/product/category",D="/entree",F="/sortie",R="/bon/sortie",T="/nouvelle/facture",V="/list/approv",_="/signin",I="/signup",B="/vendeur",M="/admin",k="/historique/sortie/cva",L="/historique/vente/vendeur",H="/historique/vente/admin/vendeur",Q="/etat/stock/magasin",U=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.children,n=(e.navigation,e.title),c=(e.titleShort,this.props.searchbarFilter,this.props.homeTo);return t||(t=[Object(m.jsx)("div",{children:"No content"})]),t.length||(t=[t]),n.length||(n=[n]),Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{class:"wrapper position-relative",children:[Object(m.jsx)("div",{className:"bg-dark m-0  p-2  text-center",children:Object(m.jsx)("h4",{className:"m-0 p-2 text-white",children:"CABINET VETERINAIRE AMBALAVAO"})}),Object(m.jsxs)("aside",{className:"main-sidebar sidebar-dark-primary",children:[Object(m.jsx)(d.b,{to:c,className:"brand-link border-0",children:Object(m.jsx)("span",{className:"ml-4 brand-text font-weight-light text-center text-uppercase",children:n})}),Object(m.jsx)("div",{class:"sidebar",children:Object(m.jsx)("nav",{class:"mt-2",children:Object(m.jsxs)("ul",{class:"nav nav-pills nav-sidebar flex-column","data-widget":"treeview",role:"menu","data-accordion":"false",children:[Object(m.jsx)(h,{title:"Tableau de bord",route:"/"}),Object(m.jsxs)(x,{title:"Factures && Produits",children:[Object(m.jsx)(h,{title:"Factures",route:V}),Object(m.jsx)(h,{title:"Produits",route:y})]}),Object(m.jsxs)(x,{title:"D\xe9pot",children:[Object(m.jsx)(h,{title:"Bon de sortie",route:R}),Object(m.jsx)(h,{title:"Historique de sortie",route:F}),Object(m.jsx)(h,{title:"Credit",route:E}),Object(m.jsx)(h,{title:"Vaccinateur",route:S})]}),Object(m.jsxs)(x,{title:"Magasin",children:[Object(m.jsx)(h,{title:"Depot vers Magasin",route:M}),Object(m.jsx)(h,{title:"Historique de 'D\xe9p\xf4t vers Magasin'",route:k}),Object(m.jsx)(h,{title:"Etat de stock magasin",route:Q}),Object(m.jsx)(h,{title:"Historique de vente du magasin",route:H})]}),Object(m.jsx)(x,{title:"Parametres",children:Object(m.jsx)(h,{title:"Parametres g\xe9n\xe9rales",route:q})})]})})})]}),Object(m.jsx)("div",{children:t})]})})}}]),n}(r.a.PureComponent);U.defaultProps={children:null,title:["Admin","LTE"],browserTitle:null,theme:"blue",footer:null,sidebar:void 0,homeTo:"/",searchbarFilter:!1};var Y=U,K=n(672),z=n(3),G="SET_FROM_MAGASIN_ITEMS",W="ADD_FROM_MAGASIN",J="REMOVE_FROM_TO_MAGASIN",X="CLEAR_FROM_MAGASIN",Z="ADD_QTY_FROM_MAGASIN_ITEM",$="ADD_QTY_PORTION_FROM_MAGASIN_ITEM",ee="ADD_QTY_NUMBER_FROM_MAGASIN_ITEM",te="ADD_QTY_PORTION_DOSE_ITA_NEW_FROM_MAGASIN_ITEM",ne="ADD_QTY_PORTION_DOSE_SOVAX_FROM_MAGASIN_ITEM",ce="ADD_QTY_PORTION_PHYTO_COND_FROM_MAGASIN_ITEM",re="MINUS_QTY_PORTION_PHYTO_COND_FROM_MAGASIN_ITEM",ae=function(){return{type:X}},ie=function(e,t){var n=function(t){return!!(null===e||void 0===e?void 0:e.find((function(e){return(null===e||void 0===e?void 0:e.id)===t})))};return{frommagasin:e,isItemFromMagasin:n,addFromMagasin:function(e){n(e.id)?t(function(e){return{type:J,payload:e}}(e.id)):t(function(e){return{type:W,payload:e}}(e))}}},se=n(20);n(329);var de=function(e){var t=new Date(e),n=t.getDate(),c=t.getMonth(),r=t.getFullYear();return" ".concat(n," ").concat(["Janvier","Fevrier","Mars","Avril","Mai","Juin","Juillet","Ao\xfbt","Septembre","Octobre","Novembre","Decembre"][c]," ").concat(r)},oe=function(e){return new Intl.NumberFormat("fr-MG",{style:"currency",currency:"MGA"}).format(e)};function le(e){return e.toString().replace(/\s/g,"").toLowerCase()}var ue=function(e,t){if(le(e).includes(le(t)))return!0},je=function(e){return e.quantityBruteCVA>0||e.quantityCCCVA>0},be=function(e){return e.quantityBruteCVA>0},Oe=function(e){return me(e)?e.qttByCC-e.quantityCCCVA:e.quantityCCCVA-e.qttByCC},me=function(e){return e.qttByCC>e.quantityCCCVA},he=function(e){return e.qttByCC<e.quantityCCCVA},xe=function(e){return e.qttByCC==e.quantityCCCVA},ve=function(e){return e.quantityParProduct>0&&(e.qttByCC>0?(function(e){return e.quantityCCCVA-e.qttByCC<0&&e.quantityBruteCVA-1-1*e.quantityParProduct<0}(e)||(e.quantityBruteCVA-e.quantityParProduct<0?(e.quantityParProduct=e.quantityBruteCVA,e.quantityBruteCVA=0):e.quantityBruteCVA-=e.quantityParProduct),e.qttByCC>=e.doseDefault&&(e.qttByCC=e.doseDefault)):e.quantityBruteCVA-e.quantityParProduct<0?(e.quantityParProduct=e.quantityBruteCVA,e.quantityBruteCVA=0):e.quantityBruteCVA-=e.quantityParProduct),je(e)?me(e)?e.quantityBruteCVA-1>=0?function(e){je(e)&&(e.quantityBruteCVA-=1,pe(e,e.doseDefault-Oe(e)))}(e):(e.quantityBruteCVA=0,pe(e,e.quantityCCCVA)):xe(e)?pe(e,0):he(e)&&pe(e,e.quantityCCCVA-e.qttByCC):pe(e,0),e},pe=function(e,t){return e.quantityCCCVA=t,e},fe=function(e){return!(0==e.condml||0==e.condsize||0==e.qttccpvente||0==e.prixqttccvente)},ge=function(e){return!!e.condval>0},ye=function(e){if(ge(e))if(e.quantityParProduct>0)e.qttByCC>0?(function(e){return e.quantityCCCVA-e.qttByCC<0&&e.condval-1-1*e.quantityParProduct<0}(e)||(e.condval<e.quantityParProduct?e.condval-e.quantityParProduct<0?be(e)?(e.quantityBruteCVA-=1,e.condval=e.condsize-1):e.condval=0:(e.quantityParProduct=e.condval,e.condval=0):(e.condval-=e.quantityParProduct,e.quantityCCCVA-=e.qttByCC)),e.qttByCC>=e.condml&&(e.qttByCC=e.condml)):(e.condval-=e.quantityParProduct,e.condval<0&&(be(e)?(e.quantityBruteCVA-=1,e.condval=e.condsize-1):e.condval=0));else if(me(e))!function(e){e.condval-=1}(e),0==e.condval?be(e)&&Oe(e)>0&&(e.quantityBruteCVA-=1,pe(e,e.condml-Oe(e)),e.condval=e.condsize-1):pe(e,e.condml-Oe(e));else{if(xe(e))return!1;he(e)&&(je(e)?e.quantityCCCVA-=e.qttByCC:e.quantityCCCVA=0)}else be(e)?(e.quantityBruteCVA-=1,pe(e,e.condml-Oe(e)),0==e.condval&&(e.condval=e.condsize-1)):je(e)?me(e)?be(e)?e.quantityBruteCVA-=1:pe(e,0):xe(e)?pe(e,0):he(e)&&pe(e,e.quantityCCCVA-e.qttByCC):pe(e,0);return e},Ce=function(e){var t,n=e.product,c=Object(z.d)((function(e){return e.frommagasins})),a=Object(z.c)(),i=ie(c,a),s=i.isItemFromMagasin,d=i.addFromMagasin,o=!!s&&s(n.id),l=r.a.useCallback((function(){return n.quantityBruteCVA>15&&n.quantityBruteCVA<=20?"yellow":n.quantityBruteCVA>10&&n.quantityBruteCVA<=15?"#ffdb4c":n.quantityBruteCVA>5&&n.quantityBruteCVA<=10?" orange":n.quantityBruteCVA>0&&n.quantityBruteCVA<=5?"#c44e14b8":0==n.quantityBruteCVA?"red":"green"}),[n]),u=r.a.useCallback((function(){return n.quantityCCCVA>15&&n.quantityCCCVA<=20?"yellow":n.quantityCCCVA>10&&n.quantityCCCVA<=15?"#ffdb4c":n.quantityCCCVA>5&&n.quantityCCCVA<=10?" orange":n.quantityCCCVA>0&&n.quantityCCCVA<=5?"#c44e14b8":0==n.quantityCCCVA?"red":"green"}),[n]);r.a.useCallback((function(){return fe(n)?0==n.quantityBruteCVA&&(0==n.quantityCCCVA||null==n.quantityCCCVA)&&0==n.condval:0==n.quantityBruteCVA&&(0==n.quantityCCCVA||null==n.quantityCCCVA)}),[n]);return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(K.a.Item,{className:"mb-2 mr-3",style:{width:"100%",border:"1px solid gray",background:"whitesmoke",borderLeft:"10px solid ".concat(l())},children:Object(m.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(m.jsxs)("div",{className:" ".concat(n.id?"":"product-loading"),style:{boxShadow:n&&o?"15px 10px 15px rgba(0, 0, 0, .07)":"none"},children:[Object(m.jsx)("div",{style:{width:10,height:4,background:"".concat(u())}}),Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{children:n.name}),Object(m.jsx)("div",{class:"badge badge-primary",children:null===n||void 0===n||null===(t=n.fournisseur)||void 0===t?void 0:t.name}),Object(m.jsx)("br",{})]})," "]}),Object(m.jsx)("div",{children:n.id&&Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("button",{disabled:0==n.quantityBruteCVA&&(0==n.quantityCCCVA||null==n.quantityCCCVA),className:"mt-3 ".concat(o?"btn btn-danger btn-sm":"btn btn-green btn-sm"),onClick:function(){d&&d(n)},children:o?"Retirer":"Ajouter"})})})]})})})},Ne=r.a.memo(Ce),Ee=n(638),Se=n(639),Pe=n(640),qe=n(664),Ae=n(661),we=function(e){var t=e.product,n=(e.setRealQttCC,e.setRealQtt),c=(e.realQtt,e.realQttCC,Object(z.c)()),r=function(e){c(function(e,t){return{type:ee,payload:{id:e,value:t}}}(t.id,e))};return Object(m.jsx)("div",{className:"basket-item-control",children:Object(m.jsxs)(Ae.c,{inputMode:"numeric",w:28,step:1,bg:"whitesmoke",min:0,defaultValue:null===t||void 0===t?void 0:t.quantityParProduct,onChange:function(e){""==e?(n(0),r(0)):(n(e),r(e)),t.quantityCCCVA-t.qttByCC<0&&t.quantityBruteCVA-1-1*t.quantityParProduct<0&&alert("Le stock ne satisfait pas votre commande")},max:t.quantityBruteCVA,children:[Object(m.jsx)(Ae.d,{}),Object(m.jsxs)(Ae.e,{children:[Object(m.jsx)(Ae.b,{}),Object(m.jsx)(Ae.a,{})]})]})})},De=function(e){var t=e.product,n=e.setRealQttCC,r=(e.setRealQtt,e.realQtt,e.realQttCC,Object(z.c)()),a=Object(c.useRef)(),i=(Object(z.d)((function(e){return{frommagasins:e.frommagasins}})).frommagasins,function(){return t.quantityCCCVA-t.qttByCC<0&&t.quantityBruteCVA-1-1*t.quantityParProduct<0}),s=function(e){r(function(e,t){return{type:$,payload:{id:e,value:t}}}(t.id,e))};return Object(m.jsx)("div",{className:"basket-item-control",children:Object(m.jsxs)(Ae.c,{inputMode:"numeric",w:28,step:1,ref:a,bg:"whitesmoke",onChange:function(e){n(e),""==e?(s(0),n(0)):(n(1*e),s(1*e)),(i()||t.quantityBruteCVA-1<0)&&alert("Le stock ne satisfait pas votre commande")},min:0,defaultValue:t.qttByCC,max:i()?t.quantityCCCVA:t.doseDefault-1,children:[Object(m.jsx)(Ae.d,{}),Object(m.jsxs)(Ae.e,{children:[Object(m.jsx)(Ae.b,{}),Object(m.jsx)(Ae.a,{})]})]})})},Fe=function(e){var t=e.product,n=e.setRealQttCC,c=(e.setRealQtt,e.realQtt,e.realQttCC,Object(z.c)()),r=function(e){c(function(e,t){return{type:te,payload:{id:e,value:t}}}(t.id,e))},a=function(){return t.quantityCCCVA-t.qttByCC<0&&t.quantityBruteCVA-1-1*t.quantityParProduct<0};return Object(m.jsx)("div",{className:"basket-item-control",children:Object(m.jsxs)(Ae.c,{inputMode:"decimal",w:28,step:1,bg:"whitesmoke",onChange:function(e){r(e),n(e),a()&&alert("Le stock ne satisfait pas votre commande")},min:0,defaultValue:0,max:a()?t.quantityCCCVA:t.doseDefault,children:[Object(m.jsx)(Ae.d,{}),Object(m.jsxs)(Ae.e,{children:[Object(m.jsx)(Ae.b,{}),Object(m.jsx)(Ae.a,{})]})]})})},Re=function(e){var t=e.product,n=Object(z.c)(),c=function(e){n(function(e,t){return{type:ce,payload:{id:e,value:t}}}(t.id,e))};return Object(m.jsx)("div",{className:"basket-item-control",children:Object(m.jsxs)(Ae.c,{inputMode:"decimal",w:28,step:null===t||void 0===t?void 0:t.qttccpvcheckMaxente,bg:"whitesmoke",onChange:function(e){c(e)},min:0,defaultValue:0,children:[Object(m.jsx)(Ae.d,{}),Object(m.jsxs)(Ae.e,{children:[Object(m.jsx)(Ae.b,{}),Object(m.jsx)(Ae.a,{})]})]})})},Te=function(e){var t=e.product,n=e.setRealQttCC,c=(e.setRealQtt,e.realQtt,e.realQttCC,Object(z.c)()),r=function(e){c(function(e,t){return{type:ne,payload:{id:e,value:t}}}(t.id,e))},a=function(){return t.quantityCCCVA-t.qttByCC<0&&t.quantityBruteCVA-1-1*t.quantityParProduct<0};return Object(m.jsx)("div",{className:"basket-item-control",children:Object(m.jsxs)(Ae.c,{inputMode:"numeric",w:28,step:1,bg:"whitesmoke",onChange:function(e){r(e),n(e),a()&&alert("Le stock ne satisfait pas votre commande")},min:0,defaultValue:0,max:a()?t.quantityCCCVA/2:t.doseDefault/2,children:[Object(m.jsx)(Ae.d,{}),Object(m.jsxs)(Ae.e,{children:[Object(m.jsx)(Ae.b,{}),Object(m.jsx)(Ae.a,{})]})]})})},Ve=function(e){var t=e.product,n=Object(c.useState)(null),r=Object(O.a)(n,2),a=r[0],i=r[1],s=Object(c.useState)(null),d=Object(O.a)(s,2),o=d[0],l=d[1],u=Object(z.d)((function(e){return e.frommagasins})),j=Object(z.c)(),b=ie(u,j),h=b.isItemFromMagasin,x=b.addFromMagasin,v=!!h&&h(t.id);return Object(m.jsx)("div",{children:Object(m.jsxs)("div",{className:"d-flex justify-content-between align-items-center border   mb-2 p-2",children:[Object(m.jsxs)("div",{style:{width:"45%"},children:[Object(m.jsx)("p",{className:"text-blue",children:t.name}),Object(m.jsx)("span",{className:"text-lowercase",children:Object(m.jsxs)("strong",{children:[0!=t.quantityParProduct&&oe(t.prixVente),0==t.quantityParProduct&&0!=t.prixParCC&&Object(m.jsx)(m.Fragment,{children:null!=t.prixqttccvente&&0!=t.prixqttccvente?oe(t.prixqttccvente):oe(t.prixParCC)}),0!=t.quantityParProduct&&" x "+t.quantityParProduct+" "+t.type," ",null==t.prixqttccvente&&0==t.prixqttccvente&&Object(m.jsx)(m.Fragment,{children:0!=t.qttByCC&&(0==t.quantityParProduct?" x ":"+")+t.qttByCC+"ML"})]})})]}),Object(m.jsxs)("div",{className:"text-inline text-center",children:[Object(m.jsx)("h5",{className:"mb-1",children:t.type}),Object(m.jsx)(we,{product:t,setRealQttCC:i,setRealQtt:l,realQtt:o,realQttCC:a})]}),"FLACON"===t.type&&Object(m.jsxs)("div",{className:"text-inline text-center",children:[Object(m.jsx)("h5",{className:"mb-1",children:3==t.categoryId?"DOSE":"ML"}),ue(t.name,"ita new")&&Object(m.jsx)(Fe,{product:t,setRealQttCC:i,setRealQtt:l,realQtt:o,realQttCC:a}),ue(t.name,"sovax")&&Object(m.jsx)(Te,{setRealQttCC:i,setRealQtt:l,realQtt:o,realQttCC:a,product:t}),0==t.condml&&0==t.qttccpvente&&!ue(t.name,"sovax")&&!ue(t.name,"ita new")&&Object(m.jsx)(De,{setRealQttCC:i,setRealQtt:l,realQtt:o,realQttCC:a,product:t}),0!==t.condml&&0!==t.qttccpvente&&Object(m.jsx)(Re,{product:t})]}),Object(m.jsx)("div",{children:v&&Object(m.jsx)("button",{onClick:function(){x&&x(t)},className:"btn btn-danger btn-xs text-right",children:"X"})})]})})},_e=n(8),Ie=n(43),Be=n.n(Ie),Me=n(113),ke=n(301),Le=n(102);function He(e,t){return e.resourceName+"."+t}var Qe=function(e,t,n){var c=He(e,t);if(Le(Array,n))throw new TypeError(c+": Expected record not to be an array")},Ue={DEFAULT_KEY:"id",STORE_LIST:"STORE_LIST",STORE_MAP:"STORE_MAP",REDUCER_NAMES:{CREATE_ERROR:"createError",CREATE_START:"createStart",CREATE_SUCCESS:"createSuccess",DELETE_ERROR:"deleteError",DELETE_START:"deleteStart",DELETE_SUCCESS:"deleteSuccess",FETCH_SUCCESS:"fetchSuccess",UPDATE_ERROR:"updateError",UPDATE_START:"updateStart",UPDATE_SUCCESS:"updateSuccess"},SPECIAL_KEYS:{BUSY:"busy",CLIENT_GENERATED_ID:"_cid",DELETED:"deleted",PENDING_CREATE:"pendingCreate",PENDING_UPDATE:"pendingUpdate"}};var Ye=function(e,t){if(null==e)throw new Error("actionCreatorsFor: Expected resourceName");t=t||function(e){return{key:"id",resourceName:e}}(e),t=Be()(t,{resourceName:e});var n=ke(e);function c(e,t){Me(null!=t,"Expected error in "+e)}function r(e,n){Me(null!=n,"Expected record in "+e),Qe(t,"createStart",n)}return t.key,{fetchStart:function(e){return{data:e,type:n.fetchStart}},fetchSuccess:function(e,t){return function(e,t){Me(null!=t,"Expected records "+e)}("fetchSuccess",e),{data:t,records:e,type:n.fetchSuccess}},fetchError:function(e,t){return c("fetchError",e),{data:t,error:e,type:n.fetchError}},createStart:function(e,t){return r("createStart",e),{data:t,record:e,type:n.createStart}},createSuccess:function(e,t,c){return r("createSuccess",e),{cid:t,data:c,record:e,type:n.createSuccess}},createError:function(e,t,a){var i="createError";return c(i,e),r(i,t),{data:a,error:e,record:t,type:n.createError}},updateStart:function(e,t){return r("updateStart",e),{data:t,record:e,type:n.updateStart}},updateSuccess:function(e,t){return r("updateSuccess",e),{data:t,record:e,type:n.updateSuccess}},updateError:function(e,t,a){var i="updateError";return c(i,e),r(i,t),{data:a,error:e,record:t,type:n.updateError}},deleteStart:function(e,t){return r("deleteStart",e),{data:t,record:e,type:n.deleteStart}},deleteSuccess:function(e,t){return r("deleteSuccess",e),{data:t,record:e,type:n.deleteSuccess}},deleteError:function(e,t,a){var i="deleteError";return c(i,e),r(i,t),{data:a,error:e,record:t,type:n.deleteError}}}};var Ke=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,c=arguments.length>3?arguments[3]:void 0;if(null==e)throw new Error("reducersFor: Expected resourceName");var r={key:Ue.DEFAULT_KEY,resourceName:e},a=Ie(r,t);return function(t,r){if(t=t||n,null==r)throw new Error(e+" reducers: Expected action");var i=ke(e),s=r.record;switch(r.type){case i.fetchSuccess:return c.fetchSuccess(a,t,r.records,n,r.data&&r.data.replace);case i.createStart:return c.createStart(a,t,s);case i.createSuccess:return c.createSuccess(a,t,s,r.cid);case i.createError:return c.createError(a,t,s);case i.updateStart:return c.updateStart(a,t,s);case i.updateSuccess:return c.updateSuccess(a,t,s);case i.updateError:return c.updateError(a,t,s);case i.deleteStart:return c.deleteStart(a,t,s);case i.deleteSuccess:return c.deleteSuccess(a,t,s);case i.deleteError:return c.deleteError(a,t,s);default:return t}}};function ze(e,t){var n=t.config;if(!n.resourceName)throw new Error("Expected config.resourceName");var c=He(n,e.reducerName);if(!n.key)throw new Error(c+": Expected config.key");if(!t.record)throw new Error(c+": Expected record/s");t.assertValidStore(c,t.current),e.canBeArray||Qe(t.config,e.reducerName,t.record)}var Ge=n(122);function We(e,t,n){var c=e.key;return Ge((function(e){var t=e[c];return n[c]===t}),t)}function Je(e){return Le(Array,e)?e:[e]}var Xe={assert:function(e,t){if(!Le(Array,t))throw new Error(e+": Expected current to be an array")},remove:We,merge:function(e,t,n){t=Je(t);var c={},r={},a=e.slice(0);return e.forEach((function(e,t){var a=e[n];if(null==a)throw new Error("Expected record to have "+n);c[a]=e,r[a]=t})),t.forEach((function(e){var t=e[n];c[t]?a[r[t]]=e:(r[t]=a.length,a.push(e)),c[t]=e})),a}};function Ze(e,t,n,c){ze(e,{assertValidStore:Xe.assert,config:t,current:n,record:c})}var $e={reducerName:Ue.REDUCER_NAMES.CREATE_ERROR,canBeArray:!1};var et=n(9);function tt(e){var t,n=(t={},Object(et.a)(t,Ue.SPECIAL_KEYS.BUSY,!0),Object(et.a)(t,Ue.SPECIAL_KEYS.PENDING_CREATE,!0),t);return Ie(e,n)}var nt={reducerName:Ue.REDUCER_NAMES.CREATE_START,canBeArray:!1};var ct={reducerName:Ue.REDUCER_NAMES.CREATE_SUCCESS,canBeArray:!1};var rt=n(123),at=n(302);function it(e,t,n){return at((function(e){return e[t]===n}),e)}var st={reducerName:Ue.REDUCER_NAMES.DELETE_ERROR,canBeArray:!1};function dt(e){var t,n=(t={},Object(et.a)(t,Ue.SPECIAL_KEYS.DELETED,!0),Object(et.a)(t,Ue.SPECIAL_KEYS.BUSY,!0),t);return Ie(e,n)}var ot={reducerName:Ue.REDUCER_NAMES.DELETE_START,canBeArray:!1};var lt={reducerName:Ue.REDUCER_NAMES.DELETE_SUCCESS,canBeArray:!1};var ut=n(303),jt=n(304),bt=function(e,t,n){var c=ut(e.key);if(!jt(c,n))throw new Error(t+": Expected all records to have a value for the store's key `"+e.key+"`")},Ot=Ue.REDUCER_NAMES.FETCH_SUCCESS,mt={reducerName:Ot,canBeArray:!0};var ht=n(173);function xt(e){return ht(Ue.SPECIAL_KEYS.BUSY,e)}var vt={reducerName:Ue.REDUCER_NAMES.UPDATE_ERROR,canBeArray:!1};function pt(e){var t,n=(t={},Object(et.a)(t,Ue.SPECIAL_KEYS.BUSY,!0),Object(et.a)(t,Ue.SPECIAL_KEYS.PENDING_UPDATE,!0),t);return Ie(e,n)}var ft={reducerName:Ue.REDUCER_NAMES.UPDATE_START,canBeArray:!1};var gt={reducerName:Ue.REDUCER_NAMES.UPDATE_SUCCESS,canBeArray:!1};var yt={createError:function(e,t,n){return Ze($e,e,t,n),We(e,t,n)},createStart:function(e,t,n){return Ze(nt,e,t,n),tt(n),t},createSuccess:function(e,t,n,c){Ze(ct,e,t,n);var r=e.key,a=!1,i=t.map((function(e){var t=e[r];if(null==t)throw new Error("Expected record to have "+r);return t===n[r]||null!=c&&c===t?(a=!0,n):e}));return a||(i=i.concat([n])),i},deleteError:function(e,t,n){Ze(st,e,t,n);var c=e.key,r=it(t,c,n[c]);return r=rt(["deleted","busy"],r),Xe.merge(t,r,c)},deleteStart:function(e,t,n){Ze(ot,e,t,n);var c=e.key,r=it(t,c,n[c]);return r=dt(r),Xe.merge(t,r,c)},deleteSuccess:function(e,t,n){Ze(lt,e,t,n);var c=e.key,r=n[c];return Ge((function(e){return r==e[c]}),t)},fetchSuccess:function(e,t,n,c){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return Ze(mt,e,t,n),n=Je(n),bt(e,Ot,n),Xe.merge(r?c:t,n,e.key)},updateError:function(e,t,n){Ze(vt,e,t,n);var c=e.key,r=it(t,c,n[c]);return null==r?t:(r=xt(r),Xe.merge(t,r,c))},updateStart:function(e,t,n){Ze(ft,e,t,n);var c=[pt(n)];return Xe.merge(t,c,e.key)},updateSuccess:function(e,t,n){return Ze(gt,e,t,n),Xe.merge(t,n,e.key)}};var Ct={reducersFor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,c=Ie(yt,n);return Ke(e,t,[],c)}};var Nt={assert:function(e,t){if(!Le(Object,t))throw new Error(e+": Expected current to be an object")},merge:function(e,t,n){var c=n[e.key];return Ie(t,Object(et.a)({},c,n))},remove:function(e,t,n){var c=n[e.key];return rt([c],t)}};function Et(e,t,n,c){ze(e,{assertValidStore:Nt.assert,config:t,current:n,record:c})}var St={reducerName:Ue.REDUCER_NAMES.CREATE_ERROR,canBeArray:!1};var Pt={reducerName:Ue.REDUCER_NAMES.CREATE_START,canBeArray:!1};var qt=n(305),At=n(306),wt={reducerName:Ue.REDUCER_NAMES.CREATE_SUCCESS,canBeArray:!1};var Dt={reducerName:Ue.REDUCER_NAMES.DELETE_ERROR,canBeArray:!1};var Ft={reducerName:Ue.REDUCER_NAMES.DELETE_START,canBeArray:!1};var Rt={reducerName:Ue.REDUCER_NAMES.DELETE_SUCCESS,canBeArray:!1};var Tt=n(307),Vt=n(219),_t=Ue.REDUCER_NAMES.FETCH_SUCCESS,It={reducerName:_t,canBeArray:!0};var Bt={reducerName:Ue.REDUCER_NAMES.UPDATE_ERROR,canBeArray:!1};var Mt={reducerName:Ue.REDUCER_NAMES.UPDATE_START,canBeArray:!1};var kt={reducerName:Ue.REDUCER_NAMES.UPDATE_SUCCESS,canBeArray:!1};var Lt={createError:function(e,t,n){return Et(St,e,t,n),Nt.remove(e,t,n)},createStart:function(e,t,n){return Et(Pt,e,t,n),tt(n),t},createSuccess:function(e,t,n,c){Et(wt,e,t,n);var r=n[e.key],a=qt(r),i=ht(c,t);return At(a,n,i)},deleteError:function(e,t,n){Et(Dt,e,t,n);var c=n[e.key],r=t[c];return null==r?t:(r=rt(["deleted","busy"],r),Ie(t,Object(et.a)({},c,r)))},deleteStart:function(e,t,n){Et(Ft,e,t,n);var c=t[n[e.key]];return null==c?t:(c=dt(c),Nt.merge(e,t,c))},deleteSuccess:function(e,t,n){Et(Rt,e,t,n);var c=e.key,r=n[c];return Ge((function(e){return r==e[c]}),t)},fetchSuccess:function(e,t,n,c){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Et(It,e,t,n),n=Je(n),bt(e,_t,n);var a=Tt(Vt(e.key),n);return Ie(r?c:t,a)},updateError:function(e,t,n){Et(Bt,e,t,n);var c=t[n[e.key]];return null==c?t:(c=xt(c),Nt.merge(e,t,c))},updateStart:function(e,t,n){Et(Mt,e,t,n);var c=pt(n);return Nt.merge(e,t,c)},updateSuccess:function(e,t,n){return Et(kt,e,t,n),Nt.merge(e,t,n)}};var Ht={reducersFor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,c=Ie(Lt,n);return Ke(e,t,{},c)}},Qt={actionCreatorsFor:Ye,actionTypesFor:ke,constants:Ue,List:Ct,Map:Ht},Ut=n(132),Yt=n.n(Ut),Kt=n(308),zt=n(115),Gt=n.n(zt),Wt=n(36),Jt=n.n(Wt),Xt=JSON.parse(localStorage.getItem("user-infos")),Zt=(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).API_URL,function(){return{Accept:"application/json","Content-Type":"application/json",Authorization:Xt&&Xt.token?Xt.token:{}}}),$t={code:"INTERNAL_ERROR",message:"Quelque chose s'est mal pass\xe9. Veuillez v\xe9rifier votre connexion Internet ou contacter notre support.",status:503,data:{}},en=Gt.a;en.interceptors.request.use((function(e){if(!e.headers.Authorization){var t=JSON.parse(localStorage.getItem("user-infos"));(null===t||void 0===t?void 0:t.token)&&(en.defaults.headers.common.Authorization="".concat(null===t||void 0===t?void 0:t.token))}return e}),(function(e){return console.log(e)})),en.interceptors.response.use((function(e){return Jt.a.isUndefined(e)?[]:e}),(function(e){return console.log(e)}));var tn=function(e,t,n,c){return new Promise((function(n,r){var a=c;en({url:"".concat(t),method:e,headers:Zt(),params:"get"==e?c:void 0,data:"get"!==e?a:void 0}).then((function(e){Jt.a.isUndefined(e)?n([]):n(e.data)}),(function(e){var t,n,c,a,i;if(null===e||void 0===e?void 0:e.response){if(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error)r(null===e||void 0===e||null===(a=e.response)||void 0===a||null===(i=a.data)||void 0===i?void 0:i.error);else if(null===e||void 0===e||null===(c=e.response.data)||void 0===c?void 0:c.errors){var s;r(null===e||void 0===e||null===(s=e.response.data)||void 0===s?void 0:s.errors)}}else r($t)}))}))},nn=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return tn.apply(void 0,["get"].concat(t))},cn=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return tn.apply(void 0,["post"].concat(t))},rn=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return tn.apply(void 0,["put"].concat(t))},an=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return tn.apply(void 0,["delete"].concat(t))},sn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t?e[t]||e[Object(Kt.singular)(t)]:e;return Yt.a.camelizeKeys(n)},dn=function(e,t,n,c,r,a){return Object(_e.a)(Object(_e.a)({},e),{},{records:(i=e.records,Object(Wt.isArray)(i)?i:[i]),receivedAt:new Date,success:a||"",totalItems:n,totalPages:c,currentPage:r});var i},on=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;return function(a){var i=Qt.actionCreatorsFor(e),s=t.path||Yt.a.decamelize(e),d=t.replace?{replace:t.replace}:void 0,o=t.url||Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).API_URL||"http://localhost:1200/api";return a(i.fetchStart()),nn("".concat(o,"/").concat(s),!1,n,t).then((function(e){if(e.hasOwnProperty("data")){var t=e.data;a(dn(i.fetchSuccess(sn(t,"rows"),d),t.totalItems,t.totalPages,t.currentPage)),c&&c(sn(t,"rows"))}else e.hasOwnProperty("rows")?(a(dn(i.fetchSuccess(sn(e,"rows"),d),e.totalItems,e.totalPages,e.currentPage)),c&&c(sn(e,"rows"))):(a(dn(i.fetchSuccess(sn(e),d),0,null,null)),c&&c(sn(e)))})).catch((function(e){e.response?(r&&r(e.response),a(i.fetchError(null===e||void 0===e?void 0:e.response.data.error))):(r&&r(e),a(i.fetchError(e)))}))}},ln=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{hasFile:!1},c=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;return function(a){var i=Qt.actionCreatorsFor(e),s=n.path||Yt.a.decamelize(e),d=n.url||Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).API_URL||"http://localhost:1200/api";return a(i.createStart(t)),cn("".concat(d,"/").concat(s),n.hasFile,t,{replace:!0}).then((function(e){a(i.createSuccess(t,e.id,{receivedAt:new Date})),c&&c(t)})).catch((function(e){var n,c;e?(a(i.createError(e,t)),r&&r(e)):e.message?(a(i.createError(e,t)),r&&r(e.message)):(null===e||void 0===e||null===(n=e.response)||void 0===n||null===(c=n.data)||void 0===c?void 0:c.message)&&(r&&r(null===e||void 0===e?void 0:e.response.data.message),a(i.createError(null===e||void 0===e?void 0:e.response.data.message,t)))}))}},un=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{hasFile:!1},c=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;return function(a){var i=Qt.actionCreatorsFor(e),s=n.path||[Yt.a.decamelize(e),t.id].join("/"),d=n.url||Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).API_URL||"http://localhost:1200/api";return a(i.updateStart(t)),rn("".concat(d,"/").concat(s),n.hasFile,t,n).then((function(e){a(i.updateSuccess(t,t.id,{receivedAt:new Date})),c&&c(t)})).catch((function(e){var n,c;e?(a(i.updateError(e,t)),r&&r(e)):e.message?(a(i.updateError(e,t)),r&&r(e.message)):(null===e||void 0===e||null===(n=e.response)||void 0===n||null===(c=n.data)||void 0===c?void 0:c.message)&&(a(i.updateError(null===e||void 0===e?void 0:e.response.data.message,t)),r&&r(null===e||void 0===e?void 0:e.response.data.message))}))}},jn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;return function(a){var i=Qt.actionCreatorsFor(e),s=n.path||[Yt.a.decamelize(e),t.id].join("/"),d=n.url||Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).API_URL||"http://localhost:1200/api";return a(i.deleteStart(t)),an("".concat(d,"/").concat(s),!1,t,n).then((function(){a(i.deleteSuccess(t,{receivedAt:new Date})),c&&c(t)})).catch((function(e){a(i.deleteError(e,t)),r&&r(e)}))}},bn=n(77),On={isFetching:!1,didInvalidate:!1,lastUpdatedAt:null,error:null,success:null,nextId:null},mn=function(e){var t=Qt.actionTypesFor(e);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:On,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case t.createStart:return{isLoading:!0,error:null,success:""};case t.createError:return{isLoading:!1,error:n.error,success:n.success};case t.createSuccess:return Object(_e.a)(Object(_e.a)({},n.payload),{},{isLoading:!1,error:null,success:n.success,lastUpdatedAt:n.receivedAt});case t.createFailed:return Object(_e.a)(Object(_e.a)({},n.payload),{},{isLoading:!1,error:n.error,success:""});case t.updateStart:return Object(_e.a)(Object(_e.a)({},e),{},{isLoading:!0,error:null,success:""});case t.updateError:return{isLoading:!1,error:n.error,success:""};case t.updateSuccess:return Object(_e.a)(Object(_e.a)({},e),{},{isLoading:!1,error:null,success:n.success,lastUpdatedAt:n.receivedAt});case t.updateFailed:return Object(_e.a)(Object(_e.a)({},e),{},{isLoading:!1,error:n.error,success:n.success});case t.destroyStart:return Object(_e.a)(Object(_e.a)({},e),{},{isLoading:!0,error:null,success:""});case t.destroySuccess:return Object(_e.a)(Object(_e.a)({},e),{},{isLoading:!1,error:null,success:n.success,lastUpdatedAt:n.receivedAt});case t.deleteError:return{isLoading:!1,error:n.error,success:""};case t.destroyFailed:return Object(_e.a)(Object(_e.a)({},e),{},{isLoading:!1,error:n.error,success:""});case t.fetchStart:return Object(_e.a)(Object(_e.a)({},e),{},{isLoading:!0,didInvalidate:!1,isFetching:!0,error:null,success:""});case t.fetchSuccess:return Object(_e.a)(Object(_e.a)({},e),{},{didInvalidate:!1,isFetching:!1,isLoading:!1,success:n.success,nextId:n.nextId,totalPages:n.totalPages,totalItems:n.totalItems,currentPage:n.currentPage,lastUpdatedAt:n.receivedAt,error:null});case t.fetchError:return Object(_e.a)(Object(_e.a)({},e),{},{isFetching:!1,isLoading:!1,error:n.error});default:return Object(_e.a)({},e)}}},hn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=arguments.length>1?arguments[1]:void 0;return Qt.Map.reducersFor(e,t)(n,c)}},xn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(bn.b)({items:hn(e,t),meta:mn(e,t)})};function vn(e){return{get:function(t){return on(e,{path:"".concat(e,"/").concat(t),replace:!0})},create:function(t,n){return ln(e,t,n)},update:function(t,n){return un(e,t,n)},destroy:function(t,n){return jn(e,t,n)},fetch:function(t,n){return on(e,t,n)},createTransaction:function(t,n){return ln(e,t,{path:n})},updateTransaction:function(t,n){return un(e,t,{path:n})},deleteTransaction:function(t,n){return jn(e,t,{path:n})}}}function pn(e){return{value:function(t){return Object(Wt.values)(t[e].items)},meta:function(t){return t[e].meta}}}var fn={fromMagasin:{emptyOrder:"Aucune commande"}},gn=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0},yn=function(){var e=Object(c.useState)("vente-cva"),t=Object(O.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(1),i=Object(O.a)(a,2),s=(i[0],i[1],Object(c.useState)(null)),l=Object(O.a)(s,2),u=l[0],j=(l[1],Object(c.useState)(null)),b=Object(O.a)(j,2),h=b[0],x=b[1],v=Object(o.g)(),p=Object(z.d)((function(e){return{frommagasins:e.frommagasins}})).frommagasins,f=Object(z.c)(),g=Object(z.d)(pn("emprunters").value),y=(Object(z.d)(pn("commandes").meta),Object(z.d)(pn("commandes").value),new Date),C=Object(c.useState)(y),N=Object(O.a)(C,2),E=N[0],S=N[1];Object(c.useEffect)((function(){f(vn("commandes").fetch()),f(vn("emprunters").fetch())}),[]);return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(qe.a,{children:[Object(m.jsxs)(qe.a.Header,{className:" bg-dark py-2 text-white d-flex justify-content-between align-items-center",children:[Object(m.jsxs)("div",{style:{width:"60%"},children:["BON DE SORTIE ("," ".concat(null===p||void 0===p?void 0:p.length," ").concat((null===p||void 0===p?void 0:p.length)>1?"articles":"article"),")"]}),Object(m.jsx)("div",{style:{width:"40%"},className:"text-right",children:Object(m.jsxs)("select",{className:"form-control input-sm",onChange:function(e){r(e.target.value)},children:[Object(m.jsx)("option",{value:"vente-cva",selected:!0,children:"Comptant"}),Object(m.jsx)("option",{value:"credit-cva",children:"Credit"})]})})]}),Object(m.jsxs)("div",{className:"commande-vente",children:[Object(m.jsxs)(qe.a.Body,{style:{padding:2,marginTop:3,marginRight:2,marginLeft:2},children:[Object(m.jsx)("div",{className:"d-flex justify-content-end",children:Object(m.jsx)(d.b,{className:"btn btn-primary mb-2 btn-sm",to:L,children:"Voir l'historique de vente"})}),Object(m.jsxs)("div",{style:{overflowY:"auto",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(m.jsxs)("div",{class:"form-group",children:[Object(m.jsx)("label",{children:"Date de sortie :"}),Object(m.jsx)("div",{children:Object(m.jsx)("input",{type:"date",onChange:function(e){return S(e.target.value)},value:E,className:"form-control"})})]}),"credit-cva"===n&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("label",{children:"Crediteur:"}),Object(m.jsxs)("select",{className:"form-control",onChange:function(e){x(e.target.value)},children:[Object(m.jsx)("option",{value:""}),g.map((function(e){return Object(m.jsx)("option",{value:e.id,children:e.name})}))]})]}),(null===p||void 0===p?void 0:p.length)<=0&&Object(m.jsx)("div",{className:"alert alert-success ",children:fn.fromMagasin.emptyOrder}),null===p||void 0===p?void 0:p.map((function(e,t){return Object(m.jsx)(Ve,{product:e,basket:p,dispatch:f},"".concat(null===e||void 0===e?void 0:e.id,"_").concat(t))}))]})]}),(null===p||void 0===p?void 0:p.length)>0&&Object(m.jsxs)(qe.a.Footer,{className:"d-flex align-items-center justify-content-between",children:[Object(m.jsx)("div",{style:{width:"30%"},children:Object(m.jsx)("h2",{className:"p-2 text-uppercase bg-primary",children:Object(m.jsxs)("strong",{"data-test-id":"total-price-orders",children:["Total:",oe(gn(p.map((function(e){return e.prixVente*e.quantityParProduct})))+gn(p.map((function(e){return e.prixParCC*e.qttByCC}))))]})})}),Object(m.jsx)("div",{style:{width:"70%"},children:p.length>0&&Object(m.jsxs)("div",{className:"d-flex text-right align-items-end justify-content-end",children:[Object(m.jsx)("button",{className:"btn btn-green btn-sm mr-2",disabled:0===p.length,onClick:function(){p.forEach((function(e){fe(e)?ye(e):function(e){ve(e)}(e)})),f(vn("commandes").createTransaction({id:Math.floor(Date.now()/1e3),contenu:p,type:n,sorte:"sortie",vaccinateurId:u,status:"vente-cva"===n,emprunterId:h,dateCom:null!=E?E:y},"add-from-magasin")),f(ae()),v.push(L)},type:"button",children:"Valider l'operation"}),Object(m.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(){p.forEach((function(e){e.quantityParProduct=0,e.qttByCC=0})),f(ae())},type:"button",children:Object(m.jsx)("span",{children:"Annuler"})})]})})]})]})]})})},Cn=r.a.createContext();function Nn(e){var t=e.model,n=e.options,c=e.children,a=Object(z.d)(pn(t).value),i=Object(z.d)(pn(t).meta),s=Object(z.c)();r.a.useEffect((function(){s(vn(t).fetch(n))}),[n]);var d={data:a,meta:i};return Object(m.jsx)(Cn.Provider,{value:d,children:c})}function En(e){var t=e.children;return Object(m.jsx)(Cn.Consumer,{children:function(e){if(void 0===e)throw new Error("Data  must be used within a GetDataContext");return t(e)}})}var Sn=function(e,t,n){return on("commandes",{path:"/get-tdb-commande?type=".concat(e,"&deb=").concat(t,"&fin=").concat(n),replace:!0})},Pn=function(e,t){return on("commandes",{path:"/vente-cva?deb=".concat(e,"&fin=").concat(t),replace:!0})},qn=n(57),An=n.n(qn),wn=new Date;function Dn(){var e=Object(c.useState)({hours:wn.getHours(),minutes:wn.getMinutes(),seconds:wn.getSeconds()}),t=Object(O.a)(e,2),n=t[0],r=t[1];return Object(c.useEffect)((function(){var e=setInterval((function(){var e=new Date;r({hours:e.getHours()<10?"0"+e.getHours():e.getHours(),minutes:e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes(),seconds:e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds()})}),1e3);return function(){return clearInterval(e)}}),[]),Object(m.jsxs)("div",{className:"bg-dark py-1 px-4 text-center",children:[Object(m.jsxs)("h1",{style:{fontSize:"20px"},children:[n.hours," : ",n.minutes," : ",n.seconds]}),Object(m.jsx)("h4",{className:"bg-thead p-1",children:de(wn)})]})}var Fn=r.a.memo(Dn,qn.reactFastCompare);function Rn(e){return e.toString().replace(/\s/g,"").toLowerCase()}function Tn(e){var t,n,c;for(c in t=Array.isArray(e)?[]:{},e)n=e[c],t[c]="object"===typeof n?Tn(n):n;return t}var Vn=function(e,t,n){return Tn(e).filter((function(e){return(""==t||Rn(e.name).includes(Rn(t)))&&(""==n||e.fournisseurId==n)}))};function _n(e){var t,n,c;for(c in t=Array.isArray(e)?[]:{},e)n=e[c],t[c]="object"===typeof n?_n(n):n;return t}var In=function(e,t){return _n(e).filter((function(e){return""==t||e.fournisseurId==t}))};function Bn(e){return e.toString().replace(/\s/g,"").toLowerCase()}function Mn(e){var t,n,c;for(c in t=Array.isArray(e)?[]:{},e)n=e[c],t[c]="object"===typeof n?Mn(n):n;return t}var kn=function(e,t){return Mn(e).filter((function(e){return""==t||Bn(e.name).includes(Bn(t))}))},Ln=n(18),Hn=n.n(Ln),Qn=function(){var e=Object(z.d)(pn("products").value),t=Object(z.d)(pn("products").meta),n=Object(z.c)(),r=Object(c.useState)(""),a=Object(O.a)(r,2),i=a[0],s=a[1],d=Object(c.useState)(2),o=Object(O.a)(d,2),l=(o[0],o[1],Object(c.useState)(!1)),u=Object(O.a)(l,2),j=u[0],b=u[1],h=(Object(c.useRef)(null),Object(c.useRef)(null),Object(c.useState)([])),x=Object(O.a)(h,2),v=x[0],p=x[1];Object(c.useEffect)((function(){n(vn("products").fetch())}),[]),Object(c.useEffect)((function(){return 1==j&&(n(vn("products").fetch()),b(!1)),function(){b(!1)}}),[j]),Object(c.useEffect)((function(){t.isFetching||p(e)}),[t]),Object(c.useEffect)((function(){p(kn(e,i))}),[i]);return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"bg-dark text-white py-3 d-flex justify-content-center align-items-center",children:Object(m.jsx)("h1",{className:"",children:"CABINET VETERINAIRE AMBALAVAO"})}),Object(m.jsx)(Ee.a,{children:Object(m.jsxs)("div",{className:"py-2",children:[Object(m.jsxs)("div",{class:"d-flex justify-content-between align-items-center",children:[Object(m.jsx)("div",{}),Object(m.jsx)("div",{children:Object(m.jsx)(Fn,{})}),Object(m.jsx)("div",{className:"bg-thead"})]}),Object(m.jsxs)(Se.a,{children:[Object(m.jsx)(Pe.a,{xs:6,children:Object(m.jsxs)(qe.a,{className:"mt-2",children:[Object(m.jsxs)(qe.a.Header,{className:"bg-dark p-2 text-white d-flex text-uppercase justify-content-between align-items-center",children:[Object(m.jsx)("div",{style:{width:"60%"},children:"Produits"}),Object(m.jsx)("div",{children:Object(m.jsx)("button",{className:"btn btn-green btn-sm",onClick:function(){s(""),b(!0)},children:"Mettre \xe0 jour"})})]}),Object(m.jsxs)(qe.a.Body,{children:[Object(m.jsxs)("div",{class:"d-flex justify-content-between align-items-center",children:[Object(m.jsx)("input",{type:"text",onChange:function(e){s(e.target.value)},placeholder:"Nom du produit",className:"form-control mb-2"})," "]}),Object(m.jsx)(K.a,{children:Object(m.jsxs)("div",{style:{overflowY:"auto",width:"100%",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(m.jsxs)("div",{class:"d-flex justify-content-start flex-wrap",children:[v.sort((function(e,t){return t.quantityBruteCVA-e.quantityBruteCVA})).map((function(e){return Object(m.jsx)(Ne,{product:e})})),0==v.length&&"Aucune enregistrement trouv\xe9"]})," "]})})]})]})}),Object(m.jsx)(Pe.a,{xs:6,children:Object(m.jsx)("div",{className:" py-2",children:Object(m.jsx)(yn,{setRegenerate:b})})})]})]})})]})},Un=function(){return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(Qn,{})})};n(409);var Yn=function(){return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(Un,{})})},Kn=n(93),zn=n.n(Kn),Gn=n(145),Wn="REGISTER_SUCCESS",Jn="REGISTER_FAIL",Xn="LOGIN_SUCCESS",Zn="LOGIN_FAIL",$n="LOGOUT",ec="UPDATE_STOCK_REQUEST_SUCCESS",tc="UPDATE_STOCK_REQUEST_FAIL",nc=function(e){var t=e.product,n=Object(c.useState)(!1),r=Object(O.a)(n,2),a=r[0],i=r[1],s=Object(z.d)(pn("commandes").meta),d=Object(z.c)(),o=Object(c.useState)(1),l=Object(O.a)(o,2),u=l[0],j=l[1];Object(c.useEffect)((function(){d(vn("commandes").fetch())}),[]);return Object(m.jsxs)("tr",{className:"product-card ".concat(t.id?"":"product-loading"),style:{border:t&&a?"1px solid #a6a5a5":"",boxShadow:t&&a?"0 10px 15px rgba(0, 0, 0, .07)":"none"},children:[Object(m.jsx)("td",{children:t.name}),Object(m.jsx)("td",{children:t.quantityBrute+u}),Object(m.jsx)("td",{className:"d-flex justify-content-center align-items-center",children:Object(m.jsxs)("div",{class:"input-group inline-group",children:[Object(m.jsx)("div",{class:"input-group-prepend",children:Object(m.jsx)("button",{class:"btn btn-sm btn-dark btn-minus",onClick:function(){u>0&&j(u-1)},children:"-"})}),Object(m.jsx)("input",{class:"form-control quantity text-center  p-0",min:"0",name:"quantity",value:u,type:"number"}),Object(m.jsx)("div",{class:"input-group-append",children:Object(m.jsx)("button",{class:"btn btn-sm btn-dark btn-plus mr-2",onClick:function(){return j(u+1)},children:"+"})}),Object(m.jsx)("div",{class:"input-group-append ml-2"})]})}),Object(m.jsx)("td",{children:t.id&&Object(m.jsx)("button",{className:"btn btn-success  btn-sm",onClick:function(){d(function(e,t,n){return function(){var c=Object(Gn.a)(zn.a.mark((function c(r){var a;return zn.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,Gt.a.post("http://localhost:1200/api/update-product",{productId:e,newStockBrute:t,newStockCC:n});case 3:a=c.sent,r({type:ec,payload:a.data}),c.next=10;break;case 7:c.prev=7,c.t0=c.catch(0),r({type:tc,payload:c.t0});case 10:case"end":return c.stop()}}),c,null,[[0,7]])})));return function(e){return c.apply(this,arguments)}}()}(t.id,u,0)),d(vn("commandes").create({id:s.nextId,contenu:[t],type:"approv",sorte:"entree",vaccinateurId:null,qtteBrute:u,qtteCC:0,status:!0,emprunterId:null,dateCom:new Date})),i(!0)},children:"Modifier le stock"})})]})};function cc(e){var t=e.children;return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("div",{class:"content-wrapper",children:t})})}var rc=r.a.memo(cc,An.a);function ac(e){var t=e.title;return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("li",{class:"breadcrumb-item active",children:t})})}var ic=r.a.memo(ac,An.a);function sc(e){var t=e.children,n=e.title,c=Object(o.g)();return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{class:"content-header p-2 shadow-sm bg-white",children:Object(m.jsx)("div",{class:"container-fluid",children:Object(m.jsxs)("div",{class:"row",children:[Object(m.jsx)("div",{class:"col-sm-6",children:Object(m.jsx)("h4",{class:"mt-2 text-uppercase",children:n})}),Object(m.jsx)("div",{class:"col-sm-6",children:Object(m.jsxs)("ol",{class:"breadcrumb float-sm-right",children:[Object(m.jsx)("li",{class:"breadcrumb-item",children:Object(m.jsx)(d.b,{to:"/",children:"Accueil"})}),t]})})]})})}),Object(m.jsx)("div",{className:"mb-1",children:Object(m.jsxs)("button",{type:"button",onClick:function(){return c.goBack()},className:"btn btn-link",children:["<<"," Revenir en arriere"]})})]})})}var dc=r.a.memo(sc,An.a);function oc(e){var t=e.children;return Object(m.jsx)("section",{class:"content",children:Object(m.jsx)("div",{class:"container-fluid",children:t})})}var lc=r.a.memo(oc);function uc(){var e=Object(z.d)(pn("products").value),t=Object(z.c)();return Object(c.useEffect)((function(){t(vn("products").fetch())}),[]),Object(m.jsxs)(rc,{children:[Object(m.jsx)(dc,{title:"Approvisionnement",children:Object(m.jsx)(ic,{title:"Approvisionnement"})}),Object(m.jsx)(lc,{children:Object(m.jsxs)("table",{className:"table table-bordered table-striped",children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{className:"text-center",children:[Object(m.jsx)("th",{children:"Nom de l'article"}),Object(m.jsx)("th",{style:{width:"15%"},children:"Qte"}),Object(m.jsx)("th",{style:{width:"15%"},children:"Nouvel"}),Object(m.jsx)("th",{style:{width:"20%"},children:"Actions"})]})}),Object(m.jsx)("tbody",{children:e.map((function(e){return Object(m.jsx)(nc,{product:e})}))})]})})]})}var jc=n(188),bc=n(641),Oc=["icon","className","filter","setData","name","value","data","placeholder","changeValue","invalid"],mc=Object(c.forwardRef)((function(e,t){var n=e.icon,a=e.className,i=e.filter,s=(e.setData,e.name),d=e.value,o=e.data,l=void 0===o?0:o,u=e.placeholder,j=e.changeValue,b=e.invalid,O=(Object(se.a)(e,Oc),r.a.useCallback((function(e){i&&!i.test(e.target.value)||Object(Wt.isFunction)(j)&&j(e.target.value,e)}),[s]));return Object(c.useEffect)((function(){l&&j(l)}),[l]),Object(m.jsxs)("div",{className:a,children:[n&&Object(m.jsx)("i",{className:"fa fa-".concat(n)}),Object(m.jsx)(bc.a,{bg:"gray.100",boxShadow:"sm",isInvalid:b,color:"gray.700",placeholder:u,ref:t,defaultValue:d,onBlur:O})]})})),hc=n(179),xc=n(666),vc=n(642),pc=["name","className","options","radioValue","valueKey","direction","filter","setData","changeValue","setRadio"],fc=Object(c.forwardRef)((function(e,t){e.name;var n=e.className,a=e.options,i=e.radioValue,s=e.valueKey,d=e.direction,o=(e.filter,e.setData),l=e.changeValue,u=e.setRadio,j=Object(se.a)(e,pc),b=Object(c.useState)(i),h=Object(O.a)(b,2),x=h[0],v=h[1],p=r.a.useState("".concat(x)),f=Object(O.a)(p,2),g=f[0],y=f[1];return r.a.useLayoutEffect((function(){l(g),o&&(o(g),v(g))}),[g]),r.a.useLayoutEffect((function(){u&&u(x)}),[x]),Object(m.jsx)(hc.a,{onChange:y,defaultValue:"".concat(x),className:n,children:Object(m.jsx)(xc.b,{spacing:4,direction:d,children:a.map((function(e){return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(vc.a,Object(_e.a)(Object(_e.a)({name:"".concat(e.id),isChecked:e.id==x},j),{},{value:"".concat(e.id),ref:t,children:e[s]}))})}))})})})),gc=n(643),yc=n(177),Cc=["name","className","invalid","options","selectValue","valueKey","filter","isNumeric","emptyValue","setData","changeValue"],Nc=Object(c.forwardRef)((function(e,t){var n=e.name,c=e.className,r=e.invalid,a=e.options,i=e.selectValue,s=e.valueKey,d=e.filter,o=e.isNumeric,l=void 0===o||o,u=e.emptyValue,j=void 0===u||u,b=e.setData,O=e.changeValue,h=Object(se.a)(e,Cc);return Object(m.jsx)("div",{className:c,children:Object(m.jsxs)(gc.a,Object(_e.a)(Object(_e.a)({},h),{},{bg:"gray.200",boxShadow:"sm",defaultValue:"".concat(i),isRequired:!0,name:n,isInvalid:r,onChange:function(e){d&&!d.test(e.target.value)||(Object(yc.a)(O)&&O(l?Number(e.target.value):e.target.value,e),b&&b(l?Number(e.target.value):e.target.value))},ref:t,children:[j&&Object(m.jsx)("option",{value:"",children:"Selectionner"}),a.map((function(e){return Object(m.jsx)("option",{defaultChecked:"".concat(i),value:"".concat(s?e.id:e),children:s?e[s]:e})}))]}))})})),Ec=n(644),Sc=["icon","className","filter","setData","placeholder","changeValue","invalid"],Pc=Object(c.forwardRef)((function(e,t){e.icon;var n=e.className,c=e.filter,r=e.setData,a=e.placeholder,i=e.changeValue,s=e.invalid,d=Object(se.a)(e,Sc);return Object(m.jsx)("div",{className:n,children:Object(m.jsx)(Ec.a,Object(_e.a)(Object(_e.a)({bg:"gray.200",boxShadow:"sm",isInvalid:s,placeholder:a},d),{},{onChange:function(e){c&&!c.test(e.target.value)||(Object(yc.a)(i)&&i(e.target.value,e),r&&r(e.target.value))},ref:t}))})})),qc=n(130),Ac=n(647),wc=n(111),Dc=n(28),Fc=n(667),Rc=n(645),Tc=n(646),Vc=n(13),_c=n(313),Ic=n.n(_c),Bc=(n(411),["icon","className","filter","setData","tags","options","changeValue","invalid"]),Mc=Object(c.forwardRef)((function(e,t){var n=e.icon,r=e.className,a=(e.filter,e.setData),i=e.tags,s=e.options,d=e.changeValue,o=(e.invalid,Object(se.a)(e,Bc),Object(c.useState)(!1)),l=Object(O.a)(o,2),u=l[0],j=l[1],b=Object(c.useState)(i||[]),h=Object(O.a)(b,2),x=h[0],v=h[1],p=Object(c.useCallback)((function(e){v(x.filter((function(t,n){return n!==e}))),j(!0)}),[x]);Object(c.useLayoutEffect)((function(){u&&d(x),a&&a(x),j(!1)}),[u]);var f=Object(c.useCallback)((function(e){v([].concat(Object(Vc.a)(x),[e])),j(!0)}),[x]);return Object(m.jsxs)("div",{className:r,children:[n&&Object(m.jsx)("i",{className:"fa fa-".concat(n)}),Object(m.jsx)(Ic.a,{as:bc.a,ref:t,tags:x,suggestions:s,onDelete:p,onAddition:f})]})})),kc=["icon","className","filter","setData","name","placeholder","changeValue","invalid"],Lc=Object(c.forwardRef)((function(e,t){var n=e.icon,c=e.className,a=e.filter,i=(e.setData,e.name),s=e.placeholder,d=e.changeValue,o=e.invalid,l=(Object(se.a)(e,kc),r.a.useCallback((function(e){a&&!a.test(e.target.value)||Object(Wt.isFunction)(d)&&d(e.target.value,e)}),[i]));return Object(m.jsxs)("div",{className:c,children:[n&&Object(m.jsx)("i",{className:"fa fa-".concat(n)}),Object(m.jsx)(bc.a,{bg:"gray.100",type:"date",boxShadow:"sm",isInvalid:o,color:"gray.700",placeholder:s,ref:t,onBlur:l})]})})),Hc=["name","className","invalid","isFieldArray","options","selectValue","valueKey","filter","setData","objectKey","index","inArray","changeValue","model","debug","array"],Qc=Object(c.forwardRef)((function(e,t){var n=e.name,r=e.className,a=e.invalid,i=e.isFieldArray,s=void 0===i||i,d=e.options,o=e.selectValue,l=e.valueKey,u=e.filter,j=e.setData,b=(e.objectKey,e.index,e.inArray,e.changeValue),h=(e.model,e.debug,e.array,Object(se.a)(e,Hc)),x=Object(c.useState)(o),v=Object(O.a)(x,2),p=(v[0],v[1]);return Object(m.jsx)("div",{className:r,children:Object(m.jsxs)(gc.a,Object(_e.a)(Object(_e.a)({},h),{},{bg:"gray.200",boxShadow:"sm",defaultValue:"".concat(o),isRequired:!0,name:n,isInvalid:a,onChange:function(e){u&&!u.test(e.target.value)||(Object(yc.a)(b)&&s&&b(Number(e.target.value,e)),j&&j(Number(e.target.value)),p(Number(e.target.value)))},ref:t,children:[Object(m.jsx)("option",{value:"",children:"Selectionner"}),d.map((function(e){return Object(m.jsx)("option",{defaultChecked:"".concat(o),value:"".concat(e.id),children:l?e[l]:e})}))]}))})})),Uc=n(328),Yc=["name","className","options","radioValue","valueKey","direction","inArray","filter","setData","changeValue","setRadio","masterKey","filtrable","callback"],Kc=Object(c.forwardRef)((function(e,t){var n=e.name,a=e.className,i=e.options,s=e.radioValue,d=e.valueKey,o=e.direction,l=(e.inArray,e.filter,e.setData,e.changeValue),u=e.setRadio,j=e.masterKey,b=e.filtrable,h=e.callback,x=void 0===h?null:h,v=Object(se.a)(e,Yc),p=Object(c.useState)(s),f=Object(O.a)(p,2),g=f[0],y=(f[1],r.a.useState("".concat(g))),C=Object(O.a)(y,2),N=C[0],E=C[1],S=Object(z.c)();return r.a.useEffect((function(){l(j?i.find((function(e){return e[j].id==N})):i.find((function(e){return e.id==N})))}),[N]),r.a.useLayoutEffect((function(){u&&u(g)}),[g]),Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(hc.a,{onChange:E,name:n,defaultValue:"".concat(g),className:a,children:Object(m.jsx)(xc.b,{spacing:4,direction:o,children:i.map((function(e){return Object(m.jsx)(m.Fragment,{children:j?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(vc.a,Object(_e.a)(Object(_e.a)({},v),{},{value:"".concat(e[j].id),ref:t,children:e[j][d]})),1==b&&Object(m.jsx)(Uc.a,{variant:"solid",onClick:function(){return S(x(e[j].id))},colorScheme:"yellow",size:"xs",children:"Annuler"})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(vc.a,Object(_e.a)(Object(_e.a)({},v),{},{value:"".concat(e.id),ref:t,children:e[d]})),1==b&&Object(m.jsx)(Uc.a,{variant:"solid",onClick:function(){return S(x(e.id))},colorScheme:"yellow",size:"xs",children:"Annuler"})]})})}))})})})})),zc=n(312),Gc=n(311),Wc=["name","className","options","radioValue","valueKey","direction","inArray","filter","setData","changeValue","setRadio","filtrable"];function Jc(e){var t=Object(zc.a)(e),n=t.getInputProps,c=t.getCheckboxProps,r=n(),a=c();return Object(m.jsxs)(Rc.a,{as:"label",children:[Object(m.jsx)("input",Object(_e.a)({},r)),Object(m.jsx)(Rc.a,Object(_e.a)(Object(_e.a)({},a),{},{cursor:"pointer",borderWidth:"1px",borderRadius:"md",boxShadow:"md",_checked:{bg:"teal.600",color:"white",borderColor:"teal.600"},_focus:{boxShadow:"outline"},px:5,py:3,children:e.children}))]})}var Xc=Object(c.forwardRef)((function(e,t){var n=e.name,a=(e.className,e.options),i=e.radioValue,s=(e.valueKey,e.direction,e.inArray,e.filter,e.setData),d=e.changeValue,o=e.setRadio,l=(e.filtrable,Object(se.a)(e,Wc),Object(c.useState)(i)),u=Object(O.a)(l,2),j=u[0],b=u[1],h=r.a.useState("".concat(j)),x=Object(O.a)(h,2),v=x[0];x[1];r.a.useEffect((function(){d(a.find((function(e){return e.id==v}))),s&&(s(v),b(v))}),[v]),r.a.useLayoutEffect((function(){o&&o(j)}),[j]);var p=Object(Gc.a)({name:n,defaultValue:1,onChange:function(e){console.log("hiii",e)}}),f=p.getRootProps,g=p.getRadioProps,y=f();return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(xc.a,Object(_e.a)(Object(_e.a)({},y),{},{children:a.map((function(e){var t=e.id,n=g({id:t});return Object(m.jsx)(Jc,Object(_e.a)(Object(_e.a)({},n),{},{children:t}),t)}))}))})})),Zc=["icon","className","filter","setData","name","value","placeholder","changeValue","invalid"],$c=Object(c.forwardRef)((function(e,t){var n=e.icon,c=e.className,a=e.filter,i=(e.setData,e.name),s=e.value,d=e.placeholder,o=e.changeValue,l=e.invalid,u=(Object(se.a)(e,Zc),r.a.useCallback((function(e){a&&!a.test(e.target.value)||Object(Wt.isFunction)(o)&&o(e.target.value,e)}),[i]));return Object(m.jsxs)("div",{className:c,children:[n&&Object(m.jsx)("i",{className:"fa fa-".concat(n)}),Object(m.jsx)(bc.a,{bg:"gray.100",boxShadow:"sm",type:"password",isInvalid:l,color:"gray.700",placeholder:d,ref:t,defaultValue:s,onBlur:u})]})})),er=n(663),tr=["icon","className","filter","setData","name","value","label","placeholder","changeValue","invalid"],nr=Object(c.forwardRef)((function(e,t){var n=e.icon,c=e.className,a=e.filter,i=(e.setData,e.name),s=e.value,d=e.label,o=(e.placeholder,e.changeValue),l=(e.invalid,Object(se.a)(e,tr),r.a.useCallback((function(e){a&&!a.test(e.target.value)||Object(Wt.isFunction)(o)&&o(e.target.value,e)}),[i]));return Object(m.jsxs)("div",{className:c,children:[n&&Object(m.jsx)("i",{className:"fa fa-".concat(n)}),Object(m.jsx)(er.a,{colorScheme:"teal",ref:t,defaultValue:s,onChange:l,name:i,defaultIsChecked:!0,children:d})]})})),cr=["icon","className","filter","setData","name","value","data","min","placeholder","changeValue","invalid"],rr=Object(c.forwardRef)((function(e,t){var n=e.icon,a=e.className,i=e.filter,s=(e.setData,e.name),d=e.value,o=e.data,l=void 0===o?0:o,u=e.min,j=void 0===u?0:u,b=(e.placeholder,e.changeValue),O=e.invalid,h=(Object(se.a)(e,cr),r.a.useCallback((function(e){i&&!i.test(e)||Object(Wt.isFunction)(b)&&b(Number(e))}),[s]));return Object(c.useEffect)((function(){l&&b(Number(l))}),[l]),Object(m.jsxs)("div",{className:a,children:[n&&Object(m.jsx)("i",{className:"fa fa-".concat(n)}),Object(m.jsx)(Ae.c,{inputMode:"numeric",bg:"gray.100",boxShadow:"sm",color:"gray.700",isInvalid:O,name:s,ref:t,step:1,onChange:h,min:j,defaultValue:d,children:Object(m.jsx)(Ae.d,{})})]})})),ar=["className","label","labelSize","labelWeight","tip","info","isBool","options","optional","error","name","half"],ir=function(e){return function(t){t.className;var n=t.label,r=t.labelSize,a=void 0===r?"13px":r,i=t.labelWeight,s=void 0===i?"400":i,d=t.tip,o=t.info,l=t.isBool,u=void 0!==l&&l,j=t.options,b=t.optional,h=t.error,x=t.name,v=t.half,p=void 0!==v&&v,f=Object(se.a)(t,ar),g=Object(c.useState)(""),y=Object(O.a)(g,2),C=y[0],N=y[1];return Object(c.useEffect)((function(){N(n)}),[n]),Object(m.jsx)(Rc.a,{style:{width:p?"50%":"100%"},children:Object(m.jsxs)(qc.a,{isInvalid:!!h,children:[Object(m.jsx)(Tc.a,{justifyContent:"flex-start",alignItems:"center",children:!u&&Object(m.jsx)(m.Fragment,{children:C&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(Ac.a,{fontSize:a,fontWeight:s,mb:1,mr:1,color:"muted.400",htmlFor:n,children:C}),d&&Object(m.jsx)(Fc.a,{placement:"bottom-end",label:d,bg:"gray.800","aria-label":"Guide d'utilisation",children:Object(m.jsx)(wc.b,{fontSize:"11px",color:"gray"})}),b&&Object(m.jsxs)(Dc.a.small,{color:"blue.700",children:["("," facultatif ",")"]})]})})}),Object(m.jsx)(e,Object(_e.a)({invalid:!!h,options:j,name:x,label:n},f)),o&&Object(m.jsx)(Dc.a.small,{my:4,color:"muted.500",fontStyle:"italic",fontWeight:"medium",children:o}),h&&Object(m.jsx)("p",{style:{color:"red"},children:h})]})})}},sr={Input:ir(mc),Number:ir(rr),Radio:ir(fc),Select:ir(Nc),Textarea:ir(Pc),Tag:ir(Mc),SelectObject:ir(Qc),RadioObject:ir(Kc),RadioProduct:ir(Xc),Date:ir(Lc),Password:ir($c),Checkbox:ir(nr)},dr=["validate","validations","children"],or=["name","validate"],lr=function(e){e.validate;var t=e.validations,n=(e.children,Object(se.a)(e,dr));return Object(m.jsx)(jc.c,Object(_e.a)(Object(_e.a)({},n),{},{enableReinitialize:!0,validationSchema:t,validateOnChange:!1,validateOnBlur:!1}))};lr.Element=function(e){return Object(m.jsx)(jc.b,Object(_e.a)({noValidate:!0},e))},lr.Field=Object(Wt.mapValues)(sr,(function(e){return function(t){var n=t.name,c=t.validate,r=Object(se.a)(t,or);return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(jc.a,{name:n,validate:c,children:function(t){var c=t.field,a=t.form,i=a.touched,s=a.errors,d=a.setFieldValue;return Object(m.jsx)(e,Object(_e.a)(Object(_e.a)(Object(_e.a)({},c),r),{},{name:n,mb:2,error:Object(Wt.get)(i,n)&&Object(Wt.get)(s,n),changeValue:function(e){return d(n,e)}}))}})})}})),lr.initialValues=function(e,t){return t((function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",c=Object(Wt.get)(e,t);return void 0===c||null===c?n:c}))};var ur=lr,jr=function(){Object(o.i)().id;var e=Object(z.d)(pn("fournisseurs").value),t=Object(z.d)(pn("categories").value),n=(Object(z.d)(pn("products").meta),Object(z.c)());Object(o.g)();return Object(c.useEffect)((function(){n(vn("fournisseurs").fetch()),n(vn("categories").fetch()),n(vn("products").fetch())}),[]),Object(m.jsxs)(rc,{children:[Object(m.jsx)(dc,{title:"Ajouter un produit",children:Object(m.jsx)(ic,{title:"Ajouter un produit"})}),Object(m.jsx)(lc,{children:Object(m.jsx)(ur,{id:"add-form-product",enableReinitialize:!0,initialValues:{},validations:{},onSubmit:function(e,t){console.log(e)},children:Object(m.jsx)(ur.Element,{children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-lg-6",children:Object(m.jsxs)("div",{className:"card",children:[Object(m.jsx)("div",{className:"card-header bg-dark text-white",children:Object(m.jsx)("h5",{children:"Information g\xe9n\xe9rale"})}),Object(m.jsxs)("div",{className:"card-body",children:[Object(m.jsx)(ur.Field.Select,{name:"categoryId",label:"Categorie",valueKey:"name",options:t}),Object(m.jsx)(ur.Field.Select,{name:"fournisseurId",label:"Fournisseur",valueKey:"name",options:e}),Object(m.jsx)(ur.Field.Input,{name:"name",label:"D\xe9signation",placeholder:"D\xe9signation"}),Object(m.jsx)(ur.Field.Radio,{radioValue:"1",valueKey:"name",label:"Type d'article",name:"type",options:[{id:"BOLUS",name:"BOLUS"},{id:"FLACON",name:"FLACON"},{id:"UNITE",name:"UNITE"},{id:"SACHET",name:"SACHET"}],direction:"row"}),Object(m.jsx)(ur.Field.Input,{name:"prixFournisseur",label:"prix unitaire",placeholder:"prix unitaire"}),Object(m.jsx)(ur.Field.Input,{name:"quantity",label:"Quantit\xe9",placeholder:"Quantit\xe9"}),Object(m.jsx)(ur.Field.Input,{type:"date",name:"datePer",label:"date de peremption",placeholder:"date de peremption"})]})]})}),Object(m.jsxs)("div",{className:"col-lg-6",children:[Object(m.jsxs)("div",{className:"card",children:[Object(m.jsx)("div",{className:"card-header bg-dark text-white",children:Object(m.jsx)("h5",{children:"Vente"})}),Object(m.jsxs)("div",{className:"card-body",children:[Object(m.jsx)(ur.Field.Input,{name:"prixVente",label:"Prix de vente",placeholder:"prix de vente"}),Object(m.jsx)(ur.Field.Input,{name:"prixVaccinateur",label:"Prix du vaccinateur",placeholder:"prix du vaccinateur"}),Object(m.jsx)(ur.Field.Input,{name:"prixParCC",label:"Prix de Vente en ml",placeholder:"Prix de Vente en ml"})]})]}),Object(m.jsx)("button",{className:"btn btn-green  btn-sm ",type:"submit",children:"Ajouter"})]})]})})})})]})},br=n(127),Or=n(33),mr=function(){var e,t,n,c,a,i,s,d,l=Object(o.i)().id,u=Object(z.c)(),j=Object(z.d)(pn("approvis").value);return r.a.useEffect((function(){u(vn("approvis").get(l))}),[l]),Object(m.jsxs)(rc,{children:[Object(m.jsx)(dc,{title:"D\xe9tail d'approv.",children:Object(m.jsx)(ic,{title:"Detail d'approv."})}),Object(m.jsx)(lc,{children:Object(m.jsx)("div",{className:"bg-white p-2",children:Object(m.jsxs)(qe.a,{children:[Object(m.jsxs)(qe.a.Header,{className:"d-flex justify-content-between align-items-center bg-dark text-white",children:["D\xe9tail du facture (",de(null===(e=j[0])||void 0===e?void 0:e.dateApprov),")"]}),Object(m.jsxs)(qe.a.Body,{children:[Object(m.jsx)("p",{children:"Arr\xeat\xe9 \xe0 la somme de "}),Object(m.jsx)("p",{className:"text-uppercase my-2",children:Object(m.jsxs)("strong",{children:[Object(br.NumberToLetter)(null===(t=j[0])||void 0===t?void 0:t.total)," ARIARY"]})}),Object(m.jsxs)("tr",{children:[Object(m.jsxs)("td",{children:[Object(m.jsx)("strong",{children:"Date Echeance"})," :"," ",de(null===(n=j[0])||void 0===n?void 0:n.dateEcheance)]})," "]}),Object(m.jsxs)("td",{className:"mb-1",children:[Object(m.jsx)("h3",{children:"Remarque"}),Object(m.jsx)("p",{class:"text-info",children:null===(c=j[0])||void 0===c?void 0:c.remarque})]}),Object(m.jsx)("br",{}),Object(m.jsxs)("h3",{children:[" ",Object(m.jsx)("strong",{children:"ARTICLES"})]}),null===(a=j[0])||void 0===a?void 0:a.contenu.map((function(e){return Object(m.jsxs)("div",{className:"border mb-3 p-3",children:[Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"Nom de l'article:"}),Object(m.jsx)("td",{children:null===e||void 0===e?void 0:e.name})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"Quantit\xe9:"}),Object(m.jsx)("td",{children:null===e||void 0===e?void 0:e.quantityParProduct})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"Prix unitaire:"}),Object(m.jsx)("td",{children:Object(m.jsx)(Or.a,{value:null===e||void 0===e?void 0:e.prixFournisseur,displayType:"text",thousandSeparator:!0,suffix:"Ar",renderText:function(e,t){return Object(m.jsx)("div",Object(_e.a)(Object(_e.a)({},t),{},{children:e}))}})})]})]})})),Object(m.jsx)("tr",{children:Object(m.jsxs)("td",{children:[Object(m.jsx)("strong",{children:"Remise :"})," ",null===(i=j[0])||void 0===i?void 0:i.remise," %"]})}),Object(m.jsx)("tr",{children:Object(m.jsxs)("td",{class:"text-uppercase",children:[Object(m.jsx)("strong",{children:"Paiement en :"}),null===(s=j[0])||void 0===s?void 0:s.typePaye]})}),Object(m.jsx)("tr",{children:Object(m.jsxs)("td",{class:"text-uppercase",children:[Object(m.jsx)("strong",{children:"Total:"}),Object(m.jsx)(Or.a,{value:null===(d=j[0])||void 0===d?void 0:d.total,displayType:"text",thousandSeparator:!0,suffix:"Ar",renderText:function(e,t){return Object(m.jsx)("div",Object(_e.a)(Object(_e.a)({},t),{},{children:e}))}})]})})," "]})]})})})]})},hr=n(118);function xr(e){var t=e.column,n=t.filterValue,c=t.preFilteredRows,r=t.setFilter;c.length;return Object(m.jsx)("input",{className:"form-control",value:n||"",onChange:function(e){r(e.target.value||void 0)},placeholder:"Rechercher..."})}function vr(e){var t=e.preGlobalFilteredRows,n=e.globalFilter,c=e.setGlobalFilter,a=(t.length,r.a.useState(n)),i=Object(O.a)(a,2),s=i[0],d=i[1],o=Object(hr.useAsyncDebounce)((function(e){c(e||void 0)}),200);return Object(m.jsx)("div",{w:200,children:Object(m.jsx)("input",{className:"form-control",value:s||"",onChange:function(e){d(e.target.value),o(e.target.value)},placeholder:"Rechercher ..."})})}function pr(e){var t=e.columns,n=e.data,c=e.meta,a=e.addUrl,i=e.urlName,s=e.footer,o=e.tip,l=void 0===o?"":o,u=e.filter,j=void 0===u||u,b=e.paginate,O=void 0===b||b,h=e.guide,x=t.length,v=r.a.useMemo((function(){return{Filter:xr}}),[]),p=Object(hr.useTable)({columns:t,data:n,defaultColumn:v,initialState:{pageIndex:0,pageSize:10}},hr.useFilters,hr.useGlobalFilter,hr.useSortBy,hr.usePagination),f=p.getTableProps,g=p.getTableBodyProps,y=p.headerGroups,C=(p.rows,p.prepareRow),N=p.preGlobalFilteredRows,E=p.setGlobalFilter,S=p.page,P=p.canPreviousPage,q=p.canNextPage,A=p.pageOptions,w=(p.pageCount,p.gotoPage),D=p.nextPage,F=p.previousPage,R=p.setPageSize,T=p.state,V=T.pageIndex,_=T.pageSize,I=T.globalFilter;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"d-flex my-2 justify-content-between align-items-center",children:[j&&Object(m.jsx)(vr,{preGlobalFilteredRows:N,globalFilter:I,setGlobalFilter:E}),Object(m.jsx)("div",{children:a&&i&&Object(m.jsx)(d.b,{className:"btn btn-sm btn-green",variant:"solid",to:a,children:i})})]}),l&&Object(m.jsx)("h3",{children:l}),Object(m.jsxs)("table",Object(_e.a)(Object(_e.a)({},f()),{},{className:"table table-bordered striped",children:[Object(m.jsx)("thead",{className:"bg-thead ",children:y.map((function(e){return Object(m.jsx)("tr",Object(_e.a)(Object(_e.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(m.jsxs)("th",Object(_e.a)(Object(_e.a)({},e.getHeaderProps(e.getSortByToggleProps())),{},{isNumeric:e.isNumeric,children:[e.render("Header"),Object(m.jsx)("span",{children:e.isSorted?e.isSortedDesc?" \ud83d\udd3d":" \ud83d\udd3c":""})]}))}))}))}))}),Object(m.jsx)("tbody",Object(_e.a)(Object(_e.a)({},g()),{},{children:c.isFetching?Object(m.jsx)("td",{colSpan:x,className:"text-center",children:Object(m.jsx)("p",{children:"Chargement des donn\xe9es en cours ...."})}):Object(m.jsxs)(m.Fragment,{children:[0==S.length&&Object(m.jsx)("tr",{children:Object(m.jsx)("td",{colSpan:x,style:h?{textAlign:"left"}:{textAlign:"center"},children:h?Object(m.jsxs)("div",{style:{width:"100%",color:"blue.700",backgroundColor:"gray.200",padding:"10px"},children:[Object(m.jsx)("h3",{className:"py-3",children:l}),h]}):"Aucune enregistrement \xe0 afficher"})}),S.map((function(e){return C(e),Object(m.jsx)("tr",Object(_e.a)(Object(_e.a)({p:0},e.getRowProps()),{},{children:e.cells.map((function(e){return Object(m.jsx)("td",Object(_e.a)(Object(_e.a)({fontSize:"11px"},e.getCellProps()),{},{isNumeric:e.column.isNumeric,children:e.render("Cell")}))}))}))}))]})})),s&&Object(m.jsx)("tfoot",{bg:"blue.900",children:Object(m.jsx)("tr",{children:Object(m.jsx)("td",{colSpan:x,color:"white",children:s})})})]})),O&&Object(m.jsxs)("div",{className:"d-flex  justify-content-between align-items-center py-3",children:[Object(m.jsx)("div",{style:{width:"200px"},children:Object(m.jsxs)("div",{className:"d-flex justify-content-center align-items-center",children:[Object(m.jsx)("input",{className:"form-control  mr-2",type:"number",placeholder:"Page",value:V+1,onChange:function(e){var t=e.target.value?Number(e.target.value)-1:0;w(t)}}),Object(m.jsx)("select",{className:"form-control",value:_,onChange:function(e){R(Number(e.target.value))},size:"sm",children:[5,10,20,30,40,50,100,150,250].map((function(e){return Object(m.jsx)("option",{value:e,children:e},e)}))})]})}),Object(m.jsx)("div",{children:Object(m.jsxs)(m.Fragment,{children:["Page"," ",Object(m.jsxs)("strong",{children:[V>0?V+1:1," sur ",A.length]})," "]})}),Object(m.jsx)("div",{className:"mb-6",children:Object(m.jsxs)("div",{children:[Object(m.jsxs)("button",{className:"mr-2 btn btn-sm btn-green",onClick:function(){return F()},disabled:!P,children:["<<"," Pr\xe9cedent"]}),Object(m.jsxs)("button",{className:"mr-2 btn btn-sm btn-green",onClick:function(){return D()},disabled:!q,children:["Suivant ",">>"]})]})})]})]})}var fr=n(128),gr=n.n(fr);var yr=function(e){var t=e.model,n=e.entity,c=Object(z.c)();return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(e){e.preventDefault(),window.confirm("Vous voulez vraiment supprimer ce facture ?")&&c(vn(t).deleteTransaction(n,"/delete-facture"))},children:"Supprimer"})})};function Cr(){var e=Hn()().isoWeekday(1).startOf("week"),t=Hn()().endOf("week"),n=Object(c.useState)(e),a=Object(O.a)(n,2),i=a[0],s=a[1],o=Object(c.useState)(t),l=Object(O.a)(o,2),u=l[0],j=l[1],b=Object(c.useState)([e,t]),h=Object(O.a)(b,2),x=h[0],v=h[1],p=(Object(c.useRef)(null),Object(c.useRef)(null),Object(z.d)(pn("approvis").value)),f=Object(z.d)(pn("approvis").meta),g=Object(z.c)();Object(c.useEffect)((function(){g(vn("approvis").fetch())}),[]),Object(c.useEffect)((function(){null!==x?(x[0]&&s(x[0]),x[1]&&j(x[1])):(s(e),j(t))}),[x]),Object(c.useEffect)((function(){g(function(e,t){return on("approvis",{path:"/get-approv-by-date?deb=".concat(e,"&fin=").concat(t),replace:!0})}(i,u))}),[i,u]);var y=r.a.useMemo((function(){return[{Header:"#",accessor:"id"},{Header:"Produit",Cell:function(e){return Object(m.jsx)("div",{style:{width:"200px"},children:e.row.original.contenu.map((function(e){return Object(m.jsxs)("span",{children:[e.name,","]})}))})}},{Header:"Date du facture",Cell:function(e){var t;return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("span",{className:"badge badge-primary",children:de(null===(t=e.row.original)||void 0===t?void 0:t.dateApprov)})})}},{Header:"Date echeance",Cell:function(e){var t;return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("span",{className:"badge badge-warning",children:de(null===(t=e.row.original)||void 0===t?void 0:t.dateEcheance)})})}},{Header:"Mode de paiement",accessor:"typePaye"},{Header:"Total",Cell:function(e){var t;return Object(m.jsx)("div",{children:oe(null===(t=e.row.original)||void 0===t?void 0:t.total)})}},{Header:"Actions",Cell:function(e){var t,n;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(d.b,{to:"/approvis/detail/".concat(null===(t=e.row.original)||void 0===t?void 0:t.id),className:"btn btn-green btn-sm mr-2",children:"D\xe9tails"}),Object(m.jsx)(d.b,{to:"/editer/facture/".concat(null===(n=e.row.original)||void 0===n?void 0:n.id),className:"btn btn-warning btn-sm mr-2",children:"Editer"}),Object(m.jsx)(yr,{model:"approvis",entity:e.row.original})]})}}]}),[]);return Object(m.jsxs)(rc,{children:[Object(m.jsx)(dc,{title:"Factures",children:Object(m.jsx)(ic,{title:"Factures"})}),Object(m.jsxs)(lc,{children:[Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-lg-6",children:Object(m.jsxs)("div",{children:[Object(m.jsx)("h3",{className:"text-uppercase",children:"Factures"}),Object(m.jsx)("p",{children:"".concat(de(i)," ->  ").concat(de(u))})]})}),Object(m.jsx)("div",{className:"col-lg-6 text-right",children:Object(m.jsx)(gr.a,{locale:"fr-FR",onChange:v,value:x})})," "]}),Object(m.jsx)(pr,{filter:!1,data:p.sort((function(e,t){return t.id-e.id})),meta:f,columns:y,addUrl:T,urlName:"Ajouter un facture"})]})]})}var Nr=function(){return Object(m.jsxs)(rc,{children:[Object(m.jsx)(dc,{title:"Sortie",children:Object(m.jsx)(ic,{title:"Sortie"})}),Object(m.jsx)(lc,{})]})},Er="SET_BASKET_ITEMS",Sr="ADD_TO_BASKET",Pr="REMOVE_FROM_BASKET",qr="CLEAR_BASKET",Ar="ADD_QTY_ITEM",wr="MINUS_QTY_ITEM",Dr="ADD_QTY_PORTION_ITEM",Fr="MINUS_QTY_PORTION_ITEM",Rr="SET_CHECKOUT_SHIPPING_DETAILS",Tr="SET_CHECKOUT_PAYMENT_DETAILS",Vr="RESET_CHECKOUT";var _r=n(52),Ir=n.n(_r);var Br=function(e){var t=e.model,n=e.entity,c=Object(z.c)(),r=Object(o.g)();return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(e){e.preventDefault(),window.confirm("Vous voulez vraiment supprimer ce commande ?")&&(c(vn(t).deleteTransaction(n,"/delete-from-depot")),r.push(R))},children:"Supprimer"})})};var Mr=function(e){var t=Hn()().isoWeekday(1).startOf("week"),n=Hn()().endOf("week"),a=Object(c.useState)(t),i=Object(O.a)(a,2),s=i[0],o=i[1],l=Object(c.useState)(n),u=Object(O.a)(l,2),j=u[0],b=u[1],h=Object(c.useState)([t,n]),x=Object(O.a)(h,2),v=x[0],p=x[1],f=Object(z.d)(pn("commandes").value),g=Object(z.d)(pn("commandes").meta),y=Object(z.c)();Object(c.useEffect)((function(){null!==v?(v[0]&&o(v[0]),v[1]&&b(v[1])):(o(t),b(n))}),[v]);var C=function(e){if(!e||0===(null===e||void 0===e?void 0:e.length))return 0;var t=0;return e.forEach((function(e){t+=e.prixVente*e.quantityParProductDepot})),t},N=function(e){if(!e||0===(null===e||void 0===e?void 0:e.length))return 0;var t=0;return e.forEach((function(e){t+=1*e.quantityParProductDepot})),t};Object(c.useEffect)((function(){y(function(e,t){return on("commandes",{path:"/credit?deb=".concat(e,"&fin=").concat(t),replace:!0})}(s,j))}),[s,j]);var E=r.a.useMemo((function(){return[{Header:"Date de credit",Cell:function(e){var t;return Object(m.jsx)(m.Fragment,{children:de(null===(t=e.row.original)||void 0===t?void 0:t.dateCom)})}},{Header:"Produits",width:50,Cell:function(e){var t,n;return Object(m.jsx)("div",{style:{width:"100px"},children:null===(t=e.row.original)||void 0===t||null===(n=t.contenu)||void 0===n?void 0:n.map((function(e){return Object(m.jsxs)("span",{children:[e.name,","]})}))})}},{Header:"Status",Cell:function(e){var t;return Object(m.jsx)("div",{children:1==(null===(t=e.row.original)||void 0===t?void 0:t.status)?Object(m.jsx)("h3",{className:"badge badge-success",children:"pay\xe9"}):Object(m.jsx)("h3",{className:"badge badge-danger",children:"non pay\xe9"})})}},{Header:"Nom de la personne",accessor:"emprunter.name"},{Header:"Contact",accessor:"emprunter.contact"},{Header:"Quantit\xe9",Cell:function(e){var t;return Object(m.jsx)("div",{children:N(null===(t=e.row.original)||void 0===t?void 0:t.contenu)})}},{Header:"Total",Cell:function(e){var t;return Object(m.jsx)("div",{children:oe(C(null===(t=e.row.original)||void 0===t?void 0:t.contenu))})}},{Header:"Actions",Cell:function(e){var t,n;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(d.b,{to:"/detail/".concat(null===(t=e.row.original)||void 0===t?void 0:t.id),className:"btn btn-green btn-sm mr-2",children:"D\xe9tails"}),Object(m.jsx)(d.b,{to:"/editer/commande/".concat(null===(n=e.row.original)||void 0===n?void 0:n.id),className:"btn btn-warning btn-sm mr-2",children:"Editer"}),Object(m.jsx)(Br,{model:"fromdepots",entity:e.row.original})]})}}]}),[]);return Object(m.jsxs)(rc,{children:[Object(m.jsx)(dc,{title:"Cr\xe9dit",children:Object(m.jsx)(ic,{title:"Cr\xe9dit"})}),Object(m.jsxs)(lc,{children:[Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-lg-6",children:Object(m.jsxs)("div",{children:[Object(m.jsx)("h3",{className:"text-uppercase",children:"Credit"}),Object(m.jsx)("p",{children:"".concat(de(s)," ->  ").concat(de(j))})]})}),Object(m.jsx)("div",{className:"col-lg-6 text-right",children:Object(m.jsx)(Ir.a,{locale:"fr-FR",onChange:p,value:v})})," "]}),Object(m.jsx)(pr,{data:f.sort((function(e,t){return t.id-e.id})),meta:g,columns:E})]})]})};var kr=function(e){var t=Hn()().isoWeekday(1).startOf("week"),n=Hn()().endOf("week"),a=Object(c.useState)(t),i=Object(O.a)(a,2),s=i[0],o=i[1],l=Object(c.useState)(n),u=Object(O.a)(l,2),j=u[0],b=u[1],h=Object(c.useState)([t,n]),x=Object(O.a)(h,2),v=x[0],p=x[1],f=Object(z.d)(pn("commandes").value),g=Object(z.d)(pn("commandes").meta),y=Object(z.c)();Object(c.useEffect)((function(){null!==v?(v[0]&&o(v[0]),v[1]&&b(v[1])):(o(t),b(n))}),[v]);var C=function(e){if(!e||0===(null===e||void 0===e?void 0:e.length))return 0;var t=0;return e.forEach((function(e){t+=e.prixVente*e.quantityParProductDepot})),t},N=function(e){if(!e||0===(null===e||void 0===e?void 0:e.length))return 0;var t=0;return e.forEach((function(e){t+=1*e.quantityParProductDepot})),t};Object(c.useEffect)((function(){y(on("commandes",{path:"/credit-vaccinateur",replace:!0}))}),[s,j]);var E=r.a.useMemo((function(){return[{Header:"Date du credit",Cell:function(e){var t;return Object(m.jsx)(m.Fragment,{children:de(null===(t=e.row.original)||void 0===t?void 0:t.dateCom)})}},{Header:"Produits",Cell:function(e){var t,n;return Object(m.jsx)("div",{style:{width:"100px"},children:null===(t=e.row.original)||void 0===t||null===(n=t.contenu)||void 0===n?void 0:n.map((function(e){return Object(m.jsxs)("span",{children:[e.name,","]})}))})}},{Header:"Status",Cell:function(e){var t;return Object(m.jsx)("div",{children:1==(null===(t=e.row.original)||void 0===t?void 0:t.status)?Object(m.jsx)("h3",{className:"badge badge-success",children:"pay\xe9"}):Object(m.jsx)("h3",{className:"badge badge-danger",children:"non pay\xe9"})})}},{Header:"Nom du vaccinateur",accessor:"vaccinateur.name"},{Header:"Contact du vaccinateur",accessor:"vaccinateur.contact"},{Header:"Quantit\xe9",Cell:function(e){var t;return Object(m.jsx)("div",{children:N(null===(t=e.row.original)||void 0===t?void 0:t.contenu)})}},{Header:"Total",Cell:function(e){var t;return Object(m.jsx)("div",{children:oe(C(null===(t=e.row.original)||void 0===t?void 0:t.contenu))})}},{Header:"Actions",Cell:function(e){var t,n;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(d.b,{to:"/detail/".concat(null===(t=e.row.original)||void 0===t?void 0:t.id),className:"btn btn-green btn-sm mr-2",children:"D\xe9tails"}),Object(m.jsx)(d.b,{to:"/editer/commande/".concat(null===(n=e.row.original)||void 0===n?void 0:n.id),className:"btn btn-warning btn-sm mr-2",children:"Editer"}),Object(m.jsx)(Br,{model:"fromdepots",entity:e.row.original})]})}}]}),[]);return Object(m.jsxs)(rc,{children:[Object(m.jsx)(dc,{title:"Cr\xe9dit  pour les vaccinateurs",children:Object(m.jsx)(ic,{title:"Cr\xe9dit  pour les vaccinateurs"})}),Object(m.jsxs)(lc,{children:[Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-lg-6",children:Object(m.jsxs)("div",{children:[Object(m.jsx)("h3",{className:"text-uppercase",children:"Credit pour les vaccinateurs"}),Object(m.jsx)("p",{children:"".concat(de(s)," ->  ").concat(de(j))})]})}),Object(m.jsx)("div",{className:"col-lg-6 text-right",children:Object(m.jsx)(Ir.a,{locale:"fr-FR",onChange:p,value:v})})," "]}),Object(m.jsx)(pr,{data:f.sort((function(e,t){return t.id-e.id})),meta:g,columns:E})]})]})},Lr=function(e){if(!e||0===(null===e||void 0===e?void 0:e.length))return 0;var t=0;return e.forEach((function(e){t+=e.prixVente*e.quantityParProductDepot*1})),t};var Hr=Object(o.j)((function(e){var t,n,r,a,i,s,d,l,u,j,b,O,h,x=Object(o.g)(),v=Object(o.i)().id,p=Object(z.d)(pn("commandes").value),f=Object(z.c)();return Object(c.useEffect)((function(){f(vn("commandes").get(v))}),[v]),Object(m.jsxs)(rc,{children:[Object(m.jsx)(dc,{title:"D\xe9tail de sortie ou entr\xe9e",children:Object(m.jsx)(ic,{title:"D\xe9tail de sortie ou entr\xe9e"})}),Object(m.jsxs)(lc,{children:[Object(m.jsxs)("div",{className:"badge badge-info my-2",children:["vente-depot-credit"==(null===(t=p[0])||void 0===t?void 0:t.type)&&Object(m.jsx)("h3",{children:"Credit"}),"vente-depot-vaccinateur"==(null===(n=p[0])||void 0===n?void 0:n.type)&&Object(m.jsx)("h3",{children:"Credit pour vaccinateur"}),"direct"==(null===(r=p[0])||void 0===r?void 0:r.type)&&Object(m.jsx)("h3",{children:"Direct"})]}),"vente-depot-vaccinateur"==(null===(a=p[0])||void 0===a?void 0:a.type)&&Object(m.jsx)("div",{className:"border pl-3 py-3 bg-white",children:Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("h3",{className:"my-2",children:[" ","Nom du vaccinateur : ",null===(i=p[0])||void 0===i?void 0:i.vaccinateur.name]}),Object(m.jsxs)("h5",{children:["Contact : ",null===(s=p[0])||void 0===s?void 0:s.vaccinateur.contact]})]})}),"vente-depot-credit"==(null===(d=p[0])||void 0===d?void 0:d.type)&&Object(m.jsx)("div",{className:"border pl-3 py-3 bg-white",children:Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("h3",{className:"my-2",children:["Nom:",null===(l=p[0])||void 0===l?void 0:l.emprunter.name]}),Object(m.jsxs)("h5",{children:["Contact: ",null===(u=p[0])||void 0===u?void 0:u.emprunter.contact]})]})}),p.length>0&&Object(m.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(m.jsxs)("p",{className:"text-uppercase",children:["Commande du : ",de(null===(j=p[0])||void 0===j?void 0:j.dateCom)]}),1==(null===(b=p[0])||void 0===b?void 0:b.status)?Object(m.jsx)("p",{className:"btn btn-sm btn-green my-2 mt-4",children:"pay\xe9"}):Object(m.jsx)("button",{className:"btn btn-sm btn-warning my-3",onClick:function(){var e;f(function(e){return on("commandes",{path:"/set-payer-commande?cId=".concat(e),replace:!0})}(null===(e=p[0])||void 0===e?void 0:e.id)),x.goBack()},children:"Marquer comme pay\xe9"})]}),Object(m.jsxs)("table",{className:"table table-bordered ",children:[Object(m.jsxs)("tr",{className:"bg-thead",children:[Object(m.jsx)("td",{children:"Nom de l'article"}),Object(m.jsx)("td",{children:"Quantit\xe9"}),Object(m.jsx)("td",{children:"Sous total"})]}),p.length>0&&(null===(O=p[0])||void 0===O?void 0:O.contenu.map((function(e){return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{style:{width:"40%"},children:e.name}),Object(m.jsxs)("td",{className:"d-flex align-items-center",children:[oe(e.prixVente),"(","x"," ",e.quantityParProductDepot,")"]}),Object(m.jsx)("td",{children:oe(e.prixVente*e.quantityParProductDepot)})]})})))]}),Object(m.jsxs)("div",{className:"d-flex justify-content-end",children:[Object(m.jsx)("strong",{children:"Total"}),":",oe(Lr(null===(h=p[0])||void 0===h?void 0:h.contenu))]})]})]})})),Qr=function(e){if(!e||0===(null===e||void 0===e?void 0:e.length))return 0;var t=0;return e.forEach((function(e){t+=e.prixVente*e.quantityParProductDepot*1})),t};var Ur=Object(o.j)((function(e){Object(o.h)();var t,n,r,a,i,s,d,l,u,j,b,O,h=Object(o.i)().id,x=Object(z.d)(pn("commandes").value),v=Object(z.c)();return Object(c.useEffect)((function(){v(vn("commandes").get(h))}),[h]),Object(m.jsxs)(rc,{children:[Object(m.jsx)(dc,{title:"D\xe9tail de sortie ou entr\xe9e",children:Object(m.jsx)(ic,{title:"D\xe9tail de sortie ou entr\xe9e"})}),Object(m.jsxs)(lc,{children:[Object(m.jsxs)("p",{children:["credit"==(null===(t=x[0])||void 0===t?void 0:t.type)&&Object(m.jsx)("p",{children:"Credit"}),"vaccinateur"==(null===(n=x[0])||void 0===n?void 0:n.type)&&Object(m.jsx)("p",{children:"Sortie vaccinateur"}),"direct"==(null===(r=x[0])||void 0===r?void 0:r.type)&&Object(m.jsx)("p",{children:"Sortie Magasion"})]}),"vaccinateur"==(null===(a=x[0])||void 0===a?void 0:a.type)&&Object(m.jsx)("div",{className:"border",children:Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h3",{children:null===(i=x[0])||void 0===i?void 0:i.vaccinateur.name}),Object(m.jsx)("h5",{children:null===(s=x[0])||void 0===s?void 0:s.vaccinateur.contact})]})}),"credit"==(null===(d=x[0])||void 0===d?void 0:d.type)&&Object(m.jsx)("div",{className:"border",children:Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h3",{children:null===(l=x[0])||void 0===l?void 0:l.emprunter.name}),Object(m.jsx)("h5",{children:null===(u=x[0])||void 0===u?void 0:u.emprunter.contact})]})}),x.length>0&&Object(m.jsx)("div",{className:"d-flex justify-content-between",children:Object(m.jsxs)("p",{className:"text-uppercase",children:["Commande du : ",de(null===(j=x[0])||void 0===j?void 0:j.dateCom)]})}),Object(m.jsxs)("table",{className:"table table-bordered ",children:[Object(m.jsxs)("tr",{className:"bg-thead",children:[Object(m.jsx)("td",{children:"Nom de l'article"}),Object(m.jsx)("td",{children:"Quantit\xe9"}),Object(m.jsx)("td",{children:"Sous total"})]}),x.length>0&&(null===(b=x[0])||void 0===b?void 0:b.contenu.map((function(e){return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{style:{width:"40%"},children:e.name}),Object(m.jsxs)("td",{className:"d-flex align-items-center",children:[oe(e.prixVente),"(","x"," ",e.quantityParProductDepot,")"]}),Object(m.jsx)("td",{children:oe(e.prixVente*e.quantityParProductDepot)})]})})))]}),Object(m.jsxs)("div",{className:"d-flex justify-content-end",children:[Object(m.jsx)("strong",{children:"Total"}),":",oe(Qr(null===(O=x[0])||void 0===O?void 0:O.contenu))]})]})]})}));var Yr=function(e){var t=Object(z.d)(pn("commandes").value),n=Object(z.c)();Object(c.useEffect)((function(){n(on("commandes",{path:"/direct",replace:!0}))}),[]);var r=function(e){if(!e||0===(null===e||void 0===e?void 0:e.length))return 0;var t=0;return e.forEach((function(e){t+=e.prixVente})),t.toFixed(2)};return Object(m.jsxs)(rc,{children:[Object(m.jsx)(dc,{title:"Sortie pour le magasin",children:Object(m.jsx)(ic,{title:"Sortie pour le magasin"})}),Object(m.jsx)(lc,{children:Object(m.jsxs)("table",{className:"table table-bordered table-striped",children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"Date de commande"}),Object(m.jsx)("th",{children:"Nb"}),Object(m.jsx)("th",{children:"Montant"}),Object(m.jsx)("th",{children:"Actions"})]})}),Object(m.jsx)("tbody",{children:t.map((function(e){var t;return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:null===e||void 0===e?void 0:e.createdAt}),Object(m.jsx)("td",{children:null===e||void 0===e||null===(t=e.contenu)||void 0===t?void 0:t.length}),Object(m.jsx)("td",{children:r(null===e||void 0===e?void 0:e.contenu)}),Object(m.jsx)("td",{className:"d-flex justify-content-around",children:Object(m.jsx)(d.b,{className:"btn btn-sm  btn-green",to:"detail/".concat(e.id),children:"Detail"})})]})}))})]})})]})},Kr=function(){var e=Object(c.useState)(new Date),t=Object(O.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(new Date),i=Object(O.a)(a,2),s=i[0],o=i[1],l=Object(c.useRef)(null),u=Object(c.useRef)(null),j=Object(z.d)(pn("commandes").value),b=Object(z.c)();Object(c.useEffect)((function(){b(function(e,t){return on("commandes",{path:"/journal?deb=".concat(e,"&fin=").concat(t),replace:!0})}(n,s))}),[n,s]);var h=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0},x=function(e){return h(e.map((function(e){return e.prixVente*e.quantityParProduct})))+h(e.map((function(e){return e.prixParCC*e.qttByCC})))};return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(rc,{children:[Object(m.jsx)(dc,{title:"Journal de sortie",children:Object(m.jsx)(ic,{title:"Journal de sortie"})}),Object(m.jsxs)(lc,{children:[Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-lg-8"}),Object(m.jsxs)("div",{className:"col-lg-4",children:[Object(m.jsxs)("div",{className:"d-flex align-items-center mb-3",children:[Object(m.jsx)("input",{type:"date",name:"datedeb",ref:l,placeholder:"date debut",className:"form-control mr-2"}),Object(m.jsx)("input",{type:"date",name:"datefin",ref:u,placeholder:"date fin",className:"form-control mr-2"}),Object(m.jsx)("button",{className:"btn btn-primary",onClick:function(){""==l.current.value?r(new Date):r(l.current.value),""==u.current.value?o(new Date):o(u.current.value)},children:"Filtrer"})]})," "]})," "]}),Object(m.jsx)("div",{className:"table-responsive",children:Object(m.jsxs)("table",{className:"table",children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"Date "}),Object(m.jsx)("th",{children:"Type de sortie"}),Object(m.jsx)("th",{children:"Montant Total"}),Object(m.jsx)("th",{children:"Actions"})]})}),Object(m.jsx)("tbody",{children:j.map((function(e){return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:de(null===e||void 0===e?void 0:e.createdAt)}),Object(m.jsx)("td",{children:Object(m.jsxs)(m.Fragment,{children:["cva"==(null===e||void 0===e?void 0:e.type)&&Object(m.jsx)("div",{className:"badge badge-info",children:"Approvisionnement du magasin"}),"vente-magasin-direct"==(null===e||void 0===e?void 0:e.type)&&Object(m.jsx)("div",{className:"badge badge-success",children:"Vente direct depuis le magasin"}),"vente-magasin-credit"==(null===e||void 0===e?void 0:e.type)&&Object(m.jsx)("div",{className:"badge badge-info",children:"credit client depuis magasin"}),"credit"==(null===e||void 0===e?void 0:e.type)&&Object(m.jsx)("div",{className:"badge badge-danger",children:"Credit personne"}),"vaccinateur"==(null===e||void 0===e?void 0:e.type)&&Object(m.jsx)("div",{className:"badge badge-warning",children:"Credit Vaccinateur"}),"direct"==(null===e||void 0===e?void 0:e.type)&&Object(m.jsx)("div",{className:"badge badge-dark",children:"Vente direct depuis le dep\xf4t"})]})}),Object(m.jsx)("td",{children:oe(x(null===e||void 0===e?void 0:e.contenu))}),Object(m.jsx)("td",{children:Object(m.jsx)(d.b,{className:"btn btn-sm  btn-green",to:"/detail/".concat(e.id),children:"Afficher le detail"})})]})}))})]})}),Object(m.jsxs)("h3",{children:["Total:",oe(function(e){var t=0;return e.map((function(e){t+=x(null===e||void 0===e?void 0:e.contenu)})),t}(j))]})]})]})})};var zr=function(){var e,t,n=Object(z.d)(pn("parametres").value),r=Object(z.c)();return Object(c.useEffect)((function(){r(vn("parametres").get(1))}),[]),Object(m.jsxs)("div",{children:[Object(m.jsx)("h3",{className:"mb-2 text-bold title",children:"Parametres supplementaires"}),Object(m.jsxs)("div",{className:"card mt-2",children:[Object(m.jsx)("div",{className:"card-body",children:Object(m.jsx)(ur,{id:"parametrage-form",enableReinitialize:!0,initialValues:{nb_mois:null===(e=n[0])||void 0===e?void 0:e.nbMois,nb_produit:null===(t=n[0])||void 0===t?void 0:t.nbProduits},validations:{},onSubmit:function(e,t){r(vn("parametres").update({id:1,nb_mois:e.nb_mois,nb_produits:e.nb_produit}))},render:function(){return Object(m.jsxs)(ur.Element,{children:[Object(m.jsx)(ur.Field.Input,{name:"nb_mois",label:"Nombre de mois",placeholder:"Nombre de mois",type:"number"}),Object(m.jsx)(ur.Field.Input,{name:"nb_produit",label:"Nombre de produit",placeholder:"Nombre de produit",type:"number"}),Object(m.jsx)("button",{type:"submit",className:"btn btn-success mt-2 btn-sm",children:"Sauvegarder la modification"})]})}})})," "]})," "]})},Gr=function(){var e=Object(z.d)(pn("products").value),t=Object(z.d)(pn("products").meta),n=Object(z.c)();Object(c.useEffect)((function(){n(on("products",{path:"/perimer",replace:!0}))}),[]);var a=r.a.useMemo((function(){return[{Header:"Produit",accessor:"name"},{Header:"Quantit\xe9",accessor:"quantityBrute"},{Header:"Date de peremption",Cell:function(e){var t;return Object(m.jsx)("h3",{children:de(null===(t=e.row.original)||void 0===t?void 0:t.datePer)})}}]}),[]);return Object(m.jsxs)(rc,{children:[Object(m.jsx)(dc,{title:"Article perim\xe9",children:Object(m.jsx)(ic,{title:"Article perim\xe9"})}),Object(m.jsx)(lc,{children:Object(m.jsx)(pr,{data:e,meta:t,columns:a})})]})},Wr=n(53);function Jr(){return Wr.a().shape({name:Wr.b().required("Le champ est requis")})}var Xr=n(669);var Zr=function(e){var t=e.message;return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(Xr.a,{mb:3,status:"success",variant:"top-accent",children:"string"===typeof t&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(Xr.b,{}),t]})})})},$r=n(649),ea=n(131);var ta=function(e){var t=e.error;return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(Xr.a,{mb:3,status:"error",variant:"top-accent",children:["object"===typeof t&&t.length>0&&Object(m.jsx)(m.Fragment,{children:Object(m.jsx)($r.a,{spacing:3,children:t.map((function(e,t){return Object(m.jsxs)($r.c,{children:[Object(m.jsx)($r.b,{as:ea.b,color:"red.500"},t),e.msg]},t)}))})}),"object"===typeof t&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(ea.c,{color:"red.500"}),t.message]}),"string"===typeof t&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(Xr.b,{}),t.message]})]})})};var na=function(){var e=Object(z.d)(pn("fournisseurs").value),t=Object(z.d)(pn("categories").value),n=Object(z.d)(pn("products").meta),r=Object(c.useState)(0),a=Object(O.a)(r,2),i=(a[0],a[1],Object(c.useState)(0)),s=Object(O.a)(i,2),d=(s[0],s[1],Object(z.c)()),l=Object(o.g)();return Object(c.useEffect)((function(){d(vn("fournisseurs").fetch()),d(vn("categories").fetch()),d(vn("products").fetch())}),[l]),Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(rc,{children:[Object(m.jsx)(dc,{title:"Ajouter un produit",children:Object(m.jsx)(ic,{title:"Ajouter un produit"})}),Object(m.jsxs)(lc,{children:[""!=n.success&&null!=n.success&&Object(m.jsx)(Zr,{message:n.success}),n.error&&Object(m.jsx)(ta,{error:n.error}),Object(m.jsx)(ur,{id:"add-form-product",enableReinitialize:!0,initialValues:{name:"",type:"BOLUS",doseDefault:0,prixVente:0,prixFournisseur:0,prixVaccinateur:0,quantityParProduct:0,prixParCC:0,datePer:"",uniteMesure:"ml",qttByCC:0,newStockBrute:0,newStockCC:0,fournisseurId:1,qttyspecificmirror:0,quantityBruteCVA:0,categoryId:1,quantityBrute:0,quantityCCCVA:0,quantityCC:0,condml:0,condval:0,condsize:0,conditionnement:1,qttccpvente:0,prixqttccvente:0},validations:Jr,onSubmit:function(e,t){var c=e.name,r=e.type,a=e.doseDefault,i=e.prixVente,s=e.prixFournisseur,o=e.prixVaccinateur,u=e.prixParCC,j=(e.datePer,e.fournisseurId),b=e.categoryId,O=e.condml,m=(e.condval,e.qttccpvente),h=e.conditionnement,x=e.prixqttccvente,v=e.condsize;d(vn("products").create({id:n.nextId,name:c,type:r,doseDefault:a,prixVente:parseFloat(i),prixFournisseur:parseFloat(s),prixVaccinateur:parseFloat(o),quantityParProduct:0,quantityBruteCVA:0,quantityBrute:0,quantityCCCVA:0,quantityCC:0,prixParCC:parseFloat(u),datePer:new Date,uniteMesure:"ml",qttByCC:0,newStockBrute:0,newStockCC:0,categoryId:parseInt(b),fournisseurId:parseInt(j),condml:parseFloat(O),condsize:parseFloat(v),conditionnement:h,qttccpvente:parseFloat(m),prixqttccvente:parseInt(x),refSortie:"0",refQtSortie:0,qttByCCDepot:0,condmldepot:0,condvaldepot:0,qttccpventedepot:0,prixqttccventedepot:0,quantityParProductDepot:0,condsizedepot:0})),l.push(y)},render:function(n){var c=n.values;return Object(m.jsx)(ur.Element,{children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-lg-6",children:Object(m.jsxs)("div",{className:"card",children:[Object(m.jsx)("div",{className:"card-header bg-dark text-white",children:"Information g\xe9n\xe9rale"}),Object(m.jsxs)("div",{className:"card-body",children:[Object(m.jsx)(ur.Field.Select,{name:"categoryId",label:"Categorie",emptyValue:!0,valueKey:"name",defaultValue:1,options:t}),Object(m.jsx)(ur.Field.Select,{name:"fournisseurId",label:"Fournisseur",emptyValue:!0,valueKey:"name",options:e}),Object(m.jsx)(ur.Field.Input,{name:"name",label:"D\xe9signation",placeholder:"D\xe9signation"}),Object(m.jsx)(ur.Field.Select,{name:"type",label:"Type d'article",emptyValue:!1,isNumeric:!1,valueKey:"name",options:[{id:"BOLUS",name:"BOLUS"},{id:"FLACON",name:"FLACON"},{id:"UNITE",name:"UNITE"},{id:"SACHET",name:"SACHET"}]}),"FLACON"===c.type&&Object(m.jsxs)("div",{className:"ml-3",children:[Object(m.jsx)(ur.Field.Number,{name:"doseDefault",label:"Quantit\xe9 en ml",placeholder:"Quantit\xe9 en ml"}),Object(m.jsx)(ur.Field.Select,{name:"conditionnement",label:"Conditionnement",valueKey:"name",options:[{id:1,name:"Sans conditionnement"},{id:2,name:"Avec conditionnement"}]}),2==c.conditionnement&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(ur.Field.Number,{name:"condml",defaultValue:0,label:"Conditionnement (ML)",placeholder:"Conditionnement en ML"}),Object(m.jsx)(ur.Field.Number,{name:"condsize",defaultValue:0,label:"Diviser en combien de flacon",placeholder:"Diviser en combien de flacon"}),Object(m.jsx)(ur.Field.Number,{name:"qttccpvente",defaultValue:0,label:"Quantit\xe9 de vente en ML",placeholder:"Quantit\xe9 de vente en ML"}),Object(m.jsx)(ur.Field.Number,{name:"prixqttccvente",disabled:null==c.qttccpvente||""==c.qttccpvente,label:"Prix de vente equivalent \xe0 ".concat(c.qttccpvente," ML."),placeholder:"Prix de vente equivalent \xe0 ".concat(c.qttccpvente," ML.")})]})]})]})]})}),Object(m.jsxs)("div",{className:"col-lg-6",children:[Object(m.jsxs)("div",{className:"card",children:[Object(m.jsx)("div",{className:"card-header bg-dark text-white",children:"Vente"}),Object(m.jsxs)("div",{className:"card-body",children:[Object(m.jsx)(ur.Field.Number,{name:"prixFournisseur",defaultValue:0,label:"prix unitaire",placeholder:"prix unitaire"}),Object(m.jsx)(ur.Field.Number,{name:"prixVente",defaultValue:0,label:"Prix de vente",placeholder:"prix de vente"}),Object(m.jsx)(ur.Field.Number,{name:"prixVaccinateur",defaultValue:0,label:"Prix du vaccinateur",placeholder:"prix du vaccinateur"}),Object(m.jsx)(m.Fragment,{children:"FLACON"===c.type&&Object(m.jsx)(ur.Field.Number,{type:(null==c.qttccpvente||c.qttccpvente,"text"),data:0!=c.qttccpvente&&""!=c.qttccpvente&&c.prixqttccvente/c.qttccpvente!="Infinity"?c.prixqttccvente/c.qttccpvente:0,name:"prixParCC",label:"Prix de vente ml",placeholder:"Prix de vente ml"})})]})]}),Object(m.jsx)("button",{className:"btn btn-green  btn-sm ",type:"submit",children:"Ajouter"}),Object(m.jsx)("button",{className:"btn btn-danger ml-2  btn-sm ",type:"reset",children:"Annuler"})]})]})})}})]})]})})};var ca=function(){var e,t,n,r,a,i,s,d,l,u,j,b,O,h,x,v,p,f,g,y,C,N=Object(o.i)().id,E=Object(z.c)(),S=Object(z.d)(pn("products").value);return Object(c.useEffect)((function(){E(vn("products").get(N))}),[]),Object(m.jsxs)(rc,{children:[Object(m.jsx)(dc,{title:"D\xe9tail du produit",children:Object(m.jsx)(ic,{title:"D\xe9tail du produit"})}),Object(m.jsxs)(lc,{children:[2!=(null===(e=S[0])||void 0===e?void 0:e.conditionnement)||null!=(null===(t=S[0])||void 0===t?void 0:t.conditionnement)&&Object(m.jsxs)("div",{className:"card card-info",children:[Object(m.jsx)("div",{className:"card-header",children:"Conditionnement"}),Object(m.jsxs)("div",{className:"card-body",children:[Object(m.jsxs)("p",{children:["Conditionnement (ML):"," ",Object(m.jsx)("span",{className:"badge badge-info",children:null===(n=S[0])||void 0===n?void 0:n.condml})]}),Object(m.jsxs)("p",{children:["Division en flacon:"," ",Object(m.jsx)("span",{className:"badge badge-info",children:null===(r=S[0])||void 0===r?void 0:r.condsize})]}),Object(m.jsxs)("p",{children:["Quantit\xe9 de vente par ML:",Object(m.jsx)("span",{className:"badge badge-info",children:null===(a=S[0])||void 0===a?void 0:a.qttccpvente})]}),Object(m.jsxs)("p",{children:["Prix de vente pour ",null===(i=S[0])||void 0===i?void 0:i.qttccpvente," ML:"," ",Object(m.jsxs)("span",{className:"badge badge-info",children:[oe(null===(s=S[0])||void 0===s?void 0:s.prixqttccvente)," "]})]})]})]}),Object(m.jsxs)("table",{className:"table table-striped",children:[Object(m.jsxs)("tr",{className:"bg-thead",children:[Object(m.jsx)("td",{children:Object(m.jsx)("strong",{children:"Nom de l'article:"})}),Object(m.jsxs)("td",{children:[null===(d=S[0])||void 0===d?void 0:d.name," "]})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:Object(m.jsx)("strong",{children:"Fournisseur :"})}),Object(m.jsx)("td",{children:null===(l=S[0])||void 0===l||null===(u=l.fournisseur)||void 0===u?void 0:u.name})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:Object(m.jsx)("strong",{children:"Categorie :"})}),Object(m.jsx)("td",{children:null===(j=S[0])||void 0===j||null===(b=j.category)||void 0===b?void 0:b.name})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:Object(m.jsx)("strong",{children:"Type:"})}),Object(m.jsxs)("td",{children:[null===(O=S[0])||void 0===O?void 0:O.type," "]})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:Object(m.jsx)("strong",{children:"Dose:"})}),Object(m.jsxs)("td",{children:[null===(h=S[0])||void 0===h?void 0:h.doseDefault," ML "]})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:Object(m.jsx)("strong",{children:"Prix unitaire:"})}),Object(m.jsx)("td",{children:oe(null===(x=S[0])||void 0===x?void 0:x.prixFournisseur)})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:Object(m.jsx)("strong",{children:"Prix de vente:"})}),Object(m.jsx)("td",{children:oe(null===(v=S[0])||void 0===v?void 0:v.prixVente)})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:Object(m.jsx)("strong",{children:"Prix pour le vaccinateur:"})}),Object(m.jsx)("td",{children:oe(null===(p=S[0])||void 0===p?void 0:p.prixVaccinateur)})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:Object(m.jsx)("strong",{children:"Prix par ML:"})}),Object(m.jsx)("td",{children:0!=(null===(f=S[0])||void 0===f?void 0:f.qttccpvente)?oe((null===(g=S[0])||void 0===g?void 0:g.prixParCC)*(null===(y=S[0])||void 0===y?void 0:y.qttccpvente)):oe(null===(C=S[0])||void 0===C?void 0:C.prixParCC)})]})]})]})]})};var ra=function(){var e,t,n,r,a,i,s,d,l,u,j,b,h,x,v,p,f,g,C,N,E,S,P=Object(o.i)().id,q=Object(z.d)(pn("fournisseurs").value),A=Object(z.d)(pn("categories").value),w=Object(z.d)(pn("products").value),D=Object(z.d)(pn("products").meta),F=Object(o.g)(),R=Object(c.useState)(1),T=Object(O.a)(R,2),V=(T[0],T[1],Object(c.useState)(1)),_=Object(O.a)(V,2),I=(_[0],_[1],Object(c.useState)(0)),B=Object(O.a)(I,2),M=B[0],k=B[1],L=Object(c.useState)(0),H=Object(O.a)(L,2),Q=H[0],U=H[1],Y=Object(z.c)(),K=Object(c.useState)({}),G=Object(O.a)(K,2),W=(G[0],G[1]),J=Object(c.useState)(null===(e=w[0])||void 0===e?void 0:e.type),X=Object(O.a)(J,2),Z=X[0],$=X[1];return Object(c.useEffect)((function(){var e,t,n;Y(vn("products").get(P)),$(null===(e=w[0])||void 0===e?void 0:e.type),U(null===(t=w[0])||void 0===t?void 0:t.prixqttccvente),k(null===(n=w[0])||void 0===n?void 0:n.qttccpvente)}),[P]),Object(c.useEffect)((function(){var e;D.isFetching||W({name:null===(e=w[0])||void 0===e?void 0:e.name})}),[D]),Object(c.useEffect)((function(){Y(vn("fournisseurs").fetch()),Y(vn("categories").fetch())}),[]),Object(m.jsxs)(rc,{children:[Object(m.jsx)(dc,{title:"Editer un article",children:Object(m.jsx)(ic,{title:"Editer un article"})}),Object(m.jsxs)(lc,{children:[""!=D.success&&null!=D.success&&Object(m.jsx)(Zr,{message:D.success}),w[0].name,D.error&&Object(m.jsx)(ta,{error:D.error}),Object(m.jsx)(ur,{id:"add-form-product",initialValues:(S={name:null===(t=w[0])||void 0===t?void 0:t.name,type:null===(n=w[0])||void 0===n?void 0:n.type,doseDefault:null===(r=w[0])||void 0===r?void 0:r.doseDefault,prixVente:null===(a=w[0])||void 0===a?void 0:a.prixVente,prixFournisseur:null===(i=w[0])||void 0===i?void 0:i.prixFournisseur,prixVaccinateur:parseFloat(null===(s=w[0])||void 0===s?void 0:s.prixVaccinateur),prixParCC:parseFloat(null===(d=w[0])||void 0===d?void 0:d.prixParCC),datePer:null===(l=w[0])||void 0===l?void 0:l.datePer,uniteMesure:"ml",conditionnement:null===(u=w[0])||void 0===u?void 0:u.conditionnement,categoryId:parseInt(null===(j=w[0])||void 0===j?void 0:j.categoryId)},Object(et.a)(S,"datePer",null===(b=w[0])||void 0===b?void 0:b.datePer),Object(et.a)(S,"fournisseurId",parseInt(null===(h=w[0])||void 0===h?void 0:h.fournisseurId)),Object(et.a)(S,"condml",null==(null===(x=w[0])||void 0===x?void 0:x.condml)?0:parseInt(null===(v=w[0])||void 0===v?void 0:v.condml)),Object(et.a)(S,"condsize",null==(null===(p=w[0])||void 0===p?void 0:p.condsize)?0:parseInt(null===(f=w[0])||void 0===f?void 0:f.condsize)),Object(et.a)(S,"qttccpvente",null==(null===(g=w[0])||void 0===g?void 0:g.qttccpvente)?0:parseInt(null===(C=w[0])||void 0===C?void 0:C.qttccpvente)),Object(et.a)(S,"prixqttccvente",null==(null===(N=w[0])||void 0===N?void 0:N.prixqttccvente)?0:parseInt(null===(E=w[0])||void 0===E?void 0:E.prixqttccvente)),S),validations:Jr,onSubmit:function(e,t){var n,c,r,a,i,s,d=e.name,o=e.type,l=e.doseDefault,u=e.prixVente,j=e.prixFournisseur,b=e.prixVaccinateur,O=e.prixParCC,m=e.datePer,h=e.fournisseurId,x=e.categoryId,v=e.condml,p=e.condval,f=e.qttccpvente,g=e.prixqttccvente,C=e.conditionnement;Y(vn("products").update({id:null===(n=w[0])||void 0===n?void 0:n.id,name:d,type:o,doseDefault:l,prixVente:parseFloat(u),prixFournisseur:parseFloat(j),prixVaccinateur:parseFloat(b),prixParCC:parseFloat(O),datePer:new Date(m),qttByCC:parseFloat(null===(c=w[0])||void 0===c?void 0:c.qttByCC),quantityBrute:parseFloat(null===(r=w[0])||void 0===r?void 0:r.quantityBrute),quantityBruteCVA:parseFloat(null===(a=w[0])||void 0===a?void 0:a.quantityBruteCVA),quantityCCCVA:parseFloat(null===(i=w[0])||void 0===i?void 0:i.quantityCCCVA),quantityCC:parseFloat(null===(s=w[0])||void 0===s?void 0:s.quantityCC),uniteMesure:"ml",condml:parseFloat(v),condval:parseFloat(p),qttccpvente:parseFloat(f),fournisseurId:parseInt(h),categoryId:parseInt(x),conditionnement:parseInt(C),prixqttccvente:parseInt(g),updatedAt:new Date,refSortie:"0",refQtSortie:0,qttByCCDepot:0,condmldepot:0,condvaldepot:0,qttccpventedepot:0,prixqttccventedepot:0,quantityParProductDepot:0,condsizedepot:0})),F.push(y)},render:function(e){var t,n,c=e.values;return Object(m.jsx)(ur.Element,{children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-lg-6",children:Object(m.jsxs)("div",{className:"card",children:[Object(m.jsx)("div",{className:"card-header bg-dark text-white",children:"Information g\xe9n\xe9rale"}),Object(m.jsxs)("div",{className:"card-body",children:[Object(m.jsx)(ur.Field.Select,{name:"categoryId",label:"Categorie",valueKey:"name",selectValue:null===(t=w[0])||void 0===t?void 0:t.categoryId,options:A}),Object(m.jsx)(ur.Field.Select,{name:"fournisseurId",label:"Fournisseur",valueKey:"name",selectValue:null===(n=w[0])||void 0===n?void 0:n.fournisseurId,options:q}),Object(m.jsx)(ur.Field.Input,{name:"name",value:null===c||void 0===c?void 0:c.name,label:"D\xe9signation",placeholder:"D\xe9signation"}),Object(m.jsx)(ur.Field.Select,{name:"type",label:"Type d'article",emptyValue:!1,isNumeric:!1,valueKey:"name",options:[{id:"BOLUS",name:"BOLUS"},{id:"FLACON",name:"FLACON"},{id:"UNITE",name:"UNITE"},{id:"SACHET",name:"SACHET"}]}),"FLACON"===c.type&&Object(m.jsxs)("div",{className:"ml-3",children:[Object(m.jsx)(ur.Field.Number,{name:"doseDefault",label:"Quantit\xe9 en ml",placeholder:"Quantit\xe9 en ml"}),Object(m.jsx)(ur.Field.Select,{name:"conditionnement",label:"Conditionnement",valueKey:"name",emptyValue:!1,options:[{id:1,name:"Sans conditionnement"},{id:2,name:"Avec conditionnement"}]}),2==c.conditionnement&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(ur.Field.Number,{name:"condml",label:"Conditionnement",placeholder:"Conditionnement en ML"}),Object(m.jsx)(ur.Field.Number,{name:"condsize",label:"Diviser par ",placeholder:"Diviser par"}),Object(m.jsx)(ur.Field.Number,{name:"qttccpvente",label:"Conditionnement de vente par ML",placeholder:"Quantit\xe9 cc par vente."}),Object(m.jsx)(ur.Field.Number,{name:"prixqttccvente",disabled:null==c.qttccpvente||""==c.qttccpvente,label:"Prix de vente equivalent \xe0 ".concat(c.qttccpvente," ML."),placeholder:"Prix de vente equivalent \xe0 ".concat(c.qttccpvente," ML.")})]})]})]})]})}),Object(m.jsxs)("div",{className:"col-lg-6",children:[Object(m.jsxs)("div",{className:"card",children:[Object(m.jsx)("div",{className:"card-header bg-dark text-white",children:"Vente"}),Object(m.jsxs)("div",{className:"card-body",children:[Object(m.jsx)(ur.Field.Number,{name:"prixFournisseur",label:"prix unitaire",placeholder:"prix unitaire"}),Object(m.jsx)(ur.Field.Number,{name:"prixVente",label:"Prix de vente",placeholder:"prix de vente"}),"FLACON"==Z&&Object(m.jsx)(ur.Field.Number,{type:"text",data:0!=M&&""!=M&&Q/M!="Infinity"?Q/M:0,name:"prixParCC",label:"Prix de vente ml",placeholder:"Prix de vente ml"}),Object(m.jsx)(ur.Field.Number,{name:"prixVaccinateur",label:"Prix du vaccinateur",placeholder:"prix du vaccinateur"})]})]}),Object(m.jsx)("button",{className:"btn btn-green  btn-sm ",type:"submit",children:"Editer"}),Object(m.jsx)("button",{className:"btn btn-danger ml-2 btn-sm ",type:"reset",children:"Annuler"})]})]})})}})]})]})};n(273),n(274);var aa=function(e){var t=e.model,n=e.entity,c=e.attribute,r=Object(z.c)();return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(e){e.preventDefault(),window.confirm('Vous voulez vraiment supprimer "'.concat(n[c],'" ?'))&&r(vn(t).destroy(n))},children:"Supprimer"})})};n(650),n(651),n(652),n(648),n(81);var ia=function(e){var t=e.route,n=e.model,c=e.modelKey,r=e.data;return Object(m.jsxs)("div",{children:[Object(m.jsx)(d.b,{className:"btn btn-sm btn-primary mr-2",to:"/".concat(t,"/detail/").concat(r.row.original.id),children:"Detail"}),Object(m.jsx)(d.b,{className:"btn btn-sm btn-warning mr-2",to:"/".concat(t,"/edit/").concat(r.row.original.id),children:"Editer"}),Object(m.jsx)(aa,{model:n,entity:r.row.original,attribute:c})]})},sa=n(162),da=function(){var e=Object(z.d)(pn("products").value),t=Object(z.d)(pn("products").meta),n=(Object(c.useRef)(),Object(z.c)());Object(o.g)();Object(c.useEffect)((function(){n(vn("products").fetch())}),[]);var a=r.a.useMemo((function(){return[{Header:"Id",accessor:"id"},{Header:"Produit",accessor:"name"},{Header:"Fournisseur",Cell:function(e){var t,n;return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("span",{className:"badge badge-primary",children:null===(t=e.row.original)||void 0===t||null===(n=t.fournisseur)||void 0===n?void 0:n.name})})}},{Header:"Quantit\xe9",accessor:"quantityBrute"},{Header:"Reste en ML",accessor:"quantityCC"},{Header:"Prix unitaire",Cell:function(e){var t;return Object(m.jsx)("div",{children:oe(null===(t=e.row.original)||void 0===t?void 0:t.prixFournisseur)})}},{Header:"Prix de vente",Cell:function(e){var t;return Object(m.jsx)("div",{children:oe(null===(t=e.row.original)||void 0===t?void 0:t.prixVente)})}},{Header:"Prix en ML",Cell:function(e){var t,n,c,r;return Object(m.jsx)("div",{children:0!=(null===(t=e.row.original)||void 0===t?void 0:t.qttccpvente)?oe((null===(n=e.row.original)||void 0===n?void 0:n.prixParCC)*(null===(c=e.row.original)||void 0===c?void 0:c.qttccpvente)):oe(null===(r=e.row.original)||void 0===r?void 0:r.prixParCC)})}},{Header:"Actions",Cell:function(e){return Object(m.jsx)(ia,{route:"product",model:"products",modelKey:"name",data:e})}}]}),[]);return Object(m.jsxs)(rc,{children:[Object(m.jsx)(dc,{title:"Tous les produits",children:Object(m.jsx)(ic,{title:"Tous les produits"})}),Object(m.jsx)(lc,{children:Object(m.jsx)(pr,{data:e,meta:t,columns:a,addUrl:g,urlName:"Ajouter un produit"})})]})};var oa=function(){var e=Object(z.d)(pn("products").value),t=Object(z.d)(pn("categories").value),n=Object(z.c)(),r=Object(c.useState)(1),a=Object(O.a)(r,2),i=a[0],s=a[1];return Object(c.useEffect)((function(){n(function(e){return on("products",{path:"/product/category?id=".concat(e),replace:!0})}(i)),n(vn("categories").fetch())}),[i]),Object(m.jsxs)(rc,{children:[Object(m.jsx)(dc,{title:"Liste des articles par categories",children:Object(m.jsx)(ic,{title:"Liste des articles par categories"})}),Object(m.jsxs)(lc,{children:[Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-lg-8"}),Object(m.jsx)("div",{className:"col-lg-4",children:Object(m.jsxs)("div",{className:"d-flex align-items-center mb-3",children:[Object(m.jsx)("label",{htmlFor:"",children:"Categorie:"}),Object(m.jsx)("select",{className:"form-control",onChange:function(e){s(e.target.value)},children:t.map((function(e){return Object(m.jsx)("option",{value:e.id,children:e.name})}))})]})})]}),Object(m.jsxs)("table",{className:"table table-bordered table-striped",children:[Object(m.jsx)("thead",{className:"bg-thead",children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"Nom"}),Object(m.jsx)("th",{children:"Prix Unitaire"}),Object(m.jsx)("th",{children:"Categorie"}),Object(m.jsx)("th",{children:"Actions"})]})}),Object(m.jsx)("tbody",{children:e.map((function(e){var t;return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:null===e||void 0===e?void 0:e.name}),Object(m.jsx)("td",{children:oe(null===e||void 0===e?void 0:e.prixFournisseur)}),Object(m.jsx)("td",{children:null===e||void 0===e||null===(t=e.category)||void 0===t?void 0:t.name}),Object(m.jsx)("td",{children:Object(m.jsx)(d.b,{className:"btn btn-sm btn-primary",to:"/product/detail/".concat(e.id),children:"Detail"})})]})}))})]})]})]})};var la=function(){var e=Object(z.d)(pn("products").value),t=Object(z.d)(pn("fournisseurs").value),n=Object(z.c)(),r=Object(c.useState)(1),a=Object(O.a)(r,2),i=a[0],s=a[1];return Object(c.useEffect)((function(){n(function(e){return on("products",{path:"/product/fournisseur?id=".concat(e),replace:!0})}(i)),n(vn("fournisseurs").fetch())}),[i]),Object(m.jsxs)(rc,{children:[Object(m.jsx)(dc,{title:"Liste des articles par fournisseurs",children:Object(m.jsx)(ic,{title:"Liste des articles par fournisseurs"})}),Object(m.jsxs)(lc,{children:[Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-lg-8"}),Object(m.jsx)("div",{className:"col-lg-4",children:Object(m.jsxs)("div",{className:"d-flex align-items-center mb-3",children:[Object(m.jsx)("label",{htmlFor:"",children:"Fournisseur:"}),Object(m.jsx)("select",{className:"form-control",onChange:function(e){s(e.target.value)},children:t.map((function(e){return Object(m.jsx)("option",{value:e.id,children:e.name})}))})]})})]}),Object(m.jsxs)("table",{className:"table table-bordered table-striped",children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"Nom"}),Object(m.jsx)("th",{children:"Prix"}),Object(m.jsx)("th",{children:"Fournisseur"}),Object(m.jsx)("td",{children:"Actions"})]})}),Object(m.jsx)("tbody",{children:e.map((function(e){var t;return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:null===e||void 0===e?void 0:e.name}),Object(m.jsx)("td",{children:oe(null===e||void 0===e?void 0:e.prixFournisseur)}),Object(m.jsx)("td",{children:null===e||void 0===e||null===(t=e.fournisseur)||void 0===t?void 0:t.name}),Object(m.jsx)("td",{children:Object(m.jsx)(d.b,{className:"btn btn-sm btn-primary",to:"/product/detail/".concat(e.id),children:"Detail"})})]})}))})]})]})]})},ua=function(){var e=Object(z.d)(pn("products").value),t=Object(z.d)(pn("products").meta),n=Object(z.c)();Object(c.useEffect)((function(){n(on("products",{path:"/rupture/stock",replace:!0}))}),[]);var a=r.a.useMemo((function(){return[{Header:"Produit",accessor:"name"},{Header:"Quantit\xe9",accessor:"quantityBrute"},{Header:"Date de peremption",Cell:function(e){var t;return Object(m.jsx)("h3",{children:de(null===(t=e.row.original)||void 0===t?void 0:t.datePer)})}}]}),[]);return Object(m.jsxs)(rc,{children:[Object(m.jsx)(dc,{title:"Article en rupture de stock",children:Object(m.jsx)(ic,{title:"Article en rupture de stock"})}),Object(m.jsx)(lc,{children:Object(m.jsx)(pr,{data:e,meta:t,columns:a})})]})},ja=n(653);var ba=function(){var e=Object(c.useState)(new Date),t=Object(O.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(new Date),i=Object(O.a)(a,2),s=i[0],o=i[1],l=function(e){if(!e||0===(null===e||void 0===e?void 0:e.length))return 0;var t=0;return e.forEach((function(e){t+=e.prixVente})),t},u=function(e){if(!e||0===(null===e||void 0===e?void 0:e.length))return 0;var t=0;return e.forEach((function(e){t+=e.quantityBrute})),t},j=function(e){if(!e||0===(null===e||void 0===e?void 0:e.length))return 0;var t=0;return e.forEach((function(e){t+=e.quantityCC})),t},b=Object(c.useRef)(null),h=Object(c.useRef)(null),x=Object(z.d)(pn("commandes").value),v=Object(z.c)();return Object(c.useEffect)((function(){v(function(e,t){return on("commandes",{path:"/entree?deb=".concat(e,"&fin=").concat(t),replace:!0})}(n,s))}),[n,s]),Object(m.jsxs)(rc,{children:[Object(m.jsx)(dc,{title:"Factures",children:Object(m.jsx)(ic,{title:"Factures"})}),Object(m.jsxs)(lc,{children:[Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-lg-4 mb-2",children:Object(m.jsx)(d.b,{to:"/approv",className:"btn  btn-primary",children:" Effectuer un approvisionnement"})}),Object(m.jsx)("div",{className:"col-lg-8"})]}),Object(m.jsxs)("div",{className:"border p-3 bg-white",children:[Object(m.jsxs)("div",{className:"row mb-3",children:[Object(m.jsx)("div",{className:"col-lg-7"}),Object(m.jsx)("div",{className:"col-lg-5",children:Object(m.jsxs)("div",{className:"d-flex justify-content-around",children:[Object(m.jsx)("input",{type:"date",name:"datedeb",className:"form-control mr-3",format:"DD-MM-YYYY",ref:b,placeholder:"D\xe9but"}),Object(m.jsx)("input",{type:"date",name:"datefin",className:"form-control mr-3",ref:h,placeholder:"Fin"}),Object(m.jsx)(ja.a,{onClick:function(){r(b.current.value),o(h.current.value)},children:"Filtrer"})]})})]}),Object(m.jsxs)("table",{className:"table table-bordered table-striped",children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"Date"}),Object(m.jsx)("th",{children:"Quantite Brute"}),Object(m.jsx)("th",{children:"Quantite en CC"}),Object(m.jsx)("th",{children:"Montant Total"}),Object(m.jsx)("th",{children:"Actions"})]})}),Object(m.jsx)("tbody",{children:x.map((function(e){return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:null===e||void 0===e?void 0:e.createdAt}),Object(m.jsx)("td",{children:u(null===e||void 0===e?void 0:e.contenu)}),Object(m.jsx)("td",{children:j(null===e||void 0===e?void 0:e.contenu)}),Object(m.jsx)("td",{children:Object(m.jsx)(Or.a,{value:l(null===e||void 0===e?void 0:e.contenu),displayType:"text",thousandSeparator:!0,suffix:"Ar",renderText:function(e,t){return Object(m.jsx)("div",Object(_e.a)(Object(_e.a)({},t),{},{children:e}))}})}),Object(m.jsx)("td",{className:"d-flex justify-content-around",children:Object(m.jsx)(d.b,{className:"btn btn-sm  btn-success",to:"detail/".concat(e.id),children:"Afficher le detail"})})]})}))})]})]})]})]})},Oa="ROLE_VENDEUR",ma=Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).SIGNUP_URL||"http://localhost:1200/api/signup",ha=Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).SIGNIN_URL||"http://localhost:1200/api/signin",xa=(Object(o.j)((function(){return Object(m.jsxs)(r.a.Fragment,{children:[Object(m.jsx)("div",{className:"bg-dark m-0  p-2  text-center",children:Object(m.jsx)("h3",{className:"m-0 p-2 text-white",children:"CABINET VETERINAIRE AMBALAVAO"})}),Object(m.jsxs)("ul",{className:"list-inline d-flex m-0  p-2 justify-content-center",children:[Object(m.jsx)("li",{className:"text-white  m-0  p-2",children:Object(m.jsx)(d.b,{className:"btn  btn-sm bg-success text-white",to:"/journal",children:"Journal d'entrees et sorties"})}),Object(m.jsx)("li",{className:"text-white  m-0  p-2",children:Object(m.jsx)(d.b,{className:"btn  btn-sm bg-success text-white",to:D,children:"Entree"})}),Object(m.jsx)("li",{className:"text-white  m-0  p-2",children:Object(m.jsx)(d.b,{className:"btn  btn-sm bg-success text-white",to:F,children:"Sortie"})}),Object(m.jsx)("li",{className:"text-white m-0  p-2",children:Object(m.jsx)(d.b,{className:"btn btn-sm bg-success text-white",to:"/products",children:"Articles"})}),Object(m.jsx)("li",{className:"text-white m-0  p-2",children:Object(m.jsx)(d.b,{className:"btn bg-success btn-sm text-white",to:"/credit",children:"Credit"})}),Object(m.jsx)("li",{className:"text-white m-0  p-2",children:Object(m.jsx)(d.b,{className:"btn bg-success btn-sm text-white",to:S,children:"Credit Vaccinateur"})}),Object(m.jsx)("li",{className:"text-white m-0  p-2",children:Object(m.jsx)(d.b,{className:"btn bg-success btn-sm text-white",to:P,children:"Commande direct"})}),Object(m.jsx)("li",{className:"text-white m-0  p-2",children:Object(m.jsx)(d.b,{className:"btn bg-success btn-sm text-white",to:A,children:"Produit par fournisseur"})}),Object(m.jsx)("li",{className:"text-white m-0  p-2",children:Object(m.jsx)(d.b,{className:"btn bg-success btn-sm text-white",to:w,children:"Produit par category"})}),Object(m.jsx)("li",{className:"text-white m-0  p-2",children:Object(m.jsx)(d.b,{className:"btn  btn-sm bg-success text-white",to:"/",children:"Bon de sortie"})}),Object(m.jsx)("li",{className:"text-white m-0  p-2",children:Object(m.jsx)(d.b,{className:"btn  btn-sm bg-success text-white",to:"/approv",children:"Article \xe0 approvisionner"})}),Object(m.jsx)("li",{className:"text-white m-0  p-2",children:Object(m.jsx)(d.b,{className:"btn  btn-sm bg-success text-white",to:"/perimes",children:"Article perim\xe9"})}),Object(m.jsx)("li",{className:"text-white m-0  p-2",children:Object(m.jsx)(d.b,{className:"btn  btn-sm bg-success text-white",to:q,children:"Parametres"})})]})]})})),"SET_APPROV_ITEMS"),va="ADD_TO_APPROV",pa="REMOVE_FROM_APPROV",fa="CLEAR_APPROV",ga="ADD_QTY_APPROV_ITEM",ya="MINUS_QTY_APPROV_ITEM",Ca="ADD_NUMBER_QTY_ITEM",Na="ADD_QTY_NUMBER_APPROV_ITEM",Ea=function(){return{type:fa}},Sa=function(e,t){var n=function(t){return!!(null===e||void 0===e?void 0:e.find((function(e){return(null===e||void 0===e?void 0:e.id)===t})))};return{approvisionnement:e,isItemOnApprov:n,addToApprov:function(e){n(e.id)?t(function(e){return{type:pa,payload:e}}(e.id)):t(function(e){return{type:va,payload:e}}(e))}}},Pa=function(e){var t,n=e.key,c=e.product,r=e.isItemOnApprov,a=e.handleAddToApprov;return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(K.a.Item,{children:Object(m.jsxs)(Se.a,{className:"product-card m-2 ".concat(c.id?"":"product-loading"),style:{border:c&&r(c.id)?"1px solid #a6a5a5":"",boxShadow:c&&r(c.id)?"0 10px 15px rgba(0, 0, 0, .07)":"none"},children:[Object(m.jsx)(Pe.a,{xs:9,children:Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("p",{children:null===c||void 0===c?void 0:c.name}),Object(m.jsx)("div",{class:"badge badge-primary",children:null===c||void 0===c||null===(t=c.fournisseur)||void 0===t?void 0:t.name}),Object(m.jsx)("p",{children:Object(m.jsxs)("strong",{children:[" ",oe(null===c||void 0===c?void 0:c.prixFournisseur)]})})]})}),Object(m.jsx)(Pe.a,{xs:3,children:(null===c||void 0===c?void 0:c.id)&&Object(m.jsx)("button",{className:" ".concat(r(c.id)?"btn btn-danger btn-sm":"btn btn-green btn-sm"),onClick:function(){return a(c)},children:r(c.id)?"Retirer":"Ajouter"})})]})},n)})},qa=r.a.memo(Pa),Aa=function(e){var t=e.product,n=Object(z.c)(),c=function(e){n(function(e,t){return{type:Na,payload:{id:e,value:t}}}(t.id,e))};return Object(m.jsx)("div",{className:"basket-item-control",children:Object(m.jsxs)(Ae.c,{w:28,bg:"whitesmoke",onChange:function(e){c(Number(e))},min:0,defaultValue:t.quantityParProduct,step:1,children:[Object(m.jsx)(Ae.d,{}),Object(m.jsxs)(Ae.e,{children:[Object(m.jsx)(Ae.b,{}),Object(m.jsx)(Ae.a,{})]})]})})},wa=function(e){var t=e.product,n=e.isItemOnApprov,c=e.addToApprov,r=(Object(z.c)(),!!n&&n(t.id));return Object(m.jsx)("div",{children:Object(m.jsxs)("div",{className:"d-flex justify-content-between align-items-start border   mb-2 p-2",children:[Object(m.jsx)("div",{style:{width:"65%"},children:Object(m.jsxs)("table",{border:"1",children:[Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"Nom de l'article : "}),Object(m.jsx)("td",{children:null===t||void 0===t?void 0:t.name})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"Prix unitaire:"}),Object(m.jsx)("td",{children:oe(t.prixFournisseur)})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"Montant HT:"}),Object(m.jsx)("td",{children:oe(t.prixFournisseur*t.quantityParProduct-t.remise)})]})]})}),Object(m.jsx)("div",{className:"d-flex mt-3",children:Object(m.jsx)(Aa,{product:t})}),Object(m.jsx)("div",{children:r&&Object(m.jsx)("button",{onClick:function(){c&&c(t)},className:"btn btn-danger btn-xs text-right",children:"X"})})]})})},Da=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0},Fa=function(e,t){return Da(e)*t/100};function Ra(e){var t,n,c;for(c in t=Array.isArray(e)?[]:{},e)n=e[c],t[c]="object"===typeof n?Ra(n):n;return t}var Ta=function(e,t){return Da(e)-Fa(e,t)},Va=function(e){e.setRegenerate;var t=Object(c.useState)(0),n=Object(O.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(new Date),s=Object(O.a)(i,2),d=s[0],l=s[1],u=Object(c.useState)(null),j=Object(O.a)(u,2),b=j[0],h=j[1],x=Object(c.useState)(""),v=Object(O.a)(x,2),p=v[0],f=v[1],g=Object(c.useState)("espece"),y=Object(O.a)(g,2),C=y[0],N=y[1],E=Object(z.d)(pn("approvis").meta),S=Object(z.c)(),P=Object(o.g)();Object(c.useEffect)((function(){S(vn("approvis").fetch())}),[]);var q=Object(z.d)((function(e){return{approvisionnements:e.approvisionnements}})).approvisionnements,A=Sa(q,S),w=A.isItemOnApprov,D=A.addToApprov,F=function(e){return Ra(e).map((function(e){return e.quantityBrute+=e.quantityParProduct,e}))};return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(qe.a,{children:[Object(m.jsx)(qe.a.Header,{className:"d-flex justify-content-between align-items-center bg-dark text-white",children:Object(m.jsxs)("div",{children:["Factures ("," ".concat(q.length," ").concat(q.length>1?"produits":"produit"),")"]})}),Object(m.jsxs)(qe.a.Body,{children:[Object(m.jsxs)("div",{class:"form-group",children:[Object(m.jsx)("label",{children:"Date du facture :"}),Object(m.jsx)("div",{children:Object(m.jsx)("input",{type:"date",onChange:function(e){return h(e.target.value)},value:b,className:"form-control"})})]}),q.length<=0&&Object(m.jsx)("div",{class:"alert alert-success ",children:"Aucune produit !!!"}),null===q||void 0===q?void 0:q.map((function(e,t){return Object(m.jsx)(wa,{product:e,isItemOnApprov:w,addToApprov:D,approvisionnement:q,dispatch:S},"".concat(null===e||void 0===e?void 0:e.id,"_").concat(t))})),q.length>0&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"d-flex justify-content-end align-items-center my-3 ",children:Object(m.jsxs)("table",{children:[Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"REMISE :"}),Object(m.jsx)("td",{children:Object(m.jsx)("input",{type:"number",className:"form-control",placeholder:"Remise",min:0,value:r,max:100,onChange:function(e){a(e.target.value)}})})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"PAIEMENT LE :"}),Object(m.jsx)("td",{children:Object(m.jsx)("input",{type:"date",onChange:function(e){return l(e.target.value)},value:d,className:"form-control"})})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"TYPE DE PAIEMENT:"}),Object(m.jsx)("td",{children:Object(m.jsxs)("select",{className:"form-control",onChange:function(e){N(e.target.value)},children:[Object(m.jsx)("option",{value:"espece",selected:!0,children:"ESPECE"}),Object(m.jsx)("option",{value:"boa",children:"CHEQUE - BOA"}),Object(m.jsx)("option",{value:"bni",children:"CHEQUE - BNI"}),Object(m.jsx)("option",{value:"MVola",children:"VIREMENT - MVola"}),Object(m.jsx)("option",{value:"OrangeMoney",children:"VIREMENT - ORANGE MONEY"})]})})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"REMARQUE :"}),Object(m.jsx)("td",{children:Object(m.jsx)("textarea",{className:"form-control",onChange:function(e){f(e.target.value)},placeholder:"Ecriver ici quelque chose d'autre \xe0 savoir sur l'approvisionnement"})})]})]})}),Object(m.jsxs)("div",{className:"d-flex flex-column  my-3 ",children:[" ",Object(m.jsxs)("p",{className:"approvisionnement-total-amount",children:["Total HT:",Object(m.jsx)("strong",{children:Object(m.jsx)(Or.a,{value:Da(q.map((function(e){return e.prixFournisseur*e.quantityParProduct}))),displayType:"text",thousandSeparator:!0,suffix:"Ar",renderText:function(e,t){return Object(m.jsx)("div",Object(_e.a)(Object(_e.a)({},t),{},{children:e}))}})})]}),Object(m.jsxs)("p",{className:"approvisionnement-total-amount",children:["Remise:",Object(m.jsx)("strong",{children:Object(m.jsx)(Or.a,{value:Fa(q.map((function(e){return e.prixFournisseur*e.quantityParProduct})),r),displayType:"text",thousandSeparator:!0,suffix:"Ar",renderText:function(e,t){return Object(m.jsx)("div",Object(_e.a)(Object(_e.a)({},t),{},{children:e}))}})})]}),Object(m.jsxs)("p",{className:"approvisionnement-total-amount",children:["Total avec remise :",Object(m.jsx)("strong",{children:Object(m.jsx)(Or.a,{value:Ta(q.map((function(e){return e.prixFournisseur*e.quantityParProduct})),r),displayType:"text",thousandSeparator:!0,suffix:"Ar",renderText:function(e,t){return Object(m.jsx)("div",Object(_e.a)(Object(_e.a)({},t),{},{children:e}))}})})]}),Object(m.jsx)("p",{children:"Arr\xeat\xe9 \xe0 la somme de "}),Object(m.jsx)("p",{className:"text-uppercase",children:Object(m.jsxs)("strong",{children:[Object(br.NumberToLetter)(Ta(q.map((function(e){return e.prixFournisseur*e.quantityParProduct})),r))," ","ARIARY"]})})]}),Object(m.jsxs)("div",{className:"d-flex justify-content-end",children:[Object(m.jsx)("button",{className:"btn btn-green btn-sm mr-2",disabled:0===q.length,onClick:function(){S(vn("approvis").createTransaction({id:Number(E.nextId),contenu:F(q),totalht:Da(q.map((function(e){return e.prixFournisseur*e.quantityParProduct}))),remise:r,total:Ta(q.map((function(e){return e.prixFournisseur*e.quantityParProduct})),r),dateApprov:null==b?new Date:b,dateEcheance:d,remarque:p,typePaye:C,approvisionnements:q},"create-facture")),S(Ea()),P.push(V),console.log(q)},type:"button",children:"Valider l'operation"}),Object(m.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(){0!==q.length&&S(Ea())},type:"button",children:Object(m.jsx)("span",{children:"Annuler"})})]})]})]}),q.length>0&&Object(m.jsx)(qe.a.Footer,{className:"d-flex flex-column"})]})})},_a=n(318),Ia=n.n(_a),Ba=function(){var e=Object(z.d)((function(e){return e.approvisionnements})),t=Object(z.d)(pn("products").value),n=Object(z.d)(pn("products").meta),c=Object(z.c)(),a=Sa(e,c),i=a.isItemOnApprov,s=a.addToApprov,d=r.a.useState([]),o=Object(O.a)(d,2),l=o[0],u=o[1],j=r.a.useState(!1),b=Object(O.a)(j,2),h=b[0],x=b[1];r.a.useEffect((function(){return 1==h&&(c(vn("products").fetch()),x(!1)),function(){x(!1)}}),[h]),r.a.useEffect((function(){c(vn("products").fetch())}),[]),r.a.useEffect((function(){n.isFetching||u(t)}),[n]);var v=r.a.useCallback((function(e){s&&s(e)}),[s]),p=r.a.useMemo((function(){return l.map((function(e){return Object(m.jsx)(qa,{product:e,isItemOnApprov:i,handleAddToApprov:v},e.id)}))}),[l]),f=function(e){null!=e.target&&u(kn(t,e.target.value))};r.a.useMemo((function(){return Ia()(f,300)}),[f]);return Object(m.jsxs)("div",{children:[Object(m.jsx)("input",{type:"text",onKeyDown:function(e){13==e.keyCode&&f(e)},placeholder:"Taper sur entrer pour valider votre recherche",className:"form-control mb-2"}),Object(m.jsxs)("div",{style:{overflowY:"auto",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(m.jsxs)(m.Fragment,{children:[p,0==l.length&&"Aucun produit trouv\xe9"]})," "]})]})},Ma=r.a.memo(Ba,qn.reactFastCompare),ka=(Object(Wt.debounce)((function(e){console.log("request: ".concat(e))}),1e3),function(){return Object(m.jsxs)(rc,{children:[Object(m.jsx)(dc,{title:"Nouvelle facture",children:Object(m.jsx)(ic,{title:"Nouvelle Facture"})}),Object(m.jsx)(lc,{children:Object(m.jsx)(Ee.a,{children:Object(m.jsxs)(Se.a,{children:[Object(m.jsx)(Pe.a,{xs:5,children:Object(m.jsx)(K.a,{children:Object(m.jsxs)(qe.a,{children:[Object(m.jsx)(qe.a.Header,{className:"d-flex justify-content-between align-items-center bg-dark text-white",children:"Produits"}),Object(m.jsx)(qe.a.Body,{children:Object(m.jsx)(Ma,{})})]})})}),Object(m.jsx)(Pe.a,{xs:7,children:Object(m.jsx)(Va,{setRegenerate:[]})})]})})})]})}),La=r.a.memo(ka),Ha=n(659),Qa=n(665);function Ua(){return Wr.a().shape({nom:Wr.b().required("Le champ est requis")})}var Ya=function(e){var t=e.category,n=Object(c.useState)(!1),r=Object(O.a)(n,2),a=r[0],i=r[1],s=Object(z.c)();Object(z.d)(pn("categories").value);return Object(m.jsx)("div",{className:"mb-2 d-flex justify-content-center align-items-center",children:Object(m.jsx)("div",{style:{width:"50%"},children:a?Object(m.jsx)("div",{className:"p-3",children:Object(m.jsx)(ur,{enableReinitialize:!0,id:"form-".concat(t.id),initialValues:{nom:null===t||void 0===t?void 0:t.name},validations:Ua,onSubmit:function(e,n){var c=e.nom;s(vn("categories").update({id:t.id,name:c})),s(vn("categories").fetch()),i(!1)},render:function(){return Object(m.jsxs)(ur.Element,{children:[Object(m.jsx)(ur.Field.Input,{name:"nom",placeholder:"Nom du categorie"}),Object(m.jsxs)("div",{className:"d-flex justify-content-center align-items-center",children:[Object(m.jsx)("button",{className:"btn btn-success btn-sm m-1",type:"submit",children:"Enregistrer"}),Object(m.jsx)("button",{className:"btn  btn-danger btn-sm m-1",onClick:function(e){var n;e.preventDefault(),window.confirm('Vous voulez vraiment supprimer la categorie "'.concat(t.name,'" ?'))&&(n=t,s(vn("categories").destroy(n)),s(vn("categories").fetch()))},children:"Supprimer"}),Object(m.jsx)("button",{className:"btn btn-info btn-sm m-1",onClick:function(){i(!1)},children:"Annuler"})]})]})}})}):Object(m.jsxs)("li",{className:"list-items-row p-1 d-flex justify-content-between align-items-center mb-1 border-1",children:[null===t||void 0===t?void 0:t.name,Object(m.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(){i(!0)},children:"Editer"})]})})},t.id)},Ka=function(e){e.categories,e.meta;var t=Object(z.c)();return Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ur,{id:"add-form-category",enableReinitialize:!0,initialValues:{nom:""},validations:Ua,onSubmit:function(e,n){var c=e.nom;t(vn("categories").create({name:c}))},render:function(){return Object(m.jsx)(ur.Element,{children:Object(m.jsxs)("div",{className:"d-flex justify-content-center align-items-center",children:[Object(m.jsx)("div",{style:{width:"300px"},children:Object(m.jsx)(ur.Field.Input,{name:"nom",placeholder:"Nouvelle categorie"})}),Object(m.jsx)("button",{className:"btn btn-success ml-2 ",type:"submit",children:"Ajouter"})]})})}})})};var za=function(e){var t=e.categories,n=e.meta;return Object(m.jsx)("div",{children:Object(m.jsx)("div",{className:"card mt-2",children:Object(m.jsxs)("div",{className:"card-body",children:[Object(m.jsx)(Ka,{categories:t,meta:n}),Object(m.jsx)("ol",{class:"list-items",children:t.map((function(e){return Object(m.jsx)(Ya,{category:e})}))})]})})})};function Ga(){return Wr.a().shape({nom:Wr.b().required("Le champ est requis")})}var Wa=function(e){var t=e.fournisseur,n=Object(c.useState)(!1),r=Object(O.a)(n,2),a=r[0],i=r[1],s=Object(z.c)();Object(z.d)(pn("fournisseurs").value);return Object(m.jsxs)("div",{className:"mb-2 d-flex justify-content-center align-items-center",children:[Object(m.jsx)("div",{style:{width:"50%"},children:a?Object(m.jsx)("div",{className:"p-3",children:Object(m.jsx)(ur,{enableReinitialize:!0,id:"form-".concat(t.id),initialValues:{nom:t.name},validations:Ga,onSubmit:function(e,n){var c=e.nom;s(vn("fournisseurs").update({id:t.id,name:c})),i(!1)},render:function(){return Object(m.jsxs)(ur.Element,{children:[Object(m.jsx)(ur.Field.Input,{name:"nom",placeholder:"Nom du fournisseur"}),Object(m.jsxs)("div",{className:"d-flex justify-content-center align-items-center",children:[Object(m.jsx)("button",{className:"btn btn-success btn-sm m-1",type:"submit",children:"Enregistrer"}),Object(m.jsx)("button",{className:"btn  btn-danger btn-sm m-1",onClick:function(e){var n;e.preventDefault(),window.confirm('Vous voulez vraiment supprimer le fournisseur "'.concat(t.name,'" ?'))&&(n=t,s(vn("fournisseurs").destroy(n)),s(vn("fournisseurs").fetch()))},children:"Supprimer"}),Object(m.jsx)("button",{className:"btn btn-info btn-sm m-1",onClick:function(){i(!1)},children:"Annuler"})]})]})}})}):Object(m.jsxs)("li",{className:"list-items-row p-1 d-flex justify-content-between align-items-center mb-1 border-1",children:[t.name,Object(m.jsx)("button",{className:"btn btn-warning btn-sm",onClick:function(){i(!0)},children:"Editer"})]})}),Object(m.jsx)("div",{})," "]},t.id)},Ja=function(e){e.fournisseurs;var t=e.meta,n=Object(z.c)();return Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ur,{id:"add-form-category",enableReinitialize:!0,initialValues:{nom:""},validations:Ga,onSubmit:function(e,c){var r=e.nom;n(vn("fournisseurs").create({id:t.nextId,name:r}))},render:function(){return Object(m.jsx)(ur.Element,{children:Object(m.jsxs)("div",{className:"d-flex justify-content-center align-items-center",children:[Object(m.jsx)("div",{style:{width:"300px"},children:Object(m.jsx)(ur.Field.Input,{name:"nom",placeholder:"Nom du fournisseur"})}),Object(m.jsx)("button",{className:"btn btn-success  ml-3",type:"submit",children:"Ajouter"})]})})}})})};var Xa=function(e){var t=e.fournisseurs,n=e.meta;return Object(m.jsx)("div",{children:Object(m.jsx)("div",{className:"card mt-2",children:Object(m.jsxs)("div",{className:"card-body",children:[Object(m.jsx)(Ja,{fournisseurs:t,meta:n}),Object(m.jsx)("ol",{class:"list-items",children:t.map((function(e){return Object(m.jsx)(Wa,{fournisseur:e})}))})]})})})};function Za(){return Wr.a().shape({nom:Wr.b().required("Le champ est requis")})}var $a=function(e){var t=e.vaccinateur,n=Object(c.useState)(!1),r=Object(O.a)(n,2),a=r[0],i=r[1],s=Object(z.c)();Object(z.d)(pn("vaccinateurs").value);return Object(m.jsx)("div",{className:"mb-2",children:Object(m.jsx)("div",{children:a?Object(m.jsx)("div",{className:"p-3",children:Object(m.jsx)(ur,{enableReinitialize:!0,id:"form-".concat(t.id),initialValues:{nom:t.name,contact:t.contact},validations:Za,onSubmit:function(e,n){var c=e.nom,r=e.contact;s(vn("vaccinateurs").update({id:t.id,name:c,contact:r})),i(!1)},render:function(){return Object(m.jsxs)(ur.Element,{children:[Object(m.jsx)(ur.Field.Input,{name:"nom",label:"Nom du vaccinateur",placeholder:"Nom du vaccinateur"}),Object(m.jsx)(ur.Field.Input,{name:"contact",label:"Contact du vaccinateur",placeholder:"Contact du vaccinateur"}),Object(m.jsx)("button",{className:"btn btn-success btn-sm m-1",type:"submit",children:"Enregistrer"}),Object(m.jsx)("button",{className:"btn  btn-success btn-sm m-1",onClick:function(e){var n;e.preventDefault(),window.confirm('Vous voulez vraiment supprimer la vaccinateur "'.concat(t.name,'" ?'))&&(n=t,s(vn("vaccinateurs").destroy(n)),s(vn("vaccinateurs").fetch()))},children:"Supprimer"}),Object(m.jsx)("button",{className:"btn btn-success btn-sm m-1",onClick:function(){i(!1)},children:"Annuler"})]})}})}):Object(m.jsxs)("li",{className:"list-items-row p-1 d-flex justify-content-between align-items-center mb-1 border-1",children:[Object(m.jsx)("tr",{children:Object(m.jsxs)("td",{children:[" ",t.name," - ",t.contact]})}),Object(m.jsx)("button",{className:"btn btn-secondary btn-sm",onClick:function(){i(!0)},children:"Editer"})]})})},t.id)},ei=function(e){e.categories;var t=e.meta,n=Object(z.c)();return Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ur,{id:"add-form-vaccinateur",enableReinitialize:!0,initialValues:{nom:"",contact:""},validations:Za,onSubmit:function(e,c){var r=e.nom,a=e.contact;n(vn("vaccinateurs").create({id:t.nextId,name:r,contact:a}))},render:function(){return Object(m.jsx)(ur.Element,{children:Object(m.jsx)("div",{className:"d-flex flex-column justify-content-center align-items-center",children:Object(m.jsxs)("div",{style:{width:"300px"},children:[Object(m.jsx)(ur.Field.Input,{name:"nom",label:"Nom du vaccinateur",placeholder:"Nom du vaccinateur"}),Object(m.jsx)(ur.Field.Input,{name:"contact",label:"Contact du vaccinateur",placeholder:"Contact du vaccinateur"}),Object(m.jsx)("button",{className:"btn btn-success mt-2 btn-block ",type:"submit",children:"Ajouter"})]})})})}})})};var ti=function(e){var t=e.vaccinateurs,n=e.meta;return Object(m.jsxs)("div",{children:[Object(m.jsx)("h3",{className:"mb-2 text-bold title",children:"Vaccinateurs"}),Object(m.jsx)("div",{className:"card mt-2",children:Object(m.jsxs)("div",{className:"card-body",children:[Object(m.jsx)(ei,{vaccinateurs:t,meta:n}),Object(m.jsx)("ol",{class:"list-items",children:t.map((function(e){return Object(m.jsx)($a,{vaccinateur:e})}))})]})})]})};function ni(){return Wr.a().shape({nom:Wr.b().required("Le champ est requis")})}var ci=function(e){var t=e.emprunter,n=Object(c.useState)(!1),r=Object(O.a)(n,2),a=r[0],i=r[1],s=Object(z.c)();Object(z.d)(pn("emprunters").value);return Object(m.jsx)("div",{className:"mb-2",children:Object(m.jsx)("div",{children:a?Object(m.jsx)("div",{className:"bg-gray",children:Object(m.jsx)(ur,{enableReinitialize:!0,id:"form-".concat(t.id),initialValues:{nom:t.name,contact:t.contact},validations:ni,onSubmit:function(e,n){var c=e.nom,r=e.contact;s(vn("emprunters").update({id:t.id,name:c,contact:r})),i(!1)},render:function(){return Object(m.jsxs)(ur.Element,{children:[Object(m.jsx)(ur.Field.Input,{name:"nom",label:"Nom du emprunter",placeholder:"Nom du emprunter"}),Object(m.jsx)(ur.Field.Input,{name:"contact",label:"Contact du emprunter",placeholder:"Contact du emprunter"}),Object(m.jsx)("button",{className:"btn btn-success btn-sm m-1",type:"submit",children:"Enregistrer"}),Object(m.jsx)("button",{className:"btn  btn-success btn-sm m-1",onClick:function(e){var n;e.preventDefault(),window.confirm('Vous voulez vraiment supprimer la emprunter "'.concat(t.name,'" ?'))&&(n=t,s(vn("emprunters").destroy(n)),s(vn("emprunters").fetch()))},children:"Supprimer"}),Object(m.jsx)("button",{className:"btn btn-success btn-sm m-1",onClick:function(){i(!1)},children:"Annuler"})]})}})}):Object(m.jsxs)("li",{className:"list-items-row p-1 d-flex justify-content-between align-items-center mb-1 border-1",children:[Object(m.jsx)("tr",{children:Object(m.jsxs)("td",{children:[" ",t.name,"(",t.contact,")"]})}),Object(m.jsx)("button",{className:"btn btn-secondary btn-sm",onClick:function(){i(!0)},children:"Editer"})]})})},t.id)},ri=function(e){e.categories;var t=e.meta,n=Object(z.c)();return Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ur,{id:"add-form-category",enableReinitialize:!0,initialValues:{nom:"",contact:""},validations:ni,onSubmit:function(e,c){var r=e.nom,a=e.contact;n(vn("emprunters").create({id:t.nextId,name:r,contact:a}))},render:function(){return Object(m.jsxs)(ur.Element,{children:[Object(m.jsx)(ur.Field.Input,{name:"nom",label:"Nom du emprunter",placeholder:"Nom du emprunter"}),Object(m.jsx)(ur.Field.Input,{name:"contact",label:"Contact du emprunter",placeholder:"Contact du emprunter"}),Object(m.jsx)("button",{className:"btn btn-success  btn-sm ",type:"submit",children:"Ajouter"})]})}})})};var ai=function(e){var t=e.emprunters,n=e.meta;return Object(m.jsxs)("div",{children:[Object(m.jsx)("h3",{className:"mb-2 text-bold title",children:"Emprunters"}),Object(m.jsx)("div",{className:"card mt-2",children:Object(m.jsxs)("div",{className:"card-body",children:[Object(m.jsx)(ri,{emprunters:t,meta:n}),Object(m.jsx)("ol",{class:"list-items",children:t.map((function(e){return Object(m.jsx)(ci,{emprunter:e})}))})]})})]})};var ii=function(e){var t=Object(z.c)(),n=Object(z.d)(pn("categories").value),r=Object(z.d)(pn("fournisseurs").value),a=Object(z.d)(pn("vaccinateurs").value),i=Object(z.d)(pn("emprunters").value),s=Object(z.d)(pn("categories").meta),d=Object(z.d)(pn("fournisseurs").meta),o=Object(z.d)(pn("vaccinateurs").meta),l=Object(z.d)(pn("emprunters").meta);return Object(c.useEffect)((function(){t(vn("fournisseurs").fetch()),t(vn("categories").fetch()),t(vn("vaccinateurs").fetch()),t(vn("emprunters").fetch())}),[]),Object(m.jsxs)(rc,{children:[Object(m.jsx)(dc,{title:"Parametres g\xe9n\xe9rales",children:Object(m.jsx)(ic,{title:"Parametres g\xe9n\xe9rales"})}),Object(m.jsx)(lc,{children:Object(m.jsx)(Ha.a.Container,{id:"left-tabs-example",defaultActiveKey:"first",children:Object(m.jsxs)(Se.a,{children:[Object(m.jsxs)(Qa.a,{variant:"pills",className:"flex-row justify-content-center",children:[Object(m.jsx)(Qa.a.Item,{className:"border ml-2",children:Object(m.jsx)(Qa.a.Link,{eventKey:"first",className:"py-2 px-3 text-uppercase bg-white",children:"Categories de produits"})}),Object(m.jsx)(Qa.a.Item,{className:"border  ml-2",children:Object(m.jsx)(Qa.a.Link,{eventKey:"second",className:"py-2 px-3 text-uppercase  bg-white",children:"Fournisseurs"})}),Object(m.jsx)(Qa.a.Item,{className:"border  ml-2",children:Object(m.jsx)(Qa.a.Link,{eventKey:"three",className:"py-2 px-3 text-uppercase  bg-white",children:"Vaccinateurs"})}),Object(m.jsx)(Qa.a.Item,{className:"border  ml-2",children:Object(m.jsx)(Qa.a.Link,{eventKey:"four",className:"py-2 px-3 text-uppercase  bg-white",children:"Demandeur de credit"})})]}),Object(m.jsx)(Pe.a,{sm:12,children:Object(m.jsxs)(Ha.a.Content,{children:[Object(m.jsx)(Ha.a.Pane,{eventKey:"first",children:Object(m.jsx)(za,{categories:n,meta:s})}),Object(m.jsx)(Ha.a.Pane,{eventKey:"second",children:Object(m.jsx)(Xa,{fournisseurs:r,meta:d})}),Object(m.jsx)(Ha.a.Pane,{eventKey:"three",children:Object(m.jsx)(ti,{vaccinateurs:a,meta:o})}),Object(m.jsx)(Ha.a.Pane,{eventKey:"four",children:Object(m.jsx)(ai,{emprunters:i,meta:l})})]})})]})})})]})};var si=function(){var e=Hn()().isoWeekday(1).startOf("week"),t=Hn()().endOf("week"),n=Object(c.useState)(e),a=Object(O.a)(n,2),i=a[0],s=a[1],o=Object(c.useState)(t),l=Object(O.a)(o,2),u=l[0],j=l[1],b=Object(c.useState)([e,t]),h=Object(O.a)(b,2),x=h[0],v=h[1];Object(c.useEffect)((function(){null!==x?(x[0]&&s(x[0]),x[1]&&j(x[1])):(s(e),j(t))}),[x]);var p=function(e){if(!e||0===(null===e||void 0===e?void 0:e.length))return 0;var t=0;return e.forEach((function(e){t+=e.prixVente*e.quantityParProductDepot})),t},f=function(e){if(!e||0===(null===e||void 0===e?void 0:e.length))return 0;var t=0;return e.forEach((function(e){t+=1*e.quantityParProductDepot})),t},g=Object(z.d)(pn("commandes").value),y=Object(z.d)(pn("commandes").meta),C=Object(z.c)();Object(c.useEffect)((function(){C(function(e,t){return on("commandes",{path:"/sortie?deb=".concat(e,"&fin=").concat(t),replace:!0})}(i,u))}),[i,u]);var N=r.a.useMemo((function(){return[{Header:"Date de commande",Cell:function(e){var t;return Object(m.jsx)(m.Fragment,{children:de(null===(t=e.row.original)||void 0===t?void 0:t.dateCom)})}},{Header:"Produits",Cell:function(e){var t,n;return Object(m.jsx)("div",{style:{width:"200px"},children:null===(t=e.row.original)||void 0===t||null===(n=t.contenu)||void 0===n?void 0:n.map((function(e){return Object(m.jsxs)("span",{children:[e.name,","]})}))})}},{Header:"Quantit\xe9",Cell:function(e){var t;return Object(m.jsx)("div",{children:f(null===(t=e.row.original)||void 0===t?void 0:t.contenu)})}},{Header:"Total",Cell:function(e){var t;return Object(m.jsx)("div",{children:oe(p(null===(t=e.row.original)||void 0===t?void 0:t.contenu))})}},{Header:"Actions",Cell:function(e){var t,n;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(d.b,{to:"/depot/detail/".concat(null===(t=e.row.original)||void 0===t?void 0:t.id),className:"btn btn-green btn-sm mr-2",children:"D\xe9tails"}),Object(m.jsx)(d.b,{to:"/editer/commande/".concat(null===(n=e.row.original)||void 0===n?void 0:n.id),className:"btn btn-warning btn-sm mr-2",children:"Editer"}),Object(m.jsx)(Br,{model:"fromdepots",entity:e.row.original})]})}}]}),[]);return Object(m.jsxs)(rc,{children:[Object(m.jsx)(dc,{title:"Historique de sortie",children:Object(m.jsx)(ic,{title:"Historique de sortie"})}),Object(m.jsxs)(lc,{children:[" ",Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-lg-6",children:Object(m.jsxs)("div",{children:[Object(m.jsx)("h3",{className:"text-uppercase",children:"Historique de sortie"}),Object(m.jsx)("p",{children:"".concat(de(i)," ->  ").concat(de(u))})]})}),Object(m.jsx)("div",{className:"col-lg-6 text-right",children:Object(m.jsx)(gr.a,{locale:"fr-FR",onChange:v,value:x})})," "]}),Object(m.jsx)(pr,{filter:!1,data:g.sort((function(e,t){return t.id-e.id})),meta:y,columns:N})]})]})},di=r.a.createContext();function oi(e){var t=e.model,n=e.options,c=e.children,a=Object(z.d)(pn(t).value),i=Object(z.d)(pn(t).meta),s=Object(z.c)();r.a.useEffect((function(){s(vn(t).fetch(n))}),[n]);var d={data:a,meta:i};return Object(m.jsx)(di.Provider,{value:d,children:c})}function li(e){var t=e.children;return Object(m.jsx)(di.Consumer,{children:function(e){if(void 0===e)throw new Error("Data  must be used within a GetDataContext");return t(e)}})}var ui="SET_FROM_DEPOT_ITEMS",ji="ADD_FROM_DEPOT",bi="REMOVE_FROM_TO_DEPOT",Oi="CLEAR_FROM_DEPOT",mi="ADD_QTY_FROM_DEPOT_ITEM",hi="ADD_QTY_PORTION_FROM_DEPOT_ITEM",xi="ADD_QTY_NUMBER_FROM_DEPOT_ITEM",vi="ADD_QTY_PORTION_DOSE_ITA_NEW_FROM_DEPOT_ITEM",pi="ADD_QTY_PORTION_DOSE_SOVAX_FROM_DEPOT_ITEM",fi="ADD_QTY_PORTION_PHYTO_COND_FROM_DEPOT_ITEM",gi="MINUS_QTY_PORTION_PHYTO_COND_FROM_DEPOT_ITEM",yi=function(){return{type:Oi}},Ci=function(e){var t=e.product,n=(e.setRealQttCC,e.setRealQtt),c=(e.realQtt,e.realQttCC,Object(z.c)()),r=function(e){c(function(e,t){return{type:xi,payload:{id:e,value:t}}}(t.id,e))},a=function(){return t.quantityBrute-1-1*t.quantityParProductDepot<0};return Object(m.jsx)("div",{className:"basket-item-control",children:Object(m.jsxs)(Ae.c,{inputMode:"numeric",w:28,disabled:0!=(null===t||void 0===t?void 0:t.condmldepot)&&0!=(null===t||void 0===t?void 0:t.qttccpventedepot),step:1,bg:"whitesmoke",onChange:function(e){r(e),n(e),1==a()&&alert("Le reste du stock est : "+t.quantityBrute+" < "+e+" demand\xe9")},min:0,defaultValue:null===t||void 0===t?void 0:t.quantityParProductDepot,max:(a(),1*(null===t||void 0===t?void 0:t.quantityBrute)),children:[Object(m.jsx)(Ae.d,{}),Object(m.jsxs)(Ae.e,{children:[Object(m.jsx)(Ae.b,{}),Object(m.jsx)(Ae.a,{})]})]})})},Ni=function(e,t){var n=function(t){return!!(null===e||void 0===e?void 0:e.find((function(e){return(null===e||void 0===e?void 0:e.id)===t})))};return{fromdepot:e,isItemFromDepot:n,addFromDepot:function(e){n(e.id)?t(function(e){return{type:bi,payload:e}}(e.id)):t(function(e){return{type:ji,payload:e}}(e))}}},Ei=function(e){var t=e.product,n=Object(c.useState)(null),r=Object(O.a)(n,2),a=r[0],i=r[1],s=Object(c.useState)(null),d=Object(O.a)(s,2),o=d[0],l=d[1],u=Object(z.d)((function(e){return e.fromdepots})),j=Object(z.c)(),b=Ni(u,j),h=b.isItemFromDepot,x=b.addFromDepot,v=!!h&&h(t.id);return Object(m.jsx)("div",{children:Object(m.jsxs)("div",{className:"d-flex justify-content-between align-items-center border   mb-2 p-2",children:[Object(m.jsxs)("div",{style:{width:"45%"},children:[Object(m.jsx)("p",{className:"text-blue",children:t.name}),Object(m.jsx)("span",{className:"text-lowercase",children:Object(m.jsxs)("strong",{children:[0!=t.quantityParProductDepot&&oe(t.prixVente),0==t.quantityParProductDepot&&0!=t.prixParCC&&Object(m.jsx)(m.Fragment,{children:null!=t.prixqttccventedepot&&0!=t.prixqttccventedepot?oe(t.prixqttccventedepot):oe(t.prixParCC)}),0!=t.quantityParProductDepot&&" x "+t.quantityParProductDepot+" "+t.type," ",null==t.prixqttccventedepot&&0==t.prixqttccventedepot&&Object(m.jsx)(m.Fragment,{children:0!=t.qttByCCDepot&&(0==t.quantityParProductDepot?" x ":"+")+t.qttByCCDepot+"ML"})]})})]}),Object(m.jsxs)("div",{className:"text-inline text-center",children:[Object(m.jsx)("h5",{className:"mb-1",children:t.type}),Object(m.jsx)(Ci,{product:t,setRealQttCC:i,setRealQtt:l,realQtt:o,realQttCC:a})]}),Object(m.jsx)("div",{children:v&&Object(m.jsx)("button",{onClick:function(){x&&x(t)},className:"btn btn-danger btn-xs text-right",children:"X"})})]})})},Si=function(e){return!!e.quantityBrute>0},Pi=function(e){return!!e.quantityBrute<0},qi=function(e){return!!(e.qttByCCDepot>e.quantityCC)},Ai=function(e){return qi(e)?e.qttByCCDepot-e.quantityCC:e.quantityCC-e.qttByCCDepot},wi=function(e){return Si(e)?e.quantityBrute-=1:e.quantityBrute=0,e},Di=function(e,t){return e.quantityCC=t,e},Fi=function(e){return function(e){Si(e)?(console.log("hello ici"),qi(e)?(wi(e),Di(e,e.doseDefault-Ai(e))):function(e){return!(e.qttByCCDepot!=e.quantityCC)}(e)?Di(e,0):Di(e,e.quantityCC-e.qttByCCDepot)):e.quantityCC>0?Di(e,e.quantityCC-e.qttByCCDepot):Di(e,0)}(e),e},Ri=function(e){return!function(e){return!!e.condvaldepot>=0}(e)?Si(e)?(wi(e),Di(e,e.condmldepot-Ai(e)),0==e.condvaldepot&&(e.condvaldepot=e.condsizedepot-1)):e.quantityCC-=e.qttByCCDepot:qi(e)?(!function(e){e.condvaldepot>0?e.condvaldepot-=1:e.quantityBrute>0?(wi(e),e.condvaldepot=e.condsizedepot-1):e.condvaldepot=0}(e),Di(e,e.condmldepot-Ai(e))):!function(e){return!!e.quantityCC>0}(e)?e.quantityCC=0:e.quantityCC-=e.qttByCCDepot,e},Ti=function(e){var t=e.product,n=e.index,c=e.state,r=e.setState,a=(e.setRealQttCC,e.setRealQtt),i=(e.realQtt,e.realQttCC,Object(z.c)(),function(e){!function(e,t,n){var a=Object(Vc.a)(c);a[e]=Object(_e.a)(Object(_e.a)({},a[e]),{},Object(et.a)({},t,n)),r(a)}(n,"quantityParProductDepot",e)}),s=function(){return t.quantityCC-t.qttByCCDepot<0&&t.quantityBrute-1-1*t.quantityParProductDepot<0};return Object(m.jsx)("div",{className:"basket-item-control",children:Object(m.jsxs)(Ae.c,{inputMode:"numeric",w:28,disabled:0!=(null===t||void 0===t?void 0:t.condmldepot)&&0!=(null===t||void 0===t?void 0:t.qttccpventedepot),step:1,bg:"whitesmoke",onChange:function(e){i(Number(e)),a(Number(e)),s()&&alert("Le stock ne satisfait pas votre commande")},min:0,defaultValue:null===t||void 0===t?void 0:t.quantityParProductDepot,max:1==s()?1*(null===t||void 0===t?void 0:t.quantityBrute)-1:1*(null===t||void 0===t?void 0:t.quantityBrute),children:[Object(m.jsx)(Ae.d,{}),Object(m.jsxs)(Ae.e,{children:[Object(m.jsx)(Ae.b,{}),Object(m.jsx)(Ae.a,{})]})]})})},Vi=function(e){var t=e.state,n=e.index,r=e.setState,a=e.product,i=Object(c.useState)(null),s=Object(O.a)(i,2),d=s[0],o=s[1],l=Object(c.useState)(null),u=Object(O.a)(l,2),j=u[0],b=u[1];return Object(m.jsx)("div",{children:Object(m.jsxs)("div",{className:"d-flex justify-content-between align-items-center border   mb-2 p-2",children:[Object(m.jsxs)("div",{style:{width:"45%"},children:[Object(m.jsx)("p",{className:"text-blue",children:a.name}),Object(m.jsx)("span",{className:"text-lowercase",children:Object(m.jsxs)("strong",{children:[0!=a.quantityParProductDepot&&oe(a.prixVente),0==a.quantityParProductDepot&&0!=a.prixParCC&&Object(m.jsx)(m.Fragment,{children:null!=a.prixqttccventedepot&&0!=a.prixqttccventedepot?oe(a.prixqttccventedepot):oe(a.prixParCC)}),0!=a.quantityParProductDepot&&" x "+a.quantityParProductDepot+" "+a.type," ",null==a.prixqttccventedepot&&0==a.prixqttccventedepot&&Object(m.jsx)(m.Fragment,{children:0!=a.qttByCCDepot&&(0==a.quantityParProductDepot?" x ":"+")+a.qttByCCDepot+"ML"})]})})]}),Object(m.jsxs)("div",{className:"text-inline text-center",children:[Object(m.jsx)("h5",{className:"mb-1",children:a.type}),Object(m.jsx)(Ti,{index:n,state:t,setState:r,product:a,setRealQttCC:o,setRealQtt:b,realQtt:j,realQttCC:d})]})]})})},_i=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0};function Ii(e){var t,n,c;for(c in t=Array.isArray(e)?[]:{},e)n=e[c],t[c]="object"===typeof n?Ii(n):n;return t}var Bi=function(e){var t,n,r=e.state,a=(e.meta,e.setState),i=(e.products,e.commandes),s=e.disabled,d=Object(c.useState)("vente-depot"),l=Object(O.a)(d,2),u=l[0],j=l[1],b=Object(c.useState)(1),h=Object(O.a)(b,2),x=(h[0],h[1],Object(c.useState)(null)),v=Object(O.a)(x,2),p=v[0],f=v[1],g=Object(c.useState)(null),y=Object(O.a)(g,2),C=y[0],N=y[1],E=Object(o.g)(),S=Object(c.useState)([]),P=Object(O.a)(S,2),q=P[0],A=P[1],w=Object(z.d)((function(e){return{fromdepots:e.fromdepots}})),D=w.fromdepots;Object(c.useEffect)((function(){A(null===i||void 0===i?void 0:i.contenu)}),[i]);var R=Object(z.c)(),T=Object(z.d)(pn("emprunters").value),V=Object(z.d)(pn("vaccinateurs").value),_=new Date,I=Object(c.useState)(_),B=Object(O.a)(I,2),M=B[0],k=B[1];Object(c.useEffect)((function(){R(vn("emprunters").fetch())}),[]);return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(qe.a,{children:[Object(m.jsxs)(qe.a.Header,{className:" bg-dark py-2 text-white d-flex justify-content-between align-items-center",children:[Object(m.jsx)("div",{style:{width:"60%"},children:"BON DE SORTIE"}),Object(m.jsx)("div",{style:{width:"30%"},className:"text-right",children:Object(m.jsxs)("select",{disabled:s,className:"form-control input-sm",onChange:function(e){j(e.target.value)},children:[Object(m.jsx)("option",{value:"vente-depot",children:"Comptant"}),Object(m.jsx)("option",{value:"vente-depot-credit",children:"Credit"}),Object(m.jsx)("option",{value:"vente-depot-vaccinateur",children:"Vaccinateur"})]})})]}),Object(m.jsxs)("div",{className:"commande-vente",children:[Object(m.jsx)(qe.a.Body,{style:{padding:12,marginTop:3,marginRight:2,marginLeft:2},children:Object(m.jsxs)("div",{style:{overflowY:"auto",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(m.jsxs)("div",{class:"form-group",children:[Object(m.jsx)("label",{children:"Date de sortie :"}),Object(m.jsx)("div",{children:Object(m.jsx)("input",{disabled:s,type:"date",onChange:function(e){return k(e.target.value)},value:M,className:"form-control"})})]}),"vente-depot-credit"===u&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("label",{children:"Crediteur:"}),Object(m.jsxs)("select",{disabled:s,className:"form-control",onChange:function(e){N(e.target.value)},children:[Object(m.jsx)("option",{value:""}),T.map((function(e){return Object(m.jsx)("option",{value:e.id,children:e.name})}))]})]}),"vente-depot-vaccinateur"===u&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("label",{children:"Vaccinateur:"}),Object(m.jsxs)("select",{className:"form-control",onChange:function(e){f(e.target.value)},children:[Object(m.jsx)("option",{children:"Selectionner un vaccinateur"}),V.map((function(e){return Object(m.jsx)("option",{value:e.id,children:e.name})}))]})]}),(null===r||void 0===r?void 0:r.length)<=0&&Object(m.jsx)("div",{className:"alert alert-success ",children:"Aucune enregistrement trouv\xe9"}),null===r||void 0===r?void 0:r.map((function(e,t){return Object(m.jsx)(Vi,{product:e,state:r,index:t,setState:a,basket:D,dispatch:R},"".concat(null===e||void 0===e?void 0:e.id,"_").concat(t))}))]})}),(null===r||void 0===r?void 0:r.length)>0&&Object(m.jsxs)(qe.a.Footer,{className:"d-flex align-items-center justify-content-between",children:[Object(m.jsx)("div",{style:{width:"30%"},children:Object(m.jsx)("h2",{className:"p-2 text-uppercase bg-primary",children:Object(m.jsxs)("strong",{"data-test-id":"total-price-orders",children:["Total:",oe(_i(null===r||void 0===r?void 0:r.map((function(e){return e.prixVente*e.quantityParProductDepot})))+_i(null===r||void 0===r||null===(t=r.state)||void 0===t?void 0:t.map((function(e){return e.prixParCC*e.qttByCCDepot}))))]})})}),Object(m.jsx)("div",{style:{width:"70%"},children:(null===r||void 0===r?void 0:r.length)>0&&Object(m.jsxs)("div",{className:"d-flex text-right align-items-end justify-content-end",children:[Object(m.jsx)("button",(n={disabled:s,className:"btn btn-green btn-sm mr-2"},Object(et.a)(n,"disabled",0===(null===r||void 0===r?void 0:r.length)),Object(et.a)(n,"onClick",(function(){var e=function(){var e=Ii(q).filter((function(e){return!r.find((function(t){return e.id===t.id}))})),t=r.filter((function(e){return!Ii(q).find((function(t){return e.id===t.id}))}));return{exist:r.map((function(e){var t=Ii(q).find((function(t){return t.id===e.id}));if(null!=t||void 0!=t){var n=0;return 1*e.quantityParProductDepot>1*t.quantityParProductDepot&&(n=1*e.quantityParProductDepot-1*t.quantityParProductDepot,e.quantityBrute=t.quantityBrute-n),1*t.quantityParProductDepot>1*e.quantityParProductDepot&&(n=1*t.quantityParProductDepot-1*e.quantityParProductDepot,e.quantityBrute=t.quantityBrute+n),1*e.quantityParProductDepot==1*t.quantityParProductDepot&&(e.quantityBrute=t.quantityBrute),e}return null})).filter((function(e){return null!=e})),added:t,missing:e}}(),t=e.exist,n=e.added,c=e.missing;R(vn("commandes").updateTransaction({id:null===i||void 0===i?void 0:i.id,contenu:r,type:"vente-depot",sorte:"sortie",vaccinateurId:p,status:"direct"===u,emprunterId:C,dateCom:null!=M?M:_,exist:t,added:n,missing:c},"update-from-depot")),E.push(F)})),Object(et.a)(n,"type","button"),Object(et.a)(n,"children","Valider l'operation"),n)),Object(m.jsx)("button",{disabled:s,className:"btn btn-danger btn-sm",onClick:function(){null===r||void 0===r||r.forEach((function(e){e.quantityParProductDepot=0,e.qttByCCDepot=0})),R(yi())},type:"button",children:Object(m.jsx)("span",{children:"Annuler"})})]})})]})]})]})})},Mi=function(e){var t,n=e.state,c=e.setState,r=e.product,a=(Object(z.d)((function(e){return e.fromdepots})),Object(z.c)(),!!(null===n||void 0===n?void 0:n.find((function(e){return(null===e||void 0===e?void 0:e.id)===r.id}))));return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(K.a.Item,{className:"mb-2 mr-3",style:{border:"1px solid gray"},children:Object(m.jsx)("div",{className:" d-flex justify-content-between align-items-center",children:Object(m.jsxs)("div",{className:" ".concat(r.id?"":"product-loading"),style:{boxShadow:r&&a?"15px 10px 15px rgba(0, 0, 0, .07)":"none"},children:[Object(m.jsxs)("div",{children:[r.name," ",Object(m.jsx)("div",{class:"badge badge-primary",children:null===r||void 0===r||null===(t=r.fournisseur)||void 0===t?void 0:t.name}),Object(m.jsx)("br",{})]})," ",Object(m.jsx)("div",{children:(null===r||void 0===r?void 0:r.id)&&Object(m.jsx)(m.Fragment,{children:a?Object(m.jsx)("button",{disabled:0===r.quantityBrute&&(0==r.quantityCC||null==r.quantityCC),className:"btn btn-danger btn-sm",onClick:function(){return function(e){c(n.filter((function(t){return t.id!==e})))}(null===r||void 0===r?void 0:r.id)},children:"Retirer"}):Object(m.jsx)("button",{disabled:0===r.quantityBrute&&(0==r.quantityCC||null==r.quantityCC),className:"btn btn-green btn-sm",onClick:function(){c(n.some((function(e){return e.id===r.id}))?n:[r].concat(Object(Vc.a)(n)))},children:"Ajouter"})})})]})})})})},ki=function(){var e=Object(o.i)().id,t=Object(c.useState)(!1),n=Object(O.a)(t,2),a=n[0],i=n[1],s=Object(z.c)(),d=Object(z.d)(pn("commandes").value),l=Object(z.d)(pn("commandes").meta),u=Object(z.d)(pn("products").value),j=Object(z.d)(pn("products").meta),b=Object(c.useState)([]),h=Object(O.a)(b,2),x=h[0],v=h[1];r.a.useEffect((function(){s(vn("commandes").get(e))}),[e]);var p=Object(c.useState)(""),f=Object(O.a)(p,2),g=f[0],y=f[1],C=Object(c.useState)([]),N=Object(O.a)(C,2),E=N[0],S=N[1];r.a.useEffect((function(){return 1==a&&(s(vn("products").fetch()),i(!1)),function(){i(!1)}}),[a]);var P=Object(c.useState)(),q=Object(O.a)(P,2),A=q[0],w=q[1];r.a.useEffect((function(){v(null!=A?Vn(u,g,A):kn(u,g))}),[g]),r.a.useEffect((function(){v(""!=g?Vn(u,g,A):In(u,A))}),[A]),r.a.useEffect((function(){s(vn("products").fetch())}),[]),r.a.useEffect((function(){}),[A]),r.a.useEffect((function(){var e;l.isFetching||S(null===(e=d[0])||void 0===e?void 0:e.contenu)}),[l]),r.a.useEffect((function(){j.isFetching||v(u)}),[j]);return Object(m.jsxs)(rc,{children:[Object(m.jsx)(dc,{title:"Editer un bon de commande",children:Object(m.jsx)(ic,{title:"Editer un bon de commande"})}),Object(m.jsx)(lc,{children:Object(m.jsx)(Ee.a,{children:Object(m.jsxs)(Se.a,{children:[Object(m.jsx)(Pe.a,{xs:6,children:Object(m.jsx)(K.a,{children:Object(m.jsxs)(qe.a,{children:[Object(m.jsx)(qe.a.Header,{className:"d-flex justify-content-between align-items-center bg-dark text-white",children:"Produits"}),Object(m.jsxs)(qe.a.Body,{children:[Object(m.jsx)("input",{type:"text",onChange:function(e){y(e.target.value)},placeholder:"Rechercher un produit",className:"form-control mb-2"}),Object(m.jsx)(oi,{model:"fournisseurs",children:Object(m.jsx)(li,{children:function(e){var t=e.data;e.meta;return Object(m.jsx)("div",{className:"my-2",children:Object(m.jsxs)("select",{className:"form-control",selected:2==A,onChange:function(e){w(e.target.value)},children:[Object(m.jsx)("option",{value:"",children:"Selectionner un fournisseur"}),t.map((function(e){return Object(m.jsx)("option",{value:e.id,children:e.name})}))]})})}})}),Object(m.jsxs)("div",{style:{overflowY:"auto",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(m.jsxs)(m.Fragment,{children:[x.map((function(e){return Object(m.jsx)(Mi,{state:E,setState:S,product:e})})),0==x.length&&"Aucune enregistrement trouv\xe9"]})," "]})]})]})})}),Object(m.jsx)(Pe.a,{xs:6,children:Object(m.jsx)(Bi,{disabled:j.isFetching,state:E,meta:l,setState:S,products:u,commandes:d[0]})})]})})})]})},Li=function(){Object(c.useEffect)((function(){window.scrollTo(0,0)}),[])},Hi=["isAuth","role","component","path"],Qi=function(e){var t=e.isAuth,n=e.role,c=e.component,r=e.path,a=Object(se.a)(e,Hi);return Li(),Object(m.jsx)(o.b,Object(_e.a)(Object(_e.a)({},a),{},{render:function(e){var a=(e.location.state||{from:{pathname:"/"}}).from;return!t||n!==Oa||r!==_&&r!==I?Object(m.jsx)("div",{children:Object(m.jsx)(Y,{title:"CBV AMBALAVAO",children:Object(m.jsx)(c,Object(_e.a)({},e))})}):Object(m.jsx)(o.a,{to:a})}}))};Qi.defaultProps={isAuth:!1,role:Oa,path:"/"};Object(z.b)((function(e){var t,n=e.auth;return{isAuth:null===n||void 0===n?void 0:n.isLoggedIn,role:(null===n||void 0===n||null===(t=n.user)||void 0===t?void 0:t.role)||""}}))(Qi);var Ui=r.a.createContext();function Yi(e){var t=e.children,n=Object(z.d)((function(e){var t,n;return{user:null===(t=e.auth)||void 0===t?void 0:t.user,auth:e.auth,isLoggedIn:null===(n=e.auth)||void 0===n?void 0:n.isLoggedIn}})),c={user:n.user,auth:n.auth,isLoggedIn:n.isLoggedIn};return Object(m.jsx)(Ui.Provider,{value:c,children:t})}function Ki(e){var t=e.children;return Object(m.jsx)(Ui.Consumer,{children:function(e){if(void 0===e)throw new Error("Data  must be used within a AuthContext");return t(e)}})}var zi=function(){var e=Object(z.c)();return Object(m.jsxs)("div",{children:[Object(m.jsx)(Yi,{children:Object(m.jsx)(Ki,{children:function(t){var n=t.auth,c=t.isLoggedIn;return Object(m.jsxs)(m.Fragment,{children:[null!=(null===n||void 0===n?void 0:n.error)&&Object(m.jsx)("div",{children:null===n||void 0===n?void 0:n.error.message}),Object(m.jsx)("h3",{children:"Se connecter"}),Object(m.jsxs)("div",{children:[c&&Object(m.jsx)(o.a,{to:"/"}),Object(m.jsx)(ur,{enableReinitialize:!0,initialValues:{username:"",password:""},validations:{},onSubmit:function(t,n){var c=t.username,r=t.password;e(function(e){var t=e.username,n=e.password;return function(){var e=Object(Gn.a)(zn.a.mark((function e(c){return zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gt.a.post(ha,{username:t,password:n}).then((function(e){e.data.token&&localStorage.setItem("user-veto",JSON.stringify(e.data)),c({type:Xn,payload:{user:e.data,success:"success operation",error:null}})})).catch((function(e){var t,n;c({type:Zn,payload:{success:null,error:null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error}})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}({username:c,password:r})),console.log(t)},children:Object(m.jsxs)(ur.Element,{children:[Object(m.jsx)(ur.Field.Input,{border:"1px",name:"username",label:"Nom d'utilisateur",placeholder:"ex:Nom d'utilisateur",mb:3}),Object(m.jsx)(ur.Field.Input,{name:"password",label:"Mot de passe",placeholder:"Mot de passe",type:"password"}),Object(m.jsx)("button",{type:"submit",mt:4,children:"Se connecter"})]})})]})]})}})}),Object(m.jsx)("div",{mt:46,divShadow:"md"})]})},Gi=function(){var e=Object(z.c)();return Object(m.jsx)("div",{children:Object(m.jsx)(Yi,{children:Object(m.jsx)(Ki,{children:function(t){var n=t.user,c=t.isLoggedIn;return Object(m.jsxs)(m.Fragment,{children:[c&&Object(m.jsx)(o.a,{to:{pathname:"/",state:{notification:{message:"Vous vous  etes connect\xe9 avec succes",type:"success"}}}}),null!=(null===n||void 0===n?void 0:n.error)&&Object(m.jsx)("div",{children:null===n||void 0===n?void 0:n.error.message}),Object(m.jsx)("h3",{children:"creer un compte"}),Object(m.jsxs)("div",{borderTop:"4px",boxShadow:"md",bg:"white",px:8,py:3,w:400,children:[c&&Object(m.jsx)(o.a,{to:"/"}),Object(m.jsx)(ur,{enableReinitialize:!0,initialValues:{username:"",password:"",role:"ROLE_VENDEUR"},validations:{},onSubmit:function(t,n){var c=t.username,r=t.password,a=t.role;e(function(e){var t=e.username,n=e.password,c=e.role;return function(){var e=Object(Gn.a)(zn.a.mark((function e(r){return zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Gt.a.post(ma,{username:t,password:n,role:c}).then((function(e){e.data.token&&localStorage.setItem("user-veto",JSON.stringify(e.data)),r({type:Wn,payload:{user:e.data,success:"success operation",error:null}})})).catch((function(e){r({type:Jn,payload:{user:null,success:null,error:e}})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),r({type:Jn,payload:{user:null,success:null,error:e.t0}});case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()}({username:c,password:r,role:a}))},children:Object(m.jsxs)(ur.Element,{children:[Object(m.jsx)(ur.Field.Input,{border:"1px",name:"username",label:"Nom d'utilisateur",placeholder:"ex: Nom d'utilisateur",mb:3}),Object(m.jsx)(ur.Field.Input,{name:"password",label:"Mot de passe",placeholder:"Mot de passe",type:"password"}),Object(m.jsx)(ur.Field.Select,{label:"Role",name:"role",valueKey:"name",options:[{id:"ROLE_VENDEUR",name:"VENDEUR"},{id:"ROLE_ADMIN",name:"ADMIN"},{id:"ROLE_SEMI_ADMIN",name:"ROLE_SEMI_ADMIN"}]}),Object(m.jsx)("div",{children:Object(m.jsx)("button",{color:"white",type:"submit",mt:4,children:"Se connecter"})})]})})]})]})}})})})},Wi=["isAuth","role","component"],Ji=function(e){e.isAuth,e.role;var t=e.component,n=Object(se.a)(e,Wi);return Li(),Object(m.jsx)(o.b,Object(_e.a)(Object(_e.a)({},n),{},{component:function(e){return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("div",{className:"",children:Object(m.jsx)("div",{children:Object(m.jsx)(t,Object(_e.a)({},e))})})})}}))};Ji.defaultProps={isAuth:!1,role:Oa};var Xi=Object(z.b)((function(e){var t,n=e.auth;return{isAuth:null===n||void 0===n?void 0:n.isLoggedIn,role:(null===n||void 0===n||null===(t=n.user)||void 0===t?void 0:t.role)||""}}))(Ji),Zi="SET_TO_MAGASIN_ITEMS",$i="ADD_TO_MAGASIN",es="REMOVE_FROM_MAGASIN",ts="CLEAR_MAGASIN",ns="ADD_QTY_MAGASIN_ITEM",cs="MINUS_QTY_MAGASIN_ITEM",rs="ADD_QTY_NUMBER_MAGASIN_ITEM",as=function(){return{type:ts}},is=function(e,t){var n=function(t){return!!(null===e||void 0===e?void 0:e.find((function(e){return(null===e||void 0===e?void 0:e.id)===t})))};return{tomagasin:e,isItemOnDepotToMagasin:n,addToMagasin:function(e){n(e.id)?t(function(e){return{type:es,payload:e}}(e.id)):t(function(e){return{type:$i,payload:e}}(e))}}},ss=function(e){var t,n=e.product,c=Object(z.d)((function(e){return e.tomagasins})),r=Object(z.c)(),a=is(c,r),i=a.isItemOnDepotToMagasin,s=a.addToMagasin,d=!!i&&i(n.id);return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(K.a.Item,{children:Object(m.jsxs)(Se.a,{className:"product-card m-2 ".concat(n.id?"":"product-loading"),style:{border:n&&d?"1px solid #a6a5a5":"",paddingTop:n&&d?"5px":"0px",boxShadow:n&&d?"0 10px 15px rgba(0, 0, 0, .07)":"none"},children:[Object(m.jsxs)(Pe.a,{xs:9,children:[Object(m.jsxs)("div",{children:[n.name," "]}),Object(m.jsx)("div",{class:"badge badge-primary",children:null===n||void 0===n||null===(t=n.fournisseur)||void 0===t?void 0:t.name})]}),Object(m.jsx)(Pe.a,{xs:3,children:n.id&&Object(m.jsx)("button",{disabled:n.quantityBrute<=0,className:" ".concat(d?"btn btn-danger btn-sm":"btn btn-green btn-sm"),onClick:function(){s&&s(n)},children:d?"Retirer":"Ajouter"})})]})})})},ds=function(e){var t=e.product,n=Object(z.c)(),c=function(e){n(function(e,t){return{type:rs,payload:{id:e,value:t}}}(t.id,e))};return Object(m.jsx)("div",{className:"basket-item-control",children:Object(m.jsxs)(Ae.c,{w:28,bg:"whitesmoke",onChange:function(e){c(e)},min:0,defaultValue:t.quantityParProduct,step:1,max:t.quantityBrute,children:[Object(m.jsx)(Ae.d,{}),Object(m.jsxs)(Ae.e,{children:[Object(m.jsx)(Ae.b,{}),Object(m.jsx)(Ae.a,{})]})]})})},os=function(e){var t=e.product,n=Object(z.c)(),c=Object(z.d)((function(e){return e.tomagasins})),r=is(c,n),a=r.isItemOnDepotToMagasin,i=r.addToMagasin,s=!!a&&a(t.id);return Object(m.jsx)("div",{children:Object(m.jsxs)("div",{className:"d-flex justify-content-between align-items-center border   mb-2 p-2",children:[Object(m.jsxs)("div",{style:{width:"45%"},children:[Object(m.jsx)("p",{children:t.name}),Object(m.jsx)("span",{children:Object(m.jsxs)("strong",{children:[" ",oe(t.prixVente)]})})]}),Object(m.jsxs)("div",{className:"text-inline",children:[Object(m.jsxs)("small",{children:[t.type," "]}),Object(m.jsx)(ds,{product:t})]}),Object(m.jsx)("div",{children:s&&Object(m.jsx)("button",{onClick:function(){i&&i(t)},className:"btn btn-danger btn-xs text-right",children:"X"})})]})})},ls=function(){var e=Object(z.d)((function(e){return{tomagasins:e.tomagasins}})).tomagasins,t=new Date,n=Object(c.useState)(t),r=Object(O.a)(n,2),a=r[0],i=r[1],s=Object(o.g)(),d=Object(z.d)(pn("commandes").meta),l=(Object(z.d)(pn("sortiedepots").meta),Object(z.c)());Object(c.useEffect)((function(){l(as()),l(vn("commandes").fetch()),l(vn("sortiedepots").fetch())}),[]);var u,j=t.getDate(),b=t.getMonth(),h=t.getFullYear(),x=t.getHours(),v=t.getMinutes(),p=t.getSeconds();return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(qe.a,{children:[Object(m.jsx)(qe.a.Header,{className:"bg-dark text-white d-flex justify-content-between align-items-center",children:Object(m.jsxs)("div",{children:["Depot to Magasin ("," ".concat(e.length," ").concat(e.length>1?"articles":"article"),")"]})}),Object(m.jsxs)(qe.a.Body,{children:[Object(m.jsxs)("div",{class:"form-group",children:[Object(m.jsx)("label",{children:"Date de sortie :"}),Object(m.jsx)("div",{children:Object(m.jsx)("input",{type:"date",onChange:function(e){return i(e.target.value)},value:a,className:"form-control"})})]}),e.length<=0&&Object(m.jsx)("div",{class:"alert alert-success ",children:'Choississez un produit sur la section "Produits" puis cliquez sur "Ajouter"'}),null===e||void 0===e?void 0:e.map((function(t,n){return Object(m.jsx)(os,{product:t,tomagasin:e,dispatch:l},"".concat(null===t||void 0===t?void 0:t.id,"_").concat(n))})),e.length>0&&Object(m.jsxs)("div",{className:"d-flex justify-content-end",children:[Object(m.jsx)("button",{className:"btn btn-green btn-sm mr-2",disabled:0===e.length,onClick:function(){l(vn("commandes").createTransaction({id:Number(d.nextId),contenu:e,type:"cva",sorte:"sortie",refSortie:"CVA_".concat(d.nextId,"_").concat(j,"_").concat(b,"_").concat(h,"_").concat(x,"_").concat(v,"_").concat(p),status:!0,dateCom:null!=a?a:t},"add-to-magasin")),l(as()),s.push(k)},type:"button",children:"Valider l'operation"}),Object(m.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(){0!==e.length&&l(as())},type:"button",children:Object(m.jsx)("span",{children:"Annuler"})})]})]}),e.length>0&&Object(m.jsx)(qe.a.Footer,{className:"d-flex justify-content-between",children:Object(m.jsx)("div",{children:Object(m.jsxs)("h3",{style:{fontSize:"14px"},children:[Object(m.jsx)("strong",{children:"Total : "}),oe((u=e.map((function(e){return e.prixVente*e.quantityParProduct})),u&&0!==(null===u||void 0===u?void 0:u.length)?u.reduce((function(e,t){return e+t}),0):0))]})})})]})})},us=function(){var e=Object(c.useState)([]),t=Object(O.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(!1),i=Object(O.a)(a,2),s=(i[0],i[1],Object(z.d)(pn("products").value)),d=Object(z.d)(pn("products").meta),o=Object(z.c)(),l=Object(c.useState)(""),u=Object(O.a)(l,2),j=u[0],b=u[1];return Object(c.useEffect)((function(){o(vn("products").fetch())}),[]),Object(c.useEffect)((function(){d.isFetching||r(s)}),[d]),Object(c.useEffect)((function(){r(kn(s,j))}),[j]),Object(m.jsx)(Ee.a,{children:Object(m.jsxs)(Se.a,{children:[Object(m.jsx)(Pe.a,{xs:6,children:Object(m.jsxs)(qe.a,{children:[Object(m.jsx)(qe.a.Header,{className:"bg-dark p-2 text-white d-flex text-uppercase justify-content-between align-items-center",children:"Produits"}),Object(m.jsxs)(qe.a.Body,{children:[Object(m.jsxs)(K.a,{children:[Object(m.jsx)("input",{type:"text",onChange:function(e){b(e.target.value)},placeholder:"Nom du produit",className:"form-control mb-2"}),Object(m.jsxs)("div",{style:{overflowY:"auto",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[n.map((function(e){return Object(m.jsx)(ss,{product:e})})),0===s.length&&"Aucune enregistrement trouv\xe9"]})]})," "]})," "]})}),Object(m.jsx)(Pe.a,{xs:6,children:Object(m.jsx)(ls,{})})]})})},js=function(){return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(rc,{children:[Object(m.jsx)(dc,{title:"Depot vers magasin",children:Object(m.jsx)(ic,{title:"Depot vers magasin"})}),Object(m.jsx)(lc,{children:Object(m.jsx)(us,{})})]})})};var bs=function(e){var t=e.model,n=e.entity,c=Object(z.c)(),r=Object(o.g)();return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(e){e.preventDefault(),window.confirm("Vous voulez vraiment supprimer le produit ?")&&(c(vn(t).deleteTransaction(n,"/delete-to-magasin")),r.goBack())},children:"Supprimer"})})},Os=function(){var e=Hn()().isoWeekday(1).startOf("week"),t=Hn()().endOf("week"),n=Object(c.useState)(e),r=Object(O.a)(n,2),a=r[0],i=r[1],s=Object(c.useState)(t),o=Object(O.a)(s,2),l=o[0],u=o[1],j=Object(c.useState)([e,t]),b=Object(O.a)(j,2),h=b[0],x=b[1],v=(Object(c.useRef)(null),Object(c.useRef)(null),Object(z.d)(pn("commandes").value)),p=Object(z.d)(pn("commandes").meta),f=Object(z.c)();Object(c.useEffect)((function(){f(function(e,t){return on("commandes",{path:"/cva?deb=".concat(e,"&fin=").concat(t),replace:!0})}(a,l))}),[a,l]),Object(c.useEffect)((function(){null!==h?(h[0]&&i(h[0]),h[1]&&u(h[1])):(i(e),u(t))}),[h]);var g=function(e){if(!e||0===(null===e||void 0===e?void 0:e.length))return 0;var t=0;return e.forEach((function(e){t+=e.prixVente*e.quantityParProduct*1})),t},y=function(e){var t=0;return null===e||void 0===e||e.forEach((function(e){t+=1*e.quantityParProduct})),t},C=[{Header:"Date de commande",Cell:function(e){var t;return Object(m.jsx)(m.Fragment,{children:de(null===(t=e.row.original)||void 0===t?void 0:t.dateCom)})}},{Header:"Produits",Cell:function(e){var t,n;return Object(m.jsx)("div",{style:{width:"100px"},children:null===(t=e.row.original)||void 0===t||null===(n=t.contenu)||void 0===n?void 0:n.map((function(e){return Object(m.jsxs)("span",{children:[e.name,","]})}))})}},{Header:"Quantit\xe9",Cell:function(e){var t;return Object(m.jsx)("div",{children:y(null===(t=e.row.original)||void 0===t?void 0:t.contenu)})}},{Header:"Total",Cell:function(e){var t;return Object(m.jsx)("div",{children:oe(g(null===(t=e.row.original)||void 0===t?void 0:t.contenu))})}},{Header:"Actions",Cell:function(e){var t,n;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(d.b,{to:"/depot/to/magasin/detail/".concat(null===(t=e.row.original)||void 0===t?void 0:t.id),className:"btn btn-green btn-sm mr-2",children:"D\xe9tails"}),Object(m.jsx)(d.b,{to:"/depot/to/magasin/edit/".concat(null===(n=e.row.original)||void 0===n?void 0:n.id),className:"btn btn-warning btn-sm mr-2",children:"Editer"}),Object(m.jsx)(bs,{model:"tomagasins",entity:e.row.original})]})}}];return Object(m.jsxs)(rc,{children:[Object(m.jsx)(dc,{title:"Historique sortie vers Magasin",children:Object(m.jsx)(ic,{title:"Historique sortie vers Magasin"})}),Object(m.jsxs)(lc,{children:[Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-lg-6",children:Object(m.jsxs)("div",{children:[Object(m.jsx)("h3",{className:"text-uppercase",children:"Historique de sortie vers Magasin"}),Object(m.jsx)("p",{children:"".concat(de(a)," ->  ").concat(de(l))})]})}),Object(m.jsx)("div",{className:"col-lg-6 text-right",children:Object(m.jsx)(Ir.a,{locale:"fr-FR",onChange:x,value:h})})," "]}),Object(m.jsx)(pr,{filter:!1,data:v.sort((function(e,t){return t.id-e.id})),meta:p,columns:C})]})," "]})};var ms=function(e){var t=e.model,n=e.entity,c=Object(z.c)(),r=Object(o.g)();return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(e){e.preventDefault(),window.confirm("Vous voulez vraiment supprimer ce commande ?")&&(c(vn(t).deleteTransaction(n,"/delete-from-magasin")),r.goBack())},children:"Supprimer"})})},hs=function(){var e=Hn()().isoWeekday(1).startOf("week"),t=Hn()().endOf("week"),n=Object(c.useState)(e),a=Object(O.a)(n,2),i=a[0],s=a[1],o=Object(c.useState)(t),l=Object(O.a)(o,2),u=l[0],j=l[1],b=Object(c.useState)([e,t]),h=Object(O.a)(b,2),x=h[0],v=h[1],p=(Object(c.useRef)(null),Object(c.useRef)(null),Object(z.d)(pn("commandes").value)),f=Object(z.d)(pn("commandes").meta),g=Object(z.c)();Object(c.useEffect)((function(){g(Pn(i,u))}),[i,u]),Object(c.useEffect)((function(){null!==x?(x[0]&&s(x[0]),x[1]&&j(x[1])):(s(e),j(t))}),[x]);var y=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0},C=function(e){return y(e.map((function(e){return e.prixVente*e.quantityParProduct})))+y(e.map((function(e){return e.prixParCC*e.qttByCC})))},N=r.a.useMemo((function(){return[{Header:"Date de commande",Cell:function(e){var t;return Object(m.jsx)(m.Fragment,{children:de(null===(t=e.row.original)||void 0===t?void 0:t.dateCom)})}},{Header:"Total",Cell:function(e){var t;return Object(m.jsx)("div",{children:oe(C(null===(t=e.row.original)||void 0===t?void 0:t.contenu))})}},{Header:"Actions",Cell:function(e){var t,n;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(d.b,{to:"/detailvendeur/".concat(null===(t=e.row.original)||void 0===t?void 0:t.id),className:"btn btn-green btn-sm mr-2",children:"D\xe9tails"}),Object(m.jsx)(d.b,{to:"/vendeur-commande/".concat(null===(n=e.row.original)||void 0===n?void 0:n.id),className:"btn btn-warning btn-sm mr-2",children:"Editer"}),Object(m.jsx)(ms,{model:"fromagasins",entity:e.row.original})]})}}]}),[]);return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{className:"bg-dark text-white p-3 d-flex justify-content-center align-items-center",children:Object(m.jsx)("h1",{className:"",children:"CABINET VETERINAIRE AMBALAVAO"})}),Object(m.jsxs)("div",{className:"p-3",children:[Object(m.jsx)("div",{class:"d-flex justify-content-end",children:Object(m.jsx)(d.b,{class:"btn btn-primary my-3",to:B,children:"Revenir en arriere"})}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-lg-6",children:Object(m.jsxs)("div",{children:[Object(m.jsx)("h3",{className:"text-uppercase",children:"Historique de vente"}),Object(m.jsx)("p",{children:"".concat(de(i)," ->  ").concat(de(u))}),Object(m.jsx)("div",{className:"bg-thead p-3 my-2",style:{width:"30%"},children:Object(m.jsxs)("h2",{children:["Recette: ",oe(function(e){var t=0;return e.map((function(e){t+=C(null===e||void 0===e?void 0:e.contenu)})),t}(p))]})})]})}),Object(m.jsx)("div",{className:"col-lg-6 text-right",children:Object(m.jsx)(Ir.a,{locale:"fr-FR",onChange:v,value:x})})," "]}),Object(m.jsx)(pr,{data:p.sort((function(e,t){return t.id-e.id})),meta:f,columns:N})]})," "]})})},xs=function(){var e=Object(z.d)(pn("products").value),t=Object(z.d)(pn("products").meta),n=Object(z.c)();Object(c.useEffect)((function(){n(vn("products").fetch())}),[]);var a=r.a.useMemo((function(){return[{Header:"Nom de l'article",accessor:"name"},{Header:"Quantit\xe9",accessor:"quantityBruteCVA"},{Header:"Reste en ML",accessor:"quantityCC",Cell:function(e){var t,n;return Object(m.jsx)("div",{children:null==(null===(t=e.row.original)||void 0===t?void 0:t.quantityCCCVA)?0:null===(n=e.row.original)||void 0===n?void 0:n.quantityCCCVA})}}]}));return Object(m.jsxs)(rc,{children:[Object(m.jsx)(dc,{title:"Etat de stock du Magasin",children:Object(m.jsx)(ic,{title:"Etat de stock du Magasin"})}),Object(m.jsxs)(lc,{children:[Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-lg-6",children:Object(m.jsx)("div",{children:Object(m.jsx)("h3",{className:"text-uppercase",children:"Etat de stock du Magasin"})})}),Object(m.jsx)("div",{className:"col-lg-6 text-right"})," "]}),Object(m.jsx)(pr,{data:e.sort((function(e,t){return t.quantityBruteCVA-e.quantityBruteCVA})),meta:t,columns:a})]})]})},vs=function(){var e=Hn()().isoWeekday(1).startOf("week"),t=Hn()().endOf("week"),n=Object(c.useState)(e),a=Object(O.a)(n,2),i=a[0],s=a[1],o=Object(c.useState)(t),l=Object(O.a)(o,2),u=l[0],j=l[1],b=(Object(c.useRef)(null),Object(c.useRef)(null),Object(z.d)(pn("commandes").value)),h=Object(z.d)(pn("commandes").meta),x=Object(c.useState)([e,t]),v=Object(O.a)(x,2),p=v[0],f=v[1],g=Object(z.c)();Object(c.useEffect)((function(){g(Pn(i,u))}),[i,u]),Object(c.useEffect)((function(){null!==p?(p[0]&&s(p[0]),p[1]&&j(p[1])):(s(e),j(t))}),[p]);var y=function(e){if(!e||0===(null===e||void 0===e?void 0:e.length))return 0;var t=0;return e.forEach((function(e){t+=1*e.prixVente})),t},C=function(e){if(!e||0===(null===e||void 0===e?void 0:e.length))return 0;var t=0;return e.forEach((function(e){t+=1*e.quantityParProduct})),t},N=function(e){if(!e||0===(null===e||void 0===e?void 0:e.length))return 0;var t=0;return e.forEach((function(e){t+=1*e.qttByCC})),t},E=r.a.useMemo((function(){return[{Header:"Date",Cell:function(e){var t;return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("span",{children:de(null===(t=e.row.original)||void 0===t?void 0:t.dateCom)})})}},{Header:"Quantit\xe9",Cell:function(e){var t;return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("span",{children:C(null===(t=e.row.original)||void 0===t?void 0:t.contenu)})})}},{Header:"Quantit\xe9 en ML",Cell:function(e){var t;return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("span",{className:"badge badge-primary",children:N(null===(t=e.row.original)||void 0===t?void 0:t.contenu)})})}},{Header:"Total",Cell:function(e){var t;return Object(m.jsx)("div",{children:oe(y(null===(t=e.row.original)||void 0===t?void 0:t.contenu))})}},{Header:"Actions",Cell:function(e){var t;return Object(m.jsx)(d.b,{className:"btn btn-sm  btn-green",to:"/magasin/detail/vente/".concat(null===(t=e.row.original)||void 0===t?void 0:t.id),children:"D\xe9tails"})}}]}),[]);return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(rc,{children:[Object(m.jsx)(dc,{title:"Historique de vente du magasin",children:Object(m.jsx)(ic,{title:"Historique de vente du magasin"})}),Object(m.jsxs)(lc,{children:[Object(m.jsxs)("div",{className:"row my-2",children:[Object(m.jsx)("div",{className:"col-lg-8",children:Object(m.jsxs)("div",{children:[i&&u&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h2",{children:"Historique de vente du magasin"}),Object(m.jsxs)("span",{children:["Du: ",de(i)," Au ",de(u)]})]})," "]})}),Object(m.jsx)("div",{className:"col-lg-4 text-right",children:Object(m.jsx)("div",{children:Object(m.jsx)(gr.a,{locale:"fr-FR",onChange:f,value:p})})})]}),Object(m.jsx)(pr,{filter:!1,data:b,meta:h,columns:E})]})]})})},ps=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0};var fs=Object(o.j)((function(e){Object(o.h)();var t,n,r,a,i,s,l,u,j,b=Object(o.i)().id,O=Object(z.d)(pn("commandes").value),h=Object(z.c)();return Object(c.useEffect)((function(){h(vn("commandes").get(b))}),[b]),Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{className:"bg-dark text-white p-3 d-flex justify-content-center align-items-center",children:Object(m.jsx)("h1",{className:"",children:"CABINET VETERINAIRE AMBALAVAO"})}),Object(m.jsxs)("div",{className:"p-3",children:[Object(m.jsx)("div",{class:"d-flex justify-content-start",children:Object(m.jsx)(d.b,{class:"btn btn-primary btn-sm ",to:L,children:"Revenir en arriere"})}),Object(m.jsxs)("div",{children:[Object(m.jsx)("p",{children:"credit-cva"==(null===(t=O[0])||void 0===t?void 0:t.type)&&Object(m.jsx)("p",{children:"Credit"})}),"credit-cva"==(null===(n=O[0])||void 0===n?void 0:n.type)&&Object(m.jsx)("div",{className:"border",children:Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h3",{children:null===(r=O[0])||void 0===r?void 0:r.emprunter.name}),Object(m.jsx)("h5",{children:null===(a=O[0])||void 0===a?void 0:a.emprunter.contact})]})}),O.length>0&&Object(m.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(m.jsxs)("div",{className:"my-2",children:[Object(m.jsxs)("h2",{className:"my-2",children:["Date : ",de(null===(i=O[0])||void 0===i?void 0:i.dateCom)]}),Object(m.jsx)(d.b,{to:"/vendeur-commande/".concat(null===(s=O[0])||void 0===s?void 0:s.id),className:"btn btn-warning btn-sm mr-2",children:"Editer le commande"})]}),Object(m.jsx)("div",{className:"d-flex justify-content-end",children:Object(m.jsxs)("div",{className:"bg-thead p-1 mb-1",children:[Object(m.jsx)("strong",{children:"Recette:"}),":",Object(m.jsx)("h3",{className:"text-lg",children:oe(ps(null===(l=O[0])||void 0===l?void 0:l.contenu.map((function(e){return e.prixVente*e.quantityParProduct})))+ps(null===(u=O[0])||void 0===u?void 0:u.contenu.map((function(e){return e.prixParCC*e.qttByCC}))))})]})})]}),Object(m.jsxs)("table",{className:"table table-bordered",children:[Object(m.jsxs)("tr",{className:"bg-thead",children:[Object(m.jsx)("td",{children:"Nom de l'article"}),Object(m.jsx)("td",{children:"Quantit\xe9"}),Object(m.jsx)("td",{children:"Sous total"})]}),O.length>0&&(null===(j=O[0])||void 0===j?void 0:j.contenu.map((function(e){return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{style:{width:"40%"},children:e.name}),Object(m.jsx)(m.Fragment,{children:0!=e.quantityParProduct&&Object(m.jsxs)("div",{className:"d-flex align-items-center py-0",children:[Object(m.jsxs)("strong",{children:[e.type,":"]}),oe(e.prixVente)," (","x"," ",e.quantityParProduct,") "," = ",oe(e.prixVente*e.quantityParProduct)]})}),"FLACON"==e.type&&Object(m.jsx)(m.Fragment,{children:0!=e.qttByCC&&Object(m.jsxs)("div",{className:"d-flex align-items-center  py-0",children:[Object(m.jsx)("strong",{children:"ML:"})," ",oe(e.prixParCC)," ","x"," ",0!=e.qttyspecificmirror?e.qttyspecificmirror+" Dose":e.qttByCC+" Ml"," "," = "," ",oe(e.prixParCC*e.qttByCC)]})}),Object(m.jsx)("td",{children:oe(e.prixVente*e.quantityParProduct+e.prixParCC*e.qttByCC)})]})})))]})]})," "]})," "]})})),gs=(n(331),n(654));n(670),n(655),n(671),n(660),n(321),n(613),n(322);n(105);n(656);var ys=["isAuth","role","component"],Cs=function(e){e.isAuth,e.role;var t=e.component,n=Object(se.a)(e,ys);return Li(),Object(m.jsx)(o.b,Object(_e.a)(Object(_e.a)({},n),{},{component:function(e){return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(Y,{title:"CBV AMBALAVAO",children:Object(m.jsx)(t,Object(_e.a)({},e))})})}}))};Cs.defaultProps={isAuth:!1,role:Oa};var Ns=Object(z.b)((function(e){var t,n=e.auth;return{isAuth:null===n||void 0===n?void 0:n.isLoggedIn,role:(null===n||void 0===n||null===(t=n.user)||void 0===t?void 0:t.role)||""}}))(Cs),Es=function(e){var t=e.product,n=e.index,c=e.state,r=e.setState,a=(Object(z.c)(),function(e){!function(e,t,n){var a=Object(Vc.a)(c);a[e]=Object(_e.a)(Object(_e.a)({},a[e]),{},Object(et.a)({},t,n)),r(a)}(n,"quantityParProduct",e)});return Object(m.jsx)("div",{className:"basket-item-control",children:Object(m.jsxs)(Ae.c,{w:28,bg:"whitesmoke",onChange:function(e){a(Number(e))},min:0,defaultValue:t.quantityParProduct,step:1,children:[Object(m.jsx)(Ae.d,{}),Object(m.jsxs)(Ae.e,{children:[Object(m.jsx)(Ae.b,{}),Object(m.jsx)(Ae.a,{})]})]})})},Ss=function(e){var t=e.product,n=e.index,c=e.isItemOnApprov,r=(e.addToApprov,e.state),a=e.setState;Object(z.c)(),!!c&&c(t.id);return Object(m.jsx)("div",{children:Object(m.jsxs)("div",{className:"d-flex justify-content-between align-items-start border   mb-2 p-2",children:[Object(m.jsx)("div",{style:{width:"65%"},children:Object(m.jsxs)("table",{border:"1",children:[Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"Nom de l'article : "}),Object(m.jsx)("td",{children:null===t||void 0===t?void 0:t.name})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"Prix unitaire:"}),Object(m.jsx)("td",{children:oe(t.prixFournisseur)})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"Montant HT:"}),Object(m.jsx)("td",{children:oe(t.prixFournisseur*t.quantityParProduct)})]})]})}),Object(m.jsx)("div",{className:"d-flex mt-3",children:Object(m.jsx)(Es,{product:t,index:n,state:r,setState:a})}),Object(m.jsx)("div",{children:Object(m.jsx)("button",{onClick:function(){return function(e){a(r.filter((function(t){return t.id!==e})))}(null===t||void 0===t?void 0:t.id)},className:"btn btn-danger btn-xs text-right",children:"X"})})]})})};var Ps=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0},qs=function(e,t){return Ps(e)*t/100},As=function(e,t){return Ps(e)-qs(e,t)},ws=function(e){var t=e.state,n=e.meta,r=e.setState,a=e.approv,i=e.disabled,s=Object(c.useState)(null===a||void 0===a?void 0:a.remise),d=Object(O.a)(s,2),l=d[0],u=d[1],j=Object(c.useState)(null===a||void 0===a?void 0:a.dateEcheance),b=Object(O.a)(j,2),h=b[0],x=b[1],v=Object(c.useState)(null===a||void 0===a?void 0:a.dateApprov),p=Object(O.a)(v,2),f=p[0],g=p[1],y=Object(c.useState)(null===a||void 0===a?void 0:a.contenu),C=Object(O.a)(y,2),N=C[0],E=(C[1],Object(c.useState)(null===a||void 0===a?void 0:a.remarque)),S=Object(O.a)(E,2),P=S[0],q=S[1],A=Object(c.useState)(""),w=Object(O.a)(A,2),D=(w[0],w[1],Object(c.useState)(null===a||void 0===a?void 0:a.typePaye)),F=Object(O.a)(D,2),R=F[0],T=F[1],_=Object(z.c)(),I=Object(o.g)();function B(e){var t,n,c;for(c in t=Array.isArray(e)?[]:{},e)n=e[c],t[c]="object"===typeof n?B(n):n;return t}return Object(m.jsxs)(m.Fragment,{children:[" ",Object(m.jsxs)(qe.a,{children:[Object(m.jsx)(qe.a.Header,{className:"d-flex justify-content-between align-items-center bg-dark text-white",children:Object(m.jsxs)("div",{children:["Approvisionenement ("," ".concat(null===t||void 0===t?void 0:t.length," ").concat((null===t||void 0===t?void 0:t.length)>1?"articles":"article"),")"]})}),Object(m.jsxs)(qe.a.Body,{style:{height:"500px",maxHeight:"500px",overflowY:"auto",overflowX:"hidden"},children:[Object(m.jsxs)("div",{class:"form-group",children:[Object(m.jsx)("label",{children:"Date de l'approvisionnement :"}),Object(m.jsx)("div",{children:Object(m.jsx)("input",{type:"date",disabled:i,onChange:function(e){return g(e.target.value)},value:f,className:"form-control"})})]}),!n.isFetching&&(null===t||void 0===t?void 0:t.length)<=0&&Object(m.jsxs)(m.Fragment,{children:[" ",Object(m.jsx)("div",{class:"alert alert-success ",children:"Aucune enregistrement trouv\xe9 !!!"})]}),!n.isFetching&&(null===t||void 0===t?void 0:t.length)<=0&&Object(m.jsx)("div",{className:"d-flex justify-content-end",children:Object(m.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(){return r(null===a||void 0===a?void 0:a.contenu)},type:"button",children:Object(m.jsx)("span",{children:"Annuler"})})}),n.isFetching&&Object(m.jsx)("p",{children:"Chargement en cours ..."}),null===t||void 0===t?void 0:t.map((function(e,n){return Object(m.jsx)(Ss,{product:e,state:t,index:n,setState:r,dispatch:_},"".concat(null===e||void 0===e?void 0:e.id,"_").concat(n))})),(null===t||void 0===t?void 0:t.length)>0&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"d-flex justify-content-end align-items-center my-3 ",children:Object(m.jsxs)("table",{children:[Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"REMISE :"}),Object(m.jsx)("td",{children:Object(m.jsx)("input",{type:"number",className:"form-control",placeholder:"Remise",min:0,disabled:i,value:l,max:100,onChange:function(e){u(e.target.value)}})})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"PAIEMENT LE :"}),Object(m.jsx)("td",{children:Object(m.jsx)("input",{type:"date",disabled:i,onChange:function(e){return x(e.target.value)},value:h,className:"form-control"})})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"TYPE DE PAIEMENT:"}),Object(m.jsx)("td",{children:Object(m.jsxs)("select",{className:"form-control",onChange:function(e){T(e.target.value)},children:[Object(m.jsx)("option",{value:"espece",selected:!0,children:"ESPECE"}),Object(m.jsx)("option",{value:"boa",children:"CHEQUE - BOA"}),Object(m.jsx)("option",{value:"bni",children:"CHEQUE - BNI"}),Object(m.jsx)("option",{value:"MVola",children:"VIREMENT - MVola"}),Object(m.jsx)("option",{value:"OrangeMoney",children:"VIREMENT - ORANGE MONEY"})]})})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"REMARQUE :"}),Object(m.jsx)("td",{children:Object(m.jsx)("textarea",{disabled:i,className:"form-control",onChange:function(e){q(e.target.value)},placeholder:"Ecriver ici quelque chose d'autre \xe0 savoir sur l'approvisionnement",children:P})})]})]})}),Object(m.jsxs)("div",{className:"d-flex flex-column  my-3 ",children:[" ",Object(m.jsxs)("p",{className:"approvisionnement-total-amount",children:["Total HT:",Object(m.jsx)("strong",{children:Object(m.jsx)(Or.a,{value:Ps(null===t||void 0===t?void 0:t.map((function(e){return e.prixFournisseur*e.quantityParProduct}))),displayType:"text",thousandSeparator:!0,suffix:"Ar",renderText:function(e,t){return Object(m.jsx)("div",Object(_e.a)(Object(_e.a)({},t),{},{children:e}))}})})]}),Object(m.jsxs)("p",{className:"approvisionnement-total-amount",children:["Remise:",Object(m.jsx)("strong",{children:Object(m.jsx)(Or.a,{value:qs(null===t||void 0===t?void 0:t.map((function(e){return e.prixFournisseur*e.quantityParProduct})),l),displayType:"text",thousandSeparator:!0,suffix:"Ar",renderText:function(e,t){return Object(m.jsx)("div",Object(_e.a)(Object(_e.a)({},t),{},{children:e}))}})})]}),Object(m.jsxs)("p",{className:"approvisionnement-total-amount",children:["Total avec remise :",Object(m.jsx)("strong",{children:Object(m.jsx)(Or.a,{value:As(null===t||void 0===t?void 0:t.map((function(e){return e.prixFournisseur*e.quantityParProduct})),l),displayType:"text",thousandSeparator:!0,suffix:"Ar",renderText:function(e,t){return Object(m.jsx)("div",Object(_e.a)(Object(_e.a)({},t),{},{children:e}))}})})]}),Object(m.jsx)("p",{children:"Arr\xeat\xe9 \xe0 la somme de "}),Object(m.jsx)("p",{className:"text-uppercase",children:Object(m.jsxs)("strong",{children:[Object(br.NumberToLetter)(As(null===t||void 0===t?void 0:t.map((function(e){return e.prixFournisseur*e.quantityParProduct})),l))," ","ARIARY"]})})]})]})]}),Object(m.jsx)(qe.a.Footer,{children:Object(m.jsxs)("div",{className:"d-flex justify-content-end",children:[Object(m.jsx)("button",{disabled:i,className:"btn btn-green btn-sm mr-2",onClick:function(){var e=function(){var e=B(N).filter((function(e){return!t.find((function(t){return e.id===t.id}))})),n=t.filter((function(e){return!B(N).find((function(t){return e.id===t.id}))}));return{exist:t.map((function(e){var t=B(N).find((function(t){return t.id===e.id}));if(null!=t||void 0!=t){var n=0;return 1*e.quantityParProduct>1*t.quantityParProduct&&(n=1*e.quantityParProduct-1*t.quantityParProduct,e.quantityBrute=t.quantityBrute+n),1*t.quantityParProduct>1*e.quantityParProduct&&(n=1*t.quantityParProduct-1*e.quantityParProduct,e.quantityBrute=t.quantityBrute-n),1*e.quantityParProduct==1*t.quantityParProduct&&(e.quantityBrute=t.quantityBrute),e}})).filter((function(e){return null!=e})),added:n,missing:e}}(),n=e.exist,c=e.added,r=e.missing;_(vn("approvis").updateTransaction({id:null===a||void 0===a?void 0:a.id,contenu:t,totalht:Ps(t.map((function(e){return e.prixFournisseur*e.quantityParProduct}))),remise:l,total:As(t.map((function(e){return e.prixFournisseur*e.quantityParProduct})),l),dateApprov:f,dateEcheance:h,remarque:P,typePaye:R,exist:n,missing:r,added:c},"update-facture")),I.push(V)},type:"button",children:"Valider l'operation"}),Object(m.jsx)("button",{disabled:i,className:"btn btn-danger btn-sm",onClick:function(){return r(null===a||void 0===a?void 0:a.contenu)},type:"button",children:Object(m.jsx)("span",{children:"Annuler"})})]})})]})]})},Ds=function(e){var t,n=e.product,c=e.state,r=e.setState,a=(Object(z.d)((function(e){return e.approvisionnements})),Object(z.c)(),!!(null===c||void 0===c?void 0:c.find((function(e){return(null===e||void 0===e?void 0:e.id)===n.id}))));return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(K.a.Item,{children:Object(m.jsxs)(Se.a,{className:"product-card m-2 ".concat(n.id?"":"product-loading"),style:{border:n&&a?"1px solid #a6a5a5":"",boxShadow:n&&a?"0 10px 15px rgba(0, 0, 0, .07)":"none"},children:[Object(m.jsx)(Pe.a,{xs:9,children:Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("p",{children:null===n||void 0===n?void 0:n.name}),Object(m.jsx)("div",{class:"badge badge-primary",children:null===n||void 0===n||null===(t=n.fournisseur)||void 0===t?void 0:t.name}),Object(m.jsx)("p",{children:Object(m.jsxs)("strong",{children:[" ",oe(null===n||void 0===n?void 0:n.prixFournisseur)]})})]})}),Object(m.jsx)(Pe.a,{xs:3,children:(null===n||void 0===n?void 0:n.id)&&Object(m.jsx)(m.Fragment,{children:a?Object(m.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(){return function(e){r(c.filter((function(t){return t.id!==e})))}(null===n||void 0===n?void 0:n.id)},children:"Retirer"}):Object(m.jsx)("button",{className:"btn btn-green btn-sm",onClick:function(){r(c.some((function(e){return e.id===n.id}))?c:[n].concat(Object(Vc.a)(c)))},children:"Ajouter"})})})]})})})},Fs=function(){var e=Object(o.i)().id,t=Object(c.useState)(!1),n=Object(O.a)(t,2),a=n[0],i=n[1],s=(Object(z.c)(),Object(z.d)(pn("approvis").value)),d=Object(z.d)(pn("approvis").meta),l=Object(z.d)((function(e){return e.products.items})),u=Object(z.d)(pn("products").meta),j=Object(c.useState)([]),b=Object(O.a)(j,2),h=b[0],x=b[1];r.a.useEffect((function(){dispatch(vn("products").get(e))}),[]);var v=Object(c.useState)(""),p=Object(O.a)(v,2),f=p[0],g=p[1],y=Object(c.useState)([]),C=Object(O.a)(y,2),N=C[0],E=C[1];Object(c.useEffect)((function(){return 1==a&&(dispatch(vn("products").fetch()),i(!1)),function(){i(!1)}}),[a]);var S=Object(c.useState)(),P=Object(O.a)(S,2),q=P[0],A=P[1];return Object(c.useEffect)((function(){x(null!=q?Vn(l,f,q):kn(l,f))}),[f]),Object(c.useEffect)((function(){x(""!=f?Vn(l,f,q):In(l,q))}),[q]),Object(c.useEffect)((function(){dispatch(vn("products").fetch())}),[]),r.a.useEffect((function(){var e;d.isFetching&&E(null===(e=s[s.length-1])||void 0===e?void 0:e.contenu)}),[d]),Object(c.useEffect)((function(){u.isFetching||x(l)}),[u]),console.log(s),Object(m.jsxs)(rc,{children:[Object(m.jsx)(dc,{title:"Edition de facture",children:Object(m.jsx)(ic,{title:"Edition de facture"})}),Object(m.jsx)(lc,{children:Object(m.jsx)(Ee.a,{children:Object(m.jsxs)(Se.a,{children:[Object(m.jsx)(Pe.a,{xs:5,children:Object(m.jsx)(K.a,{children:Object(m.jsxs)(qe.a,{children:[Object(m.jsx)(qe.a.Header,{className:"d-flex justify-content-between align-items-center bg-dark text-white",children:"Produits"}),Object(m.jsxs)(qe.a.Body,{children:[Object(m.jsx)("input",{type:"text",onChange:function(e){g(e.target.value)},placeholder:"Rechercher un produit",className:"form-control mb-2"}),Object(m.jsx)(oi,{model:"fournisseurs",children:Object(m.jsx)(li,{children:function(e){var t=e.data;e.meta;return Object(m.jsx)("div",{className:"my-2",children:Object(m.jsxs)("select",{className:"form-control",selected:2==q,onChange:function(e){A(e.target.value)},children:[Object(m.jsx)("option",{value:"",children:"Selectionner un fournisseur"}),t.map((function(e){return Object(m.jsx)("option",{value:e.id,children:e.name})}))]})})}})}),Object(m.jsxs)("div",{style:{overflowY:"auto",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(m.jsxs)(m.Fragment,{children:[h.map((function(e){return Object(m.jsx)(Ds,{state:N,setState:E,product:e})})),0==h.length&&"Aucune enregistrement trouv\xe9"]})," "]})]})]})})}),Object(m.jsx)(Pe.a,{xs:7,children:Object(m.jsx)(ws,{disabled:u.isFetching,state:N,meta:d,setState:E,products:l,approv:s[s.length-1]})})]})})})]})},Rs=function(e){var t,n=e.key,r=e.product,a=Object(z.d)((function(e){return e.fromdepots})),i=Object(z.c)(),s=Ni(a,i),d=s.isItemFromDepot,o=s.addFromDepot,l=!!d&&d(r.id);Object(c.useEffect)((function(){l||(r.qttByCC=0,r.quantityParProduct=0)}),[l]);return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(K.a.Item,{style:{width:"100%"},children:Object(m.jsxs)(Se.a,{className:" ".concat(r.id?"":"product-loading"),style:{boxShadow:r&&l?"15px 10px 15px rgba(0, 0, 0, .07)":"none"},children:[Object(m.jsx)(Pe.a,{xs:9,children:Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("p",{children:null===r||void 0===r?void 0:r.name}),Object(m.jsx)("div",{class:"badge badge-primary",children:null===r||void 0===r||null===(t=r.fournisseur)||void 0===t?void 0:t.name})]})}),Object(m.jsx)(Pe.a,{xs:3,children:(null===r||void 0===r?void 0:r.id)&&Object(m.jsx)("button",{disabled:0===r.quantityBrute,className:"mt-3 ".concat(l?"btn btn-danger btn-sm":"btn btn-green btn-sm"),onClick:function(){o&&o(r)},children:l?"Retirer":"Ajouter"})})]})},n)})},Ts=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0},Vs=function(e){e.setRegenerate;var t=Object(c.useState)("vente-depot"),n=Object(O.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(1),s=Object(O.a)(i,2),d=(s[0],s[1],Object(c.useState)(null)),l=Object(O.a)(d,2),u=l[0],j=l[1],b=Object(c.useState)(null),h=Object(O.a)(b,2),x=h[0],v=h[1],p=Object(o.g)(),f=Object(z.d)((function(e){return{fromdepots:e.fromdepots}})).fromdepots,g=Object(z.c)(),y=Object(z.d)(pn("emprunters").value),C=Object(z.d)(pn("vaccinateurs").value),N=(Object(z.d)(pn("commandes").meta),Object(z.d)(pn("commandes").value),new Date),P=Object(c.useState)(N),q=Object(O.a)(P,2),A=q[0],w=q[1];Object(c.useEffect)((function(){g(yi()),g(vn("commandes").fetch()),g(vn("emprunters").fetch()),g(vn("vaccinateurs").fetch())}),[]);return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(qe.a,{children:[Object(m.jsxs)(qe.a.Header,{className:" bg-dark py-2 text-white d-flex justify-content-between align-items-center",children:[Object(m.jsx)("div",{style:{width:"60%"},children:"BON DE SORTIE "}),Object(m.jsx)("div",{style:{width:"30%"},className:"text-right",children:Object(m.jsxs)(gc.a,{onChange:function(e){a(e.target.value)},children:[Object(m.jsx)("option",{value:"vente-depot",selected:!0,children:"Comptant"}),Object(m.jsx)("option",{value:"vente-depot-credit",children:"Credit"}),Object(m.jsx)("option",{value:"vente-depot-vaccinateur",children:"Vaccinateur"})]})})]}),Object(m.jsxs)("div",{className:"commande-vente",children:[Object(m.jsx)(qe.a.Body,{style:{padding:12,marginTop:3,marginRight:2,marginLeft:2},children:Object(m.jsxs)("div",{style:{overflowY:"auto",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(m.jsxs)("div",{class:"form-group",children:[Object(m.jsx)("label",{children:"Date de sortie :"}),Object(m.jsx)("div",{children:Object(m.jsx)("input",{type:"date",onChange:function(e){return w(e.target.value)},value:A,className:"form-control"})})]}),"vente-depot-credit"===r&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("label",{children:"Nom du persone:"}),Object(m.jsxs)("select",{className:"form-control mb-2",onChange:function(e){v(e.target.value)},children:[Object(m.jsx)("option",{children:"Selectionner une personne"}),y.map((function(e){return Object(m.jsx)("option",{value:e.id,children:e.name})}))]})]}),"vente-depot-vaccinateur"===r&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("label",{children:"Nom du vaccinateur:"}),Object(m.jsxs)("select",{className:"form-control mb-2",onChange:function(e){j(e.target.value)},children:[Object(m.jsx)("option",{children:"Selectionner un vaccinateur"}),C.map((function(e){return Object(m.jsx)("option",{value:e.id,children:e.name})}))]})]}),(null===f||void 0===f?void 0:f.length)<=0&&Object(m.jsx)("div",{className:"alert alert-success",children:'Choississez un produit sur la section "Produits" puis cliquez sur "Ajouter"'}),null===f||void 0===f?void 0:f.map((function(e,t){return Object(m.jsx)(Ei,{product:e,basket:f,dispatch:g},"".concat(null===e||void 0===e?void 0:e.id,"_").concat(t))}))]})}),(null===f||void 0===f?void 0:f.length)>0&&Object(m.jsxs)(qe.a.Footer,{className:"d-flex align-items-center justify-content-between",children:[Object(m.jsx)("div",{style:{width:"30%"},children:Object(m.jsx)("h2",{className:"p-2 text-uppercase bg-primary",children:Object(m.jsxs)("strong",{"data-test-id":"total-price-orders",children:["Total:",oe(Ts(f.map((function(e){return e.prixVente*e.quantityParProductDepot})))+Ts(f.map((function(e){return e.prixParCC*e.qttByCCDepot}))))]})})}),Object(m.jsx)("div",{style:{width:"70%"},children:f.length>0&&Object(m.jsxs)("div",{className:"d-flex text-right align-items-end justify-content-end",children:[Object(m.jsx)("button",{className:"btn btn-green btn-sm mr-2",disabled:0===f.length,onClick:function(){if(null!=A&&""!=A){for(var e=0;e<f.length;++e)if(0==f[e].quantityParProductDepot)return void alert("Commande non conforme:"+f[e].name+" : 0");f.forEach((function(e){var t;delete e.busy,delete e.pendingCreate,Si(t=e)?t.quantityBrute-=t.quantityParProductDepot:Pi(t)&&(t.quantityBrute=0),0!=e.condmldepot&&0!=e.qttccpventedepot?function(e){Ri(e)}(e):Fi(e)})),g(vn("commandes").createTransaction({id:Math.floor(Date.now()/1e3),contenu:f,type:r,sorte:"sortie",vaccinateurId:u,status:"vente-depot"===r,emprunterId:x,dateCom:null!=A||""!=A?A:N},"add-from-depot")),g(yi()),"vente-depot-credit"===r?p.push(E):"vente-depot-vaccinateur"===r?p.push(S):p.push(F)}else alert("Vous avez oubli\xe9 de mettre la date de l'operation !!!")},type:"button",children:"Valider l'operation"}),Object(m.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(){f.forEach((function(e){e.quantityParProductDepot=0,e.qttByCCDepot=0})),g(yi())},type:"button",children:Object(m.jsx)("span",{children:"Annuler"})})]})})]})]})]})})},_s=function(){var e=Object(z.d)(pn("products").value),t=Object(z.d)(pn("products").meta),n=Object(z.c)(),r=Object(c.useState)(""),a=Object(O.a)(r,2),i=a[0],s=a[1],d=Object(c.useState)(2),o=Object(O.a)(d,2),l=o[0],u=o[1],j=Object(c.useState)(!1),b=Object(O.a)(j,2),h=b[0],x=b[1],v=(Object(c.useRef)(null),Object(c.useRef)(null),Object(c.useState)([])),p=Object(O.a)(v,2),f=p[0],g=p[1],y=(Object(z.d)(pn("commandes").value),Object(z.d)(pn("commandes").meta),Object(c.useState)(new Date)),C=Object(O.a)(y,2),N=C[0],E=C[1],S=Object(c.useState)(new Date),P=Object(O.a)(S,2),q=P[0],A=P[1];Object(c.useEffect)((function(){n(Pn(N,q))}),[N,q]),Object(c.useEffect)((function(){E(new Date),A(new Date),n(vn("products").fetch())}),[]),Object(c.useEffect)((function(){return 1==h&&(n(vn("products").fetch()),x(!1)),function(){x(!1)}}),[h]),Object(c.useEffect)((function(){t.isFetching||g(e)}),[t]),Object(c.useEffect)((function(){g(null!=l?Vn(e,i,l):kn(e,i))}),[i]),Object(c.useEffect)((function(){g(""!=i?Vn(e,i,l):In(e,l))}),[l]);return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(Ee.a,{fluid:!0,children:Object(m.jsx)("div",{className:"py-2",children:Object(m.jsxs)(Se.a,{children:[Object(m.jsx)(Pe.a,{xs:6,children:Object(m.jsxs)(qe.a,{className:"mt-2",children:[Object(m.jsxs)(qe.a.Header,{className:"bg-dark p-2 text-white d-flex text-uppercase justify-content-between align-items-center",children:[Object(m.jsx)("div",{style:{width:"80%"},children:"Produits"}),Object(m.jsx)("div",{children:Object(m.jsx)("button",{className:"btn btn-green btn-sm",onClick:function(){s(""),x(!0)},children:"Mettre \xe0 jour"})})]}),Object(m.jsxs)(qe.a.Body,{children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("input",{type:"text",onChange:function(e){s(e.target.value)},placeholder:"Nom du produit",className:"form-control mb-2"})," ",Object(m.jsx)(Nn,{model:"fournisseurs",children:Object(m.jsx)(En,{children:function(e){var t=e.data;e.meta;return Object(m.jsx)("div",{className:"my-2",children:Object(m.jsxs)(gc.a,{style:{backgroundColor:"white"},onChange:function(e){u(e.target.value)},children:[Object(m.jsx)("option",{children:"Tous les fournisseurs"}),t.map((function(e){return Object(m.jsx)("option",{value:e.id,selected:2==e.id,children:e.name})}))]})})}})})]}),Object(m.jsx)(K.a,{children:Object(m.jsxs)("div",{style:{overflowY:"auto",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(m.jsxs)("div",{class:"d-flex justify-content-start flex-wrap",children:[f.map((function(e){return Object(m.jsx)(Rs,{product:e})})),0==f.length&&"Aucune enregistrement trouv\xe9"]})," "]})})]})]})}),Object(m.jsx)(Pe.a,{xs:6,children:Object(m.jsx)("div",{className:" py-2",children:Object(m.jsx)(Vs,{setRegenerate:x})})})]})})})})},Is=function(){return Object(m.jsxs)(rc,{children:[Object(m.jsx)(dc,{title:"Bon de sortie du d\xe9pot",children:Object(m.jsx)(ic,{title:"Bon de sortie du d\xe9pot"})}),Object(m.jsxs)(lc,{children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("button",{disabled:!0,className:"btn btn-green btn-xs ml-3 mb-2",children:"Ajouter"})," ",": ",Object(m.jsx)("span",{children:"Le produit n'a pas de stock disponible"}),Object(m.jsx)("button",{className:"btn btn-green btn-xs ml-3 mb-2",children:"Mettre \xe0 jour"})," ",": ",Object(m.jsx)("span",{children:"Mettre \xe0 jour la liste des produits"})]}),Object(m.jsx)("select",{disabled:!0,className:"  ml-3 bg-white py-2 input-xs",children:Object(m.jsx)("option",{children:"Comptant"})})," ",": ",Object(m.jsx)("span",{children:"Choix du mode sortie ( Comptant,credit,vaccinateur)"}),Object(m.jsx)(_s,{})]})]})},Bs=function(e,t){var n;return Object(Vc.a)(new Set((n=[]).concat.apply(n,Object(Vc.a)(e.map((function(e){return e[t]}))))))},Ms=function(e,t,n,c){return e.filter((function(e){var r=new Date(e[t]);return Hn()(r).isBetween(n,c,"days","[]")}))},ks=function(e){var t=e.date,n=new Date(t).toLocaleString("fr-FR",{weekday:"short"}),c=new Date(t).getDate();return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("td",{style:{height:"100%"},className:"sam."==n?" bg-warning text-white text-center mr-2":"bg-dark text-center mr-2",children:c})})},Ls=function(e){var t=e.flat,n=(e.gr,e.id),c=t.filter((function(e){return e.id==n})),r=(void 0!=c[c.length-1]&&c[c.length-1],0);return r=c?c.map((function(e){return 1*e.quantityParProduct})).reduce((function(e,t){return e+t}),0):0,Object(m.jsx)("td",{className:"text-center p-1",children:0!=r?r:"-"})},Hs=function(){return Object(m.jsx)("td",{className:"text-center p-1",children:Object(m.jsx)("div",{children:Object(m.jsx)("span",{className:"text-center  p-1",children:"-"})})})},Qs=function(e){var t=e.flat,n=(e.gr,e.id),c=t.filter((function(e){return e.id==n})),r=void 0!=c[c.length-1]?c[c.length-1]:{},a={bruteCva:r.hasOwnProperty("id")?r.quantityBrute:0,ccCva:r.hasOwnProperty("id")?r.quantityCC:0};return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("td",{className:"text-center",children:0!=c.length?a.bruteCva:0})})},Us=function(){var e=Object(o.h)(),t=function(t){return e.pathname==t};return Object(m.jsxs)("div",{className:"d-flex justify-content-center align-items-center",children:[Object(m.jsx)(d.b,{className:"btn btn-".concat(t("/")?"success":"default"," text-uppercase mr-2"),to:"/",children:"Journal Vente du magasin"}),Object(m.jsx)(d.b,{className:"btn btn-".concat(t(f)?"success":"default"," text-uppercase mr-2"),to:f,children:"Journal de facturation"}),Object(m.jsx)(d.b,{className:"btn btn-".concat(t(p)?"success":"default"," text-uppercase mr-2"),to:p,children:"Journal de Vente CBV"}),Object(m.jsx)(d.b,{className:"btn btn-".concat(t(v)?"success":"default"," text-uppercase mr-2"),to:v,children:"Journal de Depot vers magasin"})]})};function Ys(e){return e[e.length-1]}var Ks=function(){var e=Hn()().isoWeekday(1).startOf("week"),t=Hn()().endOf("week"),n=Object(c.useState)([]),r=Object(O.a)(n,2),a=r[0],i=r[1],s=Object(c.useState)([]),d=Object(O.a)(s,2),o=(d[0],d[1]),l=Object(c.useState)(e),u=Object(O.a)(l,2),j=u[0],b=u[1],h=Object(c.useState)(t),x=Object(O.a)(h,2),v=x[0],p=x[1],f=Object(c.useState)([e,t]),g=Object(O.a)(f,2),y=g[0],C=g[1],N=Object(c.useState)([]),E=Object(O.a)(N,2),S=E[0],P=E[1],q=Object(c.useState)([]),A=Object(O.a)(q,2),w=(A[0],A[1],Object(z.d)(pn("approvis").value)),D=Object(z.d)(pn("approvis").meta),F=Object(z.c)();Object(c.useEffect)((function(){null!==y?(y[0]&&b(y[0]),y[0]&&p(y[1])):(b(e),p(t))}),[y]),Object(c.useEffect)((function(){var e;j&&v&&(i(function(e,t){for(var n=e.clone(),c=[];n.isSameOrBefore(t);)c.push(n.format("YYYY-MM-DD")),n.add(1,"days");return c}(Hn()(j),Hn()(v))),o(function(e,t){for(var n=[];t.diff(e,"months")>=0;)n.push(e.format("MMMM YYYY")),e.add(1,"month");return n}(Hn()(j),Hn()(v))),F((e=v,on("approvis",{path:"/get-approv-by-date?deb=".concat(j,"&fin=").concat(e),replace:!0}))))}),[j,v]),Object(c.useEffect)((function(){D.isFetching||P(Ms(w,"dateApprov",j,v))}),[D]);var R,T,V=Bs(S,"contenu").reduce((function(e,t){var n=t.id,c=t.name,r=t.type,a=t.category,i=t.fournisseur,s=t.quantityBrute,d=t.quantityCC,o=t.quantityParProduct,l=e.find((function(e){return e.id===n}));return l?l.quantityParProduct=parseInt(l.quantityParProduct)+parseInt(o):e.push({id:n,name:c,type:r,category:a,fournisseur:i,quantityBrute:s,quantityCC:d,quantityParProduct:o}),e}),[]).sort((function(e,t){return e.id>t.id})),_=function(e,t){var n;return Object(Vc.a)(new Set((n=[]).concat.apply(n,Object(Vc.a)(e.map((function(e){return e[t]}))))))},I=(R="dateApprov",S.reduce((function(e,t){return T?(e[t[R][T]]=e[t[R][T]]||[]).push(t):(e[t[R]]=e[t[R]]||[]).push(t),e}),{}));return Object(m.jsxs)(rc,{children:[Object(m.jsx)(dc,{title:"Journal de facturation",children:Object(m.jsx)(ic,{title:"Journal de facturation"})}),Object(m.jsxs)(lc,{children:[Object(m.jsx)(Us,{}),Object(m.jsxs)("div",{className:"date-range",children:[Object(m.jsxs)("div",{className:"d-flex justify-content-between my-3",children:[Object(m.jsxs)("div",{children:[j&&v&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h2",{class:"text-uppercase my-1",children:"Journal de facturation "}),Object(m.jsxs)("span",{children:["Du: ",de(j)," Au ",de(v)]})]})," "]}),Object(m.jsx)("div",{children:Object(m.jsx)(Ir.a,{locale:"fr-FR",onChange:C,value:y})})]}),Object(m.jsx)("div",{className:"bg-white py-3 px-2 mb-2",children:Object(m.jsx)("div",{className:"table-responsive",children:Object(m.jsxs)("table",{class:"table",children:[Object(m.jsxs)("tr",{className:"sticky-this",children:[Object(m.jsx)("td",{children:"Produit"}),a.map((function(e){return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(ks,{date:e})})})),Object(m.jsx)("td",{className:"bg-thead text-uppercase text-center",children:"Total"}),Object(m.jsx)("td",{className:"bg-thead text-uppercase text-center",children:"Stock"})]}),V.map((function(e){return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("tr",{class:"bg-white",children:[Object(m.jsx)("td",{className:"bg-thead",children:e.name}),a.map((function(t){return Object(m.jsx)(m.Fragment,{children:void 0!=I[t]?Object(m.jsx)(Ls,{flat:_(I[t],"contenu"),gr:t,id:e.id}):Object(m.jsx)(Hs,{})})})),Object(m.jsx)("td",{className:"text-center",children:e.quantityParProduct}),Object(m.jsx)(Qs,{flat:_(I[Ys(Object.keys(I))],"contenu"),gr:Ys(Object.keys(I)),id:e.id})]})})})),0==V.length&&Object(m.jsx)("tr",{children:Object(m.jsx)("td",{className:"text-center",colSpan:a.length+3,children:"Aucune enregistrement trouv\xe9"})})]})})})," "]})]})]})},zs=function(){return Object(m.jsx)("td",{className:"text-center p-1",children:Object(m.jsx)("div",{children:Object(m.jsx)("span",{className:"text-center  p-1",children:"-"})})})},Gs=function(e){var t=e.flat,n=(e.gr,e.id),c=t.filter((function(e){return e.id==n})),r=(void 0!=c[c.length-1]&&c[c.length-1],0);return r=c?c.map((function(e){return 1*e.quantityParProductDepot})).reduce((function(e,t){return e+t}),0):0,Object(m.jsx)("td",{className:"text-center p-1",children:0!=r?r:"-"})},Ws=function(e){var t=e.flat,n=(e.gr,e.id),c=t.filter((function(e){return e.id==n})),r=void 0!=c[c.length-1]?c[c.length-1]:{},a={bruteCva:r.hasOwnProperty("id")?r.quantityBrute:0,ccCva:r.hasOwnProperty("id")?r.quantityCC:0};return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("td",{className:"text-center",children:0!=c.length?a.bruteCva:0})})};function Js(e){return e[e.length-1]}var Xs=function(){var e=Hn()().isoWeekday(1).startOf("week"),t=Hn()().endOf("week"),n=Object(c.useState)([]),r=Object(O.a)(n,2),a=r[0],i=r[1],s=Object(c.useState)([]),d=Object(O.a)(s,2),o=(d[0],d[1]),l=Object(c.useState)(e),u=Object(O.a)(l,2),j=u[0],b=u[1],h=Object(c.useState)(t),x=Object(O.a)(h,2),v=x[0],p=x[1],f=Object(c.useState)([e,t]),g=Object(O.a)(f,2),y=g[0],C=g[1],N=Object(c.useState)([]),E=Object(O.a)(N,2),S=E[0],P=E[1],q=Object(c.useState)([]),A=Object(O.a)(q,2),w=(A[0],A[1],Object(z.d)(pn("commandes").value)),D=Object(z.d)(pn("commandes").meta),F=Object(z.c)();Object(c.useEffect)((function(){null!==y?(y[0]&&b(y[0]),y[0]&&p(y[1])):(b(e),p(t))}),[y]),Object(c.useEffect)((function(){j&&v&&(i(function(e,t){for(var n=e.clone(),c=[];n.isSameOrBefore(t);)c.push(n.format("YYYY-MM-DD")),n.add(1,"days");return c}(Hn()(j),Hn()(v))),o(function(e,t){for(var n=[];t.diff(e,"months")>=0;)n.push(e.format("MMMM YYYY")),e.add(1,"month");return n}(Hn()(j),Hn()(v))),F(Sn("vente-depot",j,v)))}),[j,v]),Object(c.useEffect)((function(){D.isFetching||P(Ms(w,"dateCom",j,v))}),[D]);var R,T,V=Bs(S,"contenu").reduce((function(e,t){var n=t.id,c=t.name,r=t.type,a=t.category,i=t.fournisseur,s=t.quantityParProductDepot,d=t.quantityBruteCVA,o=t.quantityCCCVA,l=(t.qttByCC,e.find((function(e){return e.id===n})));return l?l.quantityParProductDepot=parseInt(l.quantityParProductDepot)+parseInt(s):e.push({id:n,name:c,type:r,category:a,fournisseur:i,quantityBruteCVA:d,quantityCCCVA:o,quantityParProductDepot:s}),e}),[]).sort((function(e,t){return e.id>t.id})),_=function(e,t){var n;return Object(Vc.a)(new Set((n=[]).concat.apply(n,Object(Vc.a)(e.map((function(e){return e[t]}))))))},I=(R="dateCom",S.reduce((function(e,t){return T?(e[t[R][T]]=e[t[R][T]]||[]).push(t):(e[t[R]]=e[t[R]]||[]).push(t),e}),{}));return Object(m.jsxs)(rc,{children:[Object(m.jsx)(dc,{title:"Journal de vente",children:Object(m.jsx)(ic,{title:"Journal de vente"})}),Object(m.jsxs)(lc,{children:[Object(m.jsx)(Us,{}),Object(m.jsxs)("div",{className:"date-range",children:[Object(m.jsxs)("div",{className:"d-flex justify-content-between my-3",children:[Object(m.jsxs)("div",{children:[j&&v&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h2",{class:"text-uppercase my-1",children:"Journal de vente"}),Object(m.jsxs)("span",{children:["Du: ",de(j)," Au ",de(v)]})]})," "]}),Object(m.jsx)("div",{children:Object(m.jsx)(Ir.a,{locale:"fr-FR",onChange:C,value:y})})]}),Object(m.jsx)("div",{className:"table-responsive",children:Object(m.jsxs)("table",{class:"table",children:[Object(m.jsxs)("tr",{className:"sticky-this",children:[Object(m.jsx)("td",{children:"Produit"}),a.map((function(e){return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(ks,{date:e})})})),Object(m.jsx)("td",{className:"bg-thead text-uppercase text-center",children:"Total"}),Object(m.jsx)("td",{className:"bg-thead text-uppercase text-center",children:"Stock"})]}),V.map((function(e){return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("tr",{class:"bg-white",children:[Object(m.jsx)("td",{className:"bg-thead",children:e.name}),a.map((function(t){return Object(m.jsx)(m.Fragment,{children:void 0!=I[t]?Object(m.jsx)(Gs,{flat:_(I[t],"contenu"),gr:t,id:e.id}):Object(m.jsx)(zs,{})})})),Object(m.jsx)("td",{className:"text-center",children:e.quantityParProductDepot}),Object(m.jsx)(Ws,{flat:_(I[Js(Object.keys(I))],"contenu"),gr:Js(Object.keys(I)),id:e.id})]})})})),0==V.length&&Object(m.jsx)("tr",{children:Object(m.jsx)("td",{className:"text-center",colSpan:a.length+3,children:"Aucune enregistrement trouv\xe9"})})]})})]})]})]})};function Zs(e){return e[e.length-1]}var $s=function(){var e=Hn()().isoWeekday(1).startOf("week"),t=Hn()().endOf("week"),n=Object(c.useState)([]),r=Object(O.a)(n,2),a=r[0],i=r[1],s=Object(c.useState)([]),d=Object(O.a)(s,2),o=(d[0],d[1]),l=Object(c.useState)(e),u=Object(O.a)(l,2),j=u[0],b=u[1],h=Object(c.useState)(t),x=Object(O.a)(h,2),v=x[0],p=x[1],f=Object(c.useState)([e,t]),g=Object(O.a)(f,2),y=g[0],C=g[1],N=Object(c.useState)([]),E=Object(O.a)(N,2),S=E[0],P=E[1],q=Object(c.useState)([]),A=Object(O.a)(q,2),w=(A[0],A[1],Object(z.d)(pn("commandes").value)),D=Object(z.d)(pn("commandes").meta),F=Object(z.c)();Object(c.useEffect)((function(){null!==y?(y[0]&&b(y[0]),y[0]&&p(y[1])):(b(e),p(t))}),[y]),Object(c.useEffect)((function(){j&&v&&(i(function(e,t){for(var n=e.clone(),c=[];n.isSameOrBefore(t);)c.push(n.format("YYYY-MM-DD")),n.add(1,"days");return c}(Hn()(j),Hn()(v))),o(function(e,t){for(var n=[];t.diff(e,"months")>=0;)n.push(e.format("MMMM YYYY")),e.add(1,"month");return n}(Hn()(j),Hn()(v))),F(Sn("cva",j,v)))}),[j,v]),Object(c.useEffect)((function(){D.isFetching||P(Ms(w,"dateCom",j,v))}),[D]);var R,T,V=Bs(S,"contenu").reduce((function(e,t){var n=t.id,c=t.name,r=t.type,a=t.category,i=t.fournisseur,s=t.quantityBrute,d=t.quantityCC,o=t.quantityParProduct,l=e.find((function(e){return e.id===n}));return l?l.quantityParProduct=parseInt(l.quantityParProduct)+parseInt(o):e.push({id:n,name:c,type:r,category:a,fournisseur:i,quantityBrute:s,quantityCC:d,quantityParProduct:o}),e}),[]).sort((function(e,t){return e.id>t.id})),_=function(e,t){var n;return Object(Vc.a)(new Set((n=[]).concat.apply(n,Object(Vc.a)(e.map((function(e){return e[t]}))))))},I=(R="dateCom",S.reduce((function(e,t){return T?(e[t[R][T]]=e[t[R][T]]||[]).push(t):(e[t[R]]=e[t[R]]||[]).push(t),e}),{}));return Object(m.jsxs)(rc,{children:[Object(m.jsx)(dc,{title:"Journal de dep\xf4t vers magasin",children:Object(m.jsx)(ic,{title:"Journal de dep\xf4t vers magasin"})}),Object(m.jsxs)(lc,{children:[Object(m.jsx)(Us,{}),Object(m.jsxs)("div",{className:"date-range",children:[Object(m.jsxs)("div",{className:"d-flex justify-content-between my-3",children:[Object(m.jsxs)("div",{children:[j&&v&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h2",{class:"text-uppercase my-1",children:"Journal de dep\xf4t vers magasin "}),Object(m.jsxs)("span",{children:["Du: ",de(j)," Au ",de(v)]})]})," "]}),Object(m.jsx)("div",{children:Object(m.jsx)(Ir.a,{locale:"fr-FR",onChange:C,value:y})})]}),Object(m.jsx)("div",{className:"bg-white py-3 px-2 mb-2",children:Object(m.jsx)("div",{className:"table-responsive",children:Object(m.jsxs)("table",{class:"table",children:[Object(m.jsxs)("tr",{className:"sticky-this",children:[Object(m.jsx)("td",{children:"Produit"}),a.map((function(e){return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(ks,{date:e})})})),Object(m.jsx)("td",{className:"bg-thead text-uppercase text-center",children:"Total"}),Object(m.jsx)("td",{className:"bg-thead text-uppercase text-center",children:"Stock"})]}),V.map((function(e){return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("tr",{class:"bg-white",children:[Object(m.jsx)("td",{className:"bg-thead",children:e.name}),a.map((function(t){return Object(m.jsx)(m.Fragment,{children:void 0!=I[t]?Object(m.jsx)(Ls,{flat:_(I[t],"contenu"),gr:t,id:e.id}):Object(m.jsx)(Hs,{})})})),Object(m.jsx)("td",{className:"text-center",children:e.quantityParProduct}),Object(m.jsx)(Qs,{flat:_(I[Zs(Object.keys(I))],"contenu"),gr:Zs(Object.keys(I)),id:e.id})]})})})),0==V.length&&Object(m.jsx)("tr",{children:Object(m.jsx)("td",{className:"text-center",colSpan:a.length+3,children:"Aucune enregistrement trouv\xe9"})})]})})})," "]})]})]})},ed=function(e){if(!e||0===(null===e||void 0===e?void 0:e.length))return 0;var t=0;return e.forEach((function(e){t+=e.prixVente*e.quantityParProduct*1})),t};var td=Object(o.j)((function(e){Object(o.g)();var t,n,r=Object(o.i)().id,a=Object(z.d)(pn("commandes").value),i=Object(z.c)();return Object(c.useEffect)((function(){i(vn("commandes").get(r))}),[r]),Object(m.jsxs)(rc,{children:[Object(m.jsx)(dc,{title:"D\xe9tail de sortie vers magasin",children:Object(m.jsx)(ic,{title:"D\xe9tail de sortie vers magasin"})}),Object(m.jsxs)(lc,{children:[Object(m.jsxs)("table",{className:"table table-bordered ",children:[Object(m.jsxs)("tr",{className:"bg-thead",children:[Object(m.jsx)("td",{children:"Nom de l'article"}),Object(m.jsx)("td",{children:"Quantit\xe9"}),Object(m.jsx)("td",{children:"Sous total"})]}),a.length>0&&(null===(t=a[0])||void 0===t?void 0:t.contenu.map((function(e){return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{style:{width:"40%"},children:e.name}),Object(m.jsxs)("td",{className:"d-flex align-items-center",children:[oe(e.prixVente),"(","x"," ",e.quantityParProduct,")"]}),Object(m.jsx)("td",{children:oe(e.prixVente*e.quantityParProduct)})]})})))]}),Object(m.jsxs)("div",{className:"d-flex justify-content-end",children:[Object(m.jsx)("strong",{children:"Total"}),":",oe(ed(null===(n=a[0])||void 0===n?void 0:n.contenu))]})]})]})})),nd=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0};var cd=Object(o.j)((function(e){Object(o.h)();var t,n,r,a,i,s,d,l,u=Object(o.i)().id,j=Object(z.d)(pn("commandes").value),b=Object(z.c)();return Object(c.useEffect)((function(){b(vn("commandes").get(u))}),[u]),Object(m.jsxs)(rc,{children:[Object(m.jsx)(dc,{title:"D\xe9tail de vente du magasin",children:Object(m.jsx)(ic,{title:"D\xe9tail de vente du magasin"})}),Object(m.jsxs)(lc,{children:[Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("p",{children:"credit-cva"==(null===(t=j[0])||void 0===t?void 0:t.type)&&Object(m.jsx)("p",{children:"Credit"})}),"credit-cva"==(null===(n=j[0])||void 0===n?void 0:n.type)&&Object(m.jsx)("div",{className:"border",children:Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h3",{children:null===(r=j[0])||void 0===r?void 0:r.emprunter.name}),Object(m.jsx)("h5",{children:null===(a=j[0])||void 0===a?void 0:a.emprunter.contact})]})}),j.length>0&&Object(m.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(m.jsxs)("h2",{className:"my-2",children:["Date : ",de(null===(i=j[0])||void 0===i?void 0:i.dateCom)]}),Object(m.jsx)("div",{className:"d-flex justify-content-end",children:Object(m.jsxs)("div",{className:"bg-thead p-1 mb-1",children:[Object(m.jsx)("strong",{children:"Recette:"}),":",Object(m.jsx)("h3",{className:"text-lg",children:oe(nd(null===(s=j[0])||void 0===s?void 0:s.contenu.map((function(e){return e.prixVente*e.quantityParProduct})))+nd(null===(d=j[0])||void 0===d?void 0:d.contenu.map((function(e){return e.prixParCC*e.qttByCC}))))})]})})]}),Object(m.jsxs)("table",{className:"table table-bordered",children:[Object(m.jsxs)("tr",{className:"bg-thead",children:[Object(m.jsx)("td",{children:"Nom de l'article"}),Object(m.jsx)("td",{children:"Quantit\xe9"}),Object(m.jsx)("td",{children:"Sous total"})]}),j.length>0&&(null===(l=j[0])||void 0===l?void 0:l.contenu.map((function(e){return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{style:{width:"40%"},children:e.name}),Object(m.jsx)(m.Fragment,{children:0!=e.quantityParProduct&&Object(m.jsxs)("div",{className:"d-flex align-items-center py-0",children:[Object(m.jsxs)("strong",{children:[e.type,":"]}),oe(e.prixVente)," (","x"," ",e.quantityParProduct,") "," = ",oe(e.prixVente*e.quantityParProduct)]})}),"FLACON"==e.type&&Object(m.jsx)(m.Fragment,{children:0!=e.qttByCC&&Object(m.jsxs)("div",{className:"d-flex align-items-center  py-0",children:[Object(m.jsx)("strong",{children:"ML:"})," ",oe(e.prixParCC)," ","x"," ",0!=e.qttyspecificmirror?e.qttyspecificmirror+" Dose":e.qttByCC+" Ml"," "," = "," ",oe(e.prixParCC*e.qttByCC)]})}),Object(m.jsx)("td",{children:oe(e.prixVente*e.quantityParProduct+e.prixParCC*e.qttByCC)})]})})))]})]})," "]})," "]})]})})),rd=function(e){var t,n=e.state,c=e.setState,a=e.product,i=(Object(z.c)(),!!(null===n||void 0===n?void 0:n.find((function(e){return(null===e||void 0===e?void 0:e.id)===a.id})))),s=r.a.useCallback((function(){return a.quantityBruteCVA>15&&a.quantityBruteCVA<=20?"yellow":a.quantityBruteCVA>10&&a.quantityBruteCVA<=15?"#ffdb4c":a.quantityBruteCVA>5&&a.quantityBruteCVA<=10?" orange":a.quantityBruteCVA>0&&a.quantityBruteCVA<=5?"#c44e14b8":0==a.quantityBruteCVA?"red":"green"}),[a]),d=r.a.useCallback((function(){return a.quantityCCCVA>15&&a.quantityCCCVA<=20?"yellow":a.quantityCCCVA>10&&a.quantityCCCVA<=15?"#ffdb4c":a.quantityCCCVA>5&&a.quantityCCCVA<=10?" orange":a.quantityCCCVA>0&&a.quantityCCCVA<=5?"#c44e14b8":0==a.quantityCCCVA?"red":"green"}),[a]);return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(K.a.Item,{className:"mb-2 mr-3",style:{width:"100%",border:"1px solid gray",background:"whitesmoke",borderLeft:"10px solid ".concat(s())},children:Object(m.jsxs)("div",{className:" d-flex justify-content-between align-items-center",children:[Object(m.jsxs)("div",{className:" ".concat(a.id?"":"product-loading"),style:{boxShadow:a&&i?"15px 10px 15px rgba(0, 0, 0, .07)":"none"},children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{style:{width:10,height:4,background:"".concat(d())}}),Object(m.jsxs)("div",{children:[a.name," "]}),Object(m.jsx)("div",{class:"badge badge-primary",children:null===a||void 0===a||null===(t=a.fournisseur)||void 0===t?void 0:t.name}),Object(m.jsx)("br",{})]})," "," "]}),Object(m.jsx)("div",{children:(null===a||void 0===a?void 0:a.id)&&Object(m.jsx)(m.Fragment,{children:i?Object(m.jsx)("button",{disabled:0===a.quantityBruteCVA&&(0==a.quantityCCCVA||null==a.quantityCCCVA),className:"btn btn-danger btn-sm",onClick:function(){return function(e){c(n.filter((function(t){return t.id!==e})))}(null===a||void 0===a?void 0:a.id)},children:"Retirer"}):Object(m.jsx)("button",{disabled:0===a.quantityBruteCVA&&(0==a.quantityCCCVA||null==a.quantityCCCVA),className:"btn btn-green btn-sm",onClick:function(){c(n.some((function(e){return e.id===a.id}))?n:[a].concat(Object(Vc.a)(n)))},children:"Ajouter"})})})]})})})},ad=function(e){var t=e.product,n=e.index,c=e.state,r=e.setState,a=(e.setRealQttCC,e.setRealQtt),i=(e.realQtt,e.realQttCC,Object(z.c)(),function(e){!function(e,t,n){var a=Object(Vc.a)(c);a[e]=Object(_e.a)(Object(_e.a)({},a[e]),{},Object(et.a)({},t,n)),r(a)}(n,"quantityParProduct",e)}),s=function(){return t.quantityCCCVA-t.qttByCC<0&&t.quantityBruteCVA-1-1*t.quantityParProduct<0};return Object(m.jsx)("div",{className:"basket-item-control",children:Object(m.jsxs)(Ae.c,{inputMode:"numeric",w:28,disabled:0!=(null===t||void 0===t?void 0:t.condml)&&0!=(null===t||void 0===t?void 0:t.qttccpvente),step:1,bg:"whitesmoke",onChange:function(e){i(Number(e)),a(Number(e)),s()&&alert("Le stock ne satisfait pas votre commande")},min:0,defaultValue:null===t||void 0===t?void 0:t.quantityParProduct,max:1==s()?1*(null===t||void 0===t?void 0:t.quantityBruteCVA)-1:1*(null===t||void 0===t?void 0:t.quantityBruteCVA),children:[Object(m.jsx)(Ae.d,{}),Object(m.jsxs)(Ae.e,{children:[Object(m.jsx)(Ae.b,{}),Object(m.jsx)(Ae.a,{})]})]})})},id=function(e){var t=e.state,n=e.index,r=e.setState,a=e.product,i=Object(c.useState)(null),s=Object(O.a)(i,2),d=s[0],o=s[1],l=Object(c.useState)(null),u=Object(O.a)(l,2),j=u[0],b=u[1];return Object(m.jsx)("div",{children:Object(m.jsxs)("div",{className:"d-flex justify-content-between align-items-center border mt-3  mb-2 p-2",children:[Object(m.jsxs)("div",{style:{width:"45%"},children:[Object(m.jsx)("p",{className:"text-blue",children:a.name}),Object(m.jsx)("span",{className:"text-lowercase",children:Object(m.jsxs)("strong",{children:[0!=a.quantityParProduct&&oe(a.prixVente),0==a.quantityParProduct&&0!=a.prixParCC&&Object(m.jsx)(m.Fragment,{children:null!=a.prixqttccvente&&0!=a.prixqttccvente?oe(a.prixqttccvente):oe(a.prixParCC)}),0!=a.quantityParProduct&&" x "+a.quantityParProduct+" "+a.type," ",null==a.prixqttccvente&&0==a.prixqttccvente&&Object(m.jsx)(m.Fragment,{children:0!=a.qttByCC&&(0==a.quantityParProduct?" x ":"+")+a.qttByCC+"ML"})]})})]}),Object(m.jsxs)("div",{className:"d-flex  justify-content-between align-items-center ",children:[Object(m.jsxs)("div",{className:"text-center mr-2",children:[Object(m.jsx)("h5",{className:"mb-1",children:a.type}),Object(m.jsx)(ad,{index:n,state:t,setState:r,product:a,setRealQttCC:o,setRealQtt:b,realQtt:j,realQttCC:d})]}),"FLACON"===a.type&&Object(m.jsxs)("div",{className:"text-inline text-center",children:[Object(m.jsx)("h5",{className:"mb-1",children:3==a.categoryId?"DOSE":"ML"}),ue(a.name,"ita new")&&Object(m.jsx)(Fe,{product:a,setRealQttCC:o,setRealQtt:b,realQtt:j,realQttCC:d}),ue(a.name,"sovax")&&Object(m.jsx)(Te,{setRealQttCC:o,setRealQtt:b,realQtt:j,realQttCC:d,product:a}),0==a.condml&&0==a.qttccpvente&&!ue(a.name,"sovax")&&!ue(a.name,"ita new")&&Object(m.jsx)(De,{setRealQttCC:o,setRealQtt:b,realQtt:j,realQttCC:d,product:a}),0!==a.condml&&0!==a.qttccpvente&&Object(m.jsx)(Re,{product:a})]})]})]})})},sd=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0};function dd(e){var t,n,c;for(c in t=Array.isArray(e)?[]:{},e)n=e[c],t[c]="object"===typeof n?dd(n):n;return t}var od=function(e){var t,n=e.state,r=e.commandesclone,a=(e.meta,e.setState),i=e.disabled,s=(e.products,e.commandes),l=Object(c.useState)("direct"),u=Object(O.a)(l,2),j=u[0],b=(u[1],Object(c.useState)(1)),h=Object(O.a)(b,2),x=(h[0],h[1],Object(c.useState)(null)),v=Object(O.a)(x,2),p=(v[0],v[1],Object(c.useState)(null)),f=Object(O.a)(p,2),g=(f[0],f[1]),y=(Object(o.g)(),Object(c.useState)([])),C=Object(O.a)(y,2),N=C[0],E=C[1],S=Object(z.d)((function(e){return{fromdepots:e.fromdepots}})),P=S.fromdepots;Object(c.useEffect)((function(){E(null===s||void 0===s?void 0:s.contenu)}),[s]);var q=Object(z.c)(),A=Object(z.d)(pn("emprunters").value),w=new Date,D=Object(c.useState)(w),F=Object(O.a)(D,2),R=F[0],T=F[1];Object(c.useEffect)((function(){q(vn("emprunters").fetch())}),[]);return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(qe.a,{children:[Object(m.jsx)(qe.a.Header,{className:" bg-dark py-3 text-white d-flex justify-content-between align-items-center",children:Object(m.jsx)("div",{style:{width:"60%"},children:"BON DE SORTIE"})}),Object(m.jsxs)("div",{className:"commande-vente",children:[Object(m.jsxs)(qe.a.Body,{style:{padding:12,marginTop:3,marginRight:2,marginLeft:2},children:[Object(m.jsx)("div",{className:"d-flex justify-content-end",children:Object(m.jsx)(d.b,{className:"btn btn-primary mb-2 btn-sm",to:L,children:"Voir l'historique de vente"})}),Object(m.jsxs)("div",{style:{overflowY:"auto",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(m.jsxs)("div",{class:"form-group",children:[Object(m.jsx)("label",{children:"Date de sortie :"}),Object(m.jsx)("div",{children:Object(m.jsx)("input",{type:"date",disabled:i,onChange:function(e){return T(e.target.value)},value:R,className:"form-control"})})]}),"credit"===j&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("label",{children:"Crediteur:"}),Object(m.jsxs)("select",{disabled:i,className:"form-control",onChange:function(e){g(e.target.value)},children:[Object(m.jsx)("option",{value:""}),A.map((function(e){return Object(m.jsx)("option",{value:e.id,children:e.name})}))]})]}),(null===n||void 0===n?void 0:n.length)<=0&&Object(m.jsx)("div",{className:"alert alert-success ",children:"Aucune enregistrement trouv\xe9"}),null===n||void 0===n?void 0:n.sort((function(e,t){return t.quantityBruteCVA-e.quantityBruteCVA})).map((function(e,t){return Object(m.jsx)(id,{product:e,state:n,index:t,setState:a,basket:P,dispatch:q},"".concat(null===e||void 0===e?void 0:e.id,"_").concat(t))}))]})]}),(null===n||void 0===n?void 0:n.length)>0&&Object(m.jsxs)(qe.a.Footer,{className:"d-flex align-items-center justify-content-between",children:[Object(m.jsx)("div",{style:{width:"30%"},children:Object(m.jsx)("h2",{className:"p-2 text-uppercase bg-primary",children:Object(m.jsxs)("strong",{"data-test-id":"total-price-orders",children:["Total:",oe(sd(null===n||void 0===n?void 0:n.map((function(e){return e.prixVente*e.quantityParProduct})))+sd(null===n||void 0===n||null===(t=n.state)||void 0===t?void 0:t.map((function(e){return e.prixParCC*e.qttByCCDepot}))))]})})}),Object(m.jsx)("div",{style:{width:"70%"},children:(null===n||void 0===n?void 0:n.length)>0&&Object(m.jsxs)("div",{className:"d-flex text-right align-items-end justify-content-end",children:[Object(m.jsx)("button",{className:"btn btn-green btn-sm mr-2",disabled:0===(null===n||void 0===n?void 0:n.length),onClick:function(){var e,t=function(){var e=dd(N).filter((function(e){return!n.find((function(t){return e.id===t.id}))})),t=n.filter((function(e){return!dd(N).find((function(t){return e.id===t.id}))}));return{exist:n.map((function(e){return dd(N).find((function(t){return t.id===e.id}))})).filter((function(e){return null!=e})),added:t,missing:e}}(),c=t.exist,a=t.added,i=t.missing;q(vn("commandes").updateTransaction((e={id:null===s||void 0===s?void 0:s.id,contenu:n,commandesclone:r[0].contenu,type:"vente-cva",sorte:"sortie"},Object(et.a)(e,"sorte","sortie"),Object(et.a)(e,"status",!0),Object(et.a)(e,"dateCom",null!=R?R:w),Object(et.a)(e,"exist",c),Object(et.a)(e,"added",a),Object(et.a)(e,"missing",i),e),"update-from-magasin"))},type:"button",children:"Valider l'operation"}),Object(m.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(){null===n||void 0===n||n.forEach((function(e){e.quantityParProduct=0,e.qttByCCDepot=0})),q(yi())},type:"button",children:Object(m.jsx)("span",{children:"Annuler"})})]})})]})]})]})})},ld=function(){var e=Object(o.i)().id,t=Object(c.useState)(!1),n=Object(O.a)(t,2),a=n[0],i=n[1],s=Object(z.c)(),d=Object(z.d)(pn("commandes").value),l=Object(z.d)(pn("commandesclone").value),u=Object(z.d)(pn("commandes").meta),j=Object(z.d)(pn("products").value),b=Object(z.d)(pn("products").meta),h=Object(c.useState)([]),x=Object(O.a)(h,2),v=x[0],p=x[1];r.a.useEffect((function(){s(vn("commandes").get(e)),s(vn("commandesclone").get(e))}),[e]);var f=Object(c.useState)(""),g=Object(O.a)(f,2),y=g[0],C=g[1],N=Object(c.useState)([]),E=Object(O.a)(N,2),S=E[0],P=E[1];r.a.useEffect((function(){return 1==a&&(s(vn("products").fetch()),i(!1)),function(){i(!1)}}),[a]);var q=Object(c.useState)(),A=Object(O.a)(q,2),w=A[0],D=A[1];r.a.useEffect((function(){p(null!=w?Vn(j,y,w):kn(j,y))}),[y]),r.a.useEffect((function(){p(""!=y?Vn(j,y,w):In(j,w))}),[w]),r.a.useEffect((function(){s(vn("products").fetch())}),[]),r.a.useEffect((function(){}),[w]),r.a.useEffect((function(){var e;u.isFetching||P(null===(e=d[0])||void 0===e?void 0:e.contenu)}),[u]),r.a.useEffect((function(){b.isFetching||p(j)}),[b]);return Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{className:"bg-dark text-white p-3 d-flex justify-content-center align-items-center",children:Object(m.jsx)("h1",{className:"",children:"CABINET VETERINAIRE AMBALAVAO"})}),Object(m.jsx)(Ee.a,{className:"mt-3",children:Object(m.jsxs)(Se.a,{children:[Object(m.jsx)(Pe.a,{xs:6,children:Object(m.jsx)(K.a,{children:Object(m.jsxs)(qe.a,{children:[Object(m.jsx)(qe.a.Header,{className:"d-flex justify-content-between align-items-center bg-dark text-white",children:"Produits"}),Object(m.jsxs)(qe.a.Body,{children:[Object(m.jsx)("input",{type:"text",onChange:function(e){C(e.target.value)},placeholder:"Rechercher un produit",className:"form-control mb-2"}),Object(m.jsx)(oi,{model:"fournisseurs",children:Object(m.jsx)(li,{children:function(e){var t=e.data;e.meta;return Object(m.jsx)("div",{className:"my-2",children:Object(m.jsxs)("select",{className:"form-control",selected:2==w,onChange:function(e){D(e.target.value)},children:[Object(m.jsx)("option",{value:"",children:"Selectionner un fournisseur"}),t.map((function(e){return Object(m.jsx)("option",{value:e.id,children:e.name})}))]})})}})}),Object(m.jsxs)("div",{style:{overflowY:"auto",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(m.jsxs)(m.Fragment,{children:[v.map((function(e){return Object(m.jsx)(rd,{state:S,setState:P,product:e})})),0==v.length&&"Aucune enregistrement trouv\xe9"]})," "]})]})]})})}),Object(m.jsx)(Pe.a,{xs:6,children:Object(m.jsx)(od,{state:S,meta:u,commandesclone:l,disabled:b.isFetching,setState:P,products:j,commandes:d[0]})})]})})]})},ud=function(e){var t=e.product,n=e.index,c=e.state,r=e.setState,a=(e.setRealQttCC,e.setRealQtt),i=e.stock,s=e.realcommand;e.realQtt,e.realQttCC;Object(z.c)();var d=function(e,t,n){var a=Object(Vc.a)(c);a[e]=Object(_e.a)(Object(_e.a)({},a[e]),{},Object(et.a)({},t,n)),r(a)},o=function(e){d(n,"quantityParProduct",e)},l=function(){return(null===i||void 0===i?void 0:i.quantityBruteCVA)<(null===s||void 0===s?void 0:s.quantityParProduct)};return Object(m.jsx)("div",{className:"basket-item-control",children:l()?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(Ae.c,{inputMode:"numeric",w:28,step:1,disabled:!0,bg:"whitesmoke",onChange:function(e){o(Number(e)),a(Number(e)),(null===i||void 0===i?void 0:i.quantityBruteCVA)-(null===s||void 0===s?void 0:s.quantityParProduct)<0&&alert("Le stock ne satisfait pas votre commande")},defaultValue:null===t||void 0===t?void 0:t.quantityParProduct,children:[Object(m.jsx)(Ae.d,{}),Object(m.jsxs)(Ae.e,{children:[Object(m.jsx)(Ae.b,{}),Object(m.jsx)(Ae.a,{})]})]}),Object(m.jsx)(gs.a,{textTransform:"uppercase",children:"Restituable"}),Object(m.jsxs)(Ae.c,{inputMode:"numeric",w:28,step:1,bg:"whitesmoke",min:0,onChange:function(e){!function(e){d(n,"quantityrestitueParProduct",e)}(Number(e))},defaultValue:null===i||void 0===i?void 0:i.quantityBruteCVA,max:null===i||void 0===i?void 0:i.quantityBruteCVA,children:[Object(m.jsx)(Ae.d,{}),Object(m.jsxs)(Ae.e,{children:[Object(m.jsx)(Ae.b,{}),Object(m.jsx)(Ae.a,{})]})]})]}):Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(Ae.c,{inputMode:"numeric",w:28,step:1,bg:"whitesmoke",onChange:function(e){o(Number(e)),a(Number(e)),(null===i||void 0===i?void 0:i.quantityBruteCVA)-(null===s||void 0===s?void 0:s.quantityParProduct)<0&&alert("Le stock ne satisfait pas votre commande")},min:0,defaultValue:null===t||void 0===t?void 0:t.quantityParProduct,max:null===i||void 0===i?void 0:i.quantityBruteCVA,children:[Object(m.jsx)(Ae.d,{}),Object(m.jsxs)(Ae.e,{children:[Object(m.jsx)(Ae.b,{}),Object(m.jsx)(Ae.a,{})]})]})})})},jd=function(e){var t=e.state,n=e.index,r=e.setState,a=e.cloneCommandes,i=e.product,s=e.realstock,d=(e.realcommand,Object(c.useState)(null)),o=Object(O.a)(d,2),l=o[0],u=o[1],j=Object(c.useState)(null),b=Object(O.a)(j,2),h=b[0],x=b[1],v=s.find((function(e){return e.id==i.id})),p=null===a||void 0===a?void 0:a.contenu.find((function(e){return e.id==i.id}));return Object(m.jsxs)("div",{className:" mb-2 p-2",style:{opacity:(null===v||void 0===v?void 0:v.quantityBruteCVA)<(null===p||void 0===p?void 0:p.quantityParProduct)?.8:1,border:(null===v||void 0===v?void 0:v.quantityBruteCVA)<(null===p||void 0===p?void 0:p.quantityParProduct)?"1px solid red":"1px solid gray"},children:[(null===v||void 0===v?void 0:v.quantityBruteCVA)<(null===p||void 0===p?void 0:p.quantityParProduct)&&Object(m.jsx)("div",{className:"text-danger text-sm",children:"** Des operations ont \xeate d\xe9ja faite apres la sortie vers magasin et vous ne pourrez pas retourner tous les produits au dep\xf4t**"}),Object(m.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(m.jsxs)("div",{style:{width:"45%"},children:[Object(m.jsx)("p",{className:"text-blue",children:i.name}),Object(m.jsx)("span",{className:"text-lowercase",children:Object(m.jsxs)("strong",{children:[0!=i.quantityParProduct&&oe(i.prixVente),0==i.quantityParProduct&&0!=i.prixParCC&&Object(m.jsx)(m.Fragment,{children:null!=i.prixqttccvente&&0!=i.prixqttccvente?oe(i.prixqttccvente):oe(i.prixParCC)}),0!=i.quantityParProduct&&" x "+i.quantityParProduct+" "+i.type," ",null==i.prixqttccvente&&0==i.prixqttccvente&&Object(m.jsx)(m.Fragment,{children:0!=i.qttByCC&&(0==i.quantityParProduct?" x ":"+")+i.qttByCC+"ML"})]})})]}),Object(m.jsxs)("div",{className:"text-inline text-center",children:[Object(m.jsx)("h5",{className:"mb-1",children:i.type}),Object(m.jsx)(ud,{index:n,state:t,setState:r,product:i,realcommand:p,setRealQttCC:u,setRealQtt:x,realQtt:h,stock:v,realQttCC:l})]})]})]})},bd=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0};function Od(e){var t,n,c;for(c in t=Array.isArray(e)?[]:{},e)n=e[c],t[c]="object"===typeof n?Od(n):n;return t}var md=function(e){var t,n,r=e.state,a=(e.meta,e.setState),i=e.realstock,s=e.disabled,d=e.cloneCommandes,l=e.commandes,u=Object(c.useState)("direct"),j=Object(O.a)(u,2),b=j[0],h=(j[1],Object(c.useState)(1)),x=Object(O.a)(h,2),v=(x[0],x[1],Object(c.useState)(null)),p=Object(O.a)(v,2),f=(p[0],p[1],Object(c.useState)(null)),g=Object(O.a)(f,2),y=(g[0],g[1]),C=Object(o.g)(),N=Object(c.useState)([]),E=Object(O.a)(N,2),S=E[0],P=E[1],q=Object(z.d)((function(e){return{tomagasins:e.tomagasins}})),A=q.tomagasins;Object(c.useEffect)((function(){P(null===l||void 0===l?void 0:l.contenu)}),[l]);var w=Object(z.c)(),D=Object(z.d)(pn("emprunters").value),F=new Date,R=Object(c.useState)(F),T=Object(O.a)(R,2),V=T[0],_=T[1];Object(c.useEffect)((function(){}),[]);return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(qe.a,{children:[Object(m.jsx)(qe.a.Header,{className:" bg-dark py-3 text-white d-flex justify-content-between align-items-center",children:Object(m.jsx)("div",{style:{width:"60%"},children:"BON DE SORTIE"})}),Object(m.jsxs)("div",{className:"commande-vente",children:[Object(m.jsx)(qe.a.Body,{style:{padding:12,marginTop:3,marginRight:2,marginLeft:2},children:Object(m.jsxs)("div",{style:{overflowY:"auto",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(m.jsxs)("div",{className:"alert alert-warning",children:[Object(m.jsx)("span",{className:"text-uppercase",children:"Attention !!!"})," , la modification d'un bon de sortie entraine aussi la mis \xe0 jour de stock du produit"]}),Object(m.jsxs)("div",{class:"form-group",children:[Object(m.jsx)("label",{children:"Date de sortie :"}),Object(m.jsx)("div",{children:Object(m.jsx)("input",{disabled:s,type:"date",onChange:function(e){return _(e.target.value)},value:V,className:"form-control"})})]}),"credit"===b&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("label",{children:"Crediteur:"}),Object(m.jsxs)("select",{disabled:s,className:"form-control",onChange:function(e){y(e.target.value)},children:[Object(m.jsx)("option",{value:""}),D.map((function(e){return Object(m.jsx)("option",{value:e.id,children:e.name})}))]})]}),(null===r||void 0===r?void 0:r.length)<=0&&Object(m.jsx)("div",{className:"alert alert-success ",children:"Aucune enregistrement trouv\xe9"}),null===r||void 0===r?void 0:r.map((function(e,t){return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(jd,{product:Jt.a.cloneDeep(e),state:r,index:t,realcommand:e,cloneCommandes:d,realstock:i,setState:a,basket:A,dispatch:w},"".concat(null===e||void 0===e?void 0:e.id,"_").concat(t))})}))]})}),(null===r||void 0===r?void 0:r.length)>0&&Object(m.jsxs)(qe.a.Footer,{className:"d-flex align-items-center justify-content-between",children:[Object(m.jsx)("div",{style:{width:"30%"},children:Object(m.jsx)("h2",{className:"p-2 text-uppercase bg-primary",children:Object(m.jsxs)("strong",{"data-test-id":"total-price-orders",children:["Total:",oe(bd(null===r||void 0===r?void 0:r.map((function(e){return e.prixVente*e.quantityParProduct})))+bd(null===r||void 0===r||null===(t=r.state)||void 0===t?void 0:t.map((function(e){return e.prixParCC*e.qttByCC}))))]})})}),Object(m.jsx)("div",{style:{width:"70%"},children:(null===r||void 0===r?void 0:r.length)>0&&Object(m.jsxs)("div",{className:"d-flex text-right align-items-end justify-content-end",children:[Object(m.jsx)("button",(n={disabled:s,className:"btn btn-green btn-sm mr-2"},Object(et.a)(n,"disabled",0===(null===r||void 0===r?void 0:r.length)),Object(et.a)(n,"onClick",(function(){var e=function(){var e=Od(S).filter((function(e){return!r.find((function(t){return e.id===t.id}))})),t=r.filter((function(e){return!Od(S).find((function(t){return e.id===t.id}))}));return{exist:r.map((function(e){var t=Od(S).find((function(t){return t.id===e.id}));if(null!=t||void 0!=t){var n=0;return 1*e.quantityParProduct>1*t.quantityParProduct&&(n=1*e.quantityParProduct-1*t.quantityParProduct,e.quantityBrute=t.quantityBrute-n,e.quantityBruteCVA+=n),1*t.quantityParProduct>1*e.quantityParProduct&&(n=1*t.quantityParProduct-1*e.quantityParProduct,e.quantityBrute=t.quantityBrute+n,e.quantityBruteCVA-=n),e}})).filter((function(e){return null!=e})),added:t,missing:e}}(),t=e.exist,n=e.added,c=e.missing;w(vn("commandes").updateTransaction({id:null===l||void 0===l?void 0:l.id,contenu:r,type:"cva",sorte:"sortie",status:!0,dateCom:null!=V?V:F,exist:t,added:n,missing:c},"update-to-magasin")),C.push(k)})),Object(et.a)(n,"type","button"),Object(et.a)(n,"children","Valider l'operation"),n)),Object(m.jsx)("button",{disabled:s,className:"btn btn-danger btn-sm",onClick:function(){null===r||void 0===r||r.forEach((function(e){e.quantityParProduct=0,e.qttByCC=0})),w(yi())},type:"button",children:Object(m.jsx)("span",{children:"Annuler"})})]})})]})]})]})})},hd=function(e){var t,n=e.state,c=e.setState,r=e.product,a=e.cloneCommandes,i=(Object(z.c)(),!!(null===n||void 0===n?void 0:n.find((function(e){return(null===e||void 0===e?void 0:e.id)===r.id})))),s=null===a||void 0===a?void 0:a.contenu.find((function(e){return e.id==r.id})),d=(null===r||void 0===r?void 0:r.quantityBruteCVA)<(null===s||void 0===s?void 0:s.quantityParProduct);return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(K.a.Item,{className:"mb-2 mr-3",style:{border:"1px solid gray"},children:Object(m.jsx)("div",{className:" d-flex justify-content-between align-items-center",children:Object(m.jsxs)("div",{className:" ".concat(r.id?"":"product-loading"),style:{boxShadow:r&&i?"15px 10px 15px rgba(0, 0, 0, .07)":"none"},children:[Object(m.jsxs)("div",{children:[r.name," ",Object(m.jsx)("div",{class:"badge badge-primary",children:null===r||void 0===r||null===(t=r.fournisseur)||void 0===t?void 0:t.name}),Object(m.jsx)("br",{})]})," ",Object(m.jsx)("div",{children:(null===r||void 0===r?void 0:r.id)&&Object(m.jsx)(m.Fragment,{children:i?Object(m.jsx)("button",{disabled:d,className:"btn btn-danger btn-sm",onClick:function(){return function(e){c(n.filter((function(t){return t.id!==e})))}(null===r||void 0===r?void 0:r.id)},children:"Retirer"}):Object(m.jsx)("button",{className:"btn btn-green btn-sm",onClick:function(){c(n.some((function(e){return e.id===r.id}))?n:[r].concat(Object(Vc.a)(n)))},children:"Ajouter"})})})]})})})})},xd=function(){var e=Object(o.i)().id,t=(Object(o.g)(),Object(c.useState)(!1)),n=Object(O.a)(t,2),a=n[0],i=n[1],s=Object(z.c)(),d=Object(z.d)(pn("commandes").value),l=Object(z.d)(pn("commandesclone").value),u=Object(z.d)(pn("commandes").meta),j=Object(z.d)(pn("products").value),b=Object(z.d)(pn("products").meta),h=Object(c.useState)([]),x=Object(O.a)(h,2),v=x[0],p=x[1];r.a.useEffect((function(){s(vn("commandesclone").get(e)),s(vn("commandes").get(e))}),[e]);var f=Object(c.useState)(""),g=Object(O.a)(f,2),y=g[0],C=g[1],N=Object(c.useState)([]),E=Object(O.a)(N,2),S=E[0],P=E[1];r.a.useEffect((function(){return 1==a&&(s(vn("products").fetch()),i(!1)),function(){i(!1)}}),[a]);var q=Object(c.useState)(),A=Object(O.a)(q,2),w=A[0],D=A[1];r.a.useEffect((function(){p(null!=w?Vn(j,y,w):kn(j,y))}),[y]),r.a.useEffect((function(){p(""!=y?Vn(j,y,w):In(j,w))}),[w]),r.a.useEffect((function(){s(vn("products").fetch())}),[]),r.a.useEffect((function(){}),[w]),r.a.useEffect((function(){var e;u.isFetching||P(null===(e=d[0])||void 0===e?void 0:e.contenu)}),[u]),r.a.useEffect((function(){b.isFetching||p(j)}),[b]);return Object(m.jsxs)(rc,{children:[Object(m.jsx)(dc,{title:"Edition d'un sortie vers magasin",children:Object(m.jsx)(ic,{title:"Edition d'un sortie vers magasin"})}),Object(m.jsx)(lc,{children:Object(m.jsxs)(Se.a,{className:"py-2",children:[Object(m.jsx)(Pe.a,{xs:6,children:Object(m.jsx)(K.a,{children:Object(m.jsxs)(qe.a,{children:[Object(m.jsx)(qe.a.Header,{className:"d-flex justify-content-between align-items-center bg-dark text-white",children:"Produits"}),Object(m.jsxs)(qe.a.Body,{children:[Object(m.jsx)("input",{type:"text",onChange:function(e){C(e.target.value)},placeholder:"Rechercher un produit",className:"form-control mb-2"}),Object(m.jsx)(oi,{model:"fournisseurs",children:Object(m.jsx)(li,{children:function(e){var t=e.data;e.meta;return Object(m.jsx)("div",{className:"my-2",children:Object(m.jsxs)("select",{className:"form-control",selected:2==w,onChange:function(e){D(e.target.value)},children:[Object(m.jsx)("option",{value:"",children:"Selectionner un fournisseur"}),t.map((function(e){return Object(m.jsx)("option",{value:e.id,children:e.name})}))]})})}})}),Object(m.jsxs)("div",{style:{overflowY:"auto",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(m.jsxs)(m.Fragment,{children:[v.map((function(e){return Object(m.jsx)(hd,{state:S,setState:P,cloneCommandes:l[0],product:e})})),0==v.length&&"Aucune enregistrement trouv\xe9"]})," "]})]})]})})}),Object(m.jsx)(Pe.a,{xs:6,children:Object(m.jsx)(md,{disabled:b.isFetching,state:S,meta:u,cloneCommandes:l[0],setState:P,realstock:j,commandes:d[0]})})]})})]})};var vd,pd=function(){return Object(z.c)(),Object(m.jsx)(d.a,{children:Object(m.jsxs)(o.d,{children:[Object(m.jsx)(o.b,{path:"/",exact:!0,component:Yn}),Object(m.jsx)(Ns,{path:f,component:Ks}),Object(m.jsx)(Ns,{path:p,component:Xs}),Object(m.jsx)(Ns,{path:v,component:$s}),Object(m.jsx)(Xi,{path:B,component:Un}),Object(m.jsx)(Xi,{path:"/detailvendeur/:id",component:fs}),Object(m.jsx)(Xi,{path:"/vendeur-commande/:id",component:ld}),Object(m.jsx)(Ns,{path:"/approv",component:uc}),Object(m.jsx)(Ns,{path:C,component:Gr}),Object(m.jsx)(Ns,{path:"/para/suppl",component:zr}),Object(m.jsx)(Ns,{path:y,component:da}),Object(m.jsx)(Ns,{path:"/bon-commande-depot",component:Is}),Object(m.jsx)(Ns,{path:"/product/edit/:id",component:ra}),Object(m.jsx)(Ns,{path:g,component:na}),Object(m.jsx)(Ns,{path:"/journal",component:Kr}),Object(m.jsx)(Ns,{path:N,component:ua}),Object(m.jsx)(Ns,{path:E,component:Mr}),Object(m.jsx)(Ns,{path:q,component:ii}),Object(m.jsx)(Ns,{path:S,component:kr}),Object(m.jsx)(Ns,{path:P,component:Yr}),Object(m.jsx)(Ns,{path:R,component:Is}),Object(m.jsx)(Ns,{path:A,component:la}),Object(m.jsx)(Ns,{path:w,component:oa}),Object(m.jsx)(Ns,{path:F,component:si}),Object(m.jsx)(Ns,{path:"/editer/commande/:id",component:ki}),Object(m.jsx)(Ns,{path:D,component:ba}),Object(m.jsx)(Ns,{path:"/detail/:id",component:Hr}),Object(m.jsx)(Ns,{path:"/depot/detail/:id",exact:!0,component:Ur}),Object(m.jsx)(Ns,{path:"/product/detail/:id",component:ca}),Object(m.jsx)(Ns,{path:"/b/sortie",component:Nr}),Object(m.jsx)(Ns,{path:"/add/prod",component:jr}),Object(m.jsx)(Ns,{path:T,component:La}),Object(m.jsx)(Ns,{path:"/editer/facture/:id",component:Fs}),Object(m.jsx)(Ns,{path:V,component:Cr}),Object(m.jsx)(Ns,{path:"/approvis/detail/:id",exact:!0,component:mr}),Object(m.jsx)(Ns,{path:_,component:zi}),Object(m.jsx)(Ns,{path:I,component:Gi}),Object(m.jsx)(Ns,{path:M,component:js}),Object(m.jsx)(Ns,{path:"/depot/to/magasin/edit/:id",component:xd}),Object(m.jsx)(Ns,{path:k,component:Os}),Object(m.jsx)(Ns,{path:"/depot/to/magasin/detail/:id",component:td}),Object(m.jsx)(Ns,{path:Q,component:xs}),Object(m.jsx)(Xi,{path:L,component:hs}),Object(m.jsx)(Ns,{path:H,component:vs}),Object(m.jsx)(Ns,{path:"/magasin/detail/vente/:id",component:cd})]})})},fd=(n(543),n(323)),gd=xn("products",{key:"id"}),yd=JSON.parse(localStorage.getItem("user")),Cd=yd?{isLoggedIn:!0,user:yd}:{isLoggedIn:!1,user:null},Nd=xn("commandes"),Ed=xn("fournisseurs"),Sd=xn("emprunters"),Pd=xn("vaccinateurs"),qd=xn("categories"),Ad=xn("approvis"),wd=xn("parametres"),Dd={shipping:{},payment:{type:"",name:"",cardnumber:"",expiry:"",ccv:""}},Fd=xn("sortiedepots"),Rd=Object(sa.applyUndo)(Object(bn.b)({count:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{counter:0},t=arguments.length>1?arguments[1]:void 0;return"ADD"===t.type?Object(_e.a)(Object(_e.a)({},e),{},{counter:e.counter+1}):e},auth:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cd,c=arguments.length>1?arguments[1]:void 0,r=c.type,a=c.payload;switch(r){case Wn:return Object(_e.a)(Object(_e.a)({},n),{},{isLoggedIn:!0,user:null===(e=a.user)||void 0===e?void 0:e.user,success:a.success,error:null});case Jn:return Object(_e.a)(Object(_e.a)({},n),{},{isLoggedIn:!1,user:null,success:null,error:a.error});case Xn:return Object(_e.a)(Object(_e.a)({},n),{},{isLoggedIn:!0,user:null===(t=a.user)||void 0===t?void 0:t.user,success:a.success,error:null});case Zn:return Object(_e.a)(Object(_e.a)({},n),{},{isLoggedIn:!1,user:null,token:null,success:null,error:a.error});case $n:return Object(_e.a)(Object(_e.a)({},n),{},{isLoggedIn:!1,user:null,token:null});default:return n}},products:gd,categories:qd,fournisseurs:Ed,emprunters:Sd,vaccinateurs:Pd,commandes:Nd,commandesclone:Nd,basket:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Er:return t.payload;case Sr:return e.some((function(e){return e.id===t.payload.id}))?e:[t.payload].concat(Object(Vc.a)(e));case Pr:return e.filter((function(e){return e.id!==t.payload}));case qr:return[];case Ar:return e.map((function(e){return e.id==t.payload.id&&(e.quantityParProduct+=1),e.id==t.payload.id&&e.doseRestantEnMg>=1e3*e.doseDefault?e.doseRestantEnMg+=1e3*e.doseDefault:e.doseRestantEnMg=e.doseRestantEnMg,e}));case Dr:return e.map((function(e){return e.id==t.payload.id&&(e.qttByCC+=1),e.id==t.payload.id&&e.doseRestantEnMg>=1e3*e.doseDefault?e.doseRestantEnMg+=1e3:e.doseRestantEnMg=e.doseRestantEnMg,e}));case wr:return e.map((function(e){return e.id==t.payload.id&&(e.quantityParProduct-=1),e.id==t.payload.id&&e.doseRestantEnMg>=1e3*e.doseDefault?e.doseRestantEnMg-=1e3*e.doseDefault:e.doseRestantEnMg=e.doseRestantEnMg,e}));case Fr:return e.map((function(e){return e.id==t.payload.id&&(e.qttByCC-=1),e.id==t.payload.id&&e.doseRestantEnMg>=e.doseDefault?e.doseRestantEnMg-=1e3:e.doseRestantEnMg=e.doseRestantEnMg,e}));default:return e}},approvisionnements:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case xa:return t.payload;case va:return e.some((function(e){return e.id===t.payload.id}))?e:[t.payload].concat(Object(Vc.a)(e));case pa:return e.filter((function(e){return e.id!==t.payload}));case fa:return[];case ga:return e.map((function(e){return e.id==t.payload.id&&(e.quantityParProduct+=1),e}));case Ca:return e.map((function(e){return e.id==t.payload.id&&(e.quantityParProduct=Number(t.payload.qtt)),e}));case ya:return e.map((function(e){return e.id==t.payload.id&&(e.quantityParProduct-=1),e}));case Na:return e.map((function(e){return e.id===t.payload.id&&(e.quantityParProduct=t.payload.value),e}));default:return e}},approvis:Ad,fromdepots:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ui:return t.payload;case ji:return e.some((function(e){return e.id===t.payload.id}))?e:[t.payload].concat(Object(Vc.a)(e));case bi:return e.filter((function(e){return e.id!==t.payload}));case Oi:return[];case mi:return e.map((function(e){return e.id===t.payload.id&&(e.quantityParProductDepot=Number(t.payload.qtt)),e}));case hi:case fi:return e.map((function(e){return e.id==t.payload.id&&(e.qttByCCDepot=Number(t.payload.value)),e}));case xi:return e.map((function(e){return e.id===t.payload.id&&(e.quantityParProductDepot=Number(t.payload.value)),e}));case vi:return e.map((function(e){return e.id===t.payload.id&&(e.qttyspecificmirrordepot=Number(t.payload.value),e.qttByCCDepot=1*t.payload.value/2),e}));case pi:return e.map((function(e){return e.id===t.payload.id&&(e.qttyspecificmirrordepot=Number(t.payload.value),e.qttByCCDepot=1*t.payload.value*2),e}));case gi:return e.map((function(e){return e.id===t.payload.id&&(e.qttByCCDepot-=t.payload.qttccpventedepot),e}));default:return e}},stock:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=(t.type,t.payload);switch(t.type){case ec:return Object(_e.a)(Object(_e.a)({},e),t.payload);case tc:return n;default:return e}},checkout:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dd,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Rr:return Object(_e.a)(Object(_e.a)({},e),{},{shipping:t.payload});case Tr:return Object(_e.a)(Object(_e.a)({},e),{},{payment:t.payload});case Vr:return Dd;default:return e}},parametres:wd,tomagasins:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Zi:return t.payload;case $i:return e.some((function(e){return e.id===t.payload.id}))?e:[t.payload].concat(Object(Vc.a)(e));case es:return e.filter((function(e){return e.id!==t.payload}));case ts:return[];case ns:return e.map((function(e){return e.id===t.payload.id&&(e.quantityParProduct+=1),e}));case ns:return e.map((function(e){return e.id===t.payload.id&&(e.quantityParProduct=Number(t.payload.qtt)),e}));case cs:return e.map((function(e){return e.id===t.payload.id&&(e.quantityParProduct-=1),e}));case rs:return e.map((function(e){return e.id===t.payload.id&&(e.quantityParProduct=t.payload.value),e}));default:return e}},frommagasins:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case G:return t.payload;case W:return e.some((function(e){return e.id===t.payload.id}))?e:[t.payload].concat(Object(Vc.a)(e));case J:return e.filter((function(e){return e.id!==t.payload}));case X:return[];case Z:return e.map((function(e){return e.id===t.payload.id&&(e.quantityParProduct=Number(t.payload.qtt)),e}));case $:case ce:return e.map((function(e){return e.id==t.payload.id&&(e.qttByCC=Number(t.payload.value)),e}));case ee:return e.map((function(e){return e.id===t.payload.id&&(e.quantityParProduct=Number(t.payload.value)),e}));case te:return e.map((function(e){return e.id===t.payload.id&&(e.qttyspecificmirror=Number(t.payload.value),e.qttByCC=1*t.payload.value),e}));case ne:return e.map((function(e){return e.id===t.payload.id&&(e.qttyspecificmirror=Number(t.payload.value),e.qttByCC=1*t.payload.value*2),e}));case re:return e.map((function(e){return e.id===t.payload.id&&(e.qttByCC-=t.payload.qttccpvente),e}));default:return e}},sortiedepots:Fd})),Td=n(610),Vd=Td.persistStore,_d=(0,Td.persistReducer)({key:"root",whitelist:["auth","profile","basket","approvisionnement"],storage:n(544).default},Rd),Id=Object(bn.c)(_d,(vd=[fd.a],bn.a.apply(void 0,Object(Vc.a)(vd)))),Bd=Vd(Id),Md=n(324),kd=n(662),Ld=(n(547),n(548),n(549),n(550),n(657)),Hd=Object(Ld.a)({fontSizes:{lg:"18px"},fonts:{heading:"Montserrat",body:"Montserrat"},styles:{global:function(e){return{"html, body":{fontSize:"sm",lineHeight:"tall"}}}},components:{Button:{baseStyle:{fontWeight:"bold"},sizes:{xl:{h:"56px",fontSize:"sm",px:"13px"}},variants:{"with-shadow":{bg:"#2c5282"},solid:function(e){return{bg:(e.colorMode,"#2c5282")}}}}}}),Qd=n(147);i.a.render(Object(Qd.jsx)(kd.a,{theme:Hd,children:Object(Qd.jsx)(z.a,{store:Id,children:Object(Qd.jsx)(Md.a,{loading:null,persistor:Bd,children:Object(Qd.jsx)(pd,{})})})}),document.getElementById("root")),s()}},[[608,1,2]]]);
//# sourceMappingURL=main.0bd0e6f6.chunk.js.map