(this["webpackJsonpVeto-react"]=this["webpackJsonpVeto-react"]||[]).push([[0],{520:function(e,t,n){},738:function(e,t,n){},831:function(e,t,n){},938:function(e,t,n){},955:function(e,t){},998:function(e,n,c){"use strict";c.r(n);var r=c(2),a=c.n(r),i=(c(520),c(81)),s=c.n(i),d=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,1064)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),a(e),i(e)}))},l=c(10),o=c(24),u=c(34),j=c(40),b=c(70),m=c(72),O=c(4),x=c(1),v=function(e){var t=e.title,n=e.route,c=Object(o.h)().pathname==n;return Object(x.jsx)("li",{class:"nav-item",children:Object(x.jsxs)(l.b,{as:l.c,to:n,class:"text-white nav-link ".concat(c?"active":""),children:[Object(x.jsx)("i",{class:"far fa-circle nav-icon"}),Object(x.jsx)("p",{children:t})]})})},h=function(e){var t=e.children,n=e.title,c=Object(r.useState)(!1),a=Object(O.a)(c,2),i=a[0];a[1];return Object(x.jsxs)("li",{as:l.c,class:"nav-item ".concat(i?"menu-is-opening":null," menu-open"),children:[Object(x.jsxs)("a",{href:"#",class:"nav-link",children:[Object(x.jsx)("i",{class:"nav-icon fas fa-tachometer-alt"}),Object(x.jsxs)("p",{children:[n,Object(x.jsx)("i",{className:"right fas fa-angle-left"})]})]}),Object(x.jsx)("ul",{className:"nav nav-treeview",style:{display:"block"},children:t})]})};var p="/tdb-depot-magasin",f="/tdb-vente-cbv",g="/tdb-facture",N="/create-product",C="/products",y="/perimes",q="/rupture",A="/credit/normal",S="/credit/vaccinateur",E="/direct",w="/parametres",P="/product/fournisseur",V="/product/category",R="/entree",F="/sortie",D="/bon/sortie",M="/nouvelle/facture",B="/list/approv",T="/signin",k="/signup",_="/admin",I="/historique/sortie/cva",Q="/historique/vente/vendeur/:type",L="/historique/vente/admin/vendeur",H="/etat/stock/magasin",U="/corrections",Y="/historique/corrections",z="/fournisseurs/list",K="/add-fournisseur",G="/categories/list",W="/add-categories",X="/emprunteurs/list",J="/add-emprunteurs",Z="/vaccinateurs/list",$="/add-vaccinateurs",ee="/historique-admin/vente/vendeur/:type",te=function(e){Object(b.a)(n,e);var t=Object(m.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){var e=this.props,t=e.children,n=(e.navigation,e.title),c=(e.titleShort,this.props.searchbarFilter,this.props.homeTo);return t||(t=[Object(x.jsx)("div",{children:"No content"})]),t.length||(t=[t]),n.length||(n=[n]),Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("div",{class:"wrapper position-relative",children:[Object(x.jsx)("div",{className:"bg-dark m-0  p-2  text-center",children:Object(x.jsx)("h4",{className:"m-0 p-2 text-white",children:"CABINET VETERINAIRE AMBALAVAO"})}),Object(x.jsxs)("aside",{className:"main-sidebar sidebar-dark-primary",style:{maxHeight:"100%",overflow:"auto"},children:[Object(x.jsx)(l.b,{to:c,className:"brand-link border-0",children:Object(x.jsx)("span",{className:"ml-4 brand-text font-weight-light text-center text-uppercase",children:n})}),Object(x.jsx)("div",{class:"sidebar",children:Object(x.jsx)("nav",{class:"mt-2",children:Object(x.jsxs)("ul",{class:"nav nav-pills nav-sidebar flex-column","data-widget":"treeview",role:"menu","data-accordion":"false",children:[Object(x.jsx)(v,{title:"Tableau de bord",route:"/"}),Object(x.jsxs)(h,{title:"Factures && Produits",children:[Object(x.jsx)(v,{title:"Factures",route:B}),Object(x.jsx)(v,{title:"Produits",route:C})]}),Object(x.jsxs)(h,{title:"D\xe9pot",children:[Object(x.jsx)(v,{title:"Bon de sortie",route:D}),Object(x.jsx)(v,{title:"Historique de sortie",route:F}),Object(x.jsx)(v,{title:"Credit",route:A}),Object(x.jsx)(v,{title:"Vaccinateur",route:S})]}),Object(x.jsxs)(h,{title:"Magasin",children:[Object(x.jsx)(v,{title:"Depot vers Magasin",route:_}),Object(x.jsx)(v,{title:"Historique de 'D\xe9p\xf4t vers Magasin'",route:I})]}),Object(x.jsxs)(h,{title:"Correction",children:[Object(x.jsx)(v,{title:"Ajouter une correction",route:U}),Object(x.jsx)(v,{title:"Historique de correction",route:Y})]}),Object(x.jsxs)(h,{title:"Vente",children:[Object(x.jsx)(v,{title:"Effectuer une vente",route:"/vendre/in/admin"}),Object(x.jsx)(v,{title:"Etat de stock magasin",route:H}),Object(x.jsx)(v,{title:"Historique de vente du magasin",route:"/historique-admin/vente/vendeur/vente-cva"}),Object(x.jsx)(v,{title:"Cr\xe9dit",route:"/historique-admin/vente/vendeur/credit-cva"})]}),Object(x.jsxs)(h,{title:"Parametres",children:[Object(x.jsx)(v,{title:"Categories",route:G}),Object(x.jsx)(v,{title:"Fournisseurs",route:z}),Object(x.jsx)(v,{title:"Demandeurs de credit",route:X}),Object(x.jsx)(v,{title:"Vaccinateurs",route:Z})]})]})})})]}),Object(x.jsx)("div",{children:t})]})})}}]),n}(a.a.PureComponent);te.defaultProps={children:null,title:["Admin","LTE"],browserTitle:null,theme:"blue",footer:null,sidebar:void 0,homeTo:"/",searchbarFilter:!1};var ne=te,ce=c(12),re=(c(529),c.p,c(738),c(17)),ae=c.n(re);c(1061);var ie=c(3),se=c(71),de=c.n(se);function le(e){var t=e.children,n=e.title,c=Object(o.g)();return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{class:"content-header p-2 shadow-sm bg-white",children:Object(x.jsx)("div",{class:"container-fluid",children:Object(x.jsxs)("div",{class:"row",children:[Object(x.jsx)("div",{class:"col-sm-6",children:Object(x.jsx)("h4",{class:"mt-2 text-uppercase",children:n})}),Object(x.jsx)("div",{class:"col-sm-6",children:Object(x.jsxs)("ol",{class:"breadcrumb float-sm-right",children:[Object(x.jsx)("li",{class:"breadcrumb-item",children:Object(x.jsx)(l.b,{to:"/",children:"Accueil"})}),t]})})]})})}),Object(x.jsx)("div",{className:"mb-1",children:Object(x.jsxs)("button",{type:"button",onClick:function(){return c.goBack()},className:"btn btn-link",children:["<<"," Revenir en arriere"]})})]})})}var oe=a.a.memo(le,de.a);function ue(e){var t=e.title;return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("li",{class:"breadcrumb-item active",children:t})})}var je=a.a.memo(ue,de.a);function be(e){var t=e.children;return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("div",{class:"content-wrapper",children:t})})}var me=a.a.memo(be,de.a);function Oe(e){var t=e.children;return Object(x.jsx)("section",{class:"content",children:Object(x.jsx)("div",{class:"container-fluid",children:t})})}var xe=a.a.memo(Oe),ve=(c(253),c(119)),he=c.n(ve),pe=c(26);c(512);var fe=function(e){var t=new Date(e),n=t.getDate(),c=t.getMonth(),r=t.getFullYear();return" ".concat(n," ").concat(["Janvier","Fevrier","Mars","Avril","Mai","Juin","Juillet","Ao\xfbt","Septembre","Octobre","Novembre","Decembre"][c]," ").concat(r)},ge=function(e){return new Intl.NumberFormat("fr-MG",{style:"currency",currency:"MGA"}).format(e)};function Ne(e){return e.toString().replace(/\s/g,"").toLowerCase()}var Ce=function(e,t){if(Ne(e).includes(Ne(t)))return!0};var ye=function(e){var t=e.date,n=new Date(t).toLocaleString("fr-FR",{weekday:"short"}),c=new Date(t).getDate();return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("td",{style:{height:"100%"},className:"sam."==n?" bg-warning text-white text-center mr-2":"bg-dark text-center mr-2",children:c})})},qe=function(e,t,n,c){return e.filter((function(e){var r=new Date(e[t]);return ae()(r).isBetween(n,c,"days","[]")}))},Ae=function(e,t){var n;return Object(ce.a)(new Set((n=[]).concat.apply(n,Object(ce.a)(e.map((function(e){return e[t]}))))))},Se=c(7),Ee=c(56),we=c.n(Ee),Pe=c(156),Ve=c(771),Re=c(774);function Fe(e,t,n,c){var r=Ve(e).toUpperCase(),a=n.toUpperCase(),i=r+"_"+a+"_START",s=r+"_"+a+"_SUCCESS",d=r+"_"+a+"_ERROR",l=n+"Start",o=n+"Success",u=n+"Error";t[i]=i,t[s]=s,t[d]=d,c.addAlias&&(t[l]=i,t[o]=s,t[u]=d)}var De=function(e,t){if(null==e)throw new Error("Expected resource");if(null==(t=t||{}).addAlias&&(t.addAlias=!0),""==(e=Re(e)))throw new Error("Expected resource");var n={};return Fe(e,n,"get",t),Fe(e,n,"fetch",t),Fe(e,n,"create",t),Fe(e,n,"update",t),Fe(e,n,"delete",t),n},Me=c(153);function Be(e,t){return e.resourceName+"."+t}var Te=function(e,t,n){var c=Be(e,t);if(Me(Array,n))throw new TypeError(c+": Expected record not to be an array")};var ke=function(e,t){if(null==e)throw new Error("actionCreatorsFor: Expected resourceName");t=t||function(e){return{key:"id",resourceName:e}}(e),t=we()(t,{resourceName:e});var n=De(e);function c(e,t){Pe(null!=t,"Expected error in "+e)}function r(e,n){Pe(null!=n,"Expected record in "+e),Te(t,"createStart",n)}return{getStart:function(e){return{data:e,type:n.getStart}},getSuccess:function(e,t){return Pe(null!=e,"Expected record in getSuccess"),{data:t,records:e,type:n.getSuccess}},getError:function(e,t){return c("getError",e),{data:t,error:e,type:n.getError}},fetchStart:function(e){return{data:e,type:n.fetchStart}},fetchSuccess:function(e,t){return function(e,t){Pe(null!=t,"Expected records "+e)}("fetchSuccess",e),{data:t,records:e,type:n.fetchSuccess}},fetchError:function(e,t){return c("fetchError",e),{data:t,error:e,type:n.fetchError}},createStart:function(e,t){return r("createStart",e),{data:t,record:e,type:n.createStart}},createSuccess:function(e,t,c){return r("createSuccess",e),{cid:t,data:c,record:e,type:n.createSuccess}},createError:function(e,t,a){var i="createError";return c(i,e),r(i,t),{data:a,error:e,record:t,type:n.createError}},updateStart:function(e,t){return r("updateStart",e),{data:t,record:e,type:n.updateStart}},updateSuccess:function(e,t){return r("updateSuccess",e),{data:t,record:e,type:n.updateSuccess}},updateError:function(e,t,a){var i="updateError";return c(i,e),r(i,t),{data:a,error:e,record:t,type:n.updateError}},deleteStart:function(e,t){return r("deleteStart",e),{data:t,record:e,type:n.deleteStart}},deleteSuccess:function(e,t){return r("deleteSuccess",e),{data:t,record:e,type:n.deleteSuccess}},deleteError:function(e,t,a){var i="deleteError";return c(i,e),r(i,t),{data:a,error:e,record:t,type:n.deleteError}}}},_e={DEFAULT_KEY:"id",STORE_LIST:"STORE_LIST",STORE_MAP:"STORE_MAP",REDUCER_NAMES:{CREATE_ERROR:"createError",CREATE_START:"createStart",CREATE_SUCCESS:"createSuccess",DELETE_ERROR:"deleteError",DELETE_START:"deleteStart",DELETE_SUCCESS:"deleteSuccess",FETCH_SUCCESS:"fetchSuccess",GET_SUCCESS:"getSuccess",UPDATE_ERROR:"updateError",UPDATE_START:"updateStart",UPDATE_SUCCESS:"updateSuccess"},SPECIAL_KEYS:{BUSY:"busy",CLIENT_GENERATED_ID:"_cid",DELETED:"deleted",PENDING_CREATE:"pendingCreate",PENDING_UPDATE:"pendingUpdate"}};var Ie=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,c=arguments.length>3?arguments[3]:void 0;if(null==e)throw new Error("reducersFor: Expected resourceName");var r={key:_e.DEFAULT_KEY,resourceName:e},a=Ee(r,t);return function(t,r){if(t=t||n,null==r)throw new Error(e+" reducers: Expected action");var i=De(e),s=r.record;switch(r.type){case i.fetchSuccess:return c.fetchSuccess(a,t,r.records,n,r.data&&r.data.replace);case i.getSuccess:return c.getSuccess(a,t,r.records,n,r.data&&r.data.replace);case i.createStart:return c.createStart(a,t,s);case i.createSuccess:return c.createSuccess(a,t,s,r.cid);case i.createError:return c.createError(a,t,s);case i.updateStart:return c.updateStart(a,t,s);case i.updateSuccess:return c.updateSuccess(a,t,s);case i.updateError:return c.updateError(a,t,s);case i.deleteStart:return c.deleteStart(a,t,s);case i.deleteSuccess:return c.deleteSuccess(a,t,s);case i.deleteError:return c.deleteError(a,t,s);default:return t}}};function Qe(e,t){var n=t.config;if(!n.resourceName)throw new Error("Expected config.resourceName");var c=Be(n,e.reducerName);if(!n.key)throw new Error(c+": Expected config.key");if(!t.record)throw new Error(c+": Expected record/s");t.assertValidStore(c,t.current),e.canBeArray||Te(t.config,e.reducerName,t.record)}var Le=c(186);function He(e,t,n){var c=e.key;return Le((function(e){var t=e[c];return n[c]===t}),t)}function Ue(e){return Me(Array,e)?e:[e]}var Ye={assert:function(e,t){if(!Me(Array,t))throw new Error(e+": Expected current to be an array")},remove:He,merge:function(e,t,n){t=Ue(t);var c={},r={},a=e.slice(0);return e.forEach((function(e,t){var a=e[n];if(null==a)throw new Error("Expected record to have "+n);c[a]=e,r[a]=t})),t.forEach((function(e){var t=e[n];c[t]?a[r[t]]=e:(r[t]=a.length,a.push(e)),c[t]=e})),a}};function ze(e,t,n,c){Qe(e,{assertValidStore:Ye.assert,config:t,current:n,record:c})}var Ke={reducerName:_e.REDUCER_NAMES.CREATE_ERROR,canBeArray:!1};var Ge=c(8);function We(e){var t,n=(t={},Object(Ge.a)(t,_e.SPECIAL_KEYS.BUSY,!0),Object(Ge.a)(t,_e.SPECIAL_KEYS.PENDING_CREATE,!0),t);return Ee(e,n)}var Xe={reducerName:_e.REDUCER_NAMES.CREATE_START,canBeArray:!1};var Je={reducerName:_e.REDUCER_NAMES.CREATE_SUCCESS,canBeArray:!1};var Ze=c(187),$e=c(486);function et(e,t,n){return $e((function(e){return e[t]===n}),e)}var tt={reducerName:_e.REDUCER_NAMES.DELETE_ERROR,canBeArray:!1};function nt(e){var t,n=(t={},Object(Ge.a)(t,_e.SPECIAL_KEYS.DELETED,!0),Object(Ge.a)(t,_e.SPECIAL_KEYS.BUSY,!0),t);return Ee(e,n)}var ct={reducerName:_e.REDUCER_NAMES.DELETE_START,canBeArray:!1};var rt={reducerName:_e.REDUCER_NAMES.DELETE_SUCCESS,canBeArray:!1};var at=c(487),it=c(488),st=function(e,t,n){var c=at(e.key);if(!it(c,n))throw new Error(t+": Expected all records to have a value for the store's key `"+e.key+"`")},dt=_e.REDUCER_NAMES.FETCH_SUCCESS,lt={reducerName:dt,canBeArray:!0};var ot={reducerName:_e.REDUCER_NAMES.GET_SUCCESS,canBeArray:!0};var ut=c(274);function jt(e){return ut(_e.SPECIAL_KEYS.BUSY,e)}var bt={reducerName:_e.REDUCER_NAMES.UPDATE_ERROR,canBeArray:!1};function mt(e){var t,n=(t={},Object(Ge.a)(t,_e.SPECIAL_KEYS.BUSY,!0),Object(Ge.a)(t,_e.SPECIAL_KEYS.PENDING_UPDATE,!0),t);return Ee(e,n)}var Ot={reducerName:_e.REDUCER_NAMES.UPDATE_START,canBeArray:!1};var xt={reducerName:_e.REDUCER_NAMES.UPDATE_SUCCESS,canBeArray:!1};var vt={createError:function(e,t,n){return ze(Ke,e,t,n),He(e,t,n)},createStart:function(e,t,n){return ze(Xe,e,t,n),We(n),t},createSuccess:function(e,t,n,c){ze(Je,e,t,n);var r=e.key,a=!1,i=t.map((function(e){var t=e[r];if(null==t)throw new Error("Expected record to have "+r);return t===n[r]||null!=c&&c===t?(a=!0,n):e}));return a||(i=i.concat([n])),i},deleteError:function(e,t,n){ze(tt,e,t,n);var c=e.key,r=et(t,c,n[c]);return r=Ze(["deleted","busy"],r),Ye.merge(t,r,c)},deleteStart:function(e,t,n){ze(ct,e,t,n);var c=e.key,r=et(t,c,n[c]);return r=nt(r),Ye.merge(t,r,c)},deleteSuccess:function(e,t,n){ze(rt,e,t,n);var c=e.key,r=n[c];return Le((function(e){return r==e[c]}),t)},fetchSuccess:function(e,t,n,c){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return ze(lt,e,t,n),n=Ue(n),st(e,dt,n),Ye.merge(r?c:t,n,e.key)},updateError:function(e,t,n){ze(bt,e,t,n);var c=e.key,r=et(t,c,n[c]);return null==r?t:(r=jt(r),Ye.merge(t,r,c))},updateStart:function(e,t,n){ze(Ot,e,t,n);var c=[mt(n)];return Ye.merge(t,c,e.key)},updateSuccess:function(e,t,n){return ze(xt,e,t,n),Ye.merge(t,n,e.key)},getSuccess:function(e,t,n,c){return ze(ot,e,t,n),n=Ue(n)}};var ht={reducersFor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,c=Ee(vt,n);return Ie(e,t,[],c)}};var pt={assert:function(e,t){if(!Me(Object,t))throw new Error(e+": Expected current to be an object")},merge:function(e,t,n){var c=n[e.key];return Ee(t,Object(Ge.a)({},c,n))},remove:function(e,t,n){var c=n[e.key];return Ze([c],t)}};function ft(e,t,n,c){Qe(e,{assertValidStore:pt.assert,config:t,current:n,record:c})}var gt={reducerName:_e.REDUCER_NAMES.CREATE_ERROR,canBeArray:!1};var Nt={reducerName:_e.REDUCER_NAMES.CREATE_START,canBeArray:!1};var Ct=c(489),yt=c(490),qt={reducerName:_e.REDUCER_NAMES.CREATE_SUCCESS,canBeArray:!1};var At={reducerName:_e.REDUCER_NAMES.DELETE_ERROR,canBeArray:!1};var St={reducerName:_e.REDUCER_NAMES.DELETE_START,canBeArray:!1};var Et={reducerName:_e.REDUCER_NAMES.DELETE_SUCCESS,canBeArray:!1};var wt=c(354),Pt=c(265),Vt={reducerName:_e.REDUCER_NAMES.GET_SUCCESS,canBeArray:!0};var Rt=_e.REDUCER_NAMES.FETCH_SUCCESS,Ft={reducerName:Rt,canBeArray:!0};var Dt={reducerName:_e.REDUCER_NAMES.UPDATE_ERROR,canBeArray:!1};var Mt={reducerName:_e.REDUCER_NAMES.UPDATE_START,canBeArray:!1};var Bt={reducerName:_e.REDUCER_NAMES.UPDATE_SUCCESS,canBeArray:!1};var Tt={createError:function(e,t,n){return ft(gt,e,t,n),pt.remove(e,t,n)},createStart:function(e,t,n){return ft(Nt,e,t,n),We(n),t},createSuccess:function(e,t,n,c){ft(qt,e,t,n);var r=n[e.key],a=Ct(r),i=ut(c,t);return yt(a,n,i)},deleteError:function(e,t,n){ft(At,e,t,n);var c=n[e.key],r=t[c];return null==r?t:(r=Ze(["deleted","busy"],r),Ee(t,Object(Ge.a)({},c,r)))},deleteStart:function(e,t,n){ft(St,e,t,n);var c=t[n[e.key]];return null==c?t:(c=nt(c),pt.merge(e,t,c))},deleteSuccess:function(e,t,n){ft(Et,e,t,n);var c=e.key,r=n[c];return Le((function(e){return r==e[c]}),t)},fetchSuccess:function(e,t,n,c){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];ft(Ft,e,t,n),n=Ue(n),st(e,Rt,n);var a=wt(Pt(e.key),n);return Ee(r?c:t,a)},getSuccess:function(e,t,n,c){return ft(Vt,e,t,n),n=Ue(n)},updateError:function(e,t,n){ft(Dt,e,t,n);var c=t[n[e.key]];return null==c?t:(c=jt(c),pt.merge(e,t,c))},updateStart:function(e,t,n){ft(Mt,e,t,n);var c=mt(n);return pt.merge(e,t,c)},updateSuccess:function(e,t,n){return ft(Bt,e,t,n),pt.merge(e,t,n)}};var kt={reducersFor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,c=Ee(Tt,n);return Ie(e,t,{},c)}},_t={actionCreatorsFor:ke,actionTypesFor:De,constants:_e,List:ht,Map:kt},It=c(175),Qt=c.n(It),Lt=c(491),Ht=c(170),Ut=c.n(Ht),Yt=c(46),zt=c.n(Yt),Kt=JSON.parse(localStorage.getItem("user-infos")),Gt=(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).API_URL,function(){return{Accept:"application/json","Content-Type":"application/json",Authorization:Kt&&Kt.token?Kt.token:{}}}),Wt={code:"INTERNAL_ERROR",message:"Quelque chose s'est mal pass\xe9. Veuillez v\xe9rifier votre connexion Internet ou contacter notre support.",status:503,data:{}},Xt=Ut.a;Xt.interceptors.request.use((function(e){if(!e.headers.Authorization){var t=JSON.parse(localStorage.getItem("user-infos"));(null===t||void 0===t?void 0:t.token)&&(Xt.defaults.headers.common.Authorization="".concat(null===t||void 0===t?void 0:t.token))}return e}),(function(e){return console.log(e)})),Xt.interceptors.response.use((function(e){return zt.a.isUndefined(e)?[]:e}),(function(e){return console.log(e)}));var Jt=function(e,t,n,c){return new Promise((function(n,r){var a=c;Xt({url:"".concat(t),method:e,headers:Gt(),params:"get"==e?c:void 0,data:"get"!==e?a:void 0}).then((function(e){zt.a.isUndefined(e)?n([]):n(e.data)}),(function(e){var t,n,c,a,i;if(null===e||void 0===e?void 0:e.response){if(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error)r(null===e||void 0===e||null===(a=e.response)||void 0===a||null===(i=a.data)||void 0===i?void 0:i.error);else if(null===e||void 0===e||null===(c=e.response.data)||void 0===c?void 0:c.errors){var s;r(null===e||void 0===e||null===(s=e.response.data)||void 0===s?void 0:s.errors)}}else r(Wt)}))}))},Zt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Jt.apply(void 0,["get"].concat(t))},$t=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Jt.apply(void 0,["post"].concat(t))},en=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Jt.apply(void 0,["put"].concat(t))},tn=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Jt.apply(void 0,["delete"].concat(t))},nn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t?e[t]||e[Object(Lt.singular)(t)]:e;return Qt.a.camelizeKeys(n)},cn=function(e,t,n,c,r){return Object(Se.a)(Object(Se.a)({},e),{},{records:(a=e.records,Object(Yt.isArray)(a)?a:[a]),receivedAt:new Date,success:r||"",totalItems:t,totalPages:n,currentPage:c});var a},rn=function(e){return Object(Se.a)(Object(Se.a)({},e),{},{records:e.records,receivedAt:new Date})},an=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0;return function(i){var s=_t.actionCreatorsFor(e),d=n.path||Qt.a.decamelize(e),l=n.replace?{replace:n.replace}:void 0,o=n.url||Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).API_URL||"http://localhost:1200/api";return i(s.getStart()),Zt("".concat(o,"/").concat(d,"/").concat(t),!1,c,n).then((function(e){i(rn(s.getSuccess(nn(e),l))),r&&r(nn(e))})).catch((function(e){e.response?(a&&a(e.response),i(s.getError(null===e||void 0===e?void 0:e.response.data.error))):(a&&a(e),i(s.getError(e)))}))}},sn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;return function(a){var i=_t.actionCreatorsFor(e),s=t.path||Qt.a.decamelize(e),d=t.replace?{replace:t.replace}:void 0,l=t.url||Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).API_URL||"http://localhost:1200/api";return a(i.fetchStart()),Zt("".concat(l,"/").concat(s),!1,n,t).then((function(e){if(e.hasOwnProperty("data")){var t=e.data;a(cn(i.fetchSuccess(nn(t,"rows"),d),t.totalItems,t.totalPages,t.currentPage)),c&&c(nn(t,"rows"))}else e.hasOwnProperty("rows")?(a(cn(i.fetchSuccess(nn(e,"rows"),d),e.totalItems,e.totalPages,e.currentPage)),c&&c(nn(e,"rows"))):(a(cn(i.fetchSuccess(nn(e),d),null,null,null)),c&&c(nn(e)))})).catch((function(e){e.response?(r&&r(e.response),a(i.fetchError(null===e||void 0===e?void 0:e.response.data.error))):(r&&r(e),a(i.fetchError(e)))}))}},dn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{hasFile:!1},c=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;return function(a){var i=_t.actionCreatorsFor(e),s=n.path||Qt.a.decamelize(e),d=n.url||Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).API_URL||"http://localhost:1200/api";return a(i.createStart(t)),$t("".concat(d,"/").concat(s),n.hasFile,t,{replace:!0}).then((function(e){a(i.createSuccess(t,e.id,e)),c&&c(t)})).catch((function(e){var n,c;e?(a(i.createError(e,t)),r&&r(e)):e.message?(a(i.createError(e,t)),r&&r(e.message)):(null===e||void 0===e||null===(n=e.response)||void 0===n||null===(c=n.data)||void 0===c?void 0:c.message)&&(r&&r(null===e||void 0===e?void 0:e.response.data.message),a(i.createError(null===e||void 0===e?void 0:e.response.data.message,t)))}))}},ln=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{hasFile:!1},c=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;return function(a){var i=_t.actionCreatorsFor(e),s=n.path||[Qt.a.decamelize(e),t.id].join("/"),d=n.url||Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).API_URL||"http://localhost:1200/api";return a(i.updateStart(t)),en("".concat(d,"/").concat(s),n.hasFile,t,n).then((function(e){a(i.updateSuccess(t,t.id,{receivedAt:new Date})),c&&c(t)})).catch((function(e){var n,c;e?(a(i.updateError(e,t)),r&&r(e)):e.message?(a(i.updateError(e,t)),r&&r(e.message)):(null===e||void 0===e||null===(n=e.response)||void 0===n||null===(c=n.data)||void 0===c?void 0:c.message)&&(a(i.updateError(null===e||void 0===e?void 0:e.response.data.message,t)),r&&r(null===e||void 0===e?void 0:e.response.data.message))}))}},on=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;return function(a){var i=_t.actionCreatorsFor(e),s=n.path||[Qt.a.decamelize(e),t.id].join("/"),d=n.url||Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).API_URL||"http://localhost:1200/api";return a(i.deleteStart(t)),tn("".concat(d,"/").concat(s),!1,t,n).then((function(){a(i.deleteSuccess(t,{receivedAt:new Date})),c&&c(t)})).catch((function(e){a(i.deleteError(e,t)),r&&r(e)}))}},un=c(110),jn={isFetching:!1,lastUpdatedAt:null,error:null,success:null},bn=function(e){var t=_t.actionTypesFor(e);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jn,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case t.createStart:return{isLoading:!0,error:null,success:"",data:n.data};case t.createError:return{isLoading:!1,error:n.error,success:n.success,data:n.data};case t.createSuccess:return Object(Se.a)(Object(Se.a)({},n.payload),{},{isLoading:!1,error:null,success:n.success,lastUpdatedAt:n.receivedAt,data:n.data});case t.createFailed:return Object(Se.a)(Object(Se.a)({},n.payload),{},{isLoading:!1,error:n.error,success:"",data:n.data});case t.updateStart:return Object(Se.a)(Object(Se.a)({},e),{},{isLoading:!0,error:null,success:"",data:n.data});case t.updateError:return{isLoading:!1,error:n.error,success:"",data:n.data};case t.updateSuccess:return Object(Se.a)(Object(Se.a)({},e),{},{isLoading:!1,error:null,success:n.success,lastUpdatedAt:n.receivedAt,data:n.data});case t.updateFailed:return Object(Se.a)(Object(Se.a)({},e),{},{isLoading:!1,error:n.error,success:n.success,data:n.data});case t.destroyStart:return Object(Se.a)(Object(Se.a)({},e),{},{isLoading:!0,error:null,success:"",data:n.data});case t.destroySuccess:return Object(Se.a)(Object(Se.a)({},e),{},{isLoading:!1,error:null,success:n.success,lastUpdatedAt:n.receivedAt,data:n.data});case t.deleteError:return{isLoading:!1,error:n.error,success:"",data:n.data};case t.destroyFailed:return Object(Se.a)(Object(Se.a)({},e),{},{isLoading:!1,error:n.error,success:"",data:n.data});case t.getStart:return Object(Se.a)(Object(Se.a)({},e),{},{isLoading:!0,didInvalidate:!1,isFetching:!0,error:null,success:"",data:n.data});case t.getSuccess:return Object(Se.a)(Object(Se.a)({},e),{},{isFetching:!1});case t.getError:return Object(Se.a)(Object(Se.a)({},e),{},{isFetching:!1,error:n.error});case t.fetchStart:return Object(Se.a)(Object(Se.a)({},e),{},{isFetching:!0,error:null,success:"",data:n.data});case t.fetchSuccess:return Object(Se.a)(Object(Se.a)({},e),{},{isFetching:!1,success:n.success,totalPages:n.totalPages,totalItems:n.totalItems,currentPage:n.currentPage,lastUpdatedAt:n.receivedAt,error:null,data:n.data});case t.fetchError:return Object(Se.a)(Object(Se.a)({},e),{},{isFetching:!1,isLoading:!1,error:n.error,data:n.data});default:return Object(Se.a)({},e)}}},mn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=arguments.length>1?arguments[1]:void 0;return _t.Map.reducersFor(e,t)(n,c)}},On=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(un.b)({items:mn(e,t),meta:bn(e,t)})};function xn(e,t){return{get:function(t){return an(e,t,{replace:!0})},getWithPath:function(t,n){return an(e,t,{path:n,replace:!0})},create:function(t,n){return dn(e,t,n)},update:function(t,n){return ln(e,t,n)},destroy:function(t,n){return on(e,t,n)},fetch:function(t,n){return sn(e,t,n)},createTransaction:function(t,n){return dn(e,t,{path:n})},updateTransaction:function(t,n){return ln(e,t,{path:n})},deleteTransaction:function(t,n){return on(e,t,{path:n})}}}function vn(e){return{value:function(t){return t[e].items?Object(Yt.values)(t[e].items):[]},item:function(t){return t[e].items?t[e].items:[]},meta:function(t){return t[e].meta}}}var hn=function(e,t,n){return sn("commandes",{path:"/get-tdb-commande?type=".concat(e,"&deb=").concat(t,"&fin=").concat(n),replace:!0})},pn=function(e,t,n){return sn("commandes",{path:"/vente-cva?deb=".concat(e,"&fin=").concat(t,"&type=").concat(n),replace:!0})},fn=function(){var e=Object(o.h)(),t=function(t){return e.pathname==t};return Object(x.jsxs)("div",{className:"d-flex justify-content-center align-items-center",children:[Object(x.jsx)(l.b,{className:"btn btn-".concat(t("/")?"success":"default"," text-uppercase mr-2"),to:"/",children:"Journal Vente du magasin"}),Object(x.jsx)(l.b,{className:"btn btn-".concat(t(g)?"success":"default"," text-uppercase mr-2"),to:g,children:"Journal de facturation"}),Object(x.jsx)(l.b,{className:"btn btn-".concat(t(f)?"success":"default"," text-uppercase mr-2"),to:f,children:"Journal de Vente CBV"}),Object(x.jsx)(l.b,{className:"btn btn-".concat(t(p)?"success":"default"," text-uppercase mr-2"),to:p,children:"Journal de Depot vers magasin"})]})};var gn=c(135),Nn=c.n(gn),Cn=c(225),yn="REGISTER_SUCCESS",qn="REGISTER_FAIL",An="LOGIN_SUCCESS",Sn="LOGIN_FAIL",En="LOGOUT",wn="UPDATE_STOCK_REQUEST_SUCCESS",Pn="UPDATE_STOCK_REQUEST_FAIL",Vn=function(e){var t=e.product,n=Object(r.useState)(!1),c=Object(O.a)(n,2),a=c[0],i=c[1],s=Object(ie.d)(vn("commandes").meta),d=Object(ie.c)(),l=Object(r.useState)(1),o=Object(O.a)(l,2),u=o[0],j=o[1];Object(r.useEffect)((function(){d(xn("commandes").fetch())}),[]);return Object(x.jsxs)("tr",{className:"product-card ".concat(t.id?"":"product-loading"),style:{border:t&&a?"1px solid #a6a5a5":"",boxShadow:t&&a?"0 10px 15px rgba(0, 0, 0, .07)":"none"},children:[Object(x.jsx)("td",{children:t.name}),Object(x.jsx)("td",{children:t.quantityBrute+u}),Object(x.jsx)("td",{className:"d-flex justify-content-center align-items-center",children:Object(x.jsxs)("div",{class:"input-group inline-group",children:[Object(x.jsx)("div",{class:"input-group-prepend",children:Object(x.jsx)("button",{class:"btn btn-sm btn-dark btn-minus",onClick:function(){u>0&&j(u-1)},children:"-"})}),Object(x.jsx)("input",{class:"form-control quantity text-center  p-0",min:"0",name:"quantity",value:u,type:"number"}),Object(x.jsx)("div",{class:"input-group-append",children:Object(x.jsx)("button",{class:"btn btn-sm btn-dark btn-plus mr-2",onClick:function(){return j(u+1)},children:"+"})}),Object(x.jsx)("div",{class:"input-group-append ml-2"})]})}),Object(x.jsx)("td",{children:t.id&&Object(x.jsx)("button",{className:"btn btn-success  btn-sm",onClick:function(){d(function(e,t,n){return function(){var c=Object(Cn.a)(Nn.a.mark((function c(r){var a;return Nn.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,Ut.a.post("http://localhost:1200/api/update-product",{productId:e,newStockBrute:t,newStockCC:n});case 3:a=c.sent,r({type:wn,payload:a.data}),c.next=10;break;case 7:c.prev=7,c.t0=c.catch(0),r({type:Pn,payload:c.t0});case 10:case"end":return c.stop()}}),c,null,[[0,7]])})));return function(e){return c.apply(this,arguments)}}()}(t.id,u,0)),d(xn("commandes").create({id:s.nextId,contenu:[t],type:"approv",sorte:"entree",vaccinateurId:null,qtteBrute:u,qtteCC:0,status:!0,emprunterId:null,dateCom:new Date})),i(!0)},children:"Modifier le stock"})})]})};function Rn(){var e=Object(ie.d)(vn("products").value),t=Object(ie.c)();return Object(r.useEffect)((function(){t(xn("products").fetch())}),[]),Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Approvisionnement",children:Object(x.jsx)(je,{title:"Approvisionnement"})}),Object(x.jsx)(xe,{children:Object(x.jsxs)("table",{className:"table table-bordered table-striped",children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{className:"text-center",children:[Object(x.jsx)("th",{children:"Nom de l'article"}),Object(x.jsx)("th",{style:{width:"15%"},children:"Qte"}),Object(x.jsx)("th",{style:{width:"15%"},children:"Nouvel"}),Object(x.jsx)("th",{style:{width:"20%"},children:"Actions"})]})}),Object(x.jsx)("tbody",{children:e.map((function(e){return Object(x.jsx)(Vn,{product:e})}))})]})})]})}var Fn=c(174),Dn=c(1025),Mn=["icon","className","filter","setData","name","value","data","placeholder","changeValue","invalid"],Bn=Object(r.forwardRef)((function(e,t){var n=e.icon,c=e.className,i=e.filter,s=(e.setData,e.name),d=e.value,l=e.data,o=void 0===l?0:l,u=e.placeholder,j=e.changeValue,b=e.invalid,m=(Object(pe.a)(e,Mn),a.a.useCallback((function(e){i&&!i.test(e.target.value)||Object(Yt.isFunction)(j)&&j(e.target.value,e)}),[s]));return Object(r.useEffect)((function(){o&&j(o)}),[o]),Object(x.jsxs)("div",{className:c,children:[n&&Object(x.jsx)("i",{className:"fa fa-".concat(n)}),Object(x.jsx)(Dn.a,{bg:"gray.100",boxShadow:"sm",isInvalid:b,color:"gray.700",placeholder:u,ref:t,defaultValue:d,onBlur:m})]})})),Tn=c(282),kn=c(1055),_n=c(1027),In=["name","className","options","radioValue","valueKey","direction","filter","setData","changeValue","setRadio"],Qn=Object(r.forwardRef)((function(e,t){e.name;var n=e.className,c=e.options,i=e.radioValue,s=e.valueKey,d=e.direction,l=(e.filter,e.setData),o=e.changeValue,u=e.setRadio,j=Object(pe.a)(e,In),b=Object(r.useState)(i),m=Object(O.a)(b,2),v=m[0],h=m[1],p=a.a.useState("".concat(v)),f=Object(O.a)(p,2),g=f[0],N=f[1];return a.a.useLayoutEffect((function(){o(g),l&&(l(g),h(g))}),[g]),a.a.useLayoutEffect((function(){u&&u(v)}),[v]),Object(x.jsx)(Tn.a,{onChange:N,defaultValue:"".concat(v),className:n,children:Object(x.jsx)(kn.b,{spacing:4,direction:d,children:c.map((function(e){return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(_n.a,Object(Se.a)(Object(Se.a)({name:"".concat(e.id),isChecked:e.id==v},j),{},{value:"".concat(e.id),ref:t,children:e[s]}))})}))})})})),Ln=c(1028),Hn=c(277),Un=["name","className","invalid","options","selectValue","valueKey","filter","isNumeric","emptyValue","setData","changeValue"],Yn=Object(r.forwardRef)((function(e,t){var n=e.name,c=e.className,r=e.invalid,a=e.options,i=e.selectValue,s=e.valueKey,d=e.filter,l=e.isNumeric,o=void 0===l||l,u=e.emptyValue,j=void 0===u||u,b=e.setData,m=e.changeValue,O=Object(pe.a)(e,Un);return Object(x.jsx)("div",{className:c,children:Object(x.jsxs)(Ln.a,Object(Se.a)(Object(Se.a)({},O),{},{bg:"gray.200",boxShadow:"sm",defaultValue:"".concat(i),isRequired:!0,name:n,isInvalid:r,onChange:function(e){d&&!d.test(e.target.value)||(Object(Hn.a)(m)&&m(o?Number(e.target.value):e.target.value,e),b&&b(o?Number(e.target.value):e.target.value))},ref:t,children:[j&&Object(x.jsx)("option",{value:"",children:"Selectionner"}),null===a||void 0===a?void 0:a.map((function(e){return Object(x.jsx)("option",{defaultChecked:"".concat(i),value:"".concat(s?e.id:e),children:s?e[s]:e})}))]}))})})),zn=c(1029),Kn=["icon","className","filter","setData","placeholder","changeValue","invalid"],Gn=Object(r.forwardRef)((function(e,t){e.icon;var n=e.className,c=e.filter,r=e.setData,a=e.placeholder,i=e.changeValue,s=e.invalid,d=Object(pe.a)(e,Kn);return Object(x.jsx)("div",{className:n,children:Object(x.jsx)(zn.a,Object(Se.a)(Object(Se.a)({bg:"gray.200",boxShadow:"sm",isInvalid:s,placeholder:a},d),{},{onChange:function(e){c&&!c.test(e.target.value)||(Object(Hn.a)(i)&&i(e.target.value,e),r&&r(e.target.value))},ref:t}))})})),Wn=c(193),Xn=c(1034),Jn=c(168),Zn=c(35),$n=c(1056),ec=c(1030),tc=c(1033),nc=c(497),cc=c.n(nc),rc=(c(831),["icon","className","filter","setData","tags","options","changeValue","invalid"]),ac=Object(r.forwardRef)((function(e,t){var n=e.icon,c=e.className,a=(e.filter,e.setData),i=e.tags,s=e.options,d=e.changeValue,l=(e.invalid,Object(pe.a)(e,rc),Object(r.useState)(!1)),o=Object(O.a)(l,2),u=o[0],j=o[1],b=Object(r.useState)(i||[]),m=Object(O.a)(b,2),v=m[0],h=m[1],p=Object(r.useCallback)((function(e){h(v.filter((function(t,n){return n!==e}))),j(!0)}),[v]);Object(r.useLayoutEffect)((function(){u&&d(v),a&&a(v),j(!1)}),[u]);var f=Object(r.useCallback)((function(e){h([].concat(Object(ce.a)(v),[e])),j(!0)}),[v]);return Object(x.jsxs)("div",{className:c,children:[n&&Object(x.jsx)("i",{className:"fa fa-".concat(n)}),Object(x.jsx)(cc.a,{as:Dn.a,ref:t,tags:v,suggestions:s,onDelete:p,onAddition:f})]})})),ic=["icon","className","filter","setData","name","placeholder","changeValue","invalid"],sc=Object(r.forwardRef)((function(e,t){var n=e.icon,c=e.className,r=e.filter,i=(e.setData,e.name),s=e.placeholder,d=e.changeValue,l=e.invalid,o=(Object(pe.a)(e,ic),a.a.useCallback((function(e){r&&!r.test(e.target.value)||Object(Yt.isFunction)(d)&&d(e.target.value,e)}),[i]));return Object(x.jsxs)("div",{className:c,children:[n&&Object(x.jsx)("i",{className:"fa fa-".concat(n)}),Object(x.jsx)(Dn.a,{bg:"gray.100",type:"date",boxShadow:"sm",isInvalid:l,color:"gray.700",placeholder:s,ref:t,onBlur:o})]})})),dc=["name","className","invalid","isFieldArray","options","selectValue","valueKey","filter","setData","objectKey","index","inArray","changeValue","model","debug","array"],lc=Object(r.forwardRef)((function(e,t){var n=e.name,c=e.className,a=e.invalid,i=e.isFieldArray,s=void 0===i||i,d=e.options,l=e.selectValue,o=e.valueKey,u=e.filter,j=e.setData,b=(e.objectKey,e.index,e.inArray,e.changeValue),m=(e.model,e.debug,e.array,Object(pe.a)(e,dc)),v=Object(r.useState)(l),h=Object(O.a)(v,2),p=(h[0],h[1]);return Object(x.jsx)("div",{className:c,children:Object(x.jsxs)(Ln.a,Object(Se.a)(Object(Se.a)({},m),{},{bg:"gray.200",boxShadow:"sm",defaultValue:"".concat(l),isRequired:!0,name:n,isInvalid:a,onChange:function(e){u&&!u.test(e.target.value)||(Object(Hn.a)(b)&&s&&b(Number(e.target.value,e)),j&&j(Number(e.target.value)),p(Number(e.target.value)))},ref:t,children:[Object(x.jsx)("option",{value:"",children:"Selectionner"}),d.map((function(e){return Object(x.jsx)("option",{defaultChecked:"".concat(l),value:"".concat(e.id),children:o?e[o]:e})}))]}))})})),oc=c(511),uc=["name","className","options","radioValue","valueKey","direction","inArray","filter","setData","changeValue","setRadio","masterKey","filtrable","callback"],jc=Object(r.forwardRef)((function(e,t){var n=e.name,c=e.className,i=e.options,s=e.radioValue,d=e.valueKey,l=e.direction,o=(e.inArray,e.filter,e.setData,e.changeValue),u=e.setRadio,j=e.masterKey,b=e.filtrable,m=e.callback,v=void 0===m?null:m,h=Object(pe.a)(e,uc),p=Object(r.useState)(s),f=Object(O.a)(p,2),g=f[0],N=(f[1],a.a.useState("".concat(g))),C=Object(O.a)(N,2),y=C[0],q=C[1],A=Object(ie.c)();return a.a.useEffect((function(){o(j?i.find((function(e){return e[j].id==y})):i.find((function(e){return e.id==y})))}),[y]),a.a.useLayoutEffect((function(){u&&u(g)}),[g]),Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(Tn.a,{onChange:q,name:n,defaultValue:"".concat(g),className:c,children:Object(x.jsx)(kn.b,{spacing:4,direction:l,children:i.map((function(e){return Object(x.jsx)(x.Fragment,{children:j?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(_n.a,Object(Se.a)(Object(Se.a)({},h),{},{value:"".concat(e[j].id),ref:t,children:e[j][d]})),1==b&&Object(x.jsx)(oc.a,{variant:"solid",onClick:function(){return A(v(e[j].id))},colorScheme:"yellow",size:"xs",children:"Annuler"})]}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(_n.a,Object(Se.a)(Object(Se.a)({},h),{},{value:"".concat(e.id),ref:t,children:e[d]})),1==b&&Object(x.jsx)(oc.a,{variant:"solid",onClick:function(){return A(v(e.id))},colorScheme:"yellow",size:"xs",children:"Annuler"})]})})}))})})})})),bc=c(496),mc=c(494),Oc=["name","className","options","radioValue","valueKey","direction","inArray","filter","setData","changeValue","setRadio","filtrable"];function xc(e){var t=Object(bc.a)(e),n=t.getInputProps,c=t.getCheckboxProps,r=n(),a=c();return Object(x.jsxs)(ec.a,{as:"label",children:[Object(x.jsx)("input",Object(Se.a)({},r)),Object(x.jsx)(ec.a,Object(Se.a)(Object(Se.a)({},a),{},{cursor:"pointer",borderWidth:"1px",borderRadius:"md",boxShadow:"md",_checked:{bg:"teal.600",color:"white",borderColor:"teal.600"},_focus:{boxShadow:"outline"},px:5,py:3,children:e.children}))]})}var vc=Object(r.forwardRef)((function(e,t){var n=e.name,c=(e.className,e.options),i=e.radioValue,s=(e.valueKey,e.direction,e.inArray,e.filter,e.setData),d=e.changeValue,l=e.setRadio,o=(e.filtrable,Object(pe.a)(e,Oc),Object(r.useState)(i)),u=Object(O.a)(o,2),j=u[0],b=u[1],m=a.a.useState("".concat(j)),v=Object(O.a)(m,2),h=v[0];v[1];a.a.useEffect((function(){d(c.find((function(e){return e.id==h}))),s&&(s(h),b(h))}),[h]),a.a.useLayoutEffect((function(){l&&l(j)}),[j]);var p=Object(mc.a)({name:n,defaultValue:1,onChange:function(e){console.log("hiii",e)}}),f=p.getRootProps,g=p.getRadioProps,N=f();return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(kn.a,Object(Se.a)(Object(Se.a)({},N),{},{children:c.map((function(e){var t=e.id,n=g({id:t});return Object(x.jsx)(xc,Object(Se.a)(Object(Se.a)({},n),{},{children:t}),t)}))}))})})),hc=["icon","className","filter","setData","name","value","placeholder","changeValue","invalid"],pc=Object(r.forwardRef)((function(e,t){var n=e.icon,c=e.className,r=e.filter,i=(e.setData,e.name),s=e.value,d=e.placeholder,l=e.changeValue,o=e.invalid,u=(Object(pe.a)(e,hc),a.a.useCallback((function(e){r&&!r.test(e.target.value)||Object(Yt.isFunction)(l)&&l(e.target.value,e)}),[i]));return Object(x.jsxs)("div",{className:c,children:[n&&Object(x.jsx)("i",{className:"fa fa-".concat(n)}),Object(x.jsx)(Dn.a,{bg:"gray.100",boxShadow:"sm",type:"password",isInvalid:o,color:"gray.700",placeholder:d,ref:t,defaultValue:s,onBlur:u})]})})),fc=c(1052),gc=["icon","className","filter","setData","name","value","label","placeholder","changeValue","invalid"],Nc=Object(r.forwardRef)((function(e,t){var n=e.icon,c=e.className,r=e.filter,i=(e.setData,e.name),s=e.value,d=e.label,l=(e.placeholder,e.changeValue),o=(e.invalid,Object(pe.a)(e,gc),a.a.useCallback((function(e){r&&!r.test(e.target.value)||Object(Yt.isFunction)(l)&&l(e.target.value,e)}),[i]));return Object(x.jsxs)("div",{className:c,children:[n&&Object(x.jsx)("i",{className:"fa fa-".concat(n)}),Object(x.jsx)(fc.a,{colorScheme:"teal",ref:t,defaultValue:s,onChange:o,name:i,defaultIsChecked:!0,children:d})]})})),Cc=c(1050),yc=["icon","className","filter","setData","name","value","data","min","placeholder","changeValue","invalid"],qc=Object(r.forwardRef)((function(e,t){var n=e.icon,c=e.className,i=e.filter,s=(e.setData,e.name),d=e.value,l=e.data,o=void 0===l?0:l,u=e.min,j=void 0===u?0:u,b=(e.placeholder,e.changeValue),m=e.invalid,O=(Object(pe.a)(e,yc),a.a.useCallback((function(e){i&&!i.test(e)||Object(Yt.isFunction)(b)&&b(Number(e))}),[s]));return Object(r.useEffect)((function(){o&&b(Number(o))}),[o]),Object(x.jsxs)("div",{className:c,children:[n&&Object(x.jsx)("i",{className:"fa fa-".concat(n)}),Object(x.jsx)(Cc.c,{inputMode:"numeric",bg:"gray.100",boxShadow:"sm",color:"gray.700",isInvalid:m,name:s,ref:t,step:1,onChange:O,min:j,defaultValue:d,children:Object(x.jsx)(Cc.d,{})})]})})),Ac=["className","label","labelSize","labelWeight","tip","info","isBool","options","optional","error","name","half"],Sc=function(e){return function(t){t.className;var n=t.label,c=t.labelSize,a=void 0===c?"13px":c,i=t.labelWeight,s=void 0===i?"400":i,d=t.tip,l=t.info,o=t.isBool,u=void 0!==o&&o,j=t.options,b=t.optional,m=t.error,v=t.name,h=t.half,p=void 0!==h&&h,f=Object(pe.a)(t,Ac),g=Object(r.useState)(""),N=Object(O.a)(g,2),C=N[0],y=N[1];return Object(r.useEffect)((function(){y(n)}),[n]),Object(x.jsx)(ec.a,{style:{width:p?"50%":"100%"},children:Object(x.jsxs)(Wn.a,{isInvalid:!!m,children:[Object(x.jsx)(tc.a,{justifyContent:"flex-start",alignItems:"center",children:!u&&Object(x.jsx)(x.Fragment,{children:C&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(Xn.a,{fontSize:a,fontWeight:s,mb:1,mr:1,color:"muted.400",htmlFor:n,children:C}),d&&Object(x.jsx)($n.a,{placement:"bottom-end",label:d,bg:"gray.800","aria-label":"Guide d'utilisation",children:Object(x.jsx)(Jn.b,{fontSize:"11px",color:"gray"})}),b&&Object(x.jsxs)(Zn.a.small,{color:"blue.700",children:["("," facultatif ",")"]})]})})}),Object(x.jsx)(e,Object(Se.a)({invalid:!!m,options:j,name:v,label:n},f)),l&&Object(x.jsx)(Zn.a.small,{my:4,color:"muted.500",fontStyle:"italic",fontWeight:"medium",children:l}),m&&Object(x.jsx)("p",{style:{color:"red"},children:m})]})})}},Ec={Input:Sc(Bn),Number:Sc(qc),Radio:Sc(Qn),Select:Sc(Yn),Textarea:Sc(Gn),Tag:Sc(ac),SelectObject:Sc(lc),RadioObject:Sc(jc),RadioProduct:Sc(vc),Date:Sc(sc),Password:Sc(pc),Checkbox:Sc(Nc)},wc=["validate","validations","children"],Pc=["name","validate"],Vc=function(e){e.validate;var t=e.validations,n=(e.children,Object(pe.a)(e,wc));return Object(x.jsx)(Fn.d,Object(Se.a)(Object(Se.a)({},n),{},{enableReinitialize:!0,validationSchema:t,validateOnChange:!1,validateOnBlur:!1}))};Vc.Element=function(e){return Object(x.jsx)(Fn.c,Object(Se.a)({noValidate:!0},e))},Vc.Field=Object(Yt.mapValues)(Ec,(function(e){return function(t){var n=t.name,c=t.validate,r=Object(pe.a)(t,Pc);return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(Fn.a,{name:n,validate:c,children:function(t){var c=t.field,a=t.form,i=a.touched,s=a.errors,d=a.setFieldValue;return Object(x.jsx)(e,Object(Se.a)(Object(Se.a)(Object(Se.a)({},c),r),{},{name:n,mb:2,error:Object(Yt.get)(i,n)&&Object(Yt.get)(s,n),changeValue:function(e){return d(n,e)}}))}})})}})),Vc.initialValues=function(e,t){return t((function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",c=Object(Yt.get)(e,t);return void 0===c||null===c?n:c}))};var Rc=Vc,Fc=function(){Object(o.i)().id;var e=Object(ie.d)(vn("fournisseurs").value),t=Object(ie.d)(vn("categories").value),n=(Object(ie.d)(vn("products").meta),Object(ie.c)());Object(o.g)();return Object(r.useEffect)((function(){n(xn("fournisseurs").fetch()),n(xn("categories").fetch()),n(xn("products").fetch())}),[]),Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Ajouter un produit",children:Object(x.jsx)(je,{title:"Ajouter un produit"})}),Object(x.jsx)(xe,{children:Object(x.jsx)(Rc,{id:"add-form-product",enableReinitialize:!0,initialValues:{},validations:{},onSubmit:function(e,t){console.log(e)},children:Object(x.jsx)(Rc.Element,{children:Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-lg-6",children:Object(x.jsxs)("div",{className:"card",children:[Object(x.jsx)("div",{className:"card-header bg-dark text-white",children:Object(x.jsx)("h5",{children:"Information g\xe9n\xe9rale"})}),Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsx)(Rc.Field.Select,{name:"categoryId",label:"Categorie",valueKey:"name",options:t}),Object(x.jsx)(Rc.Field.Select,{name:"fournisseurId",label:"Fournisseur",valueKey:"name",options:e}),Object(x.jsx)(Rc.Field.Input,{name:"name",label:"D\xe9signation",placeholder:"D\xe9signation"}),Object(x.jsx)(Rc.Field.Radio,{radioValue:"1",valueKey:"name",label:"Type d'article",name:"type",options:[{id:"BOLUS",name:"BOLUS"},{id:"FLACON",name:"FLACON"},{id:"UNITE",name:"UNITE"},{id:"SACHET",name:"SACHET"}],direction:"row"}),Object(x.jsx)(Rc.Field.Input,{name:"prixFournisseur",label:"prix unitaire",placeholder:"prix unitaire"}),Object(x.jsx)(Rc.Field.Input,{name:"quantity",label:"Quantit\xe9",placeholder:"Quantit\xe9"}),Object(x.jsx)(Rc.Field.Input,{type:"date",name:"datePer",label:"date de peremption",placeholder:"date de peremption"})]})]})}),Object(x.jsxs)("div",{className:"col-lg-6",children:[Object(x.jsxs)("div",{className:"card",children:[Object(x.jsx)("div",{className:"card-header bg-dark text-white",children:Object(x.jsx)("h5",{children:"Vente"})}),Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsx)(Rc.Field.Input,{name:"prixVente",label:"Prix de vente",placeholder:"prix de vente"}),Object(x.jsx)(Rc.Field.Input,{name:"prixVaccinateur",label:"Prix du vaccinateur",placeholder:"prix du vaccinateur"}),Object(x.jsx)(Rc.Field.Input,{name:"prixParCC",label:"Prix de Vente en ml",placeholder:"Prix de Vente en ml"})]})]}),Object(x.jsx)("button",{className:"btn btn-green  btn-sm ",type:"submit",children:"Ajouter"})]})]})})})})]})},Dc=c(191),Mc=c(33),Bc=c(1062),Tc=function(){var e,t,n,c,r,i,s,d,l=Object(o.i)().id,u=Object(ie.c)(),j=Object(ie.d)(vn("approvis").value);return a.a.useEffect((function(){u(xn("approvis").get(l))}),[l]),Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"D\xe9tail du facture",children:Object(x.jsx)(je,{title:"Detail de facture"})}),Object(x.jsx)(xe,{children:Object(x.jsx)("div",{className:"bg-white p-2",children:Object(x.jsxs)(Bc.a,{children:[Object(x.jsxs)(Bc.a.Header,{className:"d-flex justify-content-between align-items-center bg-dark text-white",children:["D\xe9tail du facture (",fe(null===(e=j[0])||void 0===e?void 0:e.dateApprov),")"]}),Object(x.jsxs)(Bc.a.Body,{children:[Object(x.jsx)("p",{children:"Arr\xeat\xe9 \xe0 la somme de "}),Object(x.jsx)("p",{className:"text-uppercase my-2",children:Object(x.jsxs)("strong",{children:[Object(Dc.NumberToLetter)(null===(t=j[0])||void 0===t?void 0:t.total)," ARIARY"]})}),Object(x.jsxs)("tr",{children:[Object(x.jsxs)("td",{children:[Object(x.jsx)("strong",{children:"Date Echeance"})," :"," ",fe(null===(n=j[0])||void 0===n?void 0:n.dateEcheance)]})," "]}),Object(x.jsxs)("td",{className:"mb-1",children:[Object(x.jsx)("h3",{children:"Remarque"}),Object(x.jsx)("p",{class:"text-info",children:null===(c=j[0])||void 0===c?void 0:c.remarque})]}),Object(x.jsx)("br",{}),Object(x.jsxs)("h3",{children:[" ",Object(x.jsx)("strong",{children:"ARTICLES"})]}),null===(r=j[0])||void 0===r?void 0:r.contenu.map((function(e){return Object(x.jsxs)("div",{className:"border mb-3 p-3",children:[Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"Nom de l'article:"}),Object(x.jsx)("td",{children:null===e||void 0===e?void 0:e.name})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"Quantit\xe9:"}),Object(x.jsx)("td",{children:null===e||void 0===e?void 0:e.quantityParProduct})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"Prix unitaire:"}),Object(x.jsx)("td",{children:Object(x.jsx)(Mc.a,{value:null===e||void 0===e?void 0:e.prixFournisseur,displayType:"text",thousandSeparator:!0,suffix:"Ar",renderText:function(e,t){return Object(x.jsx)("div",Object(Se.a)(Object(Se.a)({},t),{},{children:e}))}})})]})]})})),Object(x.jsx)("tr",{children:Object(x.jsxs)("td",{children:[Object(x.jsx)("strong",{children:"Remise :"})," ",null===(i=j[0])||void 0===i?void 0:i.remise," Ar"]})}),Object(x.jsx)("tr",{children:Object(x.jsxs)("td",{class:"text-uppercase",children:[Object(x.jsx)("strong",{children:"Paiement en :"}),null===(s=j[0])||void 0===s?void 0:s.typePaye]})}),Object(x.jsx)("tr",{children:Object(x.jsxs)("td",{class:"text-uppercase",children:[Object(x.jsx)("strong",{children:"Total:"}),Object(x.jsx)(Mc.a,{value:null===(d=j[0])||void 0===d?void 0:d.total,displayType:"text",thousandSeparator:!0,suffix:"Ar",renderText:function(e,t){return Object(x.jsx)("div",Object(Se.a)(Object(Se.a)({},t),{},{children:e}))}})]})})," "]})]})})})]})},kc=c(176);function _c(e){var t=e.column,n=t.filterValue,c=t.preFilteredRows,r=t.setFilter;c.length;return Object(x.jsx)("input",{className:"form-control",value:n||"",onChange:function(e){r(e.target.value||void 0)},placeholder:"Rechercher..."})}function Ic(e){var t=e.preGlobalFilteredRows,n=e.globalFilter,c=e.setGlobalFilter,r=(t.length,a.a.useState(n)),i=Object(O.a)(r,2),s=i[0],d=i[1],l=Object(kc.useAsyncDebounce)((function(e){c(e||void 0)}),200);return Object(x.jsx)("div",{w:200,children:Object(x.jsx)("input",{className:"form-control",value:s||"",onChange:function(e){d(e.target.value),l(e.target.value)},placeholder:"Rechercher ..."})})}function Qc(e){var t=e.columns,n=e.data,c=void 0===n?[]:n,r=e.meta,a=e.addUrl,i=e.urlName,s=e.footer,d=e.tip,l=void 0===d?"":d,o=e.filter,u=void 0===o||o,j=e.paginate,b=void 0===j||j,m=e.guide;return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(Lc,{columns:t,data:r.isFetching?[]:c,meta:r,addUrl:a,urlName:i,footer:s,tip:l,filter:u,paginate:b,guide:m})})}function Lc(e){var t=e.columns,n=e.data,c=void 0===n?[]:n,r=e.meta,i=e.addUrl,s=e.urlName,d=e.footer,o=e.tip,u=void 0===o?"":o,j=e.filter,b=void 0===j||j,m=e.paginate,O=void 0===m||m,v=e.guide,h=t.length,p=a.a.useMemo((function(){return{Filter:_c}}),[]),f=Object(kc.useTable)({columns:t,data:c,defaultColumn:p,initialState:{pageIndex:0,pageSize:10}},kc.useFilters,kc.useGlobalFilter,kc.useSortBy,kc.usePagination),g=f.getTableProps,N=f.getTableBodyProps,C=f.headerGroups,y=(f.rows,f.prepareRow),q=f.preGlobalFilteredRows,A=f.setGlobalFilter,S=f.page,E=f.canPreviousPage,w=f.canNextPage,P=f.pageOptions,V=(f.pageCount,f.gotoPage),R=f.nextPage,F=f.previousPage,D=f.setPageSize,M=f.state,B=M.pageIndex,T=M.pageSize,k=M.globalFilter;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("div",{className:"d-flex my-2 justify-content-between align-items-center",children:[b&&Object(x.jsx)(Ic,{preGlobalFilteredRows:q,globalFilter:k,setGlobalFilter:A}),Object(x.jsx)("div",{children:i&&s&&Object(x.jsx)(l.b,{className:"btn btn-sm btn-green",variant:"solid",to:i,children:s})})]}),u&&Object(x.jsx)("h3",{children:u}),Object(x.jsxs)("table",Object(Se.a)(Object(Se.a)({},g()),{},{className:"table table-bordered striped",children:[Object(x.jsx)("thead",{className:"bg-thead ",children:C.map((function(e){return Object(x.jsx)("tr",Object(Se.a)(Object(Se.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(x.jsxs)("th",Object(Se.a)(Object(Se.a)({},e.getHeaderProps(e.getSortByToggleProps())),{},{isNumeric:e.isNumeric,children:[e.render("Header"),Object(x.jsx)("span",{children:e.isSorted?e.isSortedDesc?" \ud83d\udd3d":" \ud83d\udd3c":""})]}))}))}))}))}),Object(x.jsx)("tbody",Object(Se.a)(Object(Se.a)({},N()),{},{children:r.isFetching?Object(x.jsx)("td",{colSpan:h,className:"text-center",children:Object(x.jsx)("p",{children:"Chargement des donn\xe9es en cours ...."})}):Object(x.jsxs)(x.Fragment,{children:[0==S.length&&Object(x.jsx)("tr",{children:Object(x.jsx)("td",{colSpan:h,style:v?{textAlign:"left"}:{textAlign:"center"},children:v?Object(x.jsxs)("div",{style:{width:"100%",color:"blue.700",backgroundColor:"gray.200",padding:"10px"},children:[Object(x.jsx)("h3",{className:"py-3",children:u}),v]}):"Aucune enregistrement \xe0 afficher"})}),S.map((function(e){return y(e),Object(x.jsx)("tr",Object(Se.a)(Object(Se.a)({p:0},e.getRowProps()),{},{children:e.cells.map((function(e){return Object(x.jsx)("td",Object(Se.a)(Object(Se.a)({fontSize:"11px"},e.getCellProps()),{},{isNumeric:e.column.isNumeric,children:e.render("Cell")}))}))}))}))]})})),d&&Object(x.jsx)("tfoot",{bg:"blue.900",children:Object(x.jsx)("tr",{children:Object(x.jsx)("td",{colSpan:h,color:"white",children:d})})})]})),O&&Object(x.jsxs)("div",{className:"d-flex  justify-content-between align-items-center py-3",children:[Object(x.jsx)("div",{style:{width:"200px"},children:Object(x.jsxs)("div",{className:"d-flex justify-content-center align-items-center",children:[Object(x.jsx)("input",{className:"form-control  mr-2",type:"number",placeholder:"Page",value:B+1,onChange:function(e){var t=e.target.value?Number(e.target.value)-1:0;V(t)}}),Object(x.jsx)("select",{className:"form-control",value:T,onChange:function(e){D(Number(e.target.value))},size:"sm",children:[5,10,20,30,40,50,100,150,250].map((function(e){return Object(x.jsx)("option",{value:e,children:e},e)}))})]})}),Object(x.jsx)("div",{children:Object(x.jsxs)(x.Fragment,{children:["Page"," ",Object(x.jsxs)("strong",{children:[B>0?B+1:1," sur ",P.length]})," "]})}),Object(x.jsx)("div",{className:"mb-6",children:Object(x.jsxs)("div",{children:[Object(x.jsxs)("button",{className:"mr-2 btn btn-sm btn-green",onClick:function(){return F()},disabled:!E,children:["<<"," Pr\xe9cedent"]}),Object(x.jsxs)("button",{className:"mr-2 btn btn-sm btn-green",onClick:function(){return R()},disabled:!w,children:["Suivant ",">>"]})]})})]})]})}var Hc=function(e){var t=e.model,n=e.entity,c=Object(ie.c)();return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(e){e.preventDefault(),window.confirm("Vous voulez vraiment supprimer ce facture ?")&&c(xn(t).deleteTransaction(n,"/delete-facture"))},children:"Supprimer"})})};function Uc(){var e=ae()().isoWeekday(1).startOf("week"),t=ae()().endOf("week"),n=Object(r.useState)(e),c=Object(O.a)(n,2),i=c[0],s=c[1],d=Object(r.useState)(t),o=Object(O.a)(d,2),u=o[0],j=o[1],b=Object(r.useState)([e,t]),m=Object(O.a)(b,2),v=m[0],h=m[1],p=(Object(r.useRef)(null),Object(r.useRef)(null),Object(ie.d)(vn("approvis").value)),f=Object(ie.d)(vn("approvis").meta),g=Object(ie.c)();Object(r.useEffect)((function(){g(xn("approvis").fetch())}),[]),Object(r.useEffect)((function(){null!==v?(v[0]&&s(v[0]),v[1]&&j(v[1])):(s(e),j(t))}),[v]),Object(r.useEffect)((function(){g(function(e,t){return sn("approvis",{path:"/get-approv-by-date?deb=".concat(e,"&fin=").concat(t),replace:!0})}(i,u))}),[i,u]);var N=a.a.useMemo((function(){return[{Header:"#",accessor:"id"},{Header:"Produit",Cell:function(e){var t,n;return Object(x.jsx)("div",{style:{width:"200px"},children:null===(t=e.row.original)||void 0===t||null===(n=t.contenu)||void 0===n?void 0:n.map((function(e){return Object(x.jsxs)("span",{children:[e.name,","]})}))})}},{Header:"Date du facture",Cell:function(e){var t;return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("span",{className:"badge badge-primary",children:fe(null===(t=e.row.original)||void 0===t?void 0:t.dateApprov)})})}},{Header:"Date echeance",Cell:function(e){var t;return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("span",{className:"badge badge-warning",children:fe(null===(t=e.row.original)||void 0===t?void 0:t.dateEcheance)})})}},{Header:"Mode de paiement",accessor:"typePaye"},{Header:"Total",Cell:function(e){var t;return Object(x.jsx)("div",{children:ge(null===(t=e.row.original)||void 0===t?void 0:t.total)})}},{Header:"Actions",Cell:function(e){var t,n;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(l.b,{to:"/approvis/detail/".concat(null===(t=e.row.original)||void 0===t?void 0:t.id),className:"btn btn-green btn-sm mr-2",children:"D\xe9tails"}),Object(x.jsx)(l.b,{to:"/editer/facture/".concat(null===(n=e.row.original)||void 0===n?void 0:n.id),className:"btn btn-warning btn-sm mr-2",children:"Editer"}),Object(x.jsx)(Hc,{model:"approvis",entity:e.row.original})]})}}]}),[]);return Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Factures",children:Object(x.jsx)(je,{title:"Factures"})}),Object(x.jsxs)(xe,{children:[Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-lg-6",children:Object(x.jsxs)("div",{children:[Object(x.jsx)("h3",{className:"text-uppercase",children:"Factures"}),Object(x.jsx)("p",{children:"".concat(fe(i)," ->  ").concat(fe(u))})]})}),Object(x.jsx)("div",{className:"col-lg-6 text-right",children:Object(x.jsx)(he.a,{locale:"fr-FR",onChange:h,value:v})})," "]}),Object(x.jsx)(Qc,{filter:!1,data:p.sort((function(e,t){return t.id-e.id})),meta:f,columns:N,addUrl:M,urlName:"Ajouter un facture"})]})]})}var Yc=function(){return Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Sortie",children:Object(x.jsx)(je,{title:"Sortie"})}),Object(x.jsx)(xe,{})]})},zc=c(1063),Kc=c(1036),Gc=c(1037),Wc="SET_BASKET_ITEMS",Xc="ADD_TO_BASKET",Jc="REMOVE_FROM_BASKET",Zc="CLEAR_BASKET",$c="ADD_QTY_ITEM",er="MINUS_QTY_ITEM",tr="ADD_QTY_PORTION_ITEM",nr="MINUS_QTY_PORTION_ITEM",cr="SET_CHECKOUT_SHIPPING_DETAILS",rr="SET_CHECKOUT_PAYMENT_DETAILS",ar="RESET_CHECKOUT",ir=c(1038);function sr(e){return e.toString().replace(/\s/g,"").toLowerCase()}function dr(e){var t,n,c;for(c in t=Array.isArray(e)?[]:{},e)n=e[c],t[c]="object"===typeof n?dr(n):n;return t}var lr=function(e,t){return dr(e).filter((function(e){return""==t||sr(e.name).includes(sr(t))}))};var or=c(61),ur=c.n(or);var jr=function(e){var t=e.model,n=e.entity,c=Object(ie.c)(),r=Object(o.g)();return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(e){e.preventDefault(),window.confirm("Vous voulez vraiment supprimer ce commande ?")&&(c(xn(t).deleteTransaction(n,"/delete-from-depot")),r.push(D))},children:"Supprimer"})})};var br=function(e){var t=ae()().isoWeekday(1).startOf("week"),n=ae()().endOf("week"),c=Object(r.useState)(t),i=Object(O.a)(c,2),s=i[0],d=i[1],o=Object(r.useState)(n),u=Object(O.a)(o,2),j=u[0],b=u[1],m=Object(r.useState)([t,n]),v=Object(O.a)(m,2),h=v[0],p=v[1],f=Object(ie.d)(vn("commandes").value),g=Object(ie.d)(vn("commandes").meta),N=Object(ie.c)();Object(r.useEffect)((function(){null!==h?(h[0]&&d(h[0]),h[1]&&b(h[1])):(d(t),b(n))}),[h]);var C=function(e){if(!e||0===(null===e||void 0===e?void 0:e.length))return 0;var t=0;return e.forEach((function(e){t+=e.prixVente*e.quantityParProductDepot})),t};Object(r.useEffect)((function(){N(function(e,t){return sn("commandes",{path:"/credit?deb=".concat(e,"&fin=").concat(t),replace:!0})}(s,j))}),[s,j]);var y=a.a.useMemo((function(){return[{Header:"Date de credit",Cell:function(e){var t;return Object(x.jsx)(x.Fragment,{children:fe(null===(t=e.row.original)||void 0===t?void 0:t.dateCom)})}},{Header:"Produits",accessor:"contenu",Cell:function(e){var t=e.cell.value;return Object(x.jsx)("div",{style:{width:"100px"},children:null!=t&&t.map((function(e){return Object(x.jsx)("p",{children:e.name})}))})}},{Header:"Status",Cell:function(e){var t;return Object(x.jsx)("div",{children:1==(null===(t=e.row.original)||void 0===t?void 0:t.status)?Object(x.jsx)("h3",{className:"badge badge-success",children:"pay\xe9"}):Object(x.jsx)("h3",{className:"badge badge-danger",children:"non pay\xe9"})})}},{Header:"Nom de la personne",accessor:"emprunter.name"},{Header:"Contact",accessor:"emprunter.contact"},{Header:"Total",Cell:function(e){var t=e.cell.value;return Object(x.jsx)("div",{children:ge(C(null===t||void 0===t?void 0:t.contenu))})}},{Header:"Actions",Cell:function(e){var t,n;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(l.b,{to:"/detail/".concat(null===(t=e.row.original)||void 0===t?void 0:t.id),className:"btn btn-green btn-sm mr-2",children:"D\xe9tails"}),Object(x.jsx)(l.b,{to:"/editer/commande/".concat(null===(n=e.row.original)||void 0===n?void 0:n.id),className:"btn btn-warning btn-sm mr-2",children:"Editer"}),Object(x.jsx)(jr,{model:"fromdepots",entity:e.row.original})]})}}]}),[]);return Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Cr\xe9dit",children:Object(x.jsx)(je,{title:"Cr\xe9dit"})}),Object(x.jsxs)(xe,{children:[Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-lg-6",children:Object(x.jsxs)("div",{children:[Object(x.jsx)("h3",{className:"text-uppercase",children:"Credit"}),Object(x.jsx)("p",{children:"".concat(fe(s)," ->  ").concat(fe(j))})]})}),Object(x.jsx)("div",{className:"col-lg-6 text-right",children:Object(x.jsx)(ur.a,{locale:"fr-FR",onChange:p,value:h})})," "]}),Object(x.jsx)(Qc,{data:f.sort((function(e,t){return t.id-e.id})),meta:g,columns:y})]})]})};var mr=function(e){var t=ae()().isoWeekday(1).startOf("week"),n=ae()().endOf("week"),c=Object(r.useState)(t),i=Object(O.a)(c,2),s=i[0],d=i[1],o=Object(r.useState)(n),u=Object(O.a)(o,2),j=u[0],b=u[1],m=Object(r.useState)([t,n]),v=Object(O.a)(m,2),h=v[0],p=v[1],f=Object(ie.d)(vn("commandes").value),g=Object(ie.d)(vn("commandes").meta),N=Object(ie.c)();Object(r.useEffect)((function(){null!==h?(h[0]&&d(h[0]),h[1]&&b(h[1])):(d(t),b(n))}),[h]);var C=function(e){if(!e||0===(null===e||void 0===e?void 0:e.length))return 0;var t=0;return e.forEach((function(e){t+=e.prixVente*e.quantityParProductDepot})),t},y=function(e){if(!e||0===(null===e||void 0===e?void 0:e.length))return 0;var t=0;return e.forEach((function(e){t+=1*e.quantityParProductDepot})),t};Object(r.useEffect)((function(){N(sn("commandes",{path:"/credit-vaccinateur",replace:!0}))}),[s,j]);var q=a.a.useMemo((function(){return[{Header:"Date du credit",Cell:function(e){var t;return Object(x.jsx)(x.Fragment,{children:fe(null===(t=e.row.original)||void 0===t?void 0:t.dateCom)})}},{Header:"Produits",Cell:function(e){var t,n;return Object(x.jsx)("div",{style:{width:"100px"},children:null===(t=e.row.original)||void 0===t||null===(n=t.contenu)||void 0===n?void 0:n.map((function(e){return Object(x.jsxs)("span",{children:[e.name,","]})}))})}},{Header:"Status",Cell:function(e){var t;return Object(x.jsx)("div",{children:1==(null===(t=e.row.original)||void 0===t?void 0:t.status)?Object(x.jsx)("h3",{className:"badge badge-success",children:"pay\xe9"}):Object(x.jsx)("h3",{className:"badge badge-danger",children:"non pay\xe9"})})}},{Header:"Nom du vaccinateur",accessor:"vaccinateur.name"},{Header:"Contact du vaccinateur",accessor:"vaccinateur.contact"},{Header:"Quantit\xe9",Cell:function(e){var t;return Object(x.jsx)("div",{children:y(null===(t=e.row.original)||void 0===t?void 0:t.contenu)})}},{Header:"Total",Cell:function(e){var t;return Object(x.jsx)("div",{children:ge(C(null===(t=e.row.original)||void 0===t?void 0:t.contenu))})}},{Header:"Actions",Cell:function(e){var t,n;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(l.b,{to:"/detail/".concat(null===(t=e.row.original)||void 0===t?void 0:t.id),className:"btn btn-green btn-sm mr-2",children:"D\xe9tails"}),Object(x.jsx)(l.b,{to:"/editer/commande/".concat(null===(n=e.row.original)||void 0===n?void 0:n.id),className:"btn btn-warning btn-sm mr-2",children:"Editer"}),Object(x.jsx)(jr,{model:"fromdepots",entity:e.row.original})]})}}]}),[]);return Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Cr\xe9dit  pour les vaccinateurs",children:Object(x.jsx)(je,{title:"Cr\xe9dit  pour les vaccinateurs"})}),Object(x.jsxs)(xe,{children:[Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-lg-6",children:Object(x.jsxs)("div",{children:[Object(x.jsx)("h3",{className:"text-uppercase",children:"Credit pour les vaccinateurs"}),Object(x.jsx)("p",{children:"".concat(fe(s)," ->  ").concat(fe(j))})]})}),Object(x.jsx)("div",{className:"col-lg-6 text-right",children:Object(x.jsx)(ur.a,{locale:"fr-FR",onChange:p,value:h})})," "]}),Object(x.jsx)(Qc,{data:f.sort((function(e,t){return t.id-e.id})),meta:g,columns:q})]})]})},Or=function(e){if(!e||0===(null===e||void 0===e?void 0:e.length))return 0;var t=0;return e.forEach((function(e){t+=e.prixVente*e.quantityParProductDepot*1})),t};var xr=Object(o.j)((function(e){var t,n,c,a,i,s,d,l,u,j,b,m,O,v=Object(o.g)(),h=Object(o.i)().id,p=Object(ie.d)(vn("commandes").value),f=Object(ie.c)();return Object(r.useEffect)((function(){f(xn("commandes").get(h))}),[h]),Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"D\xe9tail de sortie ou entr\xe9e",children:Object(x.jsx)(je,{title:"D\xe9tail de sortie ou entr\xe9e"})}),Object(x.jsxs)(xe,{children:[Object(x.jsxs)("div",{className:"badge badge-info my-2",children:["vente-depot-credit"==(null===(t=p[0])||void 0===t?void 0:t.type)&&Object(x.jsx)("h3",{children:"Credit"}),"vente-depot-vaccinateur"==(null===(n=p[0])||void 0===n?void 0:n.type)&&Object(x.jsx)("h3",{children:"Credit pour vaccinateur"}),"direct"==(null===(c=p[0])||void 0===c?void 0:c.type)&&Object(x.jsx)("h3",{children:"Direct"})]}),"vente-depot-vaccinateur"==(null===(a=p[0])||void 0===a?void 0:a.type)&&Object(x.jsx)("div",{className:"border pl-3 py-3 bg-white",children:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("h3",{className:"my-2",children:[" ","Nom du vaccinateur : ",null===(i=p[0])||void 0===i?void 0:i.vaccinateur.name]}),Object(x.jsxs)("h5",{children:["Contact : ",null===(s=p[0])||void 0===s?void 0:s.vaccinateur.contact]})]})}),"vente-depot-credit"==(null===(d=p[0])||void 0===d?void 0:d.type)&&Object(x.jsx)("div",{className:"border pl-3 py-3 bg-white",children:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("h3",{className:"my-2",children:["Nom:",null===(l=p[0])||void 0===l?void 0:l.emprunter.name]}),Object(x.jsxs)("h5",{children:["Contact: ",null===(u=p[0])||void 0===u?void 0:u.emprunter.contact]})]})}),p.length>0&&Object(x.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(x.jsxs)("p",{className:"text-uppercase",children:["Commande du : ",fe(null===(j=p[0])||void 0===j?void 0:j.dateCom)]}),1==(null===(b=p[0])||void 0===b?void 0:b.status)?Object(x.jsx)("p",{className:"btn btn-sm btn-green my-2 mt-4",children:"pay\xe9"}):Object(x.jsx)("button",{className:"btn btn-sm btn-warning my-3",onClick:function(){var e;f(function(e){return sn("commandes",{path:"/set-payer-commande?cId=".concat(e),replace:!0})}(null===(e=p[0])||void 0===e?void 0:e.id)),v.goBack()},children:"Marquer comme pay\xe9"})]}),Object(x.jsxs)("table",{className:"table table-bordered ",children:[Object(x.jsxs)("tr",{className:"bg-thead",children:[Object(x.jsx)("td",{children:"Nom de l'article"}),Object(x.jsx)("td",{children:"Quantit\xe9"}),Object(x.jsx)("td",{children:"Sous total"})]}),p.length>0&&(null===(m=p[0])||void 0===m?void 0:m.contenu.map((function(e){return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{style:{width:"40%"},children:e.name}),Object(x.jsxs)("td",{className:"d-flex align-items-center",children:[ge(e.prixVente),"(","x"," ",e.quantityParProductDepot,")"]}),Object(x.jsx)("td",{children:ge(e.prixVente*e.quantityParProductDepot)})]})})))]}),Object(x.jsxs)("div",{className:"d-flex justify-content-end",children:[Object(x.jsx)("strong",{children:"Total"}),":",ge(Or(null===(O=p[0])||void 0===O?void 0:O.contenu))]})]})]})})),vr=function(e){if(!e||0===(null===e||void 0===e?void 0:e.length))return 0;var t=0;return e.forEach((function(e){t+=e.prixVente*e.quantityParProductDepot*1})),t};var hr=Object(o.j)((function(e){Object(o.h)();var t,n,c,a,i,s,d,l,u,j,b,m,O=Object(o.i)().id,v=Object(ie.d)(vn("commandes").value),h=Object(ie.c)();return Object(r.useEffect)((function(){h(xn("commandes").get(O))}),[O]),Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"D\xe9tail de sortie ou entr\xe9e",children:Object(x.jsx)(je,{title:"D\xe9tail de sortie ou entr\xe9e"})}),Object(x.jsxs)(xe,{children:[Object(x.jsxs)("p",{children:["credit"==(null===(t=v[0])||void 0===t?void 0:t.type)&&Object(x.jsx)("p",{children:"Credit"}),"vaccinateur"==(null===(n=v[0])||void 0===n?void 0:n.type)&&Object(x.jsx)("p",{children:"Sortie vaccinateur"}),"direct"==(null===(c=v[0])||void 0===c?void 0:c.type)&&Object(x.jsx)("p",{children:"Sortie Magasion"})]}),"vaccinateur"==(null===(a=v[0])||void 0===a?void 0:a.type)&&Object(x.jsx)("div",{className:"border",children:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("h3",{children:null===(i=v[0])||void 0===i?void 0:i.vaccinateur.name}),Object(x.jsx)("h5",{children:null===(s=v[0])||void 0===s?void 0:s.vaccinateur.contact})]})}),"credit"==(null===(d=v[0])||void 0===d?void 0:d.type)&&Object(x.jsx)("div",{className:"border",children:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("h3",{children:null===(l=v[0])||void 0===l?void 0:l.emprunter.name}),Object(x.jsx)("h5",{children:null===(u=v[0])||void 0===u?void 0:u.emprunter.contact})]})}),v.length>0&&Object(x.jsx)("div",{className:"d-flex justify-content-between",children:Object(x.jsxs)("p",{className:"text-uppercase",children:["Commande du : ",fe(null===(j=v[0])||void 0===j?void 0:j.dateCom)]})}),Object(x.jsxs)("table",{className:"table table-bordered ",children:[Object(x.jsxs)("tr",{className:"bg-thead",children:[Object(x.jsx)("td",{children:"Nom de l'article"}),Object(x.jsx)("td",{children:"Quantit\xe9"}),Object(x.jsx)("td",{children:"Sous total"})]}),v.length>0&&(null===(b=v[0])||void 0===b?void 0:b.contenu.map((function(e){return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{style:{width:"40%"},children:e.name}),Object(x.jsxs)("td",{className:"d-flex align-items-center",children:[ge(e.prixVente),"(","x"," ",e.quantityParProductDepot,")"]}),Object(x.jsx)("td",{children:ge(e.prixVente*e.quantityParProductDepot)})]})})))]}),Object(x.jsxs)("div",{className:"d-flex justify-content-end",children:[Object(x.jsx)("strong",{children:"Total"}),":",ge(vr(null===(m=v[0])||void 0===m?void 0:m.contenu))]})]})]})}));var pr=function(e){var t=Object(ie.d)(vn("commandes").value),n=Object(ie.c)();Object(r.useEffect)((function(){n(sn("commandes",{path:"/direct",replace:!0}))}),[]);var c=function(e){if(!e||0===(null===e||void 0===e?void 0:e.length))return 0;var t=0;return e.forEach((function(e){t+=e.prixVente})),t.toFixed(2)};return Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Sortie pour le magasin",children:Object(x.jsx)(je,{title:"Sortie pour le magasin"})}),Object(x.jsx)(xe,{children:Object(x.jsxs)("table",{className:"table table-bordered table-striped",children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"Date de commande"}),Object(x.jsx)("th",{children:"Nb"}),Object(x.jsx)("th",{children:"Montant"}),Object(x.jsx)("th",{children:"Actions"})]})}),Object(x.jsx)("tbody",{children:t.map((function(e){var t;return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:null===e||void 0===e?void 0:e.createdAt}),Object(x.jsx)("td",{children:null===e||void 0===e||null===(t=e.contenu)||void 0===t?void 0:t.length}),Object(x.jsx)("td",{children:c(null===e||void 0===e?void 0:e.contenu)}),Object(x.jsx)("td",{className:"d-flex justify-content-around",children:Object(x.jsx)(l.b,{className:"btn btn-sm  btn-green",to:"detail/".concat(e.id),children:"Detail"})})]})}))})]})})]})},fr=function(){var e=Object(r.useState)(new Date),t=Object(O.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(new Date),i=Object(O.a)(a,2),s=i[0],d=i[1],o=Object(r.useRef)(null),u=Object(r.useRef)(null),j=Object(ie.d)(vn("commandes").value),b=Object(ie.c)();Object(r.useEffect)((function(){b(function(e,t){return sn("commandes",{path:"/journal?deb=".concat(e,"&fin=").concat(t),replace:!0})}(n,s))}),[n,s]);var m=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0},v=function(e){return m(e.map((function(e){return e.prixVente*e.quantityParProduct})))+m(e.map((function(e){return e.prixParCC*e.qttByCC})))};return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Journal de sortie",children:Object(x.jsx)(je,{title:"Journal de sortie"})}),Object(x.jsxs)(xe,{children:[Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-lg-8"}),Object(x.jsxs)("div",{className:"col-lg-4",children:[Object(x.jsxs)("div",{className:"d-flex align-items-center mb-3",children:[Object(x.jsx)("input",{type:"date",name:"datedeb",ref:o,placeholder:"date debut",className:"form-control mr-2"}),Object(x.jsx)("input",{type:"date",name:"datefin",ref:u,placeholder:"date fin",className:"form-control mr-2"}),Object(x.jsx)("button",{className:"btn btn-primary",onClick:function(){""==o.current.value?c(new Date):c(o.current.value),""==u.current.value?d(new Date):d(u.current.value)},children:"Filtrer"})]})," "]})," "]}),Object(x.jsx)("div",{className:"table-responsive",children:Object(x.jsxs)("table",{className:"table",children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"Date "}),Object(x.jsx)("th",{children:"Type de sortie"}),Object(x.jsx)("th",{children:"Montant Total"}),Object(x.jsx)("th",{children:"Actions"})]})}),Object(x.jsx)("tbody",{children:j.map((function(e){return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:fe(null===e||void 0===e?void 0:e.createdAt)}),Object(x.jsx)("td",{children:Object(x.jsxs)(x.Fragment,{children:["cva"==(null===e||void 0===e?void 0:e.type)&&Object(x.jsx)("div",{className:"badge badge-info",children:"Approvisionnement du magasin"}),"vente-magasin-direct"==(null===e||void 0===e?void 0:e.type)&&Object(x.jsx)("div",{className:"badge badge-success",children:"Vente direct depuis le magasin"}),"vente-magasin-credit"==(null===e||void 0===e?void 0:e.type)&&Object(x.jsx)("div",{className:"badge badge-info",children:"credit client depuis magasin"}),"credit"==(null===e||void 0===e?void 0:e.type)&&Object(x.jsx)("div",{className:"badge badge-danger",children:"Credit personne"}),"vaccinateur"==(null===e||void 0===e?void 0:e.type)&&Object(x.jsx)("div",{className:"badge badge-warning",children:"Credit Vaccinateur"}),"direct"==(null===e||void 0===e?void 0:e.type)&&Object(x.jsx)("div",{className:"badge badge-dark",children:"Vente direct depuis le dep\xf4t"})]})}),Object(x.jsx)("td",{children:ge(v(null===e||void 0===e?void 0:e.contenu))}),Object(x.jsx)("td",{children:Object(x.jsx)(l.b,{className:"btn btn-sm  btn-green",to:"/detail/".concat(e.id),children:"Afficher le detail"})})]})}))})]})}),Object(x.jsxs)("h3",{children:["Total:",ge(function(e){var t=0;return e.map((function(e){t+=v(null===e||void 0===e?void 0:e.contenu)})),t}(j))]})]})]})})};var gr=function(){var e,t,n=Object(ie.d)(vn("parametres").value),c=Object(ie.c)();return Object(r.useEffect)((function(){c(xn("parametres").get(1))}),[]),Object(x.jsxs)("div",{children:[Object(x.jsx)("h3",{className:"mb-2 text-bold title",children:"Parametres supplementaires"}),Object(x.jsxs)("div",{className:"card mt-2",children:[Object(x.jsx)("div",{className:"card-body",children:Object(x.jsx)(Rc,{id:"parametrage-form",enableReinitialize:!0,initialValues:{nb_mois:null===(e=n[0])||void 0===e?void 0:e.nbMois,nb_produit:null===(t=n[0])||void 0===t?void 0:t.nbProduits},validations:{},onSubmit:function(e,t){c(xn("parametres").update({id:1,nb_mois:e.nb_mois,nb_produits:e.nb_produit}))},render:function(){return Object(x.jsxs)(Rc.Element,{children:[Object(x.jsx)(Rc.Field.Input,{name:"nb_mois",label:"Nombre de mois",placeholder:"Nombre de mois",type:"number"}),Object(x.jsx)(Rc.Field.Input,{name:"nb_produit",label:"Nombre de produit",placeholder:"Nombre de produit",type:"number"}),Object(x.jsx)("button",{type:"submit",className:"btn btn-success mt-2 btn-sm",children:"Sauvegarder la modification"})]})}})})," "]})," "]})},Nr=function(){var e=Object(ie.d)(vn("products").value),t=Object(ie.d)(vn("products").meta),n=Object(ie.c)();Object(r.useEffect)((function(){n(sn("products",{path:"/perimer",replace:!0}))}),[]);var c=a.a.useMemo((function(){return[{Header:"Produit",accessor:"name"},{Header:"Quantit\xe9",accessor:"quantityBrute"},{Header:"Date de peremption",Cell:function(e){var t;return Object(x.jsx)("h3",{children:fe(null===(t=e.row.original)||void 0===t?void 0:t.datePer)})}}]}),[]);return Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Article perim\xe9",children:Object(x.jsx)(je,{title:"Article perim\xe9"})}),Object(x.jsx)(xe,{children:Object(x.jsx)(Qc,{data:e,meta:t,columns:c})})]})},Cr=c(62);function yr(){return Cr.b().shape({name:Cr.c().required("Le champ est requis")})}var qr=c(1058);var Ar=function(e){var t=e.message;return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(qr.a,{mb:3,status:"success",variant:"top-accent",children:"string"===typeof t&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(qr.b,{}),t]})})})},Sr=c(1039),Er=c(194);var wr=function(e){var t=e.error;return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(qr.a,{mb:3,status:"error",variant:"top-accent",children:["object"===typeof t&&t.length>0&&Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(Sr.a,{spacing:3,children:t.map((function(e,t){return Object(x.jsxs)(Sr.c,{children:[Object(x.jsx)(Sr.b,{as:Er.b,color:"red.500"},t),e.msg]},t)}))})}),"object"===typeof t&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(Er.c,{color:"red.500"}),t.message]}),"string"===typeof t&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(qr.b,{}),t.message]})]})})};var Pr=function(){var e=Object(ie.d)(vn("fournisseurs").value),t=Object(ie.d)(vn("categories").value),n=Object(ie.d)(vn("categories").meta),c=Object(ie.d)(vn("fournisseurs").meta),a=Object(ie.d)(vn("products").meta),i=Object(r.useState)(0),s=Object(O.a)(i,2),d=(s[0],s[1],Object(r.useState)(0)),l=Object(O.a)(d,2),u=(l[0],l[1],Object(ie.c)()),j=Object(o.g)();return Object(r.useEffect)((function(){u(xn("fournisseurs").fetch()),u(xn("categories").fetch()),u(xn("products").fetch())}),[j]),Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Ajouter un produit",children:Object(x.jsx)(je,{title:"Ajouter un produit"})}),Object(x.jsxs)(xe,{children:[""!=a.success&&null!=a.success&&Object(x.jsx)(Ar,{message:a.success}),a.error&&Object(x.jsx)(wr,{error:a.error}),Object(x.jsx)(Rc,{id:"add-form-product",enableReinitialize:!0,initialValues:{name:"",type:"BOLUS",doseDefault:0,prixlitre:0,prixVente:0,prixFournisseur:0,prixVaccinateur:0,quantityParProduct:0,prixParCC:0,datePer:"",uniteMesure:"ml",qttByCC:0,newStockBrute:0,newStockCC:0,fournisseurId:1,qttyspecificmirror:0,quantityBruteCVA:0,categoryId:1,quantityBrute:0,quantityCCCVA:0,quantityCC:0,condml:0,condval:0,conditionnement:1,qttccpvente:0,prixqttccvente:0},validations:yr,onSubmit:function(e,t){var n=e.name,c=e.type,r=e.doseDefault,a=e.prixVente,i=e.prixFournisseur,s=e.prixVaccinateur,d=e.prixParCC,l=(e.datePer,e.fournisseurId),o=e.categoryId,b=e.condml,m=(e.condval,e.qttccpvente),O=e.conditionnement,x=e.prixqttccvente,v=e.condsize,h=e.prixlitre;u(xn("products").create({name:n,type:c,doseDefault:r,prixVente:parseFloat(a),prixlitre:parseFloat(h),prixFournisseur:parseFloat(i),prixVaccinateur:parseFloat(s),quantityParProduct:0,quantityBruteCVA:0,quantityBrute:0,quantityCCCVA:0,quantityCC:0,prixParCC:parseFloat(d),datePer:new Date,uniteMesure:"ml",qttByCC:0,newStockBrute:0,newStockCC:0,categoryId:parseInt(o),fournisseurId:parseInt(l),condml:parseFloat(b),condsize:parseFloat(v),conditionnement:O,qttccpvente:parseFloat(m),prixqttccvente:parseInt(x),refSortie:"0",refQtSortie:0,qttByCCDepot:0,condmldepot:0,condvaldepot:0,qttccpventedepot:0,prixqttccventedepot:0,quantityParProductDepot:0,condsizedepot:0,doseRestantEnMg:0,qttbylitre:0,remise:0,condval:0,correction:0,correctionml:0,correctionl:0,correctiontml:0,correctiontl:0,correctiontype:0,qttyspecificmirror:0,remisePerProduct:1})),j.push(C)},render:function(r){var a=r.values;return Object(x.jsx)(Rc.Element,{children:Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-lg-6",children:Object(x.jsxs)("div",{className:"card",children:[Object(x.jsx)("div",{className:"card-header bg-dark text-white",children:"Information g\xe9n\xe9rale"}),Object(x.jsxs)("div",{className:"card-body",children:[1==n.isFetching&&Object(x.jsx)("p",{children:"Recuperation des categories"}),Object(x.jsx)(Rc.Field.Select,{name:"categoryId",label:"Categorie",emptyValue:!0,valueKey:"name",disabled:n.isFetching,defaultValue:1,options:t}),1==c.isFetching&&Object(x.jsx)("p",{children:"Recuperation des fournisseurs"}),Object(x.jsx)(Rc.Field.Select,{name:"fournisseurId",label:"Fournisseur",emptyValue:!0,valueKey:"name",options:e,disabled:c.isFetching}),Object(x.jsx)(Rc.Field.Input,{name:"name",label:"D\xe9signation",placeholder:"D\xe9signation (Tikaz 1L )"}),Object(x.jsx)(Rc.Field.Select,{name:"type",label:"Type d'article",emptyValue:!1,isNumeric:!1,valueKey:"name",options:[{id:"BOLUS",name:"BOLUS"},{id:"FLACON",name:"FLACON"},{id:"UNITE",name:"UNITE"},{id:"SACHET",name:"SACHET"}]}),"FLACON"===a.type&&Object(x.jsxs)("div",{className:"ml-3",children:[Object(x.jsx)(Rc.Field.Input,{name:"doseDefault",label:"Quantit\xe9 en ml ou dose ou en litre",placeholder:"Quantit\xe9 en ml ou dose ou en litre"}),Object(x.jsx)(Rc.Field.Select,{name:"conditionnement",label:"Conditionnement",valueKey:"name",options:[{id:1,name:"Sans conditionnement"},{id:2,name:"Avec conditionnement"}]}),2==a.conditionnement&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(Rc.Field.Input,{name:"condml",defaultValue:0,label:"Conditionnement (ML)",placeholder:"Conditionnement en ML"}),Object(x.jsx)(Rc.Field.Input,{name:"condsize",defaultValue:0,label:"Diviser en combien de flacon",placeholder:"Diviser en combien de flacon"}),Object(x.jsx)(Rc.Field.Input,{name:"qttccpvente",defaultValue:0,label:"Quantit\xe9 de vente en ML",placeholder:"Quantit\xe9 de vente en ML"}),Object(x.jsx)(Rc.Field.Input,{name:"prixqttccvente",disabled:null==a.qttccpvente||""==a.qttccpvente,label:"Prix de vente equivalent \xe0 ".concat(a.qttccpvente," ML."),placeholder:"Prix de vente equivalent \xe0 ".concat(a.qttccpvente," ML.")})]})]})]})]})}),Object(x.jsxs)("div",{className:"col-lg-6",children:[Object(x.jsxs)("div",{className:"card",children:[Object(x.jsx)("div",{className:"card-header bg-dark text-white",children:"Vente"}),Object(x.jsxs)("div",{className:"card-body",children:[2==a.conditionnement&&Object(x.jsx)(Rc.Field.Input,{name:"prixlitre",label:"Prix d'un litre",placeholder:"Prix d'un litre"}),Object(x.jsx)(Rc.Field.Input,{name:"prixFournisseur",defaultValue:0,label:"prix unitaire",placeholder:"prix unitaire"}),Object(x.jsx)(Rc.Field.Input,{name:"prixVente",defaultValue:0,label:"Prix de vente",placeholder:"prix de vente"}),Object(x.jsx)(Rc.Field.Input,{name:"prixVaccinateur",defaultValue:0,label:"Prix du vaccinateur",placeholder:"prix du vaccinateur"}),Object(x.jsx)(x.Fragment,{children:"FLACON"===a.type&&Object(x.jsx)(Rc.Field.Input,{data:0!=a.qttccpvente&&""!=a.qttccpvente&&a.prixqttccvente/a.qttccpvente!="Infinity"?a.prixqttccvente/a.qttccpvente:0,name:"prixParCC",label:"Prix de vente ml",placeholder:"Prix de vente ml"})})]})]}),Object(x.jsx)("button",{className:"btn btn-green  btn-sm ",type:"submit",children:"Ajouter"}),Object(x.jsx)("button",{className:"btn btn-danger ml-2  btn-sm ",type:"reset",children:"Annuler"})]})]})})}})]})]})})};var Vr=function(){var e,t,n,c,a,i,s,d,u,j,b,m,O,v,h,p,f,g,N,C,y,q,A=Object(o.i)().id,S=Object(ie.c)(),E=Object(ie.d)(vn("products").value);return Object(r.useEffect)((function(){S(xn("products").get(A))}),[]),Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"D\xe9tail du produit",children:Object(x.jsx)(je,{title:"D\xe9tail du produit"})}),Object(x.jsxs)(xe,{children:[Object(x.jsx)("div",{className:"d-flex justify-content-end",children:Object(x.jsx)(l.b,{className:"btn btn-sm btn-warning mr-2 mb-2",to:"/changer/prix/".concat(A),children:"Rectification de prix"})}),2!=(null===(e=E[0])||void 0===e?void 0:e.conditionnement)||null!=(null===(t=E[0])||void 0===t?void 0:t.conditionnement)&&Object(x.jsxs)("div",{className:"card card-info",children:[Object(x.jsx)("div",{className:"card-header",children:"Conditionnement"}),Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsxs)("p",{children:["Prix d'un litre:"," ",Object(x.jsx)("span",{className:"badge badge-info",children:null===(n=E[0])||void 0===n?void 0:n.prixlitre})]}),Object(x.jsxs)("p",{children:["Conditionnement (ML):"," ",Object(x.jsx)("span",{className:"badge badge-info",children:null===(c=E[0])||void 0===c?void 0:c.condml})]}),Object(x.jsxs)("p",{children:["Division en flacon:"," ",Object(x.jsx)("span",{className:"badge badge-info",children:null===(a=E[0])||void 0===a?void 0:a.condsize})]}),Object(x.jsxs)("p",{children:["Quantit\xe9 de vente par ML:",Object(x.jsx)("span",{className:"badge badge-info",children:null===(i=E[0])||void 0===i?void 0:i.qttccpvente})]}),Object(x.jsxs)("p",{children:["Prix de vente pour ",null===(s=E[0])||void 0===s?void 0:s.qttccpvente," ML:"," ",Object(x.jsxs)("span",{className:"badge badge-info",children:[ge(null===(d=E[0])||void 0===d?void 0:d.prixqttccvente)," "]})]})]})]}),Object(x.jsxs)("table",{className:"table table-striped",children:[Object(x.jsxs)("tr",{className:"bg-thead",children:[Object(x.jsx)("td",{children:Object(x.jsx)("strong",{children:"Nom de l'article:"})}),Object(x.jsxs)("td",{children:[null===(u=E[0])||void 0===u?void 0:u.name," "]})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:Object(x.jsx)("strong",{children:"Fournisseur :"})}),Object(x.jsx)("td",{children:null===(j=E[0])||void 0===j||null===(b=j.fournisseur)||void 0===b?void 0:b.name})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:Object(x.jsx)("strong",{children:"Categorie :"})}),Object(x.jsx)("td",{children:null===(m=E[0])||void 0===m||null===(O=m.category)||void 0===O?void 0:O.name})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:Object(x.jsx)("strong",{children:"Type:"})}),Object(x.jsxs)("td",{children:[null===(v=E[0])||void 0===v?void 0:v.type," "]})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:Object(x.jsx)("strong",{children:"Dose:"})}),Object(x.jsxs)("td",{children:[null===(h=E[0])||void 0===h?void 0:h.doseDefault," ML "]})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:Object(x.jsx)("strong",{children:"Prix unitaire:"})}),Object(x.jsx)("td",{children:ge(null===(p=E[0])||void 0===p?void 0:p.prixFournisseur)})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:Object(x.jsx)("strong",{children:"Prix de vente:"})}),Object(x.jsx)("td",{children:ge(null===(f=E[0])||void 0===f?void 0:f.prixVente)})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:Object(x.jsx)("strong",{children:"Prix pour le vaccinateur:"})}),Object(x.jsx)("td",{children:ge(null===(g=E[0])||void 0===g?void 0:g.prixVaccinateur)})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:Object(x.jsx)("strong",{children:"Prix par ML:"})}),Object(x.jsx)("td",{children:0!=(null===(N=E[0])||void 0===N?void 0:N.qttccpvente)?ge((null===(C=E[0])||void 0===C?void 0:C.prixParCC)*(null===(y=E[0])||void 0===y?void 0:y.qttccpvente)):ge(null===(q=E[0])||void 0===q?void 0:q.prixParCC)})]})]})]})]})};var Rr=function(){var e,t,n=Object(o.i)().id,c=Object(ie.d)(vn("fournisseurs").value),a=Object(ie.d)(vn("categories").value),i=Object(ie.d)(vn("products").value),s=Object(ie.d)(vn("products").meta),d=Object(r.useState)((e={name:"",type:"",doseDefault:"",prixlitre:"",prixVente:"",prixFournisseur:"",prixVaccinateur:"",prixParCC:"",datePer:"",uniteMesure:"ml",conditionnement:"",categoryId:""},Object(Ge.a)(e,"datePer",""),Object(Ge.a)(e,"fournisseurId",""),Object(Ge.a)(e,"condml",""),Object(Ge.a)(e,"condsize",""),Object(Ge.a)(e,"qttccpvente",""),Object(Ge.a)(e,"prixqttccvente",""),e)),l=Object(O.a)(d,2),u=l[0],j=l[1],b=Object(o.g)(),m=Object(r.useState)(1),v=Object(O.a)(m,2),h=(v[0],v[1],Object(r.useState)(1)),p=Object(O.a)(h,2),f=(p[0],p[1],Object(r.useState)(0)),g=Object(O.a)(f,2),N=g[0],y=g[1],q=Object(r.useState)(0),A=Object(O.a)(q,2),S=A[0],E=A[1],w=Object(ie.c)(),P=Object(r.useState)({}),V=Object(O.a)(P,2),R=(V[0],V[1]),F=Object(r.useState)(u.type),D=Object(O.a)(F,2),M=(D[0],D[1]);return Object(r.useEffect)((function(){w(xn("products").fetch()),M(u.type),E(u.prixqttccvente),y(u.qttccpvente)}),[n]),Object(r.useEffect)((function(){s.isFetching||(j(null===i||void 0===i?void 0:i.find((function(e){return e.id==n}))),R({name:u.name}))}),[s]),Object(r.useEffect)((function(){w(xn("fournisseurs").fetch()),w(xn("categories").fetch())}),[]),Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Editer un produit",children:Object(x.jsx)(je,{title:"Editer un produit"})}),Object(x.jsxs)(xe,{children:[""!=s.success&&null!=s.success&&Object(x.jsx)(Ar,{message:s.success}),i.name,s.error&&Object(x.jsx)(wr,{error:s.error}),Object(x.jsx)(Rc,{id:"add-form-product",initialValues:(t={name:u.name,type:u.type,doseDefault:u.doseDefault,prixlitre:u.prixlitre,prixVente:u.prixVente,prixFournisseur:null===u||void 0===u?void 0:u.prixFournisseur,prixVaccinateur:u.prixVaccinateur,prixParCC:u.prixParCC,datePer:u.datePer,uniteMesure:"ml",conditionnement:u.conditionnement,categoryId:u.categoryId},Object(Ge.a)(t,"datePer",u.datePer),Object(Ge.a)(t,"fournisseurId",u.fournisseurId),Object(Ge.a)(t,"condml",null==u.condml?0:u.condml),Object(Ge.a)(t,"condsize",null==u.condsize?0:u.condsize),Object(Ge.a)(t,"qttccpvente",null==u.qttccpvente?0:u.qttccpvente),Object(Ge.a)(t,"prixqttccvente",null==u.prixqttccvente?0:u.prixqttccvente),t),validations:yr,onSubmit:function(e,t){var n=e.name,c=e.type,r=e.doseDefault,a=e.prixlitre,i=e.prixVente,s=e.prixFournisseur,d=e.prixVaccinateur,l=e.prixParCC,o=e.datePer,j=e.fournisseurId,m=e.categoryId,O=e.condml,x=(e.condval,e.qttccpvente),v=e.prixqttccvente,h=e.conditionnement,p=e.condsize;w(xn("products").update({id:u.id,name:n,type:c,doseDefault:r,prixVente:parseFloat(i),prixFournisseur:parseFloat(s),prixVaccinateur:parseFloat(d),prixlitre:parseFloat(a),prixParCC:parseFloat(l),datePer:new Date(o),qttByCC:parseFloat(u.qttByCC),quantityBrute:parseFloat(u.quantityBrute),quantityBruteCVA:parseFloat(u.quantityBruteCVA),quantityCCCVA:parseFloat(u.quantityCCCVA),quantityCC:parseFloat(u.quantityCC),uniteMesure:"ml",condml:parseFloat(O),condsize:parseFloat(p),qttccpvente:parseFloat(x),fournisseurId:parseInt(j),categoryId:parseInt(m),conditionnement:parseInt(h),prixqttccvente:parseInt(v),updatedAt:new Date,refSortie:"0",refQtSortie:0,qttByCCDepot:0,condmldepot:0,condvaldepot:0,qttyspecificmirror:0,qttccpventedepot:0,prixqttccventedepot:0,quantityParProductDepot:0,condsizedepot:0,qttbylitre:0,remise:0,condval:0,correction:0,correctionml:0,correctionl:0,correctiontml:0,correctiontl:0,correctiontype:0})),b.push(C)},render:function(e){var t=e.values;return Object(x.jsx)(Rc.Element,{children:Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-lg-6",children:Object(x.jsxs)("div",{className:"card",children:[Object(x.jsx)("div",{className:"card-header bg-dark text-white",children:"Information g\xe9n\xe9rale"}),Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsx)(Rc.Field.Select,{name:"categoryId",label:"Categorie",valueKey:"name",selectValue:u.categoryId,options:a}),Object(x.jsx)(Rc.Field.Select,{name:"fournisseurId",label:"Fournisseur",valueKey:"name",selectValue:u.fournisseurId,options:c}),Object(x.jsx)(Rc.Field.Input,{name:"name",value:null===t||void 0===t?void 0:t.name,label:"D\xe9signation",placeholder:"D\xe9signation"}),Object(x.jsx)(Rc.Field.Select,{name:"type",label:"Type d'article",emptyValue:!1,isNumeric:!1,valueKey:"name",options:[{id:"BOLUS",name:"BOLUS"},{id:"FLACON",name:"FLACON"},{id:"UNITE",name:"UNITE"},{id:"SACHET",name:"SACHET"}]}),"FLACON"===t.type&&Object(x.jsxs)("div",{className:"ml-3",children:[Object(x.jsx)(Rc.Field.Input,{name:"doseDefault",label:"Quantit\xe9 en ml ou dose ou litre",placeholder:"Quantit\xe9 en ml ou dose ou litre"}),Object(x.jsx)(Rc.Field.Select,{name:"conditionnement",label:"Conditionnement",valueKey:"name",emptyValue:!1,options:[{id:1,name:"Sans conditionnement"},{id:2,name:"Avec conditionnement"}]}),2==t.conditionnement&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(Rc.Field.Input,{name:"condml",label:"Conditionnement (ML)",placeholder:"Conditionnement en ML"}),Object(x.jsx)(Rc.Field.Input,{name:"condsize",label:"Diviser en combien de flacon",placeholder:"Diviser en combien de flacon"}),Object(x.jsx)(Rc.Field.Input,{name:"qttccpvente",label:"Quantit\xe9 de vente en ML",placeholder:"Quantit\xe9 de vente en ML"}),Object(x.jsx)(Rc.Field.Input,{name:"prixqttccvente",value:null===t||void 0===t?void 0:t.prixqttccvente,disabled:null==t.qttccpvente||""==t.qttccpvente,label:"Prix de vente equivalent \xe0 ".concat(t.qttccpvente," ML."),placeholder:"Prix de vente equivalent \xe0 ".concat(t.qttccpvente," ML.")})]})]})]})]})}),Object(x.jsxs)("div",{className:"col-lg-6",children:[Object(x.jsxs)("div",{className:"card",children:[Object(x.jsx)("div",{className:"card-header bg-dark text-white",children:"Vente"}),Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsx)(Rc.Field.Input,{name:"prixFournisseur",value:null===t||void 0===t?void 0:t.prixFournisseur,label:"prix unitaire",placeholder:"prix unitaire"}),2==t.conditionnement&&Object(x.jsx)(Rc.Field.Input,{name:"prixlitre",value:null===t||void 0===t?void 0:t.prixlitre,label:"Prix d'un litre",placeholder:"Prix d'un litre"}),Object(x.jsx)(Rc.Field.Input,{name:"prixVente",label:"Prix de vente",value:null===t||void 0===t?void 0:t.prixVente,placeholder:"prix de vente"}),"FLACON"===t.type&&Object(x.jsx)(Rc.Field.Input,{type:"text",data:0!=N&&""!=N&&S/N!="Infinity"?S/N:0,name:"prixParCC",label:"Prix de vente ml",placeholder:"Prix de vente ml"}),Object(x.jsx)(Rc.Field.Input,{value:null===t||void 0===t?void 0:t.prixVaccinateur,name:"prixVaccinateur",label:"Prix du vaccinateur",placeholder:"prix du vaccinateur"})]})]}),Object(x.jsx)("button",{className:"btn btn-green  btn-sm ",type:"submit",children:"Editer"}),Object(x.jsx)("button",{className:"btn btn-danger ml-2 btn-sm ",type:"reset",children:"Annuler"})]})]})})}})]})]})};c(346),c(347);var Fr=function(e){var t=e.model,n=e.entity,c=e.attribute,r=Object(ie.c)();return Object(o.g)(),Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(e){e.preventDefault(),window.confirm('Vous voulez vraiment supprimer "'.concat(n[c],'" ?'))&&r(xn(t).destroy(n))},children:"Supprimer"})})};c(1040),c(1041),c(1042),c(1035),c(118);var Dr=function(e){var t=e.route,n=e.model,c=e.modelKey,r=e.data,a=e.detail,i=void 0===a||a;return Object(x.jsxs)("div",{children:[i&&Object(x.jsx)(l.b,{className:"btn btn-sm btn-primary mr-2",to:"/".concat(t,"/detail/").concat(r.row.original.id),children:"Detail"}),Object(x.jsx)(l.b,{className:"btn btn-sm btn-warning mr-2",to:"/".concat(t,"/edit/").concat(r.row.original.id),children:"Editer"}),Object(x.jsx)(Fr,{model:n,entity:r.row.original,attribute:c})]})},Mr=function(){var e=Object(ie.d)(vn("products").value)||[],t=Object(ie.d)(vn("products").meta),n=(Object(r.useRef)(),Object(ie.c)());Object(o.g)();Object(r.useEffect)((function(){n(xn("products").fetch())}),[]);var c=[{Header:"Id",accessor:"id"},{Header:"Produit",accessor:"name"},{Header:"Fournisseur",Cell:function(e){var t,n,c;return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("span",{className:"badge badge-primary",children:null!=(null===(t=e.row.original)||void 0===t?void 0:t.fournisseur)?null===(n=e.row.original)||void 0===n||null===(c=n.fournisseur)||void 0===c?void 0:c.name:""})})}},{Header:"Quantit\xe9",accessor:"quantityBrute"},{Header:"Reste en ML",accessor:"quantityCC"},{Header:"Prix unitaire",Cell:function(e){var t;return Object(x.jsx)("div",{children:ge(null===(t=e.row.original)||void 0===t?void 0:t.prixFournisseur)})}},{Header:"Prix de vente",Cell:function(e){var t;return Object(x.jsx)("div",{children:ge(null===(t=e.row.original)||void 0===t?void 0:t.prixVente)})}},{Header:"Prix en ML",Cell:function(e){var t,n,c,r;return Object(x.jsx)("div",{children:0!=(null===(t=e.row.original)||void 0===t?void 0:t.qttccpvente)?ge((null===(n=e.row.original)||void 0===n?void 0:n.prixParCC)*(null===(c=e.row.original)||void 0===c?void 0:c.qttccpvente)):ge(null===(r=e.row.original)||void 0===r?void 0:r.prixParCC)})}},{Header:"Actions",Cell:function(e){return Object(x.jsx)(Dr,{route:"product",model:"products",modelKey:"name",data:e})}}];return Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Tous les produits",children:Object(x.jsx)(je,{title:"Tous les produits"})}),Object(x.jsx)(xe,{children:Object(x.jsx)(Qc,{data:e,meta:t,columns:c,addUrl:N,urlName:"Ajouter un produit"})})]})};var Br=function(){var e=Object(ie.d)(vn("products").value),t=Object(ie.d)(vn("categories").value),n=Object(ie.c)(),c=Object(r.useState)(1),a=Object(O.a)(c,2),i=a[0],s=a[1];return Object(r.useEffect)((function(){n(function(e){return sn("products",{path:"/product/category?id=".concat(e),replace:!0})}(i)),n(xn("categories").fetch())}),[i]),Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Liste des articles par categories",children:Object(x.jsx)(je,{title:"Liste des articles par categories"})}),Object(x.jsxs)(xe,{children:[Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-lg-8"}),Object(x.jsx)("div",{className:"col-lg-4",children:Object(x.jsxs)("div",{className:"d-flex align-items-center mb-3",children:[Object(x.jsx)("label",{htmlFor:"",children:"Categorie:"}),Object(x.jsx)("select",{className:"form-control",onChange:function(e){s(e.target.value)},children:t.map((function(e){return Object(x.jsx)("option",{value:e.id,children:e.name})}))})]})})]}),Object(x.jsxs)("table",{className:"table table-bordered table-striped",children:[Object(x.jsx)("thead",{className:"bg-thead",children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"Nom"}),Object(x.jsx)("th",{children:"Prix Unitaire"}),Object(x.jsx)("th",{children:"Categorie"}),Object(x.jsx)("th",{children:"Actions"})]})}),Object(x.jsx)("tbody",{children:e.map((function(e){var t;return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:null===e||void 0===e?void 0:e.name}),Object(x.jsx)("td",{children:ge(null===e||void 0===e?void 0:e.prixFournisseur)}),Object(x.jsx)("td",{children:null===e||void 0===e||null===(t=e.category)||void 0===t?void 0:t.name}),Object(x.jsx)("td",{children:Object(x.jsx)(l.b,{className:"btn btn-sm btn-primary",to:"/product/detail/".concat(e.id),children:"Detail"})})]})}))})]})]})]})};var Tr=function(){var e=Object(ie.d)(vn("products").value),t=Object(ie.d)(vn("fournisseurs").value),n=Object(ie.c)(),c=Object(r.useState)(1),a=Object(O.a)(c,2),i=a[0],s=a[1];return Object(r.useEffect)((function(){n(function(e){return sn("products",{path:"/product/fournisseur?id=".concat(e),replace:!0})}(i)),n(xn("fournisseurs").fetch())}),[i]),Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Liste des articles par fournisseurs",children:Object(x.jsx)(je,{title:"Liste des articles par fournisseurs"})}),Object(x.jsxs)(xe,{children:[Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-lg-8"}),Object(x.jsx)("div",{className:"col-lg-4",children:Object(x.jsxs)("div",{className:"d-flex align-items-center mb-3",children:[Object(x.jsx)("label",{htmlFor:"",children:"Fournisseur:"}),Object(x.jsx)("select",{className:"form-control",onChange:function(e){s(e.target.value)},children:t.map((function(e){return Object(x.jsx)("option",{value:e.id,children:e.name})}))})]})})]}),Object(x.jsxs)("table",{className:"table table-bordered table-striped",children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"Nom"}),Object(x.jsx)("th",{children:"Prix"}),Object(x.jsx)("th",{children:"Fournisseur"}),Object(x.jsx)("td",{children:"Actions"})]})}),Object(x.jsx)("tbody",{children:e.map((function(e){var t;return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:null===e||void 0===e?void 0:e.name}),Object(x.jsx)("td",{children:ge(null===e||void 0===e?void 0:e.prixFournisseur)}),Object(x.jsx)("td",{children:null===e||void 0===e||null===(t=e.fournisseur)||void 0===t?void 0:t.name}),Object(x.jsx)("td",{children:Object(x.jsx)(l.b,{className:"btn btn-sm btn-primary",to:"/product/detail/".concat(e.id),children:"Detail"})})]})}))})]})]})]})},kr=function(){var e=Object(ie.d)(vn("products").value),t=Object(ie.d)(vn("products").meta),n=Object(ie.c)();Object(r.useEffect)((function(){n(sn("products",{path:"/rupture/stock",replace:!0}))}),[]);var c=a.a.useMemo((function(){return[{Header:"Produit",accessor:"name"},{Header:"Quantit\xe9",accessor:"quantityBrute"},{Header:"Date de peremption",Cell:function(e){var t;return Object(x.jsx)("h3",{children:fe(null===(t=e.row.original)||void 0===t?void 0:t.datePer)})}}]}),[]);return Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Article en rupture de stock",children:Object(x.jsx)(je,{title:"Article en rupture de stock"})}),Object(x.jsx)(xe,{children:Object(x.jsx)(Qc,{data:e,meta:t,columns:c})})]})},_r=c(1043);var Ir=function(){var e=Object(r.useState)(new Date),t=Object(O.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(new Date),i=Object(O.a)(a,2),s=i[0],d=i[1],o=function(e){if(!e||0===(null===e||void 0===e?void 0:e.length))return 0;var t=0;return e.forEach((function(e){t+=e.prixVente})),t},u=function(e){if(!e||0===(null===e||void 0===e?void 0:e.length))return 0;var t=0;return e.forEach((function(e){t+=e.quantityBrute})),t},j=function(e){if(!e||0===(null===e||void 0===e?void 0:e.length))return 0;var t=0;return e.forEach((function(e){t+=e.quantityCC})),t},b=Object(r.useRef)(null),m=Object(r.useRef)(null),v=Object(ie.d)(vn("commandes").value),h=Object(ie.c)();return Object(r.useEffect)((function(){h(function(e,t){return sn("commandes",{path:"/entree?deb=".concat(e,"&fin=").concat(t),replace:!0})}(n,s))}),[n,s]),Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Factures",children:Object(x.jsx)(je,{title:"Factures"})}),Object(x.jsxs)(xe,{children:[Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-lg-4 mb-2",children:Object(x.jsx)(l.b,{to:"/approv",className:"btn  btn-primary",children:" Effectuer un approvisionnement"})}),Object(x.jsx)("div",{className:"col-lg-8"})]}),Object(x.jsxs)("div",{className:"border p-3 bg-white",children:[Object(x.jsxs)("div",{className:"row mb-3",children:[Object(x.jsx)("div",{className:"col-lg-7"}),Object(x.jsx)("div",{className:"col-lg-5",children:Object(x.jsxs)("div",{className:"d-flex justify-content-around",children:[Object(x.jsx)("input",{type:"date",name:"datedeb",className:"form-control mr-3",format:"DD-MM-YYYY",ref:b,placeholder:"D\xe9but"}),Object(x.jsx)("input",{type:"date",name:"datefin",className:"form-control mr-3",ref:m,placeholder:"Fin"}),Object(x.jsx)(_r.a,{onClick:function(){c(b.current.value),d(m.current.value)},children:"Filtrer"})]})})]}),Object(x.jsxs)("table",{className:"table table-bordered table-striped",children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"Date"}),Object(x.jsx)("th",{children:"Quantite Brute"}),Object(x.jsx)("th",{children:"Quantite en CC"}),Object(x.jsx)("th",{children:"Montant Total"}),Object(x.jsx)("th",{children:"Actions"})]})}),Object(x.jsx)("tbody",{children:v.map((function(e){return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:null===e||void 0===e?void 0:e.createdAt}),Object(x.jsx)("td",{children:u(null===e||void 0===e?void 0:e.contenu)}),Object(x.jsx)("td",{children:j(null===e||void 0===e?void 0:e.contenu)}),Object(x.jsx)("td",{children:Object(x.jsx)(Mc.a,{value:o(null===e||void 0===e?void 0:e.contenu),displayType:"text",thousandSeparator:!0,suffix:"Ar",renderText:function(e,t){return Object(x.jsx)("div",Object(Se.a)(Object(Se.a)({},t),{},{children:e}))}})}),Object(x.jsx)("td",{className:"d-flex justify-content-around",children:Object(x.jsx)(l.b,{className:"btn btn-sm  btn-success",to:"detail/".concat(e.id),children:"Afficher le detail"})})]})}))})]})]})]})]})},Qr="ROLE_VENDEUR",Lr=Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).SIGNUP_URL||"http://localhost:1200/api/signup",Hr=Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).SIGNIN_URL||"http://localhost:1200/api/signin",Ur=(Object(o.j)((function(){return Object(x.jsxs)(a.a.Fragment,{children:[Object(x.jsx)("div",{className:"bg-dark m-0  p-2  text-center",children:Object(x.jsx)("h3",{className:"m-0 p-2 text-white",children:"CABINET VETERINAIRE AMBALAVAO"})}),Object(x.jsxs)("ul",{className:"list-inline d-flex m-0  p-2 justify-content-center",children:[Object(x.jsx)("li",{className:"text-white  m-0  p-2",children:Object(x.jsx)(l.b,{className:"btn  btn-sm bg-success text-white",to:"/journal",children:"Journal d'entrees et sorties"})}),Object(x.jsx)("li",{className:"text-white  m-0  p-2",children:Object(x.jsx)(l.b,{className:"btn  btn-sm bg-success text-white",to:R,children:"Entree"})}),Object(x.jsx)("li",{className:"text-white  m-0  p-2",children:Object(x.jsx)(l.b,{className:"btn  btn-sm bg-success text-white",to:F,children:"Sortie"})}),Object(x.jsx)("li",{className:"text-white m-0  p-2",children:Object(x.jsx)(l.b,{className:"btn btn-sm bg-success text-white",to:"/products",children:"Articles"})}),Object(x.jsx)("li",{className:"text-white m-0  p-2",children:Object(x.jsx)(l.b,{className:"btn bg-success btn-sm text-white",to:"/credit",children:"Credit"})}),Object(x.jsx)("li",{className:"text-white m-0  p-2",children:Object(x.jsx)(l.b,{className:"btn bg-success btn-sm text-white",to:S,children:"Credit Vaccinateur"})}),Object(x.jsx)("li",{className:"text-white m-0  p-2",children:Object(x.jsx)(l.b,{className:"btn bg-success btn-sm text-white",to:E,children:"Commande direct"})}),Object(x.jsx)("li",{className:"text-white m-0  p-2",children:Object(x.jsx)(l.b,{className:"btn bg-success btn-sm text-white",to:P,children:"Produit par fournisseur"})}),Object(x.jsx)("li",{className:"text-white m-0  p-2",children:Object(x.jsx)(l.b,{className:"btn bg-success btn-sm text-white",to:V,children:"Produit par category"})}),Object(x.jsx)("li",{className:"text-white m-0  p-2",children:Object(x.jsx)(l.b,{className:"btn  btn-sm bg-success text-white",to:"/",children:"Bon de sortie"})}),Object(x.jsx)("li",{className:"text-white m-0  p-2",children:Object(x.jsx)(l.b,{className:"btn  btn-sm bg-success text-white",to:"/approv",children:"Article \xe0 approvisionner"})}),Object(x.jsx)("li",{className:"text-white m-0  p-2",children:Object(x.jsx)(l.b,{className:"btn  btn-sm bg-success text-white",to:"/perimes",children:"Article perim\xe9"})}),Object(x.jsx)("li",{className:"text-white m-0  p-2",children:Object(x.jsx)(l.b,{className:"btn  btn-sm bg-success text-white",to:w,children:"Parametres"})})]})]})})),"SET_APPROV_ITEMS"),Yr="ADD_TO_APPROV",zr="REMOVE_FROM_APPROV",Kr="CLEAR_APPROV",Gr="ADD_QTY_APPROV_ITEM",Wr="MINUS_QTY_APPROV_ITEM",Xr="ADD_NUMBER_QTY_ITEM",Jr="ADD_QTY_NUMBER_APPROV_ITEM",Zr="ADD_REMISE_PER_PRODUCT",$r="ADD_REMISE_PER_PRODUCT_PERCENT",ea=function(){return{type:Kr}},ta=function(e,t){return{type:Zr,payload:{id:e,value:t}}},na=function(e,t){var n=function(t){return!!(null===e||void 0===e?void 0:e.find((function(e){return(null===e||void 0===e?void 0:e.id)===t})))};return{approvisionnement:e,isItemOnApprov:n,addToApprov:function(e){n(e.id)?t(function(e){return{type:zr,payload:e}}(e.id)):t(function(e){return{type:Yr,payload:e}}(e))}}},ca=function(e){var t,n=e.key,c=e.product,r=e.isItemOnApprov,a=e.handleAddToApprov;return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(zc.a.Item,{children:Object(x.jsxs)(Kc.a,{className:"product-card m-2 ".concat(c.id?"":"product-loading"),style:{border:c&&r(c.id)?"1px solid #a6a5a5":"",boxShadow:c&&r(c.id)?"0 10px 15px rgba(0, 0, 0, .07)":"none"},children:[Object(x.jsx)(Gc.a,{xs:9,children:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("p",{children:null===c||void 0===c?void 0:c.name}),Object(x.jsx)("div",{class:"badge badge-primary",children:null===c||void 0===c||null===(t=c.fournisseur)||void 0===t?void 0:t.name}),Object(x.jsx)("p",{children:Object(x.jsxs)("strong",{children:[" ",ge(null===c||void 0===c?void 0:c.prixFournisseur)]})})]})}),Object(x.jsx)(Gc.a,{xs:3,children:(null===c||void 0===c?void 0:c.id)&&Object(x.jsx)("button",{className:" ".concat(r(c.id)?"btn btn-danger btn-sm":"btn btn-green btn-sm"),onClick:function(){return a(c)},children:r(c.id)?"Retirer":"Ajouter"})})]})},n)})},ra=a.a.memo(ca),aa=function(e){var t=e.product,n=Object(ie.c)(),c=function(e){n(function(e,t){return{type:Jr,payload:{id:e,value:t}}}(t.id,e))};return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Cc.c,{w:28,bg:"whitesmoke",onChange:function(e){c(Number(e))},min:0,defaultValue:t.quantityParProduct,children:[Object(x.jsx)(Cc.d,{}),Object(x.jsxs)(Cc.e,{children:[Object(x.jsx)(Cc.b,{}),Object(x.jsx)(Cc.a,{})]})]})})},ia=function(e){var t=e.product,n=e.isItemOnApprov,c=e.addToApprov,r=(Object(ie.c)(),!!n&&n(t.id));return Object(x.jsx)("div",{children:Object(x.jsxs)("div",{className:"d-flex justify-content-between align-items-start border   mb-2 p-2",children:[Object(x.jsx)("div",{style:{width:"65%"},children:Object(x.jsxs)("table",{border:"1",children:[Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"Nom du produit : "}),Object(x.jsx)("td",{children:null===t||void 0===t?void 0:t.name})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"Prix unitaire:"}),Object(x.jsx)("td",{children:ge(t.prixFournisseur)})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"Montant HT:"}),Object(x.jsx)("td",{children:ge(t.prixFournisseur*t.quantityParProduct-t.remise)})]})]})}),Object(x.jsx)("div",{className:"d-flex mt-3",children:Object(x.jsx)(aa,{product:t})}),Object(x.jsx)("div",{children:r&&Object(x.jsx)("button",{onClick:function(){c&&c(t)},className:"btn btn-danger btn-xs text-right",children:"X"})})]})})},sa=function(e){return!(0==e.condml||0==e.condsize||0==e.qttccpvente||0==e.prixqttccvente)},da=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0};function la(e){var t,n,c;for(c in t=Array.isArray(e)?[]:{},e)n=e[c],t[c]="object"===typeof n?la(n):n;return t}var oa=function(e,t){return da(e)-t},ua=function(e){e.setRegenerate;var t=Object(r.useState)(0),n=Object(O.a)(t,2),c=n[0],a=n[1],i=Object(r.useState)(new Date),s=Object(O.a)(i,2),d=s[0],l=s[1],u=Object(r.useState)(null),j=Object(O.a)(u,2),b=j[0],m=j[1],v=Object(r.useState)(""),h=Object(O.a)(v,2),p=h[0],f=h[1],g=Object(r.useState)("espece"),N=Object(O.a)(g,2),C=N[0],y=N[1],q=Object(ie.d)(vn("approvis").meta),A=Object(ie.c)(),S=Object(o.g)();Object(r.useEffect)((function(){A(xn("approvis").fetch())}),[]);var E=Object(ie.d)((function(e){return{approvisionnements:e.approvisionnements}})).approvisionnements,w=na(E,A),P=w.isItemOnApprov,V=w.addToApprov,R=function(e){return la(e).map((function(e){return e.quantityBrute+=e.quantityParProduct,e}))};return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(Bc.a,{children:[Object(x.jsx)(Bc.a.Header,{className:"d-flex justify-content-between align-items-center bg-dark text-white",children:Object(x.jsxs)("div",{children:["Factures ("," ".concat(E.length," ").concat(E.length>1?"produits":"produit"),")"]})}),Object(x.jsxs)(Bc.a.Body,{children:[Object(x.jsxs)("div",{class:"form-group",children:[Object(x.jsx)("label",{children:"Date du facture :"}),Object(x.jsx)("div",{children:Object(x.jsx)("input",{type:"date",onChange:function(e){return m(e.target.value)},value:b,className:"form-control"})})]}),E.length<=0&&Object(x.jsx)("div",{class:"alert alert-success ",children:"Aucune produit !!!"}),null===E||void 0===E?void 0:E.map((function(e,t){return Object(x.jsx)(ia,{product:e,isItemOnApprov:P,addToApprov:V,approvisionnement:E,dispatch:A},"".concat(null===e||void 0===e?void 0:e.id,"_").concat(t))})),E.length>0&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"d-flex justify-content-end align-items-center my-3 ",children:Object(x.jsxs)("table",{children:[Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"REMISE : (en Ariary)"}),Object(x.jsx)("td",{children:Object(x.jsx)("input",{type:"number",className:"form-control",placeholder:"Remise",min:0,value:c,max:100,onChange:function(e){a(e.target.value)}})})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"PAIEMENT LE :"}),Object(x.jsx)("td",{children:Object(x.jsx)("input",{type:"date",onChange:function(e){return l(e.target.value)},value:d,className:"form-control"})})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"TYPE DE PAIEMENT:"}),Object(x.jsx)("td",{children:Object(x.jsxs)("select",{className:"form-control",onChange:function(e){y(e.target.value)},children:[Object(x.jsx)("option",{value:"espece",selected:!0,children:"ESPECE"}),Object(x.jsx)("option",{value:"boa",children:"CHEQUE - BOA"}),Object(x.jsx)("option",{value:"bni",children:"CHEQUE - BNI"}),Object(x.jsx)("option",{value:"MVola",children:"VIREMENT - MVola"}),Object(x.jsx)("option",{value:"OrangeMoney",children:"VIREMENT - ORANGE MONEY"})]})})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"REMARQUE :"}),Object(x.jsx)("td",{children:Object(x.jsx)("textarea",{className:"form-control",onChange:function(e){f(e.target.value)},placeholder:"Ecriver ici quelque chose d'autre \xe0 savoir sur l'approvisionnement"})})]})]})}),Object(x.jsxs)("div",{className:"d-flex flex-column  my-3 ",children:[" ",Object(x.jsxs)("p",{className:"approvisionnement-total-amount",children:["Total HT:",Object(x.jsx)("strong",{children:Object(x.jsx)(Mc.a,{value:da(E.map((function(e){return e.prixFournisseur*e.quantityParProduct}))),displayType:"text",thousandSeparator:!0,suffix:"Ar",renderText:function(e,t){return Object(x.jsx)("div",Object(Se.a)(Object(Se.a)({},t),{},{children:e}))}})})]}),Object(x.jsxs)("p",{className:"approvisionnement-total-amount",children:["Remise:",Object(x.jsx)("strong",{children:Object(x.jsx)(Mc.a,{value:da(E.map((function(e){return e.prixFournisseur*e.quantityParProduct-e.remise}))),displayType:"text",thousandSeparator:!0,suffix:"Ar",renderText:function(e,t){return Object(x.jsx)("div",Object(Se.a)(Object(Se.a)({},t),{},{children:e}))}})})]}),Object(x.jsxs)("p",{className:"approvisionnement-total-amount",children:["Total avec remise :",Object(x.jsx)("strong",{children:Object(x.jsx)(Mc.a,{value:oa(E.map((function(e){return e.prixFournisseur*e.quantityParProduct})),c),displayType:"text",thousandSeparator:!0,suffix:"Ar",renderText:function(e,t){return Object(x.jsx)("div",Object(Se.a)(Object(Se.a)({},t),{},{children:e}))}})})]}),Object(x.jsx)("p",{children:"Arr\xeat\xe9 \xe0 la somme de "}),Object(x.jsx)("p",{className:"text-uppercase",children:Object(x.jsxs)("strong",{children:[Object(Dc.NumberToLetter)(oa(E.map((function(e){return e.prixFournisseur*e.quantityParProduct})),c))," ","ARIARY"]})})]}),Object(x.jsxs)("div",{className:"d-flex justify-content-end",children:[Object(x.jsx)("button",{className:"btn btn-green btn-sm mr-2",disabled:0===E.length,onClick:function(){A(xn("approvis").createTransaction({id:Number(q.nextId),contenu:R(E),totalht:da(E.map((function(e){return e.prixFournisseur*e.quantityParProduct-e.remise}))),remise:c,total:oa(E.map((function(e){return e.prixFournisseur*e.quantityParProduct-e.remise})),c),dateApprov:null==b?new Date:b,dateEcheance:d,remarque:p,typePaye:C,approvisionnements:E},"create-facture")),E.forEach((function(e){A(xn("products").update(Object(Se.a)(Object(Se.a)({},e),{},{quantityBrute:e.quantityBrute+e.quantityParProduct,quantityParProduct:0})))})),A(ea()),S.push(B),console.log(E)},type:"button",children:"Valider l'operation"}),Object(x.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(){0!==E.length&&A(ea())},type:"button",children:Object(x.jsx)("span",{children:"Annuler"})})]})]})]}),E.length>0&&Object(x.jsx)(Bc.a.Footer,{className:"d-flex flex-column"})]})})};function ja(e){var t,n,c;for(c in t=Array.isArray(e)?[]:{},e)n=e[c],t[c]="object"===typeof n?ja(n):n;return t}var ba=function(e,t){return ja(e).filter((function(e){return""==t||e.fournisseurId==t}))};function ma(e){return e.toString().replace(/\s/g,"").toLowerCase()}function Oa(e){var t,n,c;for(c in t=Array.isArray(e)?[]:{},e)n=e[c],t[c]="object"===typeof n?Oa(n):n;return t}var xa=function(e,t,n){return Oa(e).filter((function(e){return(""==t||ma(e.name).includes(ma(t)))&&(""==n||e.fournisseurId==n)}))},va=c(503),ha=c.n(va),pa=function(){var e=Object(ie.d)((function(e){return e.approvisionnements})),t=Object(ie.d)(vn("products").value),n=Object(ie.d)(vn("products").meta),c=Object(ie.c)(),r=na(e,c),i=r.isItemOnApprov,s=r.addToApprov,d=a.a.useState([]),l=Object(O.a)(d,2),o=l[0],u=l[1],j=a.a.useState(!1),b=Object(O.a)(j,2),m=b[0],v=b[1];a.a.useEffect((function(){return 1==m&&(c(xn("products").fetch()),v(!1)),function(){v(!1)}}),[m]),a.a.useEffect((function(){c(xn("products").fetch())}),[]),a.a.useEffect((function(){n.isFetching||u(t)}),[n]);var h=a.a.useCallback((function(e){s&&s(e)}),[s]),p=a.a.useMemo((function(){return o.map((function(e){return Object(x.jsx)(ra,{product:e,isItemOnApprov:i,handleAddToApprov:h},e.id)}))}),[o]),f=function(e){null!=e.target&&u(lr(t,e.target.value))};a.a.useMemo((function(){return ha()(f,300)}),[f]);return Object(x.jsxs)("div",{children:[Object(x.jsx)("input",{type:"text",onKeyDown:function(e){13==e.keyCode&&f(e)},placeholder:"Taper sur entrer pour valider votre recherche",className:"form-control mb-2"}),Object(x.jsxs)("div",{style:{overflowY:"auto",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(x.jsxs)(x.Fragment,{children:[p,0==o.length&&"Aucun produit trouv\xe9"]})," "]})]})},fa=a.a.memo(pa,se.reactFastCompare),ga=(Object(Yt.debounce)((function(e){console.log("request: ".concat(e))}),1e3),function(){return Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Nouvelle facture",children:Object(x.jsx)(je,{title:"Nouvelle Facture"})}),Object(x.jsx)(xe,{children:Object(x.jsx)(ir.a,{children:Object(x.jsxs)(Kc.a,{children:[Object(x.jsx)(Gc.a,{xs:5,children:Object(x.jsx)(zc.a,{children:Object(x.jsxs)(Bc.a,{children:[Object(x.jsx)(Bc.a.Header,{className:"d-flex justify-content-between align-items-center bg-dark text-white",children:"Produits"}),Object(x.jsx)(Bc.a.Body,{children:Object(x.jsx)(fa,{})})]})})}),Object(x.jsx)(Gc.a,{xs:7,children:Object(x.jsx)(ua,{setRegenerate:[]})})]})})})]})}),Na=a.a.memo(ga),Ca=c(1053),ya=c(1054);var qa=function(){var e=Object(ie.d)(vn("categories").value),t=Object(ie.d)(vn("categories").meta),n=Object(ie.c)();a.a.useEffect((function(){n(xn("categories").fetch())}),[]);var c=[{Header:"Nom",accessor:"name"},{Header:"Actions",Cell:function(e){return Object(x.jsx)(Dr,{detail:!1,route:"categories",model:"categories",modelKey:"name",data:e})}}];return Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Categories",children:Object(x.jsx)(je,{title:"Categories"})}),Object(x.jsx)(xe,{children:Object(x.jsx)(Qc,{data:e.sort((function(e,t){return t.id-e.id})),meta:t,columns:c,addUrl:W,urlName:"Ajouter une categorie"})})]})};var Aa=function(){var e=Object(ie.d)(vn("fournisseurs").value),t=Object(ie.d)(vn("fournisseurs").meta),n=Object(ie.c)();a.a.useEffect((function(){n(xn("fournisseurs").fetch())}),[]);var c=[{Header:"Nom",accessor:"name"},{Header:"Actions",Cell:function(e){return Object(x.jsx)(Dr,{detail:!1,route:"fournisseurs",model:"fournisseurs",modelKey:"name",data:e})}}];return Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Fournisseurs",children:Object(x.jsx)(je,{title:"Fournisseurs"})}),Object(x.jsx)(xe,{children:Object(x.jsx)(Qc,{data:e.sort((function(e,t){return t.id-e.id})),meta:t,columns:c,addUrl:K,urlName:"Ajouter un fournisseur"})})]})};var Sa=function(){var e=Object(ie.d)(vn("vaccinateurs").value),t=Object(ie.d)(vn("vaccinateurs").meta),n=Object(ie.c)();a.a.useEffect((function(){n(xn("vaccinateurs").fetch())}),[]);var c=[{Header:"Nom",accessor:"name"},{Header:"T\xe9l\xe9phone",accessor:"contact"},{Header:"Actions",Cell:function(e){return Object(x.jsx)(Dr,{detail:!1,route:"vaccinateurs",model:"vaccinateurs",modelKey:"name",data:e})}}];return Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Vaccinateurs",children:Object(x.jsx)(je,{title:"Vaccinateurs"})}),Object(x.jsx)(xe,{children:Object(x.jsx)(Qc,{data:e.sort((function(e,t){return t.id-e.id})),meta:t,columns:c,addUrl:$,urlName:"Ajouter un vaccinateur"})})]})};var Ea=function(){var e=Object(ie.d)(vn("emprunters").value),t=Object(ie.d)(vn("emprunters").meta),n=Object(ie.c)();a.a.useEffect((function(){n(xn("emprunters").fetch())}),[]);var c=[{Header:"Nom",accessor:"name"},{Header:"T\xe9l\xe9phone",accessor:"contact"},{Header:"Actions",Cell:function(e){return Object(x.jsx)(Dr,{detail:!1,route:"emprunters",model:"emprunters",modelKey:"name",data:e})}}];return Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"D\xe9mandeurs de cr\xe9dit",children:Object(x.jsx)(je,{title:"D\xe9mandeurs de cr\xe9dit"})}),Object(x.jsx)(xe,{children:Object(x.jsx)(Qc,{data:e.sort((function(e,t){return t.id-e.id})),meta:t,columns:c,addUrl:J,urlName:"Ajouter une personne"})})]})};var wa=function(e){var t=Object(ie.c)(),n=Object(ie.d)(vn("categories").value),c=Object(ie.d)(vn("fournisseurs").value),a=Object(ie.d)(vn("vaccinateurs").value),i=Object(ie.d)(vn("emprunters").value),s=Object(ie.d)(vn("categories").meta),d=Object(ie.d)(vn("fournisseurs").meta),l=Object(ie.d)(vn("vaccinateurs").meta),o=Object(ie.d)(vn("emprunters").meta);return Object(r.useEffect)((function(){t(xn("fournisseurs").fetch()),t(xn("categories").fetch()),t(xn("vaccinateurs").fetch()),t(xn("emprunters").fetch())}),[]),Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Parametres g\xe9n\xe9rales",children:Object(x.jsx)(je,{title:"Parametres g\xe9n\xe9rales"})}),Object(x.jsx)(xe,{children:Object(x.jsx)(Ca.a.Container,{id:"left-tabs-example",defaultActiveKey:"first",children:Object(x.jsxs)(Kc.a,{children:[Object(x.jsxs)(ya.a,{variant:"pills",className:"flex-row justify-content-center",children:[Object(x.jsx)(ya.a.Item,{className:"border ml-2",children:Object(x.jsx)(ya.a.Link,{eventKey:"first",className:"py-2 px-3 text-uppercase bg-white",children:"Categories de produits"})}),Object(x.jsx)(ya.a.Item,{className:"border  ml-2",children:Object(x.jsx)(ya.a.Link,{eventKey:"second",className:"py-2 px-3 text-uppercase  bg-white",children:"Fournisseurs"})}),Object(x.jsx)(ya.a.Item,{className:"border  ml-2",children:Object(x.jsx)(ya.a.Link,{eventKey:"three",className:"py-2 px-3 text-uppercase  bg-white",children:"Vaccinateurs"})}),Object(x.jsx)(ya.a.Item,{className:"border  ml-2",children:Object(x.jsx)(ya.a.Link,{eventKey:"four",className:"py-2 px-3 text-uppercase  bg-white",children:"Demandeur de credit"})})]}),Object(x.jsx)(Gc.a,{sm:12,children:Object(x.jsxs)(Ca.a.Content,{children:[Object(x.jsx)(Ca.a.Pane,{eventKey:"first",children:Object(x.jsx)(qa,{categories:n,meta:s})}),Object(x.jsx)(Ca.a.Pane,{eventKey:"second",children:Object(x.jsx)(Aa,{fournisseurs:c,meta:d})}),Object(x.jsx)(Ca.a.Pane,{eventKey:"three",children:Object(x.jsx)(Sa,{vaccinateurs:a,meta:l})}),Object(x.jsx)(Ca.a.Pane,{eventKey:"four",children:Object(x.jsx)(Ea,{emprunters:i,meta:o})})]})})]})})})]})};var Pa=function(){var e=ae()().isoWeekday(1).startOf("week"),t=ae()().endOf("week"),n=Object(r.useState)(e),c=Object(O.a)(n,2),i=c[0],s=c[1],d=Object(r.useState)(t),o=Object(O.a)(d,2),u=o[0],j=o[1],b=Object(r.useState)([e,t]),m=Object(O.a)(b,2),v=m[0],h=m[1];Object(r.useEffect)((function(){null!==v?(v[0]&&s(v[0]),v[1]&&j(v[1])):(s(e),j(t))}),[v]);var p=function(e){if(!e||0===(null===e||void 0===e?void 0:e.length))return 0;var t=0;return e.forEach((function(e){t+=e.prixVente*e.quantityParProductDepot})),t},f=function(e){if(!e||0===(null===e||void 0===e?void 0:e.length))return 0;var t=0;return e.forEach((function(e){t+=1*e.quantityParProductDepot})),t},g=Object(ie.d)(vn("commandes").value),N=Object(ie.d)(vn("commandes").meta),C=Object(ie.c)();Object(r.useEffect)((function(){C(function(e,t){return sn("commandes",{path:"/sortie?deb=".concat(e,"&fin=").concat(t),replace:!0})}(i,u))}),[i,u]);var y=a.a.useMemo((function(){return[{Header:"Date de commande",Cell:function(e){var t;return Object(x.jsx)(x.Fragment,{children:fe(null===(t=e.row.original)||void 0===t?void 0:t.dateCom)})}},{Header:"Produits",Cell:function(e){var t,n;return Object(x.jsx)("div",{style:{width:"200px"},children:null===(t=e.row.original)||void 0===t||null===(n=t.contenu)||void 0===n?void 0:n.map((function(e){return Object(x.jsxs)("span",{children:[e.name,","]})}))})}},{Header:"Quantit\xe9",Cell:function(e){var t;return Object(x.jsx)("div",{children:f(null===(t=e.row.original)||void 0===t?void 0:t.contenu)})}},{Header:"Total",Cell:function(e){var t;return Object(x.jsx)("div",{children:ge(p(null===(t=e.row.original)||void 0===t?void 0:t.contenu))})}},{Header:"Actions",Cell:function(e){var t,n;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(l.b,{to:"/depot/detail/".concat(null===(t=e.row.original)||void 0===t?void 0:t.id),className:"btn btn-green btn-sm mr-2",children:"D\xe9tails"}),Object(x.jsx)(l.b,{to:"/editer/commande/".concat(null===(n=e.row.original)||void 0===n?void 0:n.id),className:"btn btn-warning btn-sm mr-2",children:"Editer"}),Object(x.jsx)(jr,{model:"fromdepots",entity:e.row.original})]})}}]}),[]);return Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Historique de sortie",children:Object(x.jsx)(je,{title:"Historique de sortie"})}),Object(x.jsxs)(xe,{children:[" ",Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-lg-6",children:Object(x.jsxs)("div",{children:[Object(x.jsx)("h3",{className:"text-uppercase",children:"Historique de sortie"}),Object(x.jsx)("p",{children:"".concat(fe(i)," ->  ").concat(fe(u))})]})}),Object(x.jsx)("div",{className:"col-lg-6 text-right",children:Object(x.jsx)(he.a,{locale:"fr-FR",onChange:h,value:v})})," "]}),Object(x.jsx)(Qc,{filter:!1,data:g.sort((function(e,t){return t.id-e.id})),meta:N,columns:y})]})]})},Va=a.a.createContext();function Ra(e){var t=e.model,n=e.options,c=e.children,r=Object(ie.d)(vn(t).value),i=Object(ie.d)(vn(t).meta),s=Object(ie.c)();a.a.useEffect((function(){s(xn(t).fetch(n))}),[n]);var d={data:r,meta:i};return Object(x.jsx)(Va.Provider,{value:d,children:c})}function Fa(e){var t=e.children;return Object(x.jsx)(Va.Consumer,{children:function(e){if(void 0===e)throw new Error("Data  must be used within a GetDataContext");return t(e)}})}var Da="SET_FROM_DEPOT_ITEMS",Ma="ADD_FROM_DEPOT",Ba="REMOVE_FROM_TO_DEPOT",Ta="CLEAR_FROM_DEPOT",ka="ADD_QTY_FROM_DEPOT_ITEM",_a="ADD_QTY_PORTION_FROM_DEPOT_ITEM",Ia="ADD_QTY_NUMBER_FROM_DEPOT_ITEM",Qa="ADD_QTY_PORTION_DOSE_ITA_NEW_FROM_DEPOT_ITEM",La="ADD_QTY_PORTION_DOSE_SOVAX_FROM_DEPOT_ITEM",Ha="ADD_QTY_PORTION_PHYTO_COND_FROM_DEPOT_ITEM",Ua="MINUS_QTY_PORTION_PHYTO_COND_FROM_DEPOT_ITEM",Ya=function(){return{type:Ta}},za=function(e){var t=e.product,n=(e.setRealQttCC,e.setRealQtt),c=(e.realQtt,e.realQttCC,Object(ie.c)()),r=function(e){c(function(e,t){return{type:Ia,payload:{id:e,value:t}}}(t.id,e))},a=function(){return t.quantityBrute-1-1*t.quantityParProductDepot<0};return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Cc.c,{inputMode:"numeric",w:28,disabled:0!=(null===t||void 0===t?void 0:t.condmldepot)&&0!=(null===t||void 0===t?void 0:t.qttccpventedepot),step:1,bg:"whitesmoke",onChange:function(e){r(Number(e)),n(Number(e)),1==a()&&alert("Le reste du stock est : "+t.quantityBrute+" < "+e+" demand\xe9")},min:0,defaultValue:null===t||void 0===t?void 0:t.quantityParProductDepot,max:(a(),1*(null===t||void 0===t?void 0:t.quantityBrute)),children:[Object(x.jsx)(Cc.d,{}),Object(x.jsxs)(Cc.e,{children:[Object(x.jsx)(Cc.b,{}),Object(x.jsx)(Cc.a,{})]})]})})},Ka="SET_FROM_MAGASIN_ITEMS",Ga="ADD_FROM_MAGASIN",Wa="REMOVE_FROM_TO_MAGASIN",Xa="CLEAR_FROM_MAGASIN",Ja="ADD_QTY_FROM_MAGASIN_ITEM",Za="ADD_QTY_PORTION_FROM_MAGASIN_ITEM",$a="ADD_QTY_NUMBER_FROM_MAGASIN_ITEM",ei="ADD_QTY_PORTION_DOSE_ITA_NEW_FROM_MAGASIN_ITEM",ti="ADD_QTY_PORTION_DOSE_SOVAX_FROM_MAGASIN_ITEM",ni="ADD_QTY_PORTION_PHYTO_COND_FROM_MAGASIN_ITEM",ci="MINUS_QTY_PORTION_PHYTO_COND_FROM_MAGASIN_ITEM",ri="ADD_QTY_LITRE_NUMBER_FROM_MAGASIN_ITEM",ai="ADD_TO_QTT_BRUTE",ii=function(e,t){return{type:ei,payload:{id:e,value:t}}},si=function(e,t){return{type:ti,payload:{id:e,value:t}}},di=function(e,t){return{type:ni,payload:{id:e,value:t}}},li=function(e,t){var n=function(t){return!!(null===e||void 0===e?void 0:e.find((function(e){return(null===e||void 0===e?void 0:e.id)===t})))};return{fromdepot:e,isItemFromDepot:n,addFromDepot:function(e){n(e.id)?t(function(e){return{type:Ba,payload:e}}(e.id)):t(function(e){return{type:Ma,payload:e}}(e))}}},oi=function(e){var t=e.product,n=Object(r.useState)(null),c=Object(O.a)(n,2),a=c[0],i=c[1],s=Object(r.useState)(null),d=Object(O.a)(s,2),l=d[0],o=d[1],u=Object(ie.d)((function(e){return e.fromdepots})),j=Object(ie.c)(),b=li(u,j),m=b.isItemFromDepot,v=b.addFromDepot,h=!!m&&m(t.id);return Object(x.jsx)("div",{children:Object(x.jsxs)("div",{className:"d-flex justify-content-between align-items-center border   mb-2 p-2",children:[Object(x.jsxs)("div",{style:{width:"45%"},children:[Object(x.jsx)("p",{className:"text-blue",children:t.name}),Object(x.jsx)("span",{className:"text-lowercase",children:Object(x.jsxs)("strong",{children:[0!=t.quantityParProductDepot&&ge(sa(t)?t.prixlitre*t.quantityParProductDepot:t.prixVente*t.quantityParProductDepot),0==t.quantityParProductDepot&&0!=t.prixParCC&&Object(x.jsx)(x.Fragment,{children:null!=t.prixqttccventedepot&&0!=t.prixqttccventedepot?ge(t.prixqttccventedepot):ge(t.prixParCC)}),0!=t.quantityParProductDepot&&" x "+t.quantityParProductDepot+" "+t.type," ",null==t.prixqttccventedepot&&0==t.prixqttccventedepot&&Object(x.jsx)(x.Fragment,{children:0!=t.qttByCCDepot&&(0==t.quantityParProductDepot?" x ":"+")+t.qttByCCDepot+"ML"})]})})]}),Object(x.jsxs)("div",{className:"text-inline text-center",children:[Object(x.jsx)("h5",{className:"mb-1",children:t.type}),Object(x.jsx)(za,{product:t,setRealQttCC:i,setRealQtt:o,realQtt:l,realQttCC:a})]}),Object(x.jsx)("div",{children:h&&Object(x.jsx)("button",{onClick:function(){v&&v(t)},className:"btn btn-danger btn-xs text-right",children:"X"})})]})})},ui=function(e){return!!e.quantityBrute>0},ji=function(e){return!!e.quantityBrute<0},bi=function(e){return!!(e.qttByCCDepot>e.quantityCC)},mi=function(e){return bi(e)?e.qttByCCDepot-e.quantityCC:e.quantityCC-e.qttByCCDepot},Oi=function(e){return ui(e)?e.quantityBrute-=1:e.quantityBrute=0,e},xi=function(e,t){return e.quantityCC=t,e},vi=function(e){return function(e){ui(e)?(console.log("hello ici"),bi(e)?(Oi(e),xi(e,e.doseDefault-mi(e))):function(e){return!(e.qttByCCDepot!=e.quantityCC)}(e)?xi(e,0):xi(e,e.quantityCC-e.qttByCCDepot)):e.quantityCC>0?xi(e,e.quantityCC-e.qttByCCDepot):xi(e,0)}(e),e},hi=function(e){return!function(e){return!!e.condvaldepot>=0}(e)?ui(e)?(Oi(e),xi(e,e.condmldepot-mi(e)),0==e.condvaldepot&&(e.condvaldepot=e.condsizedepot-1)):e.quantityCC-=e.qttByCCDepot:bi(e)?(!function(e){e.condvaldepot>0?e.condvaldepot-=1:e.quantityBrute>0?(Oi(e),e.condvaldepot=e.condsizedepot-1):e.condvaldepot=0}(e),xi(e,e.condmldepot-mi(e))):!function(e){return!!e.quantityCC>0}(e)?e.quantityCC=0:e.quantityCC-=e.qttByCCDepot,e},pi=function(e){var t=e.product,n=e.index,c=e.state,r=e.setState,a=(e.setRealQttCC,e.setRealQtt),i=(e.realQtt,e.realQttCC,Object(ie.c)(),function(e){!function(e,t,n){var a=Object(ce.a)(c);a[e]=Object(Se.a)(Object(Se.a)({},a[e]),{},Object(Ge.a)({},t,n)),r(a)}(n,"quantityParProductDepot",e)}),s=function(){return t.quantityCC-t.qttByCCDepot<0&&t.quantityBrute-1-1*t.quantityParProductDepot<0};return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Cc.c,{inputMode:"numeric",w:28,disabled:0!=(null===t||void 0===t?void 0:t.condmldepot)&&0!=(null===t||void 0===t?void 0:t.qttccpventedepot),step:1,bg:"whitesmoke",onChange:function(e){i(Number(e)),a(Number(e)),s()&&alert("Le stock ne satisfait pas votre commande")},min:0,defaultValue:null===t||void 0===t?void 0:t.quantityParProductDepot,max:1==s()?1*(null===t||void 0===t?void 0:t.quantityBrute)-1:1*(null===t||void 0===t?void 0:t.quantityBrute),children:[Object(x.jsx)(Cc.d,{}),Object(x.jsxs)(Cc.e,{children:[Object(x.jsx)(Cc.b,{}),Object(x.jsx)(Cc.a,{})]})]})})},fi=function(e){var t=e.state,n=e.index,c=e.setState,a=e.product,i=Object(r.useState)(null),s=Object(O.a)(i,2),d=s[0],l=s[1],o=Object(r.useState)(null),u=Object(O.a)(o,2),j=u[0],b=u[1];return Object(x.jsx)("div",{children:Object(x.jsxs)("div",{className:"d-flex justify-content-between align-items-center border   mb-2 p-2",children:[Object(x.jsxs)("div",{style:{width:"45%"},children:[Object(x.jsx)("p",{className:"text-blue",children:a.name}),Object(x.jsx)("span",{className:"text-lowercase",children:Object(x.jsxs)("strong",{children:[0!=a.quantityParProductDepot&&ge(sa(a)?a.prixlitre:a.prixVente),0==a.quantityParProductDepot&&0!=a.prixParCC&&Object(x.jsx)(x.Fragment,{children:null!=a.prixqttccventedepot&&0!=a.prixqttccventedepot?ge(a.prixqttccventedepot):ge(a.prixParCC)}),0!=a.quantityParProductDepot&&" x "+a.quantityParProductDepot+" "+a.type," ",null==a.prixqttccventedepot&&0==a.prixqttccventedepot&&Object(x.jsx)(x.Fragment,{children:0!=a.qttByCCDepot&&(0==a.quantityParProductDepot?" x ":"+")+a.qttByCCDepot+"ML"})]})})]}),Object(x.jsxs)("div",{className:"text-inline text-center",children:[Object(x.jsx)("h5",{className:"mb-1",children:a.type}),Object(x.jsx)(pi,{index:n,state:t,setState:c,product:a,setRealQttCC:l,setRealQtt:b,realQtt:j,realQttCC:d})]})]})})},gi=function(e){return!(0==e.condml||0==e.condsize||0==e.qttccpvente||0==e.prixqttccvente)},Ni=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,c=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"inc",a=0,i=0,s=0,d=0,l=0,o=0,u=!0,j=e.condml,b=e.condsize;if(console.log(t),"mcinc"==r){var m=Number(e.quantityCCCVA)+Number(t);Number(m)>=Number(j)?(a=Math.floor(m/Number(j)),d=Number(t)-Number(j)*a,e.quantityCCCVA+d>=Number(j)&&(a+=1)):e.quantityCCCVA+Number(t)>=Number(j)&&(a+=1);var O=Number(a)+Number(n);Number(O)>=Number(b)?(i=Math.floor(O/Number(b)),o=Number(O)-Number(b)*i,e.condval+o>=Number(b)&&(i+=1)):e.condval+Number(O)>=Number(b)&&(i+=1),e.quantityBruteCVA+i-c<0&&(u=!1)}else if("mdecinc"==r){Number(t)>=Number(j)?(a=Math.floor(Number(t)/Number(j)),d=Number(t)-Number(j)*a,e.quantityCCCVA-d<0&&(a+=1)):e.quantityCCCVA-Number(t)<0&&(a+=1);var x=Number(a);Number(x)>=Number(b)?(s=Math.floor(Number(x)/Number(b)),l=Number(x)-Number(b)*s,e.condval-l<0&&(s+=1)):e.condval-Number(x)<0&&(s+=1);var v=Number(n);Number(v)>=Number(b)?(i=Math.floor(v/Number(b)),o=Number(v)-Number(b)*i,e.condval+o>=Number(b)?i+=1:e.condval=Number(e.condval)+o):e.condval+Number(v)>=Number(b)&&(i+=1);var h=e.quantityBruteCVA+c+i;h-s<0&&(u=!1)}else if("decinc"==r){Number(t)>=Number(j)?(a=Math.floor(Number(t)/Number(j)),d=Number(t)-Number(j)*a,e.quantityCCCVA-d<0&&(a+=1)):e.quantityCCCVA-Number(t)<0&&(a+=1);var p=Number(a);Number(p)>=Number(b)?(s=Math.floor(Number(p)/Number(b)),l=Number(p)-Number(b)*s,e.condval-l<0&&(s+=1)):e.condval-Number(p)<0&&(s+=1);var f=Number(n);Number(f)>=Number(b)?(i=Math.floor(f/Number(b)),o=Number(f)-Number(b)*i,e.condval+o>=Number(b)&&(i+=1)):e.condval+Number(f)>=Number(b)&&(i+=1),e.quantityBruteCVA+i-(c+s)<0&&(u=!1)}else{var g=Number(e.quantityCCCVA)+Number(t);Number(g)>=Number(j)?(a=Math.floor(g/Number(j)),d=Number(t)-Number(j)*a,e.quantityCCCVA+d>=Number(j)&&(a+=1)):(e.quantityCCCVA+Number(t)>=Number(j)&&(a+=1),u=!0)}return u},Ci=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,c=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"dec",a=0,i=0,s=0,d=0,l=!0,o=e.condml,u=e.condsize;if("pcdec"==r){Number(t)>=Number(o)?(a=Math.floor(Number(t)/Number(o)),s=Number(t)-Number(o)*a,e.quantityCCCVA-s<0&&(a+=1)):e.quantityCCCVA-Number(t)<0&&(a+=1);var j=Number(a)+Number(n);Number(j)>=Number(u)?(i=Math.floor(Number(j)/Number(u)),d=Number(j)-Number(u)*i,e.condval-d<0&&(i+=1)):e.condval-Number(j)<0&&(i+=1),e.quantityBruteCVA+c-i<0&&(l=!1)}else if("mincdec"==r){var b=0,m=0,O=0,x=0,v=e.condml,h=e.condsize,p=Number(e.quantityCCCVA)+Number(t);Number(p)>=Number(v)?(b=Math.floor(p/Number(v)),O=Number(t)-Number(v)*b,e.quantityCCCVA+O>=Number(v)&&(b+=1)):e.quantityCCCVA+Number(t)>=Number(v)&&(b+=1);var f=Number(b);Number(f)>=Number(h)?(m=Math.floor(f/Number(h)),x=Number(f)-Number(h)*m,e.condval+x>=Number(h)&&(m+=1)):e.condval+Number(f)>=Number(h)&&(m+=1);var g=Number(n);Number(g)>=Number(h)?(i=Math.floor(Number(g)/Number(h)),d=Number(g)-Number(h)*b,e.condval-d<0&&(i+=1)):e.condval-Number(g)<0?i+=1:e.condval=e.condval-Number(g);var N=e.quantityBruteCVA+m+c;N-i&&(l=!1)}else if("incdec"==r){var C=0,y=0,q=0,A=0,S=e.condml,E=e.condsize,w=Number(e.quantityCCCVA)+Number(t);Number(w)>=Number(S)?(C=Math.floor(w/Number(S)),q=Number(t)-Number(S)*C,e.quantityCCCVA+q>=Number(S)&&(C+=1)):e.quantityCCCVA+Number(t)>=Number(S)&&(C+=1);var P=Number(C);Number(P)>=Number(E)?(y=Math.floor(P/Number(E)),A=Number(P)-Number(E)*y,e.condval+A>=Number(E)&&(y+=1)):e.condval+Number(P)>=Number(E)&&(y+=1);var V=Number(n);Number(V)>=Number(E)?(i=Math.floor(Number(V)/Number(E)),d=Number(V)-Number(E)*C,e.condval-d<0&&(i+=1)):e.condval-Number(V)<0&&(i+=1);var R=e.quantityBruteCVA+y,F=i+c;R-F<0&&(l=!1)}else{Number(t)>=Number(o)?(a=Math.floor(Number(t)/Number(o)),s=Number(t)-Number(o)*a,e.quantityCCCVA-s<0&&(a+=1)):e.quantityCCCVA-Number(t)<0&&(a+=1);var D=Number(a)+Number(n);Number(D)>=Number(u)?(i=Math.floor(Number(D)/Number(u)),d=Number(D)-Number(u)*i,e.condval-d<0&&(i+=1)):e.condval-Number(D)<0&&(i+=1);var M=i+c;e.quantityBruteCVA-M<0&&(l=!1)}return l},yi=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"dec",r=0,a=0,i=e.doseDefault,s=!0;if("incdec"!=c){Number(t)>=Number(i)?(r=Math.floor(Number(t)/Number(i)),a=Number(t)-Number(i)*r,e.quantityCCCVA-a<0&&(r+=1)):e.quantityCCCVA-Number(t)<0&&(r+=1);var d=r+n;e.quantityBruteCVA-d<0&&(s=!1)}else{var l=Number(e.quantityCCCVA)+Number(t);Number(l)>=Number(i)?(r=Math.floor(l/Number(i)),a=Number(t)-Number(i)*r,e.quantityCCCVA+a>=Number(i)&&(r+=1)):e.quantityCCCVA+Number(t)>=Number(i)&&(r+=1),e.quantityBruteCVA+r-n<0&&(s=!1)}return s},qi=function(e,t,n){var c=t.contenu.find((function(t){return t.id==e.id}));console.log("minitial",t);var r=!1,a=0,i=0,s=0,d=!0,l="none",o=n.quantityParProduct,u=n.qttByCC,j=n.qttbylitre;if(gi(e)){r=!0,r=!1;var b=n.quantityParProduct,m=n.qttByCC,O=n.qttbylitre;console.log(b,m);var x=void 0!=c?null===c||void 0===c?void 0:c.quantityParProduct:n.condval,v=void 0!=c?null===c||void 0===c?void 0:c.qttByCC:n.quantityCCCVA,h=void 0!=c?null===c||void 0===c?void 0:c.qttbylitre:n.quantityBruteCVA;console.log(x,v,h),O==h&&b==x&&m==v&&(l="qttlitre == cmdqttlitre && qtt == cmdqtt && qttcc == cmdqttcc"),O==h&&b==x&&m>v&&(l="qttlitre == cmdqttlitre && qtt == cmdqtt && qttcc > cmdqttcc",0==(d=Ci(e,i=m-v,a,s))&&(u=v)),O==h&&b==x&&m<v&&(l="qttlitre == cmdqttlitre && qtt == cmdqtt && qttcc < cmdqttcc",i=v-m,d=!0),O==h&&b>x&&m==v&&(l="qttlitre == cmdqttlitre && qtt > cmdqtt && qttcc == cmdqttcc",0==(d=Ci(e,i,a=b-x,s))&&(o=x)),O==h&&b<x&&m==v&&(l="qttlitre == cmdqttlitre && qtt < cmdqtt && qttcc == cmdqttcc",a=x-b,d=!0),O==h&&b>x&&m>v&&(l="qttlitre == cmdqttlitre && qtt > cmdqtt && qttcc > cmdqttcc",0==(d=Ci(e,i=m-v,a=b-x,s))&&(u=v,o=x)),O==h&&b<x&&m<v&&(l="qttlitre == cmdqttlitre && qtt < cmdqtt && qttcc < cmdqttcc",a=x-b,i=v-m,d=!0),O==h&&b>x&&m<v&&(l="qttlitre == cmdqttlitre && qtt > cmdqtt && qttcc < cmdqttcc",0==(d=Ci(e,i=v-m,a=b-x,s,"incdec"))&&(u=v,o=x)),O==h&&b<x&&m>v&&(l="qttlitre == cmdqttlitre && qtt < cmdqtt && qttcc > cmdqttcc",0==(d=Ni(e,i=m-v,a=x-b,s,"decinc"))&&(u=v,o=x)),O>h&&b==x&&m==v&&(l="qttlitre > cmdqttlitre && qtt == cmdqtt && qttcc == cmdqttcc",0==(d=Ci(e,i,a,s=O-h))&&(j=h)),O<h&&b==x&&m==v&&(l="qttlitre < cmdqttlitre && qtt == cmdqtt && qttcc == cmdqttcc",s=h-O,d=!0),O>h&&b>x&&m>v&&(l="qttlitre > cmdqttlitre && qtt > cmdqtt && qttcc > cmdqttcc",0==(d=Ci(e,i=m-v,a=b-x,s=O-h))&&(u=v,o=x,j=h)),O>h&&b>x&&m<v&&(l="qttlitre > cmdqttlitre && qtt > cmdqtt && qttcc < cmdqttcc",0==(d=Ci(e,i=v-m,a=b-x,s=O-h,"incdec"))&&(u=v,o=x,j=h)),O>h&&b<x&&m>v&&(l="qttlitre > cmdqttlitre && qtt < cmdqtt && qttcc > cmdqttcc",0==(d=Ni(e,i=m-v,a=x-b,s=O-h,"decinc"))&&(u=v,o=x,j=h)),O>h&&b<x&&m<v&&(l="qttlitre > cmdqttlitre && qtt < cmdqtt && qttcc < cmdqttcc",0==(d=Ni(e,i=v-m,a=x-b,s=O-h,"mcinc"))&&(u=v,o=x,j=h)),O<h&&b>x&&m>v&&(l="qttlitre < cmdqttlitre && qtt > cmdqtt && qttcc > cmdqttcc",0==(d=Ci(e,i=m-v,a=b-x,s=h-O,"pcdec"))&&(u=v,o=x,j=h)),O<h&&b>x&&m<v&&(l="qttlitre < cmdqttlitre && qtt > cmdqtt && qttcc < cmdqttcc",0==(d=Ci(e,i=v-m,a=b-x,s=h-O,"mincdec"))&&(u=v,o=x,j=h)),O<h&&b<x&&m>v&&(l="qttlitre < cmdqttlitre && qtt < cmdqtt && qttcc > cmdqttcc",0==(d=Ni(e,i=m-v,a=x-b,s=h-O,"mdecinc"))&&(u=v,o=x,j=h)),O<h&&b<x&&m<v&&(l="qttlitre < cmdqttlitre && qtt < cmdqtt && qttcc < cmdqttcc",a=x-b,i=v-m,s=h-O,d=!0)}else{r=!1;var p=n.quantityParProduct,f=n.qttByCC;console.log(p,f);var g=void 0!=c?null===c||void 0===c?void 0:c.quantityParProduct:n.quantityBruteCVA,N=void 0!=c?null===c||void 0===c?void 0:c.qttByCC:n.quantityCCCVA;console.log(g,N),p>g&&f==N&&(l="qtt > cmdqtt && qttcc == cmdqttcc",a=p-g,console.log(e.quantityBruteCVA,a),e.quantityBruteCVA-a>=0?d=!0:(d=!1,o=g)),p<g&&f==N&&(l="qtt < cmdqtt && qttcc == cmdqttcc",a=g-p,d=!0),p==g&&f==N&&(l="qtt == cmdqtt && qttcc == cmdqttcc",d=!0),p==g&&f>N&&(l="qtt == cmdqtt && qttcc > cmdqttcc",d=yi(e,i=f-N),u=N),p==g&&f<N&&(l="qtt == cmdqtt && qttcc < cmdqttcc",i=N-f,d=!0),p>g&&f<N&&(l="qtt > cmdqtt && qttcc < cmdqttcc",d=yi(e,i=N-f,a=p-g,"incdec"),o=g,u=N),p<g&&f>N&&(l="qtt < cmdqtt && qttcc > cmdqttcc",a=g-p,i=f-N,d=!0),p<g&&f<N&&(a=g-p,i=N-f,l="qtt < cmdqtt && qttcc < cmdqttcc",d=!0),p>g&&f>N&&(l="qtt > cmdqtt && qttcc > cmdqttcc",d=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,c=0,r=0,a=e.doseDefault,i=!0;Number(t)>=Number(a)?(c=Math.floor(Number(t)/Number(a)),r=Number(t)-Number(a)*c,e.quantityCCCVA-r<0&&(c+=1)):e.quantityCCCVA-Number(t)<0&&(c+=1);var s=c+Number(n);return e.quantityBruteCVA-s<0&&(i=!1),i}(e,i=f-N,a=p-g),o=g,u=N)}return console.log("--------"+l+"---------"),{normalQtt:o,normalQttCC:u,normalQttLitre:j,isSpecific:r,isValid:d}},Ai=function(e){return gi(e)?0==e.quantityBruteCVA&&0==e.quantityCCCVA&&0==e.condval:0==e.quantityBruteCVA&&0==e.quantityCCCVA},Si=function(e){return e.filter((function(e){return gi(t=e)?0==t.quantityParProduct&&0==t.qttByCC&&0==t.qttbylitre:0==t.quantityParProduct&&0==t.qttByCC;var t})).length>0},Ei=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0};function wi(e){var t,n,c;for(c in t=Array.isArray(e)?[]:{},e)n=e[c],t[c]="object"===typeof n?wi(n):n;return t}var Pi=function(e){var t,n,c=e.state,a=(e.meta,e.setState),i=(e.products,e.commandes),s=e.disabled,d=Object(r.useState)("vente-depot"),l=Object(O.a)(d,2),u=l[0],j=l[1],b=Object(r.useState)(1),m=Object(O.a)(b,2),v=(m[0],m[1],Object(r.useState)(null)),h=Object(O.a)(v,2),p=h[0],f=h[1],g=Object(r.useState)(null),N=Object(O.a)(g,2),C=N[0],y=N[1],q=Object(o.g)(),A=Object(r.useState)([]),S=Object(O.a)(A,2),E=S[0],w=S[1],P=Object(ie.d)((function(e){return{fromdepots:e.fromdepots}})),V=P.fromdepots;Object(r.useEffect)((function(){w(null===i||void 0===i?void 0:i.contenu)}),[i]);var R=Object(ie.c)(),D=Object(ie.d)(vn("emprunters").value),M=Object(ie.d)(vn("vaccinateurs").value),B=new Date,T=Object(r.useState)(B),k=Object(O.a)(T,2),_=k[0],I=k[1];Object(r.useEffect)((function(){R(xn("emprunters").fetch())}),[]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(Bc.a,{children:[Object(x.jsxs)(Bc.a.Header,{className:" bg-dark py-2 text-white d-flex justify-content-between align-items-center",children:[Object(x.jsx)("div",{style:{width:"60%"},children:"BON DE SORTIE"}),Object(x.jsx)("div",{style:{width:"30%"},className:"text-right",children:Object(x.jsxs)("select",{disabled:s,className:"form-control input-sm",onChange:function(e){j(e.target.value)},children:[Object(x.jsx)("option",{value:"vente-depot",children:"Comptant"}),Object(x.jsx)("option",{value:"vente-depot-credit",children:"Credit"}),Object(x.jsx)("option",{value:"vente-depot-vaccinateur",children:"Vaccinateur"})]})})]}),Object(x.jsxs)("div",{className:"commande-vente",children:[Object(x.jsx)(Bc.a.Body,{style:{padding:12,marginTop:3,marginRight:2,marginLeft:2},children:Object(x.jsxs)("div",{style:{overflowY:"auto",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(x.jsxs)("div",{class:"form-group",children:[Object(x.jsx)("label",{children:"Date de sortie :"}),Object(x.jsx)("div",{children:Object(x.jsx)("input",{disabled:s,type:"date",onChange:function(e){return I(e.target.value)},value:_,className:"form-control"})})]}),"vente-depot-credit"===u&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("label",{children:"Crediteur:"}),Object(x.jsxs)("select",{disabled:s,className:"form-control",onChange:function(e){y(e.target.value)},children:[Object(x.jsx)("option",{value:""}),D.map((function(e){return Object(x.jsx)("option",{value:e.id,children:e.name})}))]})]}),"vente-depot-vaccinateur"===u&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("label",{children:"Vaccinateur:"}),Object(x.jsxs)("select",{className:"form-control",onChange:function(e){f(e.target.value)},children:[Object(x.jsx)("option",{children:"Selectionner un vaccinateur"}),M.map((function(e){return Object(x.jsx)("option",{value:e.id,children:e.name})}))]})]}),(null===c||void 0===c?void 0:c.length)<=0&&Object(x.jsx)("div",{className:"alert alert-success ",children:"Aucune enregistrement trouv\xe9"}),null===c||void 0===c?void 0:c.map((function(e,t){return Object(x.jsx)(fi,{product:e,state:c,index:t,setState:a,basket:V,dispatch:R},"".concat(null===e||void 0===e?void 0:e.id,"_").concat(t))}))]})}),(null===c||void 0===c?void 0:c.length)>0&&Object(x.jsxs)(Bc.a.Footer,{className:"d-flex align-items-center justify-content-between",children:[Object(x.jsx)("div",{style:{width:"30%"},children:Object(x.jsx)("h2",{className:"p-2 text-uppercase bg-primary",children:Object(x.jsxs)("strong",{"data-test-id":"total-price-orders",children:["Total:",ge(Ei(null===c||void 0===c?void 0:c.map((function(e){return gi(e)?e.prixlitre*e.quantityParProductDepot:e.prixVente*e.quantityParProductDepot})))+Ei(null===c||void 0===c||null===(t=c.state)||void 0===t?void 0:t.map((function(e){return e.prixParCC*e.qttByCCDepot}))))]})})}),Object(x.jsx)("div",{style:{width:"70%"},children:(null===c||void 0===c?void 0:c.length)>0&&Object(x.jsxs)("div",{className:"d-flex text-right align-items-end justify-content-end",children:[Object(x.jsx)("button",(n={disabled:s,className:"btn btn-green btn-sm mr-2"},Object(Ge.a)(n,"disabled",0===(null===c||void 0===c?void 0:c.length)),Object(Ge.a)(n,"onClick",(function(){var e=function(){var e=wi(E).filter((function(e){return!c.find((function(t){return e.id===t.id}))})),t=wi(E).filter((function(e){return!c.find((function(t){return e.id===t.id}))}));return{exist:wi(E).map((function(e){return c.find((function(t){return t.id==e.id}))})).filter((function(e){return null!=e})),added:t,missing:e}}(),t=e.exist,n=e.added,r=e.missing;R(xn("commandes").updateTransaction({id:null===i||void 0===i?void 0:i.id,contenu:c,type:"vente-depot",sorte:"sortie",vaccinateurId:p,status:"direct"===u,emprunterId:C,dateCom:null!=_?_:B,exist:t,added:n,missing:r},"update-from-depot")),q.push(F)})),Object(Ge.a)(n,"type","button"),Object(Ge.a)(n,"children","Valider l'operation"),n)),Object(x.jsx)("button",{disabled:s,className:"btn btn-danger btn-sm",onClick:function(){null===c||void 0===c||c.forEach((function(e){e.quantityParProductDepot=0,e.qttByCCDepot=0})),R(Ya())},type:"button",children:Object(x.jsx)("span",{children:"Annuler"})})]})})]})]})]})})},Vi=function(e){var t,n=e.state,c=e.setState,r=e.product,a=(Object(ie.d)((function(e){return e.fromdepots})),Object(ie.c)(),!!(null===n||void 0===n?void 0:n.find((function(e){return(null===e||void 0===e?void 0:e.id)===r.id}))));return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(zc.a.Item,{className:"mb-2 mr-3",style:{border:"1px solid gray"},children:Object(x.jsx)("div",{className:" d-flex justify-content-between align-items-center",children:Object(x.jsxs)("div",{className:" ".concat(r.id?"":"product-loading"),style:{boxShadow:r&&a?"15px 10px 15px rgba(0, 0, 0, .07)":"none"},children:[Object(x.jsxs)("div",{children:[r.name," ",Object(x.jsx)("div",{class:"badge badge-primary",children:null===r||void 0===r||null===(t=r.fournisseur)||void 0===t?void 0:t.name}),Object(x.jsx)("br",{})]})," ",Object(x.jsx)("div",{children:(null===r||void 0===r?void 0:r.id)&&Object(x.jsx)(x.Fragment,{children:a?Object(x.jsx)("button",{disabled:0===r.quantityBrute&&(0==r.quantityCC||null==r.quantityCC),className:"btn btn-danger btn-sm",onClick:function(){return function(e){c(n.filter((function(t){return t.id!==e})))}(null===r||void 0===r?void 0:r.id)},children:"Retirer"}):Object(x.jsx)("button",{disabled:0===r.quantityBrute&&(0==r.quantityCC||null==r.quantityCC),className:"btn btn-green btn-sm",onClick:function(){c(n.some((function(e){return e.id===r.id}))?n:[r].concat(Object(ce.a)(n)))},children:"Ajouter"})})})]})})})})},Ri=function(){var e=Object(o.i)().id,t=Object(r.useState)(!1),n=Object(O.a)(t,2),c=n[0],i=n[1],s=Object(ie.c)(),d=Object(ie.d)(vn("commandes").value),l=Object(ie.d)(vn("commandes").meta),u=Object(ie.d)(vn("products").value),j=Object(ie.d)(vn("products").meta),b=Object(r.useState)([]),m=Object(O.a)(b,2),v=m[0],h=m[1];a.a.useEffect((function(){s(xn("commandes").get(e))}),[e]);var p=Object(r.useState)(""),f=Object(O.a)(p,2),g=f[0],N=f[1],C=Object(r.useState)([]),y=Object(O.a)(C,2),q=y[0],A=y[1];a.a.useEffect((function(){return 1==c&&(s(xn("products").fetch()),i(!1)),function(){i(!1)}}),[c]),a.a.useEffect((function(){h(lr(u,g))}),[g]),a.a.useEffect((function(){s(xn("products").fetch())}),[]),a.a.useEffect((function(){var e;l.isFetching||A(null===(e=d[0])||void 0===e?void 0:e.contenu)}),[l]),a.a.useEffect((function(){j.isFetching||h(u)}),[j]);return Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Editer un bon de commande",children:Object(x.jsx)(je,{title:"Editer un bon de commande"})}),Object(x.jsx)(xe,{children:Object(x.jsx)(ir.a,{children:Object(x.jsxs)(Kc.a,{children:[Object(x.jsx)(Gc.a,{xs:6,children:Object(x.jsx)(zc.a,{children:Object(x.jsxs)(Bc.a,{children:[Object(x.jsx)(Bc.a.Header,{className:"d-flex justify-content-between align-items-center bg-dark text-white",children:"Produits"}),Object(x.jsxs)(Bc.a.Body,{children:[Object(x.jsx)("input",{type:"text",onChange:function(e){N(e.target.value)},placeholder:"Rechercher un produit",className:"form-control mb-2"}),Object(x.jsxs)("div",{style:{overflowY:"auto",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(x.jsxs)(x.Fragment,{children:[v.map((function(e){return Object(x.jsx)(Vi,{state:q,setState:A,product:e})})),0==v.length&&"Aucune enregistrement trouv\xe9"]})," "]})]})]})})}),Object(x.jsx)(Gc.a,{xs:6,children:Object(x.jsx)(Pi,{disabled:j.isFetching,state:q,meta:l,setState:A,products:u,commandes:d[0]})})]})})})]})},Fi=function(){Object(r.useEffect)((function(){window.scrollTo(0,0)}),[])},Di=["isAuth","role","component","path"],Mi=function(e){var t=e.isAuth,n=e.role,c=e.component,r=e.path,a=Object(pe.a)(e,Di);return Fi(),Object(x.jsx)(o.b,Object(Se.a)(Object(Se.a)({},a),{},{render:function(e){var a=(e.location.state||{from:{pathname:"/"}}).from;return!t||n!==Qr||r!==T&&r!==k?Object(x.jsx)("div",{children:Object(x.jsx)(ne,{title:"CBV AMBALAVAO",children:Object(x.jsx)(c,Object(Se.a)({},e))})}):Object(x.jsx)(o.a,{to:a})}}))};Mi.defaultProps={isAuth:!1,role:Qr,path:"/"};Object(ie.b)((function(e){var t,n=e.auth;return{isAuth:null===n||void 0===n?void 0:n.isLoggedIn,role:(null===n||void 0===n||null===(t=n.user)||void 0===t?void 0:t.role)||""}}))(Mi);var Bi=a.a.createContext();function Ti(e){var t=e.children,n=Object(ie.d)((function(e){var t,n;return{user:null===(t=e.auth)||void 0===t?void 0:t.user,auth:e.auth,isLoggedIn:null===(n=e.auth)||void 0===n?void 0:n.isLoggedIn}})),c={user:n.user,auth:n.auth,isLoggedIn:n.isLoggedIn};return Object(x.jsx)(Bi.Provider,{value:c,children:t})}function ki(e){var t=e.children;return Object(x.jsx)(Bi.Consumer,{children:function(e){if(void 0===e)throw new Error("Data  must be used within a AuthContext");return t(e)}})}var _i=function(){var e=Object(ie.c)();return Object(x.jsxs)("div",{children:[Object(x.jsx)(Ti,{children:Object(x.jsx)(ki,{children:function(t){var n=t.auth,c=t.isLoggedIn;return Object(x.jsxs)(x.Fragment,{children:[null!=(null===n||void 0===n?void 0:n.error)&&Object(x.jsx)("div",{children:null===n||void 0===n?void 0:n.error.message}),Object(x.jsx)("h3",{children:"Se connecter"}),Object(x.jsxs)("div",{children:[c&&Object(x.jsx)(o.a,{to:"/"}),Object(x.jsx)(Rc,{enableReinitialize:!0,initialValues:{username:"",password:""},validations:{},onSubmit:function(t,n){var c=t.username,r=t.password;e(function(e){var t=e.username,n=e.password;return function(){var e=Object(Cn.a)(Nn.a.mark((function e(c){return Nn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ut.a.post(Hr,{username:t,password:n}).then((function(e){e.data.token&&localStorage.setItem("user-veto",JSON.stringify(e.data)),c({type:An,payload:{user:e.data,success:"success operation",error:null}})})).catch((function(e){var t,n;c({type:Sn,payload:{success:null,error:null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error}})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}({username:c,password:r})),console.log(t)},children:Object(x.jsxs)(Rc.Element,{children:[Object(x.jsx)(Rc.Field.Input,{border:"1px",name:"username",label:"Nom d'utilisateur",placeholder:"ex:Nom d'utilisateur",mb:3}),Object(x.jsx)(Rc.Field.Input,{name:"password",label:"Mot de passe",placeholder:"Mot de passe",type:"password"}),Object(x.jsx)("button",{type:"submit",mt:4,children:"Se connecter"})]})})]})]})}})}),Object(x.jsx)("div",{mt:46,divShadow:"md"})]})},Ii=function(){var e=Object(ie.c)();return Object(x.jsx)("div",{children:Object(x.jsx)(Ti,{children:Object(x.jsx)(ki,{children:function(t){var n=t.user,c=t.isLoggedIn;return Object(x.jsxs)(x.Fragment,{children:[c&&Object(x.jsx)(o.a,{to:{pathname:"/",state:{notification:{message:"Vous vous  etes connect\xe9 avec succes",type:"success"}}}}),null!=(null===n||void 0===n?void 0:n.error)&&Object(x.jsx)("div",{children:null===n||void 0===n?void 0:n.error.message}),Object(x.jsx)("h3",{children:"creer un compte"}),Object(x.jsxs)("div",{borderTop:"4px",boxShadow:"md",bg:"white",px:8,py:3,w:400,children:[c&&Object(x.jsx)(o.a,{to:"/"}),Object(x.jsx)(Rc,{enableReinitialize:!0,initialValues:{username:"",password:"",role:"ROLE_VENDEUR"},validations:{},onSubmit:function(t,n){var c=t.username,r=t.password,a=t.role;e(function(e){var t=e.username,n=e.password,c=e.role;return function(){var e=Object(Cn.a)(Nn.a.mark((function e(r){return Nn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ut.a.post(Lr,{username:t,password:n,role:c}).then((function(e){e.data.token&&localStorage.setItem("user-veto",JSON.stringify(e.data)),r({type:yn,payload:{user:e.data,success:"success operation",error:null}})})).catch((function(e){r({type:qn,payload:{user:null,success:null,error:e}})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),r({type:qn,payload:{user:null,success:null,error:e.t0}});case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()}({username:c,password:r,role:a}))},children:Object(x.jsxs)(Rc.Element,{children:[Object(x.jsx)(Rc.Field.Input,{border:"1px",name:"username",label:"Nom d'utilisateur",placeholder:"ex: Nom d'utilisateur",mb:3}),Object(x.jsx)(Rc.Field.Input,{name:"password",label:"Mot de passe",placeholder:"Mot de passe",type:"password"}),Object(x.jsx)(Rc.Field.Select,{label:"Role",name:"role",valueKey:"name",options:[{id:"ROLE_VENDEUR",name:"VENDEUR"},{id:"ROLE_ADMIN",name:"ADMIN"},{id:"ROLE_SEMI_ADMIN",name:"ROLE_SEMI_ADMIN"}]}),Object(x.jsx)("div",{children:Object(x.jsx)("button",{color:"white",type:"submit",mt:4,children:"Se connecter"})})]})})]})]})}})})})},Qi=["isAuth","role","component"],Li=function(e){e.isAuth,e.role;var t=e.component,n=Object(pe.a)(e,Qi);return Fi(),Object(x.jsx)(o.b,Object(Se.a)(Object(Se.a)({},n),{},{component:function(e){return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("div",{className:"",children:Object(x.jsx)("div",{children:Object(x.jsx)(t,Object(Se.a)({},e))})})})}}))};Li.defaultProps={isAuth:!1,role:Qr};var Hi=Object(ie.b)((function(e){var t,n=e.auth;return{isAuth:null===n||void 0===n?void 0:n.isLoggedIn,role:(null===n||void 0===n||null===(t=n.user)||void 0===t?void 0:t.role)||""}}))(Li),Ui="SET_TO_MAGASIN_ITEMS",Yi="ADD_TO_MAGASIN",zi="REMOVE_FROM_MAGASIN",Ki="CLEAR_MAGASIN",Gi="ADD_QTY_MAGASIN_ITEM",Wi="MINUS_QTY_MAGASIN_ITEM",Xi="ADD_QTY_NUMBER_MAGASIN_ITEM",Ji=function(){return{type:Ki}},Zi=function(e,t){var n=function(t){return!!(null===e||void 0===e?void 0:e.find((function(e){return(null===e||void 0===e?void 0:e.id)===t})))};return{tomagasin:e,isItemOnDepotToMagasin:n,addToMagasin:function(e){n(e.id)?t(function(e){return{type:zi,payload:e}}(e.id)):t(function(e){return{type:Yi,payload:e}}(e))}}},$i=function(e){var t,n=e.product,c=Object(ie.d)((function(e){return e.tomagasins})),r=Object(ie.c)(),a=Zi(c,r),i=a.isItemOnDepotToMagasin,s=a.addToMagasin,d=!!i&&i(n.id);return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(zc.a.Item,{children:Object(x.jsxs)(Kc.a,{className:"product-card m-2 ".concat(n.id?"":"product-loading"),style:{border:n&&d?"1px solid #a6a5a5":"",paddingTop:n&&d?"5px":"0px",boxShadow:n&&d?"0 10px 15px rgba(0, 0, 0, .07)":"none"},children:[Object(x.jsxs)(Gc.a,{xs:9,children:[Object(x.jsxs)("div",{children:[n.name," "]}),Object(x.jsx)("div",{class:"badge badge-primary",children:null===n||void 0===n||null===(t=n.fournisseur)||void 0===t?void 0:t.name})]}),Object(x.jsx)(Gc.a,{xs:3,children:n.id&&Object(x.jsx)("button",{disabled:n.quantityBrute<=0,className:" ".concat(d?"btn btn-danger btn-sm":"btn btn-green btn-sm"),onClick:function(){s&&s(n)},children:d?"Retirer":"Ajouter"})})]})})})},es=function(e){var t=e.product,n=Object(ie.c)(),c=function(e){n(function(e,t){return{type:Xi,payload:{id:e,value:t}}}(t.id,e))};return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Cc.c,{w:28,bg:"whitesmoke",onChange:function(e){c(e)},min:0,defaultValue:t.quantityParProduct,step:1,max:t.quantityBrute,children:[Object(x.jsx)(Cc.d,{}),Object(x.jsxs)(Cc.e,{children:[Object(x.jsx)(Cc.b,{}),Object(x.jsx)(Cc.a,{})]})]})})},ts=function(e){var t=e.product,n=Object(ie.c)(),c=Object(ie.d)((function(e){return e.tomagasins})),r=Zi(c,n),a=r.isItemOnDepotToMagasin,i=r.addToMagasin,s=!!a&&a(t.id);return Object(x.jsx)("div",{children:Object(x.jsxs)("div",{className:"d-flex justify-content-between align-items-center border   mb-2 p-2",children:[Object(x.jsxs)("div",{style:{width:"45%"},children:[Object(x.jsx)("p",{children:t.name}),Object(x.jsx)("span",{children:Object(x.jsxs)("strong",{children:[" ",ge(t.prixVente)]})})]}),Object(x.jsxs)("div",{className:"text-inline",children:[Object(x.jsxs)("small",{children:[t.type," "]}),Object(x.jsx)(es,{product:t})]}),Object(x.jsx)("div",{children:s&&Object(x.jsx)("button",{onClick:function(){i&&i(t)},className:"btn btn-danger btn-xs text-right",children:"X"})})]})})},ns=function(){var e=Object(ie.d)((function(e){return{tomagasins:e.tomagasins}})).tomagasins,t=new Date,n=Object(r.useState)(t),c=Object(O.a)(n,2),a=c[0],i=c[1],s=Object(o.g)(),d=Object(ie.d)(vn("commandes").meta),l=(Object(ie.d)(vn("sortiedepots").meta),Object(ie.c)());Object(r.useEffect)((function(){l(Ji()),l(xn("commandes").fetch()),l(xn("sortiedepots").fetch())}),[]);var u;t.getDate(),t.getMonth(),t.getFullYear(),t.getHours(),t.getMinutes(),t.getSeconds();return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(Bc.a,{children:[Object(x.jsx)(Bc.a.Header,{className:"bg-dark text-white d-flex justify-content-between align-items-center",children:Object(x.jsxs)("div",{children:["Depot to Magasin ("," ".concat(e.length," ").concat(e.length>1?"articles":"article"),")"]})}),Object(x.jsxs)(Bc.a.Body,{children:[Object(x.jsxs)("div",{class:"form-group",children:[Object(x.jsx)("label",{children:"Date de sortie :"}),Object(x.jsx)("div",{children:Object(x.jsx)("input",{type:"date",onChange:function(e){return i(e.target.value)},value:a,className:"form-control"})})]}),e.length<=0&&Object(x.jsx)("div",{class:"alert alert-success ",children:'Choississez un produit sur la section "Produits" puis cliquez sur "Ajouter"'}),null===e||void 0===e?void 0:e.map((function(t,n){return Object(x.jsx)(ts,{product:t,tomagasin:e,dispatch:l},"".concat(null===t||void 0===t?void 0:t.id,"_").concat(n))})),e.length>0&&Object(x.jsxs)("div",{className:"d-flex justify-content-end",children:[Object(x.jsx)("button",{className:"btn btn-green btn-sm mr-2",disabled:0===e.length,onClick:function(){l(xn("commandes").createTransaction({id:Number(d.nextId),contenu:e,type:"cva",sorte:"sortie",status:!0,dateCom:null!=a?a:t},"add-to-magasin")),l(Ji()),s.push(I)},type:"button",children:"Valider l'operation"}),Object(x.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(){0!==e.length&&l(Ji())},type:"button",children:Object(x.jsx)("span",{children:"Annuler"})})]})]}),e.length>0&&Object(x.jsx)(Bc.a.Footer,{className:"d-flex justify-content-between",children:Object(x.jsx)("div",{children:Object(x.jsxs)("h3",{style:{fontSize:"14px"},children:[Object(x.jsx)("strong",{children:"Total : "}),ge((u=e.map((function(e){return e.prixVente*e.quantityParProduct})),u&&0!==(null===u||void 0===u?void 0:u.length)?u.reduce((function(e,t){return e+t}),0):0))]})})})]})})},cs=function(){var e=Object(r.useState)([]),t=Object(O.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(!1),i=Object(O.a)(a,2),s=(i[0],i[1],Object(ie.d)(vn("products").value)),d=Object(ie.d)(vn("products").meta),l=Object(ie.c)(),o=Object(r.useState)(""),u=Object(O.a)(o,2),j=u[0],b=u[1];return Object(r.useEffect)((function(){l(xn("products").fetch())}),[]),Object(r.useEffect)((function(){d.isFetching||c(s)}),[d]),Object(r.useEffect)((function(){c(lr(s,j))}),[j]),Object(x.jsx)(ir.a,{children:Object(x.jsxs)(Kc.a,{children:[Object(x.jsx)(Gc.a,{xs:6,children:Object(x.jsxs)(Bc.a,{children:[Object(x.jsx)(Bc.a.Header,{className:"bg-dark p-2 text-white d-flex text-uppercase justify-content-between align-items-center",children:"Produits"}),Object(x.jsxs)(Bc.a.Body,{children:[Object(x.jsxs)(zc.a,{children:[Object(x.jsx)("input",{type:"text",onChange:function(e){b(e.target.value)},placeholder:"Nom du produit",className:"form-control mb-2"}),Object(x.jsxs)("div",{style:{overflowY:"auto",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[n.map((function(e){return Object(x.jsx)($i,{product:e})})),0===s.length&&"Aucune enregistrement trouv\xe9"]})]})," "]})," "]})}),Object(x.jsx)(Gc.a,{xs:6,children:Object(x.jsx)(ns,{})})]})})},rs=function(){return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Depot vers magasin",children:Object(x.jsx)(je,{title:"Depot vers magasin"})}),Object(x.jsx)(xe,{children:Object(x.jsx)(cs,{})})]})})};var as=function(e){var t=e.model,n=e.isDisabled,c=e.entity,r=Object(ie.c)(),a=Object(o.g)();return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("button",{className:"btn btn-danger btn-sm",disabled:n,onClick:function(e){e.preventDefault(),window.confirm("Vous voulez vraiment supprimer le produit ?")&&(r(xn(t).deleteTransaction(c,"/delete-to-magasin")),a.goBack())},children:"Supprimer"})})},is=function(e){for(var t=0;t<e.length;++t)return e[t].correction>0},ss=function(){var e=ae()().isoWeekday(1).startOf("week"),t=ae()().endOf("week"),n=Object(r.useState)(e),c=Object(O.a)(n,2),a=c[0],i=c[1],s=Object(r.useState)(t),d=Object(O.a)(s,2),o=d[0],u=d[1],j=Object(r.useState)([e,t]),b=Object(O.a)(j,2),m=b[0],v=b[1],h=(Object(r.useRef)(null),Object(r.useRef)(null),Object(ie.d)(vn("commandes").value)),p=Object(ie.d)(vn("commandes").meta),f=Object(ie.c)();Object(r.useEffect)((function(){f(function(e,t){return sn("commandes",{path:"/cva?deb=".concat(e,"&fin=").concat(t),replace:!0})}(a,o))}),[a,o]),Object(r.useEffect)((function(){null!==m?(m[0]&&i(m[0]),m[1]&&u(m[1])):(i(e),u(t))}),[m]);var g=function(e){if(!e||0===(null===e||void 0===e?void 0:e.length))return 0;var t=0;return e.forEach((function(e){t+=e.prixVente*e.quantityParProduct*1})),t},N=function(e){var t=0;return null===e||void 0===e||e.forEach((function(e){t+=1*e.quantityParProduct})),t},C=[{Header:"Date",Cell:function(e){var t;return Object(x.jsx)("div",{children:fe(null===(t=e.row.original)||void 0===t?void 0:t.dateCom)})}},{Header:"Produits",Cell:function(e){var t,n,c,r,a,i;return Object(x.jsxs)("div",{style:{width:"350px"},children:[1==(null===(t=e.row.original)||void 0===t?void 0:t.isdeleted)&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"badge badge-danger",children:"Supprim\xe9"}),Object(x.jsxs)("div",{className:"text text-danger",children:["Date de suppression :"," ",fe(null===(n=e.row.original)||void 0===n?void 0:n.deletedat)]})]}),null==(null===(c=e.row.original)||void 0===c?void 0:c.isdeleted)&&Object(x.jsx)("p",{children:is(null===(r=e.row.original)||void 0===r?void 0:r.contenu)&&Object(x.jsx)("div",{className:"badge badge-warning",children:"Modifi\xe9"})}),null===(a=e.row.original)||void 0===a||null===(i=a.contenu)||void 0===i?void 0:i.map((function(t){var n,c;return Object(x.jsxs)("span",{children:[Object(x.jsx)("span",{style:{background:"white",color:1==(null===(n=e.row.original)||void 0===n?void 0:n.isdeleted)?"red":"inherit",padding:2},children:t.name}),Object(x.jsxs)("span",{style:{color:1==(null===(c=e.row.original)||void 0===c?void 0:c.isdeleted)?"red":"inherit"},children:[" "," || "]})]})}))]})}},{Header:"Qt\xe9",Cell:function(e){var t;return Object(x.jsx)("div",{children:N(null===(t=e.row.original)||void 0===t?void 0:t.contenu)})}},{Header:"Total",Cell:function(e){var t;return Object(x.jsx)("div",{children:ge(g(null===(t=e.row.original)||void 0===t?void 0:t.contenu))})}},{Header:"Actions",Cell:function(e){var t,n,c,r=1==(null===(t=e.row.original)||void 0===t?void 0:t.isdeleted);return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(l.b,{to:"/depot/to/magasin/detail/".concat(null===(n=e.row.original)||void 0===n?void 0:n.id),className:"btn btn-green btn-sm mr-2",disabled:r,children:"D\xe9tails"}),Object(x.jsx)(l.b,{to:"/depot/to/magasin/edit/".concat(null===(c=e.row.original)||void 0===c?void 0:c.id),className:"btn btn-warning btn-sm mr-2",disabled:r,children:"Editer"}),Object(x.jsx)(as,{model:"tomagasins",isDisabled:r,entity:e.row.original})]})}}];return Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Historique sortie vers Magasin",children:Object(x.jsx)(je,{title:"Historique sortie vers Magasin"})}),Object(x.jsxs)(xe,{children:[Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-lg-6",children:Object(x.jsxs)("div",{children:[Object(x.jsx)("h3",{className:"text-uppercase",children:"Historique de sortie vers Magasin"}),Object(x.jsx)("p",{children:"".concat(fe(a)," ->  ").concat(fe(o))})]})}),Object(x.jsx)("div",{className:"col-lg-6 text-right",children:Object(x.jsx)(ur.a,{locale:"fr-FR",onChange:v,value:m})})," "]}),Object(x.jsx)(Qc,{filter:!1,data:h.sort((function(e,t){return t.id-e.id})),meta:p,columns:C})]})," "]})};var ds=function(e){var t=e.model,n=e.entity,c=Object(ie.c)();return Object(o.g)(),Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(e){e.preventDefault(),window.confirm("Vous voulez vraiment supprimer ce commande ?")&&c(xn(t).createTransaction({commande:n,original:n},"/delete-from-magasin"))},children:"Supprimer"})})},ls="SET_SEARCH_BY_DATE",os="RESET_SEARCH_BY_DATE",us=function(e,t){return{type:ls,payload:{deb:e,fin:t}}},js=function(e,t){return{type:os}},bs=new Date;function ms(){var e=Object(r.useState)({hours:bs.getHours(),minutes:bs.getMinutes(),seconds:bs.getSeconds()}),t=Object(O.a)(e,2),n=t[0],c=t[1];return Object(r.useEffect)((function(){var e=setInterval((function(){var e=new Date;c({hours:e.getHours()<10?"0"+e.getHours():e.getHours(),minutes:e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes(),seconds:e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds()})}),1e3);return function(){return clearInterval(e)}}),[]),Object(x.jsxs)("div",{className:"bg-dark py-1 px-4 text-center",children:[Object(x.jsxs)("h1",{style:{fontSize:"20px"},children:[n.hours," : ",n.minutes," : ",n.seconds]}),Object(x.jsx)("h4",{className:"bg-thead p-1",children:fe(bs)})]})}var Os=a.a.memo(ms,se.reactFastCompare);function xs(){var e=Object(o.h)();return console.log(e.pathname),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"bg-dark text-white py-3 d-flex justify-content-center align-items-center",children:Object(x.jsx)("h1",{className:"",children:"CABINET VETERINAIRE AMBALAVAO"})}),Object(x.jsxs)("div",{className:"py-2",children:[Object(x.jsxs)("div",{class:"d-flex justify-content-between align-items-center",children:[Object(x.jsx)("div",{}),Object(x.jsx)("div",{children:Object(x.jsx)(Os,{})}),Object(x.jsx)("div",{className:"bg-thead"})]}),Object(x.jsxs)("div",{class:"d-flex justify-content-center mt-2 align-items-center",children:[Object(x.jsx)(l.b,{className:"btn bg-".concat("/vendeur"==e.pathname||"/Vendeur"==e.pathname?"thead":"dark"," text-white mb-2 mr-2 btn-sm"),to:"/Vendeur",children:"Vente"}),Object(x.jsx)(l.b,{className:"btn bg-".concat("/historique/vente/vendeur/vente-cva"==e.pathname?"thead":"dark"," text-white mb-2 mr-2 btn-sm"),to:"/historique/vente/vendeur/vente-cva",children:"Historique de vente"}),Object(x.jsx)(l.b,{className:"btn bg-".concat("/stock-cva"==e.pathname?"thead":"dark"," text-white mb-2 mr-2 btn-sm"),to:"/stock-cva",children:"Stocks"}),Object(x.jsx)(l.b,{className:"btn bg-".concat("/historique/vente/vendeur/credit-cva"==e.pathname?"thead":"dark"," text-white mb-2 mr-2 btn-sm"),to:"/historique/vente/vendeur/credit-cva",children:"Credits"})]})]})]})}var vs=function(e){for(var t=0;t<e.length;++t)return e[t].correction>0||e[t].correctionml>0},hs=function(){var e=Object(ie.d)((function(e){return e.searchbydate})),t=Object(o.i)().type,n=Object(r.useState)([e.deb,e.fin]),c=Object(O.a)(n,2),i=c[0],s=c[1],d=(Object(r.useRef)(null),Object(r.useRef)(null),Object(ie.d)(vn("commandes").value)),u=Object(ie.d)(vn("commandes").meta),j=Object(ie.c)();Object(r.useEffect)((function(){j(pn(e.deb,e.fin,t))}),[e.deb,e.fin]),Object(r.useEffect)((function(){null!==i&&i[0]&&j(us(i[0],i[1]))}),[i]);var b=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0},m=function(e){return b(null===e||void 0===e?void 0:e.map((function(e){return gi(e)?e.prixqttccvente*e.quantityParProduct*e.qttccpvente+e.prixlitre*e.qttbylitre:e.prixVente*e.quantityParProduct})))+b(null===e||void 0===e?void 0:e.map((function(e){return e.prixParCC*e.qttByCC})))},v=a.a.useMemo((function(){return[{Header:"Date",Cell:function(e){var t;return Object(x.jsx)(x.Fragment,{children:fe(null===(t=e.row.original)||void 0===t?void 0:t.dateCom)})}},{Header:"Produits",Cell:function(e){var t,n,c,r;return Object(x.jsxs)("div",{style:{width:"350px"},children:[1==e.row.original.isdeleted&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"badge badge-danger",children:"Supprim\xe9"}),Object(x.jsxs)("div",{className:"text text-danger",children:["Date de suppression :"," ",fe(e.row.original.deletedat)]})]}),null==(null===(t=e.row.original)||void 0===t?void 0:t.isdeleted)&&Object(x.jsx)("p",{children:vs(null===(n=e.row.original)||void 0===n?void 0:n.contenu)&&Object(x.jsx)("div",{className:"badge badge-warning",children:"Modifi\xe9"})}),null===(c=e.row.original)||void 0===c||null===(r=c.contenu)||void 0===r?void 0:r.map((function(t){var n,c;return Object(x.jsxs)("span",{children:[Object(x.jsx)("span",{style:{background:"white",color:1==(null===(n=e.row.original)||void 0===n?void 0:n.isdeleted)?"red":"inherit",padding:2},children:t.name}),Object(x.jsxs)("span",{style:{color:1==(null===(c=e.row.original)||void 0===c?void 0:c.isdeleted)?"red":"inherit"},children:[" "," || "]})]})}))]})}},{Header:"Total",Cell:function(e){var t;return Object(x.jsx)("div",{children:ge(m(null===(t=e.row.original)||void 0===t?void 0:t.contenu))})}},{Header:"Actions",Cell:function(e){var t,n;return Object(x.jsx)(x.Fragment,{children:!e.row.original.isdeleted&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(l.b,{to:"/detailvendeur/".concat(null===(t=e.row.original)||void 0===t?void 0:t.id),className:"btn btn-green btn-sm mr-2",children:"D\xe9tails"}),Object(x.jsx)(l.b,{to:"/vendeur-commande/".concat(null===(n=e.row.original)||void 0===n?void 0:n.id),className:"btn btn-warning btn-sm mr-2",children:"Editer"}),Object(x.jsx)(ds,{model:"fromagasins",entity:e.row.original})]})})}}]}),[]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("div",{children:Object(x.jsxs)(ir.a,{children:[Object(x.jsx)(xs,{}),Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-lg-6",children:Object(x.jsxs)("div",{children:[Object(x.jsx)("h3",{className:"text-uppercase",children:"vente-cva"==t?"Historique de vente":"CREDIT"}),Object(x.jsx)("p",{children:"".concat(fe(e.deb)," ->  ").concat(fe(e.fin))}),Object(x.jsx)("div",{className:"bg-thead p-3 my-2",style:{width:"30%"},children:Object(x.jsxs)("h2",{children:["Recette: ",ge(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=0;return d.length>0?e.map((function(e){t+=m(null===e||void 0===e?void 0:e.contenu)})):t=0,t}(d))]})})]})}),Object(x.jsx)("div",{className:"col-lg-6 text-right",children:Object(x.jsx)(ur.a,{locale:"fr-FR",onChange:s,value:i})})," "]}),Object(x.jsx)(Qc,{data:d.sort((function(e,t){return t.id-e.id})),meta:u,columns:v,filter:!1})]})})})},ps=function(e){return!(0==e.condml||0==e.condsize||0==e.qttccpvente||0==e.prixqttccvente)},fs=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,c=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"inc",a=0,i=0,s=0,d=0,l=0,o=0,u=!0,j=e.condml,b=e.condsize;if(console.log(t),"mcinc"==r){var m=Number(e.quantityCCCVA)+Number(t);Number(m)>=Number(j)?(a=Math.floor(m/Number(j)),d=Number(t)-Number(j)*a,e.quantityCCCVA+d>=Number(j)&&(a+=1)):e.quantityCCCVA+Number(t)>=Number(j)&&(a+=1);var O=Number(a)+Number(n);Number(O)>=Number(b)?(i=Math.floor(O/Number(b)),o=Number(O)-Number(b)*i,e.condval+o>=Number(b)&&(i+=1)):e.condval+Number(O)>=Number(b)&&(i+=1),e.quantityBruteCVA+i-c<0&&(u=!1)}else if("mdecinc"==r){Number(t)>=Number(j)?(a=Math.floor(Number(t)/Number(j)),d=Number(t)-Number(j)*a,e.quantityCCCVA-d<0&&(a+=1)):e.quantityCCCVA-Number(t)<0&&(a+=1);var x=Number(a);Number(x)>=Number(b)?(s=Math.floor(Number(x)/Number(b)),l=Number(x)-Number(b)*s,e.condval-l<0&&(s+=1)):e.condval-Number(x)<0&&(s+=1);var v=Number(n);Number(v)>=Number(b)?(i=Math.floor(v/Number(b)),o=Number(v)-Number(b)*i,e.condval+o>=Number(b)?i+=1:e.condval=Number(e.condval)+o):e.condval+Number(v)>=Number(b)&&(i+=1);var h=e.quantityBruteCVA+c+i;h-s<0&&(u=!1)}else if("decinc"==r){Number(t)>=Number(j)?(a=Math.floor(Number(t)/Number(j)),d=Number(t)-Number(j)*a,e.quantityCCCVA-d<0&&(a+=1)):e.quantityCCCVA-Number(t)<0&&(a+=1);var p=Number(a);Number(p)>=Number(b)?(s=Math.floor(Number(p)/Number(b)),l=Number(p)-Number(b)*s,e.condval-l<0&&(s+=1)):e.condval-Number(p)<0&&(s+=1);var f=Number(n);Number(f)>=Number(b)?(i=Math.floor(f/Number(b)),o=Number(f)-Number(b)*i,e.condval+o>=Number(b)&&(i+=1)):e.condval+Number(f)>=Number(b)&&(i+=1),e.quantityBruteCVA+i-(c+s)<0&&(u=!1)}else{var g=Number(e.quantityCCCVA)+Number(t);Number(g)>=Number(j)?(a=Math.floor(g/Number(j)),d=Number(t)-Number(j)*a,e.quantityCCCVA+d>=Number(j)&&(a+=1)):(e.quantityCCCVA+Number(t)>=Number(j)&&(a+=1),u=!0)}return u},gs=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,c=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"dec",a=0,i=0,s=0,d=0,l=!0,o=e.condml,u=e.condsize;if("pcdec"==r){Number(t)>=Number(o)?(a=Math.floor(Number(t)/Number(o)),s=Number(t)-Number(o)*a,e.quantityCCCVA-s<0&&(a+=1)):e.quantityCCCVA-Number(t)<0&&(a+=1);var j=Number(a)+Number(n);Number(j)>=Number(u)?(i=Math.floor(Number(j)/Number(u)),d=Number(j)-Number(u)*i,e.condval-d<0&&(i+=1)):e.condval-Number(j)<0&&(i+=1),e.quantityBruteCVA+c-i<0&&(l=!1)}else if("mincdec"==r){var b=0,m=0,O=0,x=0,v=e.condml,h=e.condsize,p=Number(e.quantityCCCVA)+Number(t);Number(p)>=Number(v)?(b=Math.floor(p/Number(v)),O=Number(t)-Number(v)*b,e.quantityCCCVA+O>=Number(v)&&(b+=1)):e.quantityCCCVA+Number(t)>=Number(v)&&(b+=1);var f=Number(b);Number(f)>=Number(h)?(m=Math.floor(f/Number(h)),x=Number(f)-Number(h)*m,e.condval+x>=Number(h)&&(m+=1)):e.condval+Number(f)>=Number(h)&&(m+=1);var g=Number(n);Number(g)>=Number(h)?(i=Math.floor(Number(g)/Number(h)),d=Number(g)-Number(h)*b,e.condval-d<0&&(i+=1)):e.condval-Number(g)<0?i+=1:e.condval=e.condval-Number(g);var N=e.quantityBruteCVA+m+c;N-i&&(l=!1)}else if("incdec"==r){var C=0,y=0,q=0,A=0,S=e.condml,E=e.condsize,w=Number(e.quantityCCCVA)+Number(t);Number(w)>=Number(S)?(C=Math.floor(w/Number(S)),q=Number(t)-Number(S)*C,e.quantityCCCVA+q>=Number(S)&&(C+=1)):e.quantityCCCVA+Number(t)>=Number(S)&&(C+=1);var P=Number(C);Number(P)>=Number(E)?(y=Math.floor(P/Number(E)),A=Number(P)-Number(E)*y,e.condval+A>=Number(E)&&(y+=1)):e.condval+Number(P)>=Number(E)&&(y+=1);var V=Number(n);Number(V)>=Number(E)?(i=Math.floor(Number(V)/Number(E)),d=Number(V)-Number(E)*C,e.condval-d<0&&(i+=1)):e.condval-Number(V)<0&&(i+=1);var R=e.quantityBruteCVA+y,F=i+c;R-F<0&&(l=!1)}else{Number(t)>=Number(o)?(a=Math.floor(Number(t)/Number(o)),s=Number(t)-Number(o)*a,e.quantityCCCVA-s<0&&(a+=1)):e.quantityCCCVA-Number(t)<0&&(a+=1);var D=Number(a)+Number(n);Number(D)>=Number(u)?(i=Math.floor(Number(D)/Number(u)),d=Number(D)-Number(u)*i,e.condval-d<0&&(i+=1)):e.condval-Number(D)<0&&(i+=1);var M=i+c;e.quantityBruteCVA-M<0&&(l=!1)}return l},Ns=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"dec",r=0,a=0,i=e.doseDefault,s=!0;if("incdec"!=c){Number(t)>=Number(i)?(r=Math.floor(Number(t)/Number(i)),a=Number(t)-Number(i)*r,e.quantityCCCVA-a<0&&(r+=1)):e.quantityCCCVA-Number(t)<0&&(r+=1);var d=r+n;e.quantityBruteCVA-d<0&&(s=!1)}else{var l=Number(e.quantityCCCVA)+Number(t);Number(l)>=Number(i)?(r=Math.floor(l/Number(i)),a=Number(t)-Number(i)*r,e.quantityCCCVA+a>=Number(i)&&(r+=1)):e.quantityCCCVA+Number(t)>=Number(i)&&(r+=1),e.quantityBruteCVA+r-n<0&&(s=!1)}return s},Cs=function(e,t,n){var c=t.contenu.find((function(t){return t.id==e.id}));console.log("minitial",t);var r=!1,a=0,i=0,s=0,d=!0,l="none",o=n.quantityParProduct,u=n.qttByCC,j=n.qttbylitre;if(ps(e)){r=!0,r=!1;var b=n.quantityParProduct,m=n.qttByCC,O=n.qttbylitre;console.log(b,m);var x=void 0!=c?null===c||void 0===c?void 0:c.quantityParProduct:n.condval,v=void 0!=c?null===c||void 0===c?void 0:c.qttByCC:n.quantityCCCVA,h=void 0!=c?null===c||void 0===c?void 0:c.qttbylitre:n.quantityBruteCVA;console.log(x,v,h),O==h&&b==x&&m==v&&(l="qttlitre == cmdqttlitre && qtt == cmdqtt && qttcc == cmdqttcc"),O==h&&b==x&&m>v&&(l="qttlitre == cmdqttlitre && qtt == cmdqtt && qttcc > cmdqttcc",0==(d=gs(e,i=m-v,a,s))&&(u=v)),O==h&&b==x&&m<v&&(l="qttlitre == cmdqttlitre && qtt == cmdqtt && qttcc < cmdqttcc",i=v-m,d=!0),O==h&&b>x&&m==v&&(l="qttlitre == cmdqttlitre && qtt > cmdqtt && qttcc == cmdqttcc",0==(d=gs(e,i,a=b-x,s))&&(o=x)),O==h&&b<x&&m==v&&(l="qttlitre == cmdqttlitre && qtt < cmdqtt && qttcc == cmdqttcc",a=x-b,d=!0),O==h&&b>x&&m>v&&(l="qttlitre == cmdqttlitre && qtt > cmdqtt && qttcc > cmdqttcc",0==(d=gs(e,i=m-v,a=b-x,s))&&(u=v,o=x)),O==h&&b<x&&m<v&&(l="qttlitre == cmdqttlitre && qtt < cmdqtt && qttcc < cmdqttcc",a=x-b,i=v-m,d=!0),O==h&&b>x&&m<v&&(l="qttlitre == cmdqttlitre && qtt > cmdqtt && qttcc < cmdqttcc",0==(d=gs(e,i=v-m,a=b-x,s,"incdec"))&&(u=v,o=x)),O==h&&b<x&&m>v&&(l="qttlitre == cmdqttlitre && qtt < cmdqtt && qttcc > cmdqttcc",0==(d=fs(e,i=m-v,a=x-b,s,"decinc"))&&(u=v,o=x)),O>h&&b==x&&m==v&&(l="qttlitre > cmdqttlitre && qtt == cmdqtt && qttcc == cmdqttcc",0==(d=gs(e,i,a,s=O-h))&&(j=h)),O<h&&b==x&&m==v&&(l="qttlitre < cmdqttlitre && qtt == cmdqtt && qttcc == cmdqttcc",s=h-O,d=!0),O>h&&b>x&&m>v&&(l="qttlitre > cmdqttlitre && qtt > cmdqtt && qttcc > cmdqttcc",0==(d=gs(e,i=m-v,a=b-x,s=O-h))&&(u=v,o=x,j=h)),O>h&&b>x&&m<v&&(l="qttlitre > cmdqttlitre && qtt > cmdqtt && qttcc < cmdqttcc",0==(d=gs(e,i=v-m,a=b-x,s=O-h,"incdec"))&&(u=v,o=x,j=h)),O>h&&b<x&&m>v&&(l="qttlitre > cmdqttlitre && qtt < cmdqtt && qttcc > cmdqttcc",0==(d=fs(e,i=m-v,a=x-b,s=O-h,"decinc"))&&(u=v,o=x,j=h)),O>h&&b<x&&m<v&&(l="qttlitre > cmdqttlitre && qtt < cmdqtt && qttcc < cmdqttcc",0==(d=fs(e,i=v-m,a=x-b,s=O-h,"mcinc"))&&(u=v,o=x,j=h)),O<h&&b>x&&m>v&&(l="qttlitre < cmdqttlitre && qtt > cmdqtt && qttcc > cmdqttcc",0==(d=gs(e,i=m-v,a=b-x,s=h-O,"pcdec"))&&(u=v,o=x,j=h)),O<h&&b>x&&m<v&&(l="qttlitre < cmdqttlitre && qtt > cmdqtt && qttcc < cmdqttcc",0==(d=gs(e,i=v-m,a=b-x,s=h-O,"mincdec"))&&(u=v,o=x,j=h)),O<h&&b<x&&m>v&&(l="qttlitre < cmdqttlitre && qtt < cmdqtt && qttcc > cmdqttcc",0==(d=fs(e,i=m-v,a=x-b,s=h-O,"mdecinc"))&&(u=v,o=x,j=h)),O<h&&b<x&&m<v&&(l="qttlitre < cmdqttlitre && qtt < cmdqtt && qttcc < cmdqttcc",a=x-b,i=v-m,s=h-O,d=!0)}else{r=!1;var p=n.quantityParProduct,f=n.qttByCC;console.log(p,f);var g=void 0!=c?null===c||void 0===c?void 0:c.quantityParProduct:n.quantityBruteCVA,N=void 0!=c?null===c||void 0===c?void 0:c.qttByCC:n.quantityCCCVA;console.log(g,N),p>g&&f==N&&(l="qtt > cmdqtt && qttcc == cmdqttcc",a=p-g,console.log(e.quantityBruteCVA,a),e.quantityBruteCVA-a>=0?d=!0:(d=!1,o=g)),p<g&&f==N&&(l="qtt < cmdqtt && qttcc == cmdqttcc",a=g-p,d=!0),p==g&&f==N&&(l="qtt == cmdqtt && qttcc == cmdqttcc",d=!0),p==g&&f>N&&(l="qtt == cmdqtt && qttcc > cmdqttcc",d=Ns(e,i=f-N),u=N),p==g&&f<N&&(l="qtt == cmdqtt && qttcc < cmdqttcc",i=N-f,d=!0),p>g&&f<N&&(l="qtt > cmdqtt && qttcc < cmdqttcc",d=Ns(e,i=N-f,a=p-g,"incdec"),o=g,u=N),p<g&&f>N&&(l="qtt < cmdqtt && qttcc > cmdqttcc",a=g-p,i=f-N,d=!0),p<g&&f<N&&(a=g-p,i=N-f,l="qtt < cmdqtt && qttcc < cmdqttcc",d=!0),p>g&&f>N&&(l="qtt > cmdqtt && qttcc > cmdqttcc",d=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,c=0,r=0,a=e.doseDefault,i=!0;Number(t)>=Number(a)?(c=Math.floor(Number(t)/Number(a)),r=Number(t)-Number(a)*c,e.quantityCCCVA-r<0&&(c+=1)):e.quantityCCCVA-Number(t)<0&&(c+=1);var s=c+Number(n);return e.quantityBruteCVA-s<0&&(i=!1),i}(e,i=f-N,a=p-g),o=g,u=N)}return console.log("--------"+l+"---------"),{normalQtt:o,normalQttCC:u,normalQttLitre:j,isSpecific:r,isValid:d}},ys=function(e){return ps(e)?0==e.quantityBruteCVA&&0==e.quantityCCCVA&&0==e.condval:0==e.quantityBruteCVA&&0==e.quantityCCCVA},qs=function(e){return e.filter((function(e){return ps(t=e)?0==t.quantityParProduct&&0==t.qttByCC&&0==t.qttbylitre:0==t.quantityParProduct&&0==t.qttByCC;var t})).length>0};var As=function(e){var t=e.model,n=e.entity,c=Object(ie.c)();return Object(o.g)(),Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(e){e.preventDefault(),window.confirm("Vous voulez vraiment supprimer ce commande ?")&&c(xn(t).createTransaction({commande:n,original:n},"/delete-from-magasin"))},children:"Supprimer"})})},Ss=function(e){for(var t=0;t<e.length;++t)return e[t].correction>0||e[t].correctionml>0},Es=function(){var e=Object(ie.d)((function(e){return e.searchbydate})),t=Object(o.i)().type,n=Object(r.useState)([e.deb,e.fin]),c=Object(O.a)(n,2),i=c[0],s=c[1],d=(Object(r.useRef)(null),Object(r.useRef)(null),Object(ie.d)(vn("commandes").value)),u=Object(ie.d)(vn("commandes").meta),j=Object(ie.c)();Object(r.useEffect)((function(){j(pn(e.deb,e.fin,t))}),[e.deb,e.fin]),Object(r.useEffect)((function(){null!==i&&i[0]&&j(us(i[0],i[1]))}),[i]);var b=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0},m=function(e){return b(null===e||void 0===e?void 0:e.map((function(e){return ps(e)?e.prixqttccvente*e.quantityParProduct*e.qttccpvente+e.prixVente*e.qttbylitre:e.prixVente*e.quantityParProduct})))+b(null===e||void 0===e?void 0:e.map((function(e){return e.prixParCC*e.qttByCC})))},v=a.a.useMemo((function(){return[{Header:"Date",Cell:function(e){var t;return Object(x.jsx)(x.Fragment,{children:fe(null===(t=e.row.original)||void 0===t?void 0:t.dateCom)})}},{Header:"Produits",Cell:function(e){var t,n,c,r,a,i;return Object(x.jsxs)("div",{style:{width:"350px"},children:[1==(null===(t=e.row.original)||void 0===t?void 0:t.isdeleted)&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"badge badge-danger",children:"Supprim\xe9"}),Object(x.jsxs)("div",{className:"text text-danger",children:["Date de suppression :"," ",fe(null===(n=e.row.original)||void 0===n?void 0:n.deletedat)]})]}),null==(null===(c=e.row.original)||void 0===c?void 0:c.isdeleted)&&Object(x.jsx)("p",{children:Ss(null===(r=e.row.original)||void 0===r?void 0:r.contenu)&&Object(x.jsx)("div",{className:"badge badge-warning",children:"Modifi\xe9"})}),null===(a=e.row.original)||void 0===a||null===(i=a.contenu)||void 0===i?void 0:i.map((function(t){var n,c;return Object(x.jsxs)("span",{children:[Object(x.jsx)("span",{style:{background:"white",color:1==(null===(n=e.row.original)||void 0===n?void 0:n.isdeleted)?"red":"inherit",padding:2},children:t.name}),Object(x.jsxs)("span",{style:{color:1==(null===(c=e.row.original)||void 0===c?void 0:c.isdeleted)?"red":"inherit"},children:[" "," || "]})]})}))]})}},{Header:"Total",Cell:function(e){var t;return Object(x.jsx)("div",{children:ge(m(null===(t=e.row.original)||void 0===t?void 0:t.contenu))})}},{Header:"Actions",Cell:function(e){var t,n,c;return Object(x.jsx)(x.Fragment,{children:!(null===(t=e.row.original)||void 0===t?void 0:t.isdeleted)&&Object(x.jsxs)(x.Fragment,{children:[" ",Object(x.jsx)(l.b,{to:"/detailvendeuradmin/".concat(null===(n=e.row.original)||void 0===n?void 0:n.id),className:"btn btn-green btn-sm mr-2",children:"D\xe9tails"}),Object(x.jsx)(l.b,{to:"/vendeur-admin-commande/".concat(null===(c=e.row.original)||void 0===c?void 0:c.id),className:"btn btn-warning btn-sm mr-2",children:"Editer"}),Object(x.jsx)(As,{model:"fromagasins",entity:e.row.original})]})})}}]}),[]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Historique de vente du magasin",children:Object(x.jsx)(je,{title:"Historique de vente du magasin"})}),Object(x.jsxs)(xe,{children:[Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-lg-6",children:Object(x.jsxs)("div",{children:[Object(x.jsx)("h3",{className:"text-uppercase",children:"vente-cva"==t?"Historique de vente":"CREDIT"}),Object(x.jsx)("p",{children:"".concat(fe(e.deb)," ->  ").concat(fe(e.fin))}),Object(x.jsx)("div",{className:"bg-thead p-3 my-2",style:{width:"30%"},children:Object(x.jsxs)("h2",{children:["Recette: ",ge(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=0;return d.length>0?e.map((function(e){t+=m(null===e||void 0===e?void 0:e.contenu)})):t=0,t}(d))]})})]})}),Object(x.jsx)("div",{className:"col-lg-6 text-right",children:Object(x.jsx)(ur.a,{locale:"fr-FR",onChange:s,value:i})})," "]}),Object(x.jsx)(Qc,{data:d.sort((function(e,t){return t.id-e.id})),meta:u,columns:v,filter:!1})]})," "]})})},ws=function(){var e=Object(ie.d)(vn("products").value),t=Object(ie.d)(vn("products").meta),n=Object(ie.c)();Object(r.useEffect)((function(){n(xn("products").fetch())}),[]);var c=a.a.useMemo((function(){return[{Header:"Nom de l'article",accessor:"name"},{Header:"Fournisseur",Cell:function(e){var t,n;return Object(x.jsx)("div",{children:Object(x.jsx)("h3",{className:"badge badge-primary",children:null===(t=e.row.original)||void 0===t||null===(n=t.fournisseur)||void 0===n?void 0:n.name})})}},{Header:"Quantit\xe9",accessor:"quantityBruteCVA"},{Header:"Conditionnement (ML)",accessor:"condval"},{Header:"Reste en ML",accessor:"quantityCC",Cell:function(e){var t,n;return Object(x.jsx)("div",{children:null==(null===(t=e.row.original)||void 0===t?void 0:t.quantityCCCVA)?0:null===(n=e.row.original)||void 0===n?void 0:n.quantityCCCVA})}}]}));return Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Etat de stock du Magasin",children:Object(x.jsx)(je,{title:"Etat de stock du Magasin"})}),Object(x.jsxs)(xe,{children:[Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-lg-6",children:Object(x.jsx)("div",{children:Object(x.jsx)("h3",{className:"text-uppercase",children:"Etat de stock du Magasin"})})}),Object(x.jsx)("div",{className:"col-lg-6 text-right"})," "]}),Object(x.jsx)(Qc,{data:e,meta:t,columns:c})]})]})},Ps=function(e){for(var t=0;t<e.length;++t)return e[t].correction>0||e[t].correctionml>0},Vs=function(){var e=ae()().isoWeekday(1).startOf("week"),t=ae()().endOf("week"),n=Object(r.useState)(e),c=Object(O.a)(n,2),i=c[0],s=c[1],d=Object(r.useState)(t),o=Object(O.a)(d,2),u=o[0],j=o[1],b=(Object(r.useRef)(null),Object(r.useRef)(null),Object(ie.d)(vn("commandes").value)),m=Object(ie.d)(vn("commandes").meta),v=Object(r.useState)([e,t]),h=Object(O.a)(v,2),p=h[0],f=h[1],g=Object(ie.c)();Object(r.useEffect)((function(){g(pn(i,u))}),[i,u]),Object(r.useEffect)((function(){null!==p?(p[0]&&s(p[0]),p[1]&&j(p[1])):(s(e),j(t))}),[p]);var N=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0},C=function(e){return N(null===e||void 0===e?void 0:e.map((function(e){return gi(e)?e.prixqttccvente*e.quantityParProduct*e.qttccpvente+e.prixVente*e.qttbylitre:e.prixVente*e.quantityParProduct})))+N(null===e||void 0===e?void 0:e.map((function(e){return e.prixParCC*e.qttByCC})))},y=a.a.useMemo((function(){return[{Header:"Date",Cell:function(e){var t;return Object(x.jsx)(x.Fragment,{children:fe(null===(t=e.row.original)||void 0===t?void 0:t.dateCom)})}},{Header:"Produits",Cell:function(e){var t,n,c,r,a,i;return Object(x.jsxs)("div",{style:{width:"350px"},children:[1==(null===(t=e.row.original)||void 0===t?void 0:t.isdeleted)&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"badge badge-danger",children:"Supprim\xe9"}),Object(x.jsxs)("div",{className:"text text-danger",children:["Date de suppression :"," ",fe(null===(n=e.row.original)||void 0===n?void 0:n.deletedat)]})]}),null==(null===(c=e.row.original)||void 0===c?void 0:c.isdeleted)&&Object(x.jsx)("p",{children:Ps(null===(r=e.row.original)||void 0===r?void 0:r.contenu)&&Object(x.jsx)("div",{className:"badge badge-warning",children:"Modifi\xe9"})}),null===(a=e.row.original)||void 0===a||null===(i=a.contenu)||void 0===i?void 0:i.map((function(t){var n,c;return Object(x.jsxs)("span",{children:[Object(x.jsx)("span",{style:{background:"white",color:1==(null===(n=e.row.original)||void 0===n?void 0:n.isdeleted)?"red":"inherit",padding:2},children:t.name}),Object(x.jsxs)("span",{style:{color:1==(null===(c=e.row.original)||void 0===c?void 0:c.isdeleted)?"red":"inherit"},children:[" "," || "]})]})}))]})}},{Header:"Total",Cell:function(e){var t;return Object(x.jsx)("div",{children:ge(C(null===(t=e.row.original)||void 0===t?void 0:t.contenu))})}},{Header:"Actions",Cell:function(e){var t;return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(l.b,{className:"btn btn-sm  btn-green",to:"/magasin/detail/vente/".concat(null===(t=e.row.original)||void 0===t?void 0:t.id),children:"D\xe9tails"})})}}]}),[]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Historique de vente du magasin",children:Object(x.jsx)(je,{title:"Historique de vente du magasin"})}),Object(x.jsxs)(xe,{children:[Object(x.jsxs)("div",{className:"row my-2",children:[Object(x.jsx)("div",{className:"col-lg-8",children:Object(x.jsxs)("div",{children:[i&&u&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("h2",{children:"Historique de vente du magasin"}),Object(x.jsxs)("span",{children:["Du: ",fe(i)," Au ",fe(u)]})]})," "]})}),Object(x.jsx)("div",{className:"col-lg-4 text-right",children:Object(x.jsx)("div",{children:Object(x.jsx)(he.a,{locale:"fr-FR",onChange:f,value:p})})})]}),Object(x.jsx)(Qc,{filter:!1,data:b,meta:m,columns:y})]})]})})},Rs=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0};var Fs=Object(o.j)((function(e){var t,n,c,a,i,s,d,u,j,b,m=Object(o.g)(),O=Object(o.i)().id,v=Object(ie.d)(vn("commandes").value),h=Object(ie.c)();return Object(r.useEffect)((function(){h(xn("commandes").get(O))}),[O]),Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{className:"bg-dark text-white p-3 d-flex justify-content-center align-items-center",children:Object(x.jsx)("h1",{className:"",children:"CABINET VETERINAIRE AMBALAVAO"})}),Object(x.jsxs)("div",{className:"py-5 container",children:[Object(x.jsx)("div",{class:"d-flex justify-content-start",children:Object(x.jsx)("button",{class:"btn btn-primary btn-sm ",onClick:function(){return m.goBack()},children:"Revenir en arriere"})}),Object(x.jsxs)("div",{children:["credit-cva"==(null===(t=v[0])||void 0===t?void 0:t.type)&&Object(x.jsx)("div",{className:"bg-info my-3 py-2",children:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("h3",{className:"p-2",children:["Nom:",null===(n=v[0])||void 0===n?void 0:n.emprunter.name]}),Object(x.jsxs)("h5",{className:"p-2",children:["Contact:",null===(c=v[0])||void 0===c?void 0:c.emprunter.contact]})]})}),v.length>0&&Object(x.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(x.jsxs)("div",{className:"my-2",children:[Object(x.jsxs)("h2",{className:"my-2",children:["Date : ",fe(null===(a=v[0])||void 0===a?void 0:a.dateCom)]}),Object(x.jsx)(l.b,{to:"/vendeur-commande/".concat(null===(i=v[0])||void 0===i?void 0:i.id),className:"btn btn-warning btn-sm mr-2",children:"Editer le commande"})]}),Object(x.jsx)("div",{className:"d-flex justify-content-end",children:Object(x.jsxs)("div",{className:"bg-thead p-1 mb-1",children:[Object(x.jsx)("strong",{children:"Recette:"}),":",Object(x.jsx)("h3",{className:"text-lg",children:ge(Rs(null===(s=v[0])||void 0===s||null===(d=s.contenu)||void 0===d?void 0:d.map((function(e){return sa(e)?e.prixqttccvente*e.quantityParProduct*e.qttccpvente+e.prixlitre*e.qttbylitre:e.prixVente*e.quantityParProduct})))+Rs(null===(u=v[0])||void 0===u||null===(j=u.contenu)||void 0===j?void 0:j.map((function(e){return e.prixParCC*e.qttByCC}))))})]})})]}),Object(x.jsxs)("table",{className:"table table-bordered",children:[Object(x.jsxs)("tr",{className:"bg-thead",children:[Object(x.jsx)("td",{children:"Nom de l'article"}),Object(x.jsx)("td",{children:"Quantit\xe9"}),Object(x.jsx)("td",{children:"Sous total"})]}),v.length>0&&(null===(b=v[0])||void 0===b?void 0:b.contenu.map((function(e){return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{style:{width:"40%"},children:e.name}),Object(x.jsxs)(x.Fragment,{children:[sa(e)&&Object(x.jsx)(x.Fragment,{children:0!=e.qttbylitre&&Object(x.jsxs)("div",{className:"d-flex align-items-center py-0 px-2",children:[Object(x.jsx)("strong",{children:"Litre :"}),ge(e.prixlitre)," (","x"," ",e.qttbylitre,")"," "," = ",ge(e.prixlitre*e.qttbylitre)]})}),0!=e.quantityParProduct&&Object(x.jsxs)("div",{className:"d-flex align-items-center py-0",children:[Object(x.jsxs)("strong",{className:"text-lowercase",children:[e.type,":"]}),ge(e.prixVente)," (","x"," ",e.quantityParProduct,") "," = ",ge(e.prixVente*e.quantityParProduct)]})]}),"FLACON"==e.type&&Object(x.jsx)(x.Fragment,{children:0!=e.qttByCC&&Object(x.jsxs)("div",{className:"d-flex align-items-center  py-0",children:[Object(x.jsx)("strong",{children:"ml:"})," ",ge(e.prixParCC)," ","x"," ",0!=e.qttyspecificmirror?e.qttyspecificmirror+" Dose":e.qttByCC+" ml"," "," = "," ",ge(e.prixParCC*e.qttByCC)]})}),Object(x.jsx)("td",{children:sa(e)?ge(e.prixqttccvente*e.quantityParProduct*e.qttccpvente+e.prixlitre*e.qttbylitre+e.prixParCC*e.qttByCC):ge(e.prixVente*e.quantityParProduct+e.prixParCC*e.qttByCC)})]})})))]})]})," "]})," "]})})),Ds=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0};var Ms=Object(o.j)((function(e){Object(o.g)();var t,n,c,a,i,s,d,u,j,b,m=Object(o.i)().id,O=Object(ie.d)(vn("commandes").value),v=Object(ie.c)();return Object(r.useEffect)((function(){v(xn("commandes").get(m))}),[m]),Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Detail de vente du magasin",children:Object(x.jsx)(je,{title:"Detail de vente du magasin"})}),Object(x.jsxs)(xe,{children:[Object(x.jsxs)("div",{className:"py-5 container",children:[Object(x.jsxs)("div",{children:["credit-cva"==(null===(t=O[0])||void 0===t?void 0:t.type)&&Object(x.jsx)("div",{className:"bg-info my-3 py-2",children:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("h3",{className:"p-2",children:["Nom:",null===(n=O[0])||void 0===n?void 0:n.emprunter.name]}),Object(x.jsxs)("h5",{className:"p-2",children:["Contact:",null===(c=O[0])||void 0===c?void 0:c.emprunter.contact]})]})}),O.length>0&&Object(x.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(x.jsxs)("div",{className:"my-2",children:[Object(x.jsxs)("h2",{className:"my-2",children:["Date : ",fe(null===(a=O[0])||void 0===a?void 0:a.dateCom)]}),Object(x.jsx)(l.b,{to:"/vendeur-admin-commande/".concat(null===(i=O[0])||void 0===i?void 0:i.id),className:"btn btn-warning btn-sm mr-2",children:"Editer le commande"})]}),Object(x.jsx)("div",{className:"d-flex justify-content-end",children:Object(x.jsxs)("div",{className:"bg-thead p-1 mb-1",children:[Object(x.jsx)("strong",{children:"Recette:"}),":",Object(x.jsx)("h3",{className:"text-lg",children:ge(Ds(null===(s=O[0])||void 0===s||null===(d=s.contenu)||void 0===d?void 0:d.map((function(e){return sa(e)?e.prixqttccvente*e.quantityParProduct*e.qttccpvente+e.prixlitre*e.qttbylitre:e.prixVente*e.quantityParProduct})))+Ds(null===(u=O[0])||void 0===u||null===(j=u.contenu)||void 0===j?void 0:j.map((function(e){return e.prixParCC*e.qttByCC}))))})]})})]}),Object(x.jsxs)("table",{className:"table table-bordered",children:[Object(x.jsxs)("tr",{className:"bg-thead",children:[Object(x.jsx)("td",{children:"Nom de l'article"}),Object(x.jsx)("td",{children:"Quantit\xe9"}),Object(x.jsx)("td",{children:"Sous total"})]}),O.length>0&&(null===(b=O[0])||void 0===b?void 0:b.contenu.map((function(e){return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{style:{width:"40%"},children:e.name}),Object(x.jsxs)(x.Fragment,{children:[sa(e)&&Object(x.jsx)(x.Fragment,{children:0!=e.qttbylitre&&Object(x.jsxs)("div",{className:"d-flex align-items-center py-0 px-2",children:[Object(x.jsx)("strong",{children:"Litre :"}),ge(e.prixlitre)," (","x"," ",e.qttbylitre,")"," "," = ",ge(e.prixlitre*e.qttbylitre)]})}),0!=e.quantityParProduct&&Object(x.jsxs)("div",{className:"d-flex align-items-center py-0",children:[Object(x.jsxs)("strong",{className:"text-lowercase",children:[e.type,":"]}),ge(e.prixVente)," (","x"," ",e.quantityParProduct,") "," = ",ge(e.prixVente*e.quantityParProduct)]})]}),"FLACON"==e.type&&Object(x.jsx)(x.Fragment,{children:0!=e.qttByCC&&Object(x.jsxs)("div",{className:"d-flex align-items-center  py-0",children:[Object(x.jsx)("strong",{children:"ml:"})," ",ge(e.prixParCC)," ","x"," ",0!=e.qttyspecificmirror?e.qttyspecificmirror+" Dose":e.qttByCC+" ml"," "," = "," ",ge(e.prixParCC*e.qttByCC)]})}),Object(x.jsx)("td",{children:sa(e)?ge(e.prixqttccvente*e.quantityParProduct*e.qttccpvente+e.prixVente*e.qttbylitre+e.prixParCC*e.qttByCC):ge(e.prixVente*e.quantityParProduct+e.prixParCC*e.qttByCC)})]})})))]})]})," "]})," "]})]})})),Bs=(c(513),c(1044));c(1059),c(1045),c(1060),c(1049),c(504),c(1004),c(505);c(158);c(1046);var Ts=["isAuth","role","component"],ks=function(e){e.isAuth,e.role;var t=e.component,n=Object(pe.a)(e,Ts);return Fi(),Object(x.jsx)(o.b,Object(Se.a)(Object(Se.a)({},n),{},{component:function(e){return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(ne,{title:"CBV AMBALAVAO",children:Object(x.jsx)(t,Object(Se.a)({},e))})})}}))};ks.defaultProps={isAuth:!1,role:Qr};var _s=Object(ie.b)((function(e){var t,n=e.auth;return{isAuth:null===n||void 0===n?void 0:n.isLoggedIn,role:(null===n||void 0===n||null===(t=n.user)||void 0===t?void 0:t.role)||""}}))(ks),Is=function(e){var t=e.product,n=e.index,c=e.state,r=e.setState,a=(Object(ie.c)(),function(e){!function(e,t,n){var a=Object(ce.a)(c);a[e]=Object(Se.a)(Object(Se.a)({},a[e]),{},Object(Ge.a)({},t,n)),r(a)}(n,"quantityParProduct",e)});return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Cc.c,{w:28,bg:"whitesmoke",onChange:function(e){a(Number(e))},min:0,defaultValue:t.quantityParProduct,step:1,children:[Object(x.jsx)(Cc.d,{}),Object(x.jsxs)(Cc.e,{children:[Object(x.jsx)(Cc.b,{}),Object(x.jsx)(Cc.a,{})]})]})})},Qs=function(e){var t=e.product,n=Object(ie.c)();return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"Remise : (en Ariary)"}),Object(x.jsxs)("td",{className:"d-flex",children:[" ",Object(x.jsxs)(Cc.c,{bg:"whitesmoke",onChange:function(e){!function(e){n(ta(t.id,e))}(Number(e))},min:0,defaultValue:t.remise,children:[Object(x.jsx)(Cc.d,{}),Object(x.jsxs)(Cc.e,{children:[Object(x.jsx)(Cc.b,{}),Object(x.jsx)(Cc.a,{})]})]})]})]})},Ls=function(e){var t=e.product,n=e.index,c=e.isItemOnApprov,r=(e.addToApprov,e.state),a=e.setState;Object(ie.c)(),!!c&&c(t.id);return Object(x.jsx)("div",{children:Object(x.jsxs)("div",{className:"d-flex justify-content-between align-items-start border   mb-2 p-2",children:[Object(x.jsx)("div",{style:{width:"65%"},children:Object(x.jsxs)("table",{border:"1",children:[Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"Nom de l'article : "}),Object(x.jsx)("td",{children:null===t||void 0===t?void 0:t.name})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"Prix unitaire:"}),Object(x.jsx)("td",{children:ge(t.prixFournisseur)})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"Montant HT:"}),Object(x.jsx)("td",{children:ge(t.prixFournisseur*t.quantityParProduct)})]}),Object(x.jsx)(Qs,{product:t})]})}),Object(x.jsx)("div",{className:"d-flex mt-3",children:Object(x.jsx)(Is,{product:t,index:n,state:r,setState:a})}),Object(x.jsx)("div",{children:Object(x.jsx)("button",{onClick:function(){return function(e){a(r.filter((function(t){return t.id!==e})))}(null===t||void 0===t?void 0:t.id)},className:"btn btn-danger btn-xs text-right",children:"X"})})]})})};var Hs=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0},Us=function(e,t){return Hs(e)*t/100},Ys=function(e,t){return Hs(e)-Us(e,t)},zs=function(e){var t=e.state,n=e.meta,c=e.setState,a=e.approv,i=e.disabled,s=Object(r.useState)(null===t||void 0===t?void 0:t.remise),d=Object(O.a)(s,2),l=d[0],u=d[1],j=Object(r.useState)(null===t||void 0===t?void 0:t.dateEcheance),b=Object(O.a)(j,2),m=b[0],v=b[1],h=Object(r.useState)(null===t||void 0===t?void 0:t.dateApprov),p=Object(O.a)(h,2),f=p[0],g=p[1],N=Object(r.useState)(null===a||void 0===a?void 0:a.contenu),C=Object(O.a)(N,2),y=C[0],q=(C[1],Object(r.useState)(null===t||void 0===t?void 0:t.remarque)),A=Object(O.a)(q,2),S=A[0],E=A[1],w=Object(r.useState)(""),P=Object(O.a)(w,2),V=(P[0],P[1],Object(r.useState)(null===t||void 0===t?void 0:t.typePaye)),R=Object(O.a)(V,2),F=R[0],D=R[1],M=Object(ie.c)(),T=Object(o.g)();function k(e){var t,n,c;for(c in t=Array.isArray(e)?[]:{},e)n=e[c],t[c]="object"===typeof n?k(n):n;return t}return Object(x.jsxs)(x.Fragment,{children:[" ",Object(x.jsxs)(Bc.a,{children:[Object(x.jsx)(Bc.a.Header,{className:"d-flex justify-content-between align-items-center bg-dark text-white",children:Object(x.jsxs)("div",{children:["Approvisionenement ("," ".concat(null===t||void 0===t?void 0:t.length," ").concat((null===t||void 0===t?void 0:t.length)>1?"articles":"article"),")"]})}),Object(x.jsxs)(Bc.a.Body,{style:{height:"500px",maxHeight:"500px",overflowY:"auto",overflowX:"hidden"},children:[Object(x.jsxs)("div",{class:"form-group",children:[Object(x.jsx)("label",{children:"Date de l'approvisionnement :"}),Object(x.jsx)("div",{children:Object(x.jsx)("input",{type:"date",disabled:i,onChange:function(e){return g(e.target.value)},value:f,className:"form-control"})})]}),!n.isFetching&&(null===t||void 0===t?void 0:t.length)<=0&&Object(x.jsxs)(x.Fragment,{children:[" ",Object(x.jsx)("div",{class:"alert alert-success ",children:"Aucune enregistrement trouv\xe9 !!!"})]}),n.isFetching&&Object(x.jsx)("p",{children:"Chargement en cours ..."}),null===t||void 0===t?void 0:t.map((function(e,n){return Object(x.jsx)(Ls,{product:e,state:t,index:n,setState:c,dispatch:M},"".concat(null===e||void 0===e?void 0:e.id,"_").concat(n))})),(null===t||void 0===t?void 0:t.length)>0&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"d-flex justify-content-end align-items-center my-3 ",children:Object(x.jsxs)("table",{children:[Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"REMISE :"}),Object(x.jsx)("td",{children:Object(x.jsx)("input",{type:"number",className:"form-control",placeholder:"Remise",min:0,disabled:i,value:l,onChange:function(e){u(e.target.value)}})})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"PAIEMENT LE :"}),Object(x.jsx)("td",{children:Object(x.jsx)("input",{type:"date",disabled:i,onChange:function(e){return v(e.target.value)},value:m,className:"form-control"})})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"TYPE DE PAIEMENT:"}),Object(x.jsx)("td",{children:Object(x.jsxs)("select",{className:"form-control",onChange:function(e){D(e.target.value)},children:[Object(x.jsx)("option",{value:"espece",selected:!0,children:"ESPECE"}),Object(x.jsx)("option",{value:"boa",children:"CHEQUE - BOA"}),Object(x.jsx)("option",{value:"bni",children:"CHEQUE - BNI"}),Object(x.jsx)("option",{value:"MVola",children:"VIREMENT - MVola"}),Object(x.jsx)("option",{value:"OrangeMoney",children:"VIREMENT - ORANGE MONEY"})]})})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"REMARQUE :"}),Object(x.jsx)("td",{children:Object(x.jsx)("textarea",{disabled:i,className:"form-control",onChange:function(e){E(e.target.value)},placeholder:"Ecriver ici quelque chose d'autre \xe0 savoir sur l'approvisionnement",children:S})})]})]})}),Object(x.jsxs)("div",{className:"d-flex flex-column  my-3 ",children:[" ",Object(x.jsxs)("p",{className:"approvisionnement-total-amount",children:["Total HT:",Object(x.jsx)("strong",{children:Object(x.jsx)(Mc.a,{value:Hs(null===t||void 0===t?void 0:t.map((function(e){return e.prixFournisseur*e.quantityParProduct}))),displayType:"text",thousandSeparator:!0,suffix:"Ar",renderText:function(e,t){return Object(x.jsx)("div",Object(Se.a)(Object(Se.a)({},t),{},{children:e}))}})})]}),Object(x.jsxs)("p",{className:"approvisionnement-total-amount",children:["Remise:",Object(x.jsx)("strong",{children:Object(x.jsx)(Mc.a,{value:Us(null===t||void 0===t?void 0:t.map((function(e){return e.prixFournisseur*e.quantityParProduct})),l),displayType:"text",thousandSeparator:!0,suffix:"Ar",renderText:function(e,t){return Object(x.jsx)("div",Object(Se.a)(Object(Se.a)({},t),{},{children:e}))}})})]}),Object(x.jsxs)("p",{className:"approvisionnement-total-amount",children:["Total avec remise :",Object(x.jsx)("strong",{children:Object(x.jsx)(Mc.a,{value:Ys(null===t||void 0===t?void 0:t.map((function(e){return e.prixFournisseur*e.quantityParProduct})),l),displayType:"text",thousandSeparator:!0,suffix:"Ar",renderText:function(e,t){return Object(x.jsx)("div",Object(Se.a)(Object(Se.a)({},t),{},{children:e}))}})})]}),Object(x.jsx)("p",{children:"Arr\xeat\xe9 \xe0 la somme de "}),Object(x.jsx)("p",{className:"text-uppercase",children:Object(x.jsxs)("strong",{children:[Object(Dc.NumberToLetter)(Ys(null===t||void 0===t?void 0:t.map((function(e){return e.prixFournisseur*e.quantityParProduct})),l))," ","ARIARY"]})})]})]})]}),Object(x.jsx)(Bc.a.Footer,{children:Object(x.jsxs)("div",{className:"d-flex justify-content-end",children:[Object(x.jsx)("button",{disabled:i,className:"btn btn-green btn-sm mr-2",onClick:function(){var e=function(){var e=k(y).filter((function(e){return!t.find((function(t){return e.id===t.id}))})),n=k(y).filter((function(e){return!t.find((function(t){return e.id===t.id}))}));return{exist:k(y).map((function(e){return t.find((function(t){return t.id==e.id}))})).filter((function(e){return null!=e})),added:n,missing:e}}(),n=e.exist,c=e.added,r=e.missing;M(xn("approvis").updateTransaction({id:null===a||void 0===a?void 0:a.id,contenu:t,totalht:Hs(t.map((function(e){return e.prixFournisseur*e.quantityParProduct-e.remise}))),remise:l,total:Ys(t.map((function(e){return e.prixFournisseur*e.quantityParProduct-e.remise})),l),dateApprov:f,dateEcheance:m,remarque:S,typePaye:F,exist:n,missing:r,added:c},"update-facture")),T.push(B)},type:"button",children:"Valider l'operation"}),Object(x.jsx)("button",{disabled:i,className:"btn btn-danger btn-sm",onClick:function(){return c(null===a||void 0===a?void 0:a.contenu)},type:"button",children:Object(x.jsx)("span",{children:"Annuler"})})]})})]})]})},Ks=function(e){var t,n=e.product,c=e.state,r=e.setState,a=(Object(ie.d)((function(e){return e.approvisionnements})),Object(ie.c)(),!!(null===c||void 0===c?void 0:c.find((function(e){return(null===e||void 0===e?void 0:e.id)===n.id}))));return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(zc.a.Item,{children:Object(x.jsxs)(Kc.a,{className:"product-card m-2 ".concat(n.id?"":"product-loading"),style:{border:n&&a?"1px solid #a6a5a5":"",boxShadow:n&&a?"0 10px 15px rgba(0, 0, 0, .07)":"none"},children:[Object(x.jsx)(Gc.a,{xs:9,children:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("p",{children:null===n||void 0===n?void 0:n.name}),Object(x.jsx)("div",{class:"badge badge-primary",children:null===n||void 0===n||null===(t=n.fournisseur)||void 0===t?void 0:t.name}),Object(x.jsx)("p",{children:Object(x.jsxs)("strong",{children:[" ",ge(null===n||void 0===n?void 0:n.prixFournisseur)]})})]})}),Object(x.jsx)(Gc.a,{xs:3,children:(null===n||void 0===n?void 0:n.id)&&Object(x.jsx)(x.Fragment,{children:a?Object(x.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(){return function(e){r(c.filter((function(t){return t.id!==e})))}(null===n||void 0===n?void 0:n.id)},children:"Retirer"}):Object(x.jsx)("button",{className:"btn btn-green btn-sm",onClick:function(){r(c.some((function(e){return e.id===n.id}))?c:[n].concat(Object(ce.a)(c)))},children:"Ajouter"})})})]})})})},Gs=function(){var e=Object(o.i)().id,t=Object(r.useState)(!1),n=Object(O.a)(t,2),c=n[0],i=n[1],s=Object(ie.c)(),d=Object(ie.d)(vn("approvis").value),l=Object(ie.d)(vn("approvis").meta),u=Object(ie.d)(vn("products").value),j=Object(ie.d)(vn("products").meta),b=Object(r.useState)([]),m=Object(O.a)(b,2),v=m[0],h=m[1];a.a.useEffect((function(){s(xn("approvis").get(e))}),[e]);var p=Object(r.useState)(""),f=Object(O.a)(p,2),g=f[0],N=f[1],C=Object(r.useState)([]),y=Object(O.a)(C,2),q=y[0],A=y[1];Object(r.useEffect)((function(){return 1==c&&(s(xn("products").fetch()),i(!1)),function(){i(!1)}}),[c]);var S=Object(r.useState)(),E=Object(O.a)(S,2),w=E[0],P=E[1];return Object(r.useEffect)((function(){h(null!=w?xa(u,g,w):lr(u,g))}),[g]),Object(r.useEffect)((function(){h(""!=g?xa(u,g,w):ba(u,w))}),[w]),Object(r.useEffect)((function(){s(xn("products").fetch())}),[]),a.a.useEffect((function(){var e;l.isFetching||A(null===(e=d[0])||void 0===e?void 0:e.contenu)}),[l]),Object(r.useEffect)((function(){j.isFetching||h(u)}),[j]),console.log(e),Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Edition de facture",children:Object(x.jsx)(je,{title:"Edition de facture"})}),Object(x.jsx)(xe,{children:Object(x.jsx)(ir.a,{children:Object(x.jsxs)(Kc.a,{children:[Object(x.jsx)(Gc.a,{xs:5,children:Object(x.jsx)(zc.a,{children:Object(x.jsxs)(Bc.a,{children:[Object(x.jsx)(Bc.a.Header,{className:"d-flex justify-content-between align-items-center bg-dark text-white",children:"Produits"}),Object(x.jsxs)(Bc.a.Body,{children:[Object(x.jsx)("input",{type:"text",onChange:function(e){N(e.target.value)},placeholder:"Rechercher un produit",className:"form-control mb-2"}),Object(x.jsx)(Ra,{model:"fournisseurs",children:Object(x.jsx)(Fa,{children:function(e){var t=e.data;e.meta;return Object(x.jsx)("div",{className:"my-2",children:Object(x.jsxs)("select",{className:"form-control",selected:2==w,onChange:function(e){P(e.target.value)},children:[Object(x.jsx)("option",{value:"",children:"Selectionner un fournisseur"}),t.map((function(e){return Object(x.jsx)("option",{value:e.id,children:e.name})}))]})})}})}),Object(x.jsxs)("div",{style:{overflowY:"auto",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(x.jsxs)(x.Fragment,{children:[v.map((function(e){return Object(x.jsx)(Ks,{state:q,setState:A,product:e})})),0==v.length&&"Aucune enregistrement trouv\xe9"]})," "]})]})]})})}),Object(x.jsx)(Gc.a,{xs:7,children:Object(x.jsx)(zs,{disabled:1==j.isFetching,state:q,meta:l,setState:A,products:u,approv:d[0]})})]})})})]})},Ws=function(e){var t,n=e.key,c=e.product,a=Object(ie.d)((function(e){return e.fromdepots})),i=Object(ie.c)(),s=li(a,i),d=s.isItemFromDepot,l=s.addFromDepot,o=!!d&&d(c.id);Object(r.useEffect)((function(){o||(c.qttByCC=0,c.quantityParProduct=0)}),[o]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(zc.a.Item,{style:{width:"100%"},children:Object(x.jsxs)(Kc.a,{className:" ".concat(c.id?"":"product-loading"),style:{boxShadow:c&&o?"15px 10px 15px rgba(0, 0, 0, .07)":"none"},children:[Object(x.jsx)(Gc.a,{xs:9,children:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("p",{children:null===c||void 0===c?void 0:c.name}),Object(x.jsx)("div",{class:"badge badge-primary",children:null===c||void 0===c||null===(t=c.fournisseur)||void 0===t?void 0:t.name})]})}),Object(x.jsx)(Gc.a,{xs:3,children:(null===c||void 0===c?void 0:c.id)&&Object(x.jsx)("button",{disabled:0===c.quantityBrute,className:"mt-3 ".concat(o?"btn btn-danger btn-sm":"btn btn-green btn-sm"),onClick:function(){l&&l(c)},children:o?"Retirer":"Ajouter"})})]})},n)})},Xs=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0},Js=function(e){e.setRegenerate;var t=Object(r.useState)("vente-depot"),n=Object(O.a)(t,2),c=n[0],a=n[1],i=Object(r.useState)(1),s=Object(O.a)(i,2),d=(s[0],s[1],Object(r.useState)(null)),l=Object(O.a)(d,2),u=l[0],j=l[1],b=Object(r.useState)(null),m=Object(O.a)(b,2),v=m[0],h=m[1],p=Object(o.g)(),f=Object(ie.d)((function(e){return{fromdepots:e.fromdepots}})).fromdepots,g=Object(ie.c)(),N=Object(ie.d)(vn("emprunters").value),C=Object(ie.d)(vn("vaccinateurs").value),y=(Object(ie.d)(vn("commandes").meta),Object(ie.d)(vn("commandes").value),new Date),q=Object(r.useState)(y),E=Object(O.a)(q,2),w=E[0],P=E[1];Object(r.useEffect)((function(){g(Ya()),g(xn("commandes").fetch()),g(xn("emprunters").fetch()),g(xn("vaccinateurs").fetch())}),[]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(Bc.a,{children:[Object(x.jsxs)(Bc.a.Header,{className:" bg-dark py-2 text-white d-flex justify-content-between align-items-center",children:[Object(x.jsx)("div",{style:{width:"60%"},children:"BON DE SORTIE "}),Object(x.jsx)("div",{style:{width:"30%"},className:"text-right",children:Object(x.jsxs)(Ln.a,{onChange:function(e){a(e.target.value)},children:[Object(x.jsx)("option",{value:"vente-depot",selected:!0,children:"Comptant"}),Object(x.jsx)("option",{value:"vente-depot-credit",children:"Credit"}),Object(x.jsx)("option",{value:"vente-depot-vaccinateur",children:"Vaccinateur"})]})})]}),Object(x.jsxs)("div",{className:"commande-vente",children:[Object(x.jsx)(Bc.a.Body,{style:{padding:12,marginTop:3,marginRight:2,marginLeft:2},children:Object(x.jsxs)("div",{style:{overflowY:"auto",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(x.jsxs)("div",{class:"form-group",children:[Object(x.jsx)("label",{children:"Date de sortie :"}),Object(x.jsx)("div",{children:Object(x.jsx)("input",{type:"date",onChange:function(e){return P(e.target.value)},value:w,className:"form-control"})})]}),"vente-depot-credit"===c&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("label",{children:"Nom du persone:"}),Object(x.jsxs)("select",{className:"form-control mb-2",onChange:function(e){h(e.target.value)},children:[Object(x.jsx)("option",{children:"Selectionner une personne"}),N.map((function(e){return Object(x.jsx)("option",{value:e.id,children:e.name})}))]})]}),"vente-depot-vaccinateur"===c&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("label",{children:"Nom du vaccinateur:"}),Object(x.jsxs)("select",{className:"form-control mb-2",onChange:function(e){j(e.target.value)},children:[Object(x.jsx)("option",{children:"Selectionner un vaccinateur"}),C.map((function(e){return Object(x.jsx)("option",{value:e.id,children:e.name})}))]})]}),(null===f||void 0===f?void 0:f.length)<=0&&Object(x.jsx)("div",{className:"alert alert-success",children:'Choississez un produit sur la section "Produits" puis cliquez sur "Ajouter"'}),null===f||void 0===f?void 0:f.map((function(e,t){return Object(x.jsx)(oi,{product:e,basket:f,dispatch:g},"".concat(null===e||void 0===e?void 0:e.id,"_").concat(t))}))]})}),(null===f||void 0===f?void 0:f.length)>0&&Object(x.jsxs)(Bc.a.Footer,{className:"d-flex align-items-center justify-content-between",children:[Object(x.jsx)("div",{style:{width:"30%"},children:Object(x.jsx)("h2",{className:"p-2 text-uppercase bg-primary",children:Object(x.jsxs)("strong",{"data-test-id":"total-price-orders",children:["Total:",ge(Xs(f.map((function(e){return gi(e)?e.prixlitre*e.quantityParProductDepot:e.prixVente*e.quantityParProductDepot})))+Xs(f.map((function(e){return e.prixParCC*e.qttByCCDepot}))))]})})}),Object(x.jsx)("div",{style:{width:"70%"},children:f.length>0&&Object(x.jsxs)("div",{className:"d-flex text-right align-items-end justify-content-end",children:[Object(x.jsx)("button",{className:"btn btn-green btn-sm mr-2",disabled:0===f.length,onClick:function(){if(null!=w&&""!=w){for(var e=0;e<f.length;++e)if(0==f[e].quantityParProductDepot)return void alert("Commande non conforme:"+f[e].name+" : 0");f.forEach((function(e){var t;delete e.busy,delete e.pendingCreate,ui(t=e)?t.quantityBrute-=t.quantityParProductDepot:ji(t)&&(t.quantityBrute=0),0!=e.condmldepot&&0!=e.qttccpventedepot?function(e){hi(e)}(e):vi(e)})),g(xn("commandes").createTransaction({id:Math.floor(Date.now()/1e3),contenu:f,type:c,sorte:"sortie",vaccinateurId:u,status:"vente-depot"===c,emprunterId:v,dateCom:null!=w||""!=w?w:y},"add-from-depot")),g(Ya()),"vente-depot-credit"===c?p.push(A):"vente-depot-vaccinateur"===c?p.push(S):p.push(F)}else alert("Vous avez oubli\xe9 de mettre la date de l'operation !!!")},type:"button",children:"Valider l'operation"}),Object(x.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(){f.forEach((function(e){e.quantityParProductDepot=0,e.qttByCCDepot=0})),g(Ya())},type:"button",children:Object(x.jsx)("span",{children:"Annuler"})})]})})]})]})]})})},Zs=function(){var e=Object(ie.d)(vn("products").value),t=Object(ie.d)(vn("products").meta),n=Object(ie.c)(),c=Object(r.useState)(""),a=Object(O.a)(c,2),i=a[0],s=a[1],d=Object(r.useState)(2),l=Object(O.a)(d,2),o=(l[0],l[1],Object(r.useState)(!1)),u=Object(O.a)(o,2),j=u[0],b=u[1],m=(Object(r.useRef)(null),Object(r.useRef)(null),Object(r.useState)([])),v=Object(O.a)(m,2),h=v[0],p=v[1],f=(Object(ie.d)(vn("commandes").value),Object(ie.d)(vn("commandes").meta),Object(r.useState)(new Date)),g=Object(O.a)(f,2),N=g[0],C=g[1],y=Object(r.useState)(new Date),q=Object(O.a)(y,2),A=q[0],S=q[1];Object(r.useEffect)((function(){n(pn(N,A))}),[N,A]),Object(r.useEffect)((function(){C(new Date),S(new Date),n(xn("products").fetch())}),[]),Object(r.useEffect)((function(){return 1==j&&(n(xn("products").fetch()),b(!1)),function(){b(!1)}}),[j]),Object(r.useEffect)((function(){t.isFetching||p(e)}),[t]),Object(r.useEffect)((function(){p(lr(e,i))}),[i]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(ir.a,{fluid:!0,children:Object(x.jsx)("div",{className:"py-2",children:Object(x.jsxs)(Kc.a,{children:[Object(x.jsx)(Gc.a,{xs:6,children:Object(x.jsxs)(Bc.a,{className:"mt-2",children:[Object(x.jsxs)(Bc.a.Header,{className:"bg-dark p-2 text-white d-flex text-uppercase justify-content-between align-items-center",children:[Object(x.jsx)("div",{style:{width:"80%"},children:"Produits"}),Object(x.jsx)("div",{children:Object(x.jsx)("button",{className:"btn btn-green btn-sm",onClick:function(){s(""),b(!0)},children:"Mettre \xe0 jour"})})]}),Object(x.jsxs)(Bc.a.Body,{children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("input",{type:"text",onChange:function(e){s(e.target.value)},placeholder:"Nom du produit",className:"form-control mb-2"})," "]}),Object(x.jsx)(zc.a,{children:Object(x.jsxs)("div",{style:{overflowY:"auto",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(x.jsxs)("div",{class:"d-flex justify-content-start flex-wrap",children:[h.map((function(e){return Object(x.jsx)(Ws,{product:e})})),0==h.length&&"Aucune enregistrement trouv\xe9"]})," "]})})]})]})}),Object(x.jsx)(Gc.a,{xs:6,children:Object(x.jsx)("div",{className:" py-2",children:Object(x.jsx)(Js,{setRegenerate:b})})})]})})})})},$s=function(){return Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Bon de sortie du d\xe9pot",children:Object(x.jsx)(je,{title:"Bon de sortie du d\xe9pot"})}),Object(x.jsxs)(xe,{children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("button",{disabled:!0,className:"btn btn-green btn-xs ml-3 mb-2",children:"Ajouter"})," ",": ",Object(x.jsx)("span",{children:"Le produit n'a pas de stock disponible"}),Object(x.jsx)("button",{className:"btn btn-green btn-xs ml-3 mb-2",children:"Mettre \xe0 jour"})," ",": ",Object(x.jsx)("span",{children:"Mettre \xe0 jour la liste des produits"})]}),Object(x.jsx)("select",{disabled:!0,className:"  ml-3 bg-white py-2 input-xs",children:Object(x.jsx)("option",{children:"Comptant"})})," ",": ",Object(x.jsx)("span",{children:"Choix du mode sortie ( Comptant,credit,vaccinateur)"}),Object(x.jsx)(Zs,{})]})]})},ed=function(e){var t=e.flat,n=(e.gr,e.id),c=t.filter((function(e){return e.id==n})),r=(void 0!=c[c.length-1]&&c[c.length-1],0);return r=c?c.map((function(e){return 1*e.quantityParProduct})).reduce((function(e,t){return e+t}),0):0,Object(x.jsx)("td",{className:"text-center p-1",children:0!=r?r:"-"})},td=function(){return Object(x.jsx)("td",{className:"text-center p-1",children:Object(x.jsx)("div",{children:Object(x.jsx)("span",{className:"text-center  p-1",children:"-"})})})},nd=function(e){var t=e.flat,n=(e.gr,e.id),c=t.filter((function(e){return e.id==n})),r=void 0!=c[c.length-1]?c[c.length-1]:{},a={bruteCva:r.hasOwnProperty("id")?r.quantityBrute:0,ccCva:r.hasOwnProperty("id")?r.quantityCC:0};return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("td",{className:"text-center",children:0!=c.length?a.bruteCva:0})})};function cd(e){return e[e.length-1]}var rd=function(){var e=ae()().isoWeekday(1).startOf("week"),t=ae()().endOf("week"),n=Object(r.useState)([]),c=Object(O.a)(n,2),a=c[0],i=c[1],s=Object(r.useState)([]),d=Object(O.a)(s,2),l=(d[0],d[1]),o=Object(r.useState)(e),u=Object(O.a)(o,2),j=u[0],b=u[1],m=Object(r.useState)(t),v=Object(O.a)(m,2),h=v[0],p=v[1],f=Object(r.useState)([e,t]),g=Object(O.a)(f,2),N=g[0],C=g[1],y=Object(r.useState)([]),q=Object(O.a)(y,2),A=q[0],S=q[1],E=Object(r.useState)([]),w=Object(O.a)(E,2),P=(w[0],w[1],Object(ie.d)(vn("approvis").value)),V=Object(ie.d)(vn("approvis").meta),R=Object(ie.c)();Object(r.useEffect)((function(){null!==N?(N[0]&&b(N[0]),N[0]&&p(N[1])):(b(e),p(t))}),[N]),Object(r.useEffect)((function(){var e;j&&h&&(i(function(e,t){for(var n=e.clone(),c=[];n.isSameOrBefore(t);)c.push(n.format("YYYY-MM-DD")),n.add(1,"days");return c}(ae()(j),ae()(h))),l(function(e,t){for(var n=[];t.diff(e,"months")>=0;)n.push(e.format("MMMM YYYY")),e.add(1,"month");return n}(ae()(j),ae()(h))),R((e=h,sn("approvis",{path:"/get-approv-by-date?deb=".concat(j,"&fin=").concat(e),replace:!0}))))}),[j,h]),Object(r.useEffect)((function(){V.isFetching||S(qe(P,"dateApprov",j,h))}),[V]);var F,D,M=Ae(A,"contenu").reduce((function(e,t){var n=t.id,c=t.name,r=t.type,a=t.category,i=t.fournisseur,s=t.quantityBrute,d=t.quantityCC,l=t.quantityParProduct,o=e.find((function(e){return e.id===n}));return o?o.quantityParProduct=parseInt(o.quantityParProduct)+parseInt(l):e.push({id:n,name:c,type:r,category:a,fournisseur:i,quantityBrute:s,quantityCC:d,quantityParProduct:l}),e}),[]).sort((function(e,t){return e.id>t.id})),B=function(e,t){var n;return Object(ce.a)(new Set((n=[]).concat.apply(n,Object(ce.a)(e.map((function(e){return e[t]}))))))},T=(F="dateApprov",A.reduce((function(e,t){return D?(e[t[F][D]]=e[t[F][D]]||[]).push(t):(e[t[F]]=e[t[F]]||[]).push(t),e}),{}));return Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Journal de facturation",children:Object(x.jsx)(je,{title:"Journal de facturation"})}),Object(x.jsxs)(xe,{children:[Object(x.jsx)(fn,{}),Object(x.jsxs)("div",{className:"date-range",children:[Object(x.jsxs)("div",{className:"d-flex justify-content-between my-3",children:[Object(x.jsxs)("div",{children:[j&&h&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("h2",{class:"text-uppercase my-1",children:"Journal de facturation "}),Object(x.jsxs)("span",{children:["Du: ",fe(j)," Au ",fe(h)]})]})," "]}),Object(x.jsx)("div",{children:Object(x.jsx)(ur.a,{locale:"fr-FR",onChange:C,value:N})})]}),Object(x.jsx)("div",{className:"bg-white py-3 px-2 mb-2",children:Object(x.jsx)("div",{className:"table-responsive",children:Object(x.jsxs)("table",{class:"table",children:[Object(x.jsxs)("tr",{className:"sticky-this",children:[Object(x.jsx)("td",{children:"Produit"}),a.map((function(e){return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(ye,{date:e})})})),Object(x.jsx)("td",{className:"bg-thead text-uppercase text-center",children:"Total"}),Object(x.jsx)("td",{className:"bg-thead text-uppercase text-center",children:"Stock"})]}),M.map((function(e){return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("tr",{class:"bg-white",children:[Object(x.jsx)("td",{className:"bg-thead",children:e.name}),a.map((function(t){return Object(x.jsx)(x.Fragment,{children:void 0!=T[t]?Object(x.jsx)(ed,{flat:B(T[t],"contenu"),gr:t,id:e.id}):Object(x.jsx)(td,{})})})),Object(x.jsx)("td",{className:"text-center",children:e.quantityParProduct}),Object(x.jsx)(nd,{flat:B(T[cd(Object.keys(T))],"contenu"),gr:cd(Object.keys(T)),id:e.id})]})})})),0==M.length&&Object(x.jsx)("tr",{children:Object(x.jsx)("td",{className:"text-center",colSpan:a.length+3,children:"Aucune enregistrement trouv\xe9"})})]})})})," "]})]})]})},ad=function(){return Object(x.jsx)("td",{className:"text-center p-1",children:Object(x.jsx)("div",{children:Object(x.jsx)("span",{className:"text-center  p-1",children:"-"})})})},id=function(e){var t=e.flat,n=(e.gr,e.id),c=t.filter((function(e){return e.id==n})),r=(void 0!=c[c.length-1]&&c[c.length-1],0);return r=c?c.map((function(e){return 1*e.quantityParProductDepot})).reduce((function(e,t){return e+t}),0):0,Object(x.jsx)("td",{className:"text-center p-1",children:0!=r?r:"-"})},sd=function(e){var t=e.flat,n=(e.gr,e.id),c=t.filter((function(e){return e.id==n})),r=void 0!=c[c.length-1]?c[c.length-1]:{},a={bruteCva:r.hasOwnProperty("id")?r.quantityBrute:0,ccCva:r.hasOwnProperty("id")?r.quantityCC:0};return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("td",{className:"text-center",children:0!=c.length?a.bruteCva:0})})};function dd(e){return e[e.length-1]}var ld=function(){var e=ae()().isoWeekday(1).startOf("week"),t=ae()().endOf("week"),n=Object(r.useState)([]),c=Object(O.a)(n,2),a=c[0],i=c[1],s=Object(r.useState)([]),d=Object(O.a)(s,2),l=(d[0],d[1]),o=Object(r.useState)(e),u=Object(O.a)(o,2),j=u[0],b=u[1],m=Object(r.useState)(t),v=Object(O.a)(m,2),h=v[0],p=v[1],f=Object(r.useState)([e,t]),g=Object(O.a)(f,2),N=g[0],C=g[1],y=Object(r.useState)([]),q=Object(O.a)(y,2),A=q[0],S=q[1],E=Object(r.useState)([]),w=Object(O.a)(E,2),P=(w[0],w[1],Object(ie.d)(vn("commandes").value)),V=Object(ie.d)(vn("commandes").meta),R=Object(ie.c)();Object(r.useEffect)((function(){null!==N?(N[0]&&b(N[0]),N[0]&&p(N[1])):(b(e),p(t))}),[N]),Object(r.useEffect)((function(){j&&h&&(i(function(e,t){for(var n=e.clone(),c=[];n.isSameOrBefore(t);)c.push(n.format("YYYY-MM-DD")),n.add(1,"days");return c}(ae()(j),ae()(h))),l(function(e,t){for(var n=[];t.diff(e,"months")>=0;)n.push(e.format("MMMM YYYY")),e.add(1,"month");return n}(ae()(j),ae()(h))),R(hn("vente-depot",j,h)))}),[j,h]),Object(r.useEffect)((function(){V.isFetching||S(qe(P,"dateCom",j,h))}),[V]);var F,D,M=Ae(A,"contenu").reduce((function(e,t){var n=t.id,c=t.name,r=t.type,a=t.category,i=t.fournisseur,s=t.quantityParProductDepot,d=t.quantityBruteCVA,l=t.quantityCCCVA,o=(t.qttByCC,e.find((function(e){return e.id===n})));return o?o.quantityParProductDepot=parseInt(o.quantityParProductDepot)+parseInt(s):e.push({id:n,name:c,type:r,category:a,fournisseur:i,quantityBruteCVA:d,quantityCCCVA:l,quantityParProductDepot:s}),e}),[]).sort((function(e,t){return e.id>t.id})),B=function(e,t){var n;return Object(ce.a)(new Set((n=[]).concat.apply(n,Object(ce.a)(e.map((function(e){return e[t]}))))))},T=(F="dateCom",A.reduce((function(e,t){return D?(e[t[F][D]]=e[t[F][D]]||[]).push(t):(e[t[F]]=e[t[F]]||[]).push(t),e}),{}));return Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Journal de vente",children:Object(x.jsx)(je,{title:"Journal de vente"})}),Object(x.jsxs)(xe,{children:[Object(x.jsx)(fn,{}),Object(x.jsxs)("div",{className:"date-range",children:[Object(x.jsxs)("div",{className:"d-flex justify-content-between my-3",children:[Object(x.jsxs)("div",{children:[j&&h&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("h2",{class:"text-uppercase my-1",children:"Journal de vente"}),Object(x.jsxs)("span",{children:["Du: ",fe(j)," Au ",fe(h)]})]})," "]}),Object(x.jsx)("div",{children:Object(x.jsx)(ur.a,{locale:"fr-FR",onChange:C,value:N})})]}),Object(x.jsx)("div",{className:"table-responsive",children:Object(x.jsxs)("table",{class:"table",children:[Object(x.jsxs)("tr",{className:"sticky-this",children:[Object(x.jsx)("td",{children:"Produit"}),a.map((function(e){return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(ye,{date:e})})})),Object(x.jsx)("td",{className:"bg-thead text-uppercase text-center",children:"Total"}),Object(x.jsx)("td",{className:"bg-thead text-uppercase text-center",children:"Stock"})]}),M.map((function(e){return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("tr",{class:"bg-white",children:[Object(x.jsx)("td",{className:"bg-thead",children:e.name}),a.map((function(t){return Object(x.jsx)(x.Fragment,{children:void 0!=T[t]?Object(x.jsx)(id,{flat:B(T[t],"contenu"),gr:t,id:e.id}):Object(x.jsx)(ad,{})})})),Object(x.jsx)("td",{className:"text-center",children:e.quantityParProductDepot}),Object(x.jsx)(sd,{flat:B(T[dd(Object.keys(T))],"contenu"),gr:dd(Object.keys(T)),id:e.id})]})})})),0==M.length&&Object(x.jsx)("tr",{children:Object(x.jsx)("td",{className:"text-center",colSpan:a.length+3,children:"Aucune enregistrement trouv\xe9"})})]})})]})]})]})};function od(e){return e[e.length-1]}var ud=function(){var e=ae()().isoWeekday(1).startOf("week"),t=ae()().endOf("week"),n=Object(r.useState)([]),c=Object(O.a)(n,2),a=c[0],i=c[1],s=Object(r.useState)([]),d=Object(O.a)(s,2),l=(d[0],d[1]),o=Object(r.useState)(e),u=Object(O.a)(o,2),j=u[0],b=u[1],m=Object(r.useState)(t),v=Object(O.a)(m,2),h=v[0],p=v[1],f=Object(r.useState)([e,t]),g=Object(O.a)(f,2),N=g[0],C=g[1],y=Object(r.useState)([]),q=Object(O.a)(y,2),A=q[0],S=q[1],E=Object(r.useState)([]),w=Object(O.a)(E,2),P=(w[0],w[1],Object(ie.d)(vn("commandes").value)),V=Object(ie.d)(vn("commandes").meta),R=Object(ie.c)();Object(r.useEffect)((function(){null!==N?(N[0]&&b(N[0]),N[0]&&p(N[1])):(b(e),p(t))}),[N]),Object(r.useEffect)((function(){j&&h&&(i(function(e,t){for(var n=e.clone(),c=[];n.isSameOrBefore(t);)c.push(n.format("YYYY-MM-DD")),n.add(1,"days");return c}(ae()(j),ae()(h))),l(function(e,t){for(var n=[];t.diff(e,"months")>=0;)n.push(e.format("MMMM YYYY")),e.add(1,"month");return n}(ae()(j),ae()(h))),R(hn("cva",j,h)))}),[j,h]),Object(r.useEffect)((function(){V.isFetching||S(qe(P,"dateCom",j,h))}),[V]);var F,D,M=Ae(A,"contenu").reduce((function(e,t){var n=t.id,c=t.name,r=t.type,a=t.category,i=t.fournisseur,s=t.quantityBrute,d=t.quantityCC,l=t.quantityParProduct,o=e.find((function(e){return e.id===n}));return o?o.quantityParProduct=parseInt(o.quantityParProduct)+parseInt(l):e.push({id:n,name:c,type:r,category:a,fournisseur:i,quantityBrute:s,quantityCC:d,quantityParProduct:l}),e}),[]).sort((function(e,t){return e.id>t.id})),B=function(e,t){var n;return Object(ce.a)(new Set((n=[]).concat.apply(n,Object(ce.a)(e.map((function(e){return e[t]}))))))},T=(F="dateCom",A.reduce((function(e,t){return D?(e[t[F][D]]=e[t[F][D]]||[]).push(t):(e[t[F]]=e[t[F]]||[]).push(t),e}),{}));return Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Journal de dep\xf4t vers magasin",children:Object(x.jsx)(je,{title:"Journal de dep\xf4t vers magasin"})}),Object(x.jsxs)(xe,{children:[Object(x.jsx)(fn,{}),Object(x.jsxs)("div",{className:"date-range",children:[Object(x.jsxs)("div",{className:"d-flex justify-content-between my-3",children:[Object(x.jsxs)("div",{children:[j&&h&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("h2",{class:"text-uppercase my-1",children:"Journal de dep\xf4t vers magasin "}),Object(x.jsxs)("span",{children:["Du: ",fe(j)," Au ",fe(h)]})]})," "]}),Object(x.jsx)("div",{children:Object(x.jsx)(ur.a,{locale:"fr-FR",onChange:C,value:N})})]}),Object(x.jsx)("div",{className:"bg-white py-3 px-2 mb-2",children:Object(x.jsx)("div",{className:"table-responsive",children:Object(x.jsxs)("table",{class:"table",children:[Object(x.jsxs)("tr",{className:"sticky-this",children:[Object(x.jsx)("td",{children:"Produit"}),a.map((function(e){return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(ye,{date:e})})})),Object(x.jsx)("td",{className:"bg-thead text-uppercase text-center",children:"Total"}),Object(x.jsx)("td",{className:"bg-thead text-uppercase text-center",children:"Stock"})]}),M.map((function(e){return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("tr",{class:"bg-white",children:[Object(x.jsx)("td",{className:"bg-thead",children:e.name}),a.map((function(t){return Object(x.jsx)(x.Fragment,{children:void 0!=T[t]?Object(x.jsx)(ed,{flat:B(T[t],"contenu"),gr:t,id:e.id}):Object(x.jsx)(td,{})})})),Object(x.jsx)("td",{className:"text-center",children:e.quantityParProduct}),Object(x.jsx)(nd,{flat:B(T[od(Object.keys(T))],"contenu"),gr:od(Object.keys(T)),id:e.id})]})})})),0==M.length&&Object(x.jsx)("tr",{children:Object(x.jsx)("td",{className:"text-center",colSpan:a.length+3,children:"Aucune enregistrement trouv\xe9"})})]})})})," "]})]})]})},jd=function(e){if(!e||0===(null===e||void 0===e?void 0:e.length))return 0;var t=0;return e.forEach((function(e){t+=e.prixVente*e.quantityParProduct*1})),t},bd=function(e,n,c){return 1==e[t]?{text:"plus (+"+e[n]+")("+c+")",textStyle:"text text-info",date:fe(e.datedecorrection),style:"badge badge-info"}:2==e[t]?{text:"moins (-"+e[n]+")("+c+")",textStyle:"text text-warning",date:fe(e.datedecorrection),style:"badge badge-warning"}:3==e[t]?{text:"ajouter au commande ( + "+e[n]+"("+c+")",textStyle:"text text-success",date:fe(e.datedecorrection),style:"badge badge-success"}:4==e[t]?{text:"supprimer du commande ( - "+e[n]+"("+c+")",textStyle:"text text-danger",date:fe(e.datedecorrection),style:"badge badge-danger"}:void 0};var md=Object(o.j)((function(e){Object(o.g)();var t,n,c=Object(o.i)().id,a=Object(ie.d)(vn("commandes").value),i=Object(ie.c)();return Object(r.useEffect)((function(){i(xn("commandes").get(c))}),[c]),Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"D\xe9tail de sortie vers magasin",children:Object(x.jsx)(je,{title:"D\xe9tail de sortie vers magasin"})}),Object(x.jsxs)(xe,{children:[Object(x.jsxs)("table",{className:"table table-bordered ",children:[Object(x.jsxs)("tr",{className:"bg-thead",children:[Object(x.jsx)("td",{children:"Nom de l'article"}),Object(x.jsx)("td",{children:"Quantit\xe9"}),Object(x.jsx)("td",{children:"Sous total"})]}),a.length>0&&(null===(t=a[0])||void 0===t?void 0:t.contenu.map((function(e){return Object(x.jsxs)("tr",{children:[Object(x.jsxs)("td",{style:{width:"40%"},children:[Object(x.jsx)("h2",{children:e.name}),e.correction>0&&Object(x.jsx)("div",{children:Object(x.jsx)("div",{className:bd(e,"correction","correctiontype").style,children:Object(x.jsx)("p",{children:bd(e).text})})}),e.correctionml>0&&Object(x.jsx)("div",{children:Object(x.jsx)("div",{className:bd(e,"correctionml","correctiontml").style,children:Object(x.jsx)("p",{children:bd(e,"correctionml","correctiontml").text})})}),e.correctionl>0&&Object(x.jsx)("div",{children:Object(x.jsx)("div",{className:bd(e,"correctionl","correctiontl").style,children:Object(x.jsx)("p",{children:bd(e,"correctionl","correctiontl").text})})}),Object(x.jsxs)("p",{children:["Date de modification:",fe(e.datedecorrection)]})]}),Object(x.jsxs)("td",{className:"d-flex align-items-center",children:[ge(sa(e)?e.prixlitre:e.prixVente),"(","x"," ",e.quantityParProduct,")"]}),Object(x.jsx)("td",{children:ge(sa(e)?e.prixlitre:e.prixVente*e.quantityParProduct)})]})})))]}),Object(x.jsxs)("div",{className:"d-flex justify-content-end",children:[Object(x.jsx)("strong",{children:"Total"}),":",ge(jd(null===(n=a[0])||void 0===n?void 0:n.contenu))]})]})]})})),Od=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0};var xd=Object(o.j)((function(e){Object(o.h)();var t,n,c,a,i,s,d,l,u=Object(o.i)().id,j=Object(ie.d)(vn("commandes").value),b=Object(ie.c)();return Object(r.useEffect)((function(){b(xn("commandes").get(u))}),[u]),Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"D\xe9tail de vente du magasin",children:Object(x.jsx)(je,{title:"D\xe9tail de vente du magasin"})}),Object(x.jsxs)(xe,{children:[Object(x.jsxs)("div",{children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("p",{children:"credit-cva"==(null===(t=j[0])||void 0===t?void 0:t.type)&&Object(x.jsx)("p",{children:"Credit"})}),"credit-cva"==(null===(n=j[0])||void 0===n?void 0:n.type)&&Object(x.jsx)("div",{className:"border",children:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("h3",{children:null===(c=j[0])||void 0===c?void 0:c.emprunter.name}),Object(x.jsx)("h5",{children:null===(a=j[0])||void 0===a?void 0:a.emprunter.contact})]})}),j.length>0&&Object(x.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(x.jsxs)("h2",{className:"my-2",children:["Date : ",fe(null===(i=j[0])||void 0===i?void 0:i.dateCom)]}),Object(x.jsx)("div",{className:"d-flex justify-content-end",children:Object(x.jsxs)("div",{className:"bg-thead p-1 mb-1",children:[Object(x.jsx)("strong",{children:"Recette:"}),":",Object(x.jsx)("h3",{className:"text-lg",children:ge(Od(null===(s=j[0])||void 0===s?void 0:s.contenu.map((function(e){return sa(e)?e.prixlitre*e.quantityParProduct:e.prixVente*e.quantityParProduct})))+Od(null===(d=j[0])||void 0===d?void 0:d.contenu.map((function(e){return e.prixParCC*e.qttByCC}))))})]})})]}),Object(x.jsxs)("table",{className:"table table-bordered",children:[Object(x.jsxs)("tr",{className:"bg-thead",children:[Object(x.jsx)("td",{children:"Nom de l'article"}),Object(x.jsx)("td",{children:"Quantit\xe9"}),Object(x.jsx)("td",{children:"Sous total"})]}),j.length>0&&(null===(l=j[0])||void 0===l?void 0:l.contenu.map((function(e){return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{style:{width:"40%"},children:e.name}),Object(x.jsx)(x.Fragment,{children:0!=e.quantityParProduct&&Object(x.jsxs)("div",{className:"d-flex align-items-center py-0",children:[Object(x.jsxs)("strong",{children:[e.type,":"]}),ge(e.prixVente)," (","x"," ",e.quantityParProduct,") "," = ",ge(e.prixVente*e.quantityParProduct)]})}),"FLACON"==e.type&&Object(x.jsx)(x.Fragment,{children:0!=e.qttByCC&&Object(x.jsxs)("div",{className:"d-flex align-items-center  py-0",children:[Object(x.jsx)("strong",{children:"ML:"})," ",ge(e.prixParCC)," ","x"," ",0!=e.qttyspecificmirror?e.qttyspecificmirror+" Dose":e.qttByCC+" Ml"," "," = "," ",ge(e.prixParCC*e.qttByCC)]})}),Object(x.jsx)("td",{children:ge(e.prixVente*e.quantityParProduct+e.prixParCC*e.qttByCC)})]})})))]})]})," "]})," "]})]})})),vd=function(e){var t,n=e.state,c=e.setState,r=e.product,i=(Object(ie.c)(),!!(null===n||void 0===n?void 0:n.find((function(e){return(null===e||void 0===e?void 0:e.id)===r.id})))),s=a.a.useCallback((function(){return r.quantityBruteCVA>15&&r.quantityBruteCVA<=20?"yellow":r.quantityBruteCVA>10&&r.quantityBruteCVA<=15?"#ffdb4c":r.quantityBruteCVA>5&&r.quantityBruteCVA<=10?" orange":r.quantityBruteCVA>0&&r.quantityBruteCVA<=5?"#c44e14b8":0==r.quantityBruteCVA?"red":"green"}),[r]),d=a.a.useCallback((function(){return r.quantityCCCVA>15&&r.quantityCCCVA<=20?"yellow":r.quantityCCCVA>10&&r.quantityCCCVA<=15?"#ffdb4c":r.quantityCCCVA>5&&r.quantityCCCVA<=10?" orange":r.quantityCCCVA>0&&r.quantityCCCVA<=5?"#c44e14b8":0==r.quantityCCCVA?"red":"green"}),[r]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(zc.a.Item,{className:"mb-2 mr-3",style:{width:"100%",border:"1px solid gray",background:"whitesmoke",borderLeft:"10px solid ".concat(s())},children:Object(x.jsxs)("div",{className:" d-flex justify-content-between align-items-center",children:[Object(x.jsxs)("div",{className:" ".concat(r.id?"":"product-loading"),style:{boxShadow:r&&i?"15px 10px 15px rgba(0, 0, 0, .07)":"none"},children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{style:{width:10,height:4,background:"".concat(d())}}),Object(x.jsxs)("div",{children:[r.name," "]}),Object(x.jsx)("div",{class:"badge badge-primary",children:null===r||void 0===r||null===(t=r.fournisseur)||void 0===t?void 0:t.name}),Object(x.jsx)("br",{})]})," "]}),Object(x.jsx)("div",{children:(null===r||void 0===r?void 0:r.id)&&Object(x.jsx)(x.Fragment,{children:i?Object(x.jsx)("button",{disabled:0===r.quantityBruteCVA&&(0==r.quantityCCCVA||null==r.quantityCCCVA),className:"btn btn-danger btn-sm",onClick:function(){!function(e){c(n.filter((function(t){return t.id!==e})))}(null===r||void 0===r?void 0:r.id)},children:"Retirer"}):Object(x.jsx)("button",{disabled:0===r.quantityBruteCVA&&(0==r.quantityCCCVA||null==r.quantityCCCVA),className:"btn btn-green btn-sm",onClick:function(){c(n.some((function(e){return e.id===r.id}))?n:[r].concat(Object(ce.a)(n)))},children:"Ajouter"})})})]})})})},hd=function(e){var t=e.product,n=e.index,c=e.state,r=e.setState,a=e.setRealQtt,i=e.realQtt,s=(e.maxRealQtt,function(e){!function(e,t,n){var a=Object(ce.a)(c);a[e]=Object(Se.a)(Object(Se.a)({},a[e]),{},Object(Ge.a)({},t,n)),r(a)}(n,"quantityParProduct",e)});return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Cc.c,{inputMode:"numeric",w:28,bg:"whitesmoke",onChange:function(e){""==e?(a(null===t||void 0===t?void 0:t.quantityParProduct),s(null===t||void 0===t?void 0:t.quantityParProduct)):(a(Number(e)),s(Number(e)))},min:0,value:i,defaultValue:null===t||void 0===t?void 0:t.quantityParProduct,children:[Object(x.jsx)(Cc.d,{}),Object(x.jsxs)(Cc.e,{children:[Object(x.jsx)(Cc.b,{}),Object(x.jsx)(Cc.a,{})]})]})})},pd=function(e){var t=e.product,n=e.setRealQttCC,c=e.realQttCC,r=e.maxRealQttCC,a=Object(ie.c)();return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Cc.c,{inputMode:"decimal",w:28,step:1,bg:"whitesmoke",onChange:function(e){!function(e){a(ii(t.id,e))}(e),n(e)},min:0,value:c,defaultValue:null===t||void 0===t?void 0:t.qttByCC,max:r,children:[Object(x.jsx)(Cc.d,{}),Object(x.jsxs)(Cc.e,{children:[Object(x.jsx)(Cc.b,{}),Object(x.jsx)(Cc.a,{})]})]})})},fd=function(e){var t=e.product,n=e.setRealQttCC,c=e.realQttCC,r=e.maxRealQttCC,a=Object(ie.c)(),i=function(e){a(di(t.id,e))};return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Cc.c,{inputMode:"decimal",w:28,bg:"whitesmoke",onChange:function(e){""==e?(i(0),n(0)):(i(Number(e)),n(Number(e)))},min:0,value:c,defaultValue:null===t||void 0===t?void 0:t.qttByCC,max:r,children:[Object(x.jsx)(Cc.d,{}),Object(x.jsxs)(Cc.e,{children:[Object(x.jsx)(Cc.b,{}),Object(x.jsx)(Cc.a,{})]})]})})},gd=function(e){var t=e.product,n=e.setRealQttCC,c=e.maxRealQttCC,r=e.realQttCC,a=Object(ie.c)();return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Cc.c,{inputMode:"numeric",w:28,step:1,bg:"whitesmoke",onChange:function(e){!function(e){a(si(t.id,e))}(Number(e)),n(Number(e))},min:0,value:r,defaultValue:null===t||void 0===t?void 0:t.qttByCC,max:c,children:[Object(x.jsx)(Cc.d,{}),Object(x.jsxs)(Cc.e,{children:[Object(x.jsx)(Cc.b,{}),Object(x.jsx)(Cc.a,{})]})]})})},Nd=function(){return{type:Xa}},Cd=function(e,t){return{type:$a,payload:{id:e,value:t}}},yd=function(e,t){return{type:ri,payload:{id:e,value:t}}},qd=function(e,t){return{type:Za,payload:{id:e,value:t}}},Ad=function(e){var t=e.product,n=e.setRealQttCC,c=(e.maxRealQttCC,e.index),r=e.setState,a=e.state,i=e.realQttCC,s=function(e){!function(e,t,n){var c=Object(ce.a)(a);c[e]=Object(Se.a)(Object(Se.a)({},c[e]),{},Object(Ge.a)({},t,n)),r(c)}(c,"qttByCC",e)};return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Cc.c,{inputMode:"numeric",w:28,bg:"whitesmoke",onChange:function(e){""==e?(s(null===t||void 0===t?void 0:t.qttByCC),n(null===t||void 0===t?void 0:t.qttByCC)):(n(1*e),s(1*e))},min:0,value:i,children:[Object(x.jsx)(Cc.d,{}),Object(x.jsxs)(Cc.e,{children:[Object(x.jsx)(Cc.b,{}),Object(x.jsx)(Cc.a,{})]})]})})},Sd=function(e){var t=e.product,n=e.setRealQttLitre,c=e.setState,r=e.state,a=e.realQttLitre,i=e.index,s=function(e){!function(e,t,n){var a=Object(ce.a)(r);a[e]=Object(Se.a)(Object(Se.a)({},a[e]),{},Object(Ge.a)({},t,n)),c(a)}(i,"qttbylitre",e)};return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Cc.c,{inputMode:"numeric",w:28,step:1,bg:"whitesmoke",min:0,value:a,defaultValue:null===t||void 0===t?void 0:t.qttbylitre,onChange:function(e){""==e?(n(null===t||void 0===t?void 0:t.qttbylitre),s(null===t||void 0===t?void 0:t.qttbylitre)):(n(Number(e)),s(Number(e)))},children:[Object(x.jsx)(Cc.d,{}),Object(x.jsxs)(Cc.e,{children:[Object(x.jsx)(Cc.b,{}),Object(x.jsx)(Cc.a,{})]})]})})},Ed=function(e){var t=e.product,n=e.state,c=e.setState,r=e.realQttCC,a=e.setRealQttCC,i=(e.maxRealQttCC,e.index),s=(Object(ie.c)(),function(e){!function(e,t,r){var a=Object(ce.a)(n);a[e]=Object(Se.a)(Object(Se.a)({},a[e]),{},Object(Ge.a)({},t,r)),c(a)}(i,"qttByCC",e)});return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Cc.c,{inputMode:"decimal",w:28,bg:"whitesmoke",onChange:function(e){""==e?(s(0),a(0)):(a(Number(e)),s(Number(e)))},min:0,value:r,defaultValue:null===t||void 0===t?void 0:t.qttByCC,children:[Object(x.jsx)(Cc.d,{}),Object(x.jsxs)(Cc.e,{children:[Object(x.jsx)(Cc.b,{}),Object(x.jsx)(Cc.a,{})]})]})})},wd=function(e){return!(0==e.condml||0==e.condsize||0==e.qttccpvente||0==e.prixqttccvente)},Pd=function(e){return 1==e.correctiontype?{text:"plus (+"+e.correction+") et ("+e.correctionml+")",textStyle:"text text-info",date:fe(e.datedecorrection),style:"badge badge-info"}:2==e.correctiontype?{text:"moins (-"+e.correction+")  et ("+e.correctionml+")",textStyle:"text text-warning",date:fe(e.datedecorrection),style:"badge badge-warning"}:3==e.correctiontype?{text:"ajouter au commande ( + "+e.correction+")  et ("+e.correctionml+")",textStyle:"text text-success",date:fe(e.datedecorrection),style:"badge badge-success"}:4==e.correctiontype?{text:"supprimer du commande ( - "+e.correction+")  et ("+e.correctionml+")",textStyle:"text text-danger",date:fe(e.datedecorrection),style:"badge badge-danger"}:void 0},Vd=function(e){var t=e.state,n=e.index,c=e.setState,i=e.product,s=e.products,d=(Object(ie.c)(),Object(r.useState)(null===i||void 0===i?void 0:i.qttByCC)),l=Object(O.a)(d,2),o=l[0],u=l[1],j=Object(r.useState)(null===i||void 0===i?void 0:i.quantityParProduct),b=Object(O.a)(j,2),m=b[0],v=b[1],h=Object(r.useState)(null===i||void 0===i?void 0:i.qttbylitre),p=Object(O.a)(h,2),f=p[0],g=p[1],N=Object(r.useState)(2e3),C=Object(O.a)(N,2),y=C[0],q=C[1],A=Object(r.useState)(2e3),S=Object(O.a)(A,2),E=S[0],w=S[1],P=Object(r.useState)(2e3),V=Object(O.a)(P,2),R=V[0],F=V[1],D=Object(ie.d)(vn("commandes").value);return a.a.useEffect((function(){if(void 0!=s&&void 0!=t&&D.length>0){var e=null===t||void 0===t?void 0:t.find((function(e){return null===i||void 0===i?void 0:i.id})),n=qi(s,D[0],e),c=n.normalQtt,r=n.normalQttCC,a=n.normalQttLitre,d=n.isSpecific;0==n.isValid&&(alert("stock insuffisant :("),d?(g(a),F(a),v(c),q(c),u(r),w(r)):(v(c),q(c),u(r),w(r))),console.log(f)}}),[m,o,f,s]),Object(x.jsx)("div",{children:Object(x.jsxs)("div",{className:"d-flex justify-content-between align-items-center border mt-3  mb-2 p-2",children:[Object(x.jsxs)("div",{style:{width:"45%"},children:[i.correction>0&&Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{className:Pd(i).style,children:Object(x.jsx)("p",{children:Pd(i).text})}),Object(x.jsxs)("p",{className:Pd(i).textStyle,children:["Date de modification:",Pd(i).date]})]}),Object(x.jsx)("p",{className:"text-blue",children:i.name}),wd(i)?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("p",{className:"text-lowercase",children:Object(x.jsx)("strong",{children:0!=i.qttbylitre&&Object(x.jsx)("span",{style:{marginRight:"30px"},children:ge(i.prixVente)+" x "+i.qttbylitre+" Litre(s)"})})}),Object(x.jsx)("p",{className:"text-lowercase",children:Object(x.jsx)("strong",{children:0!=i.quantityParProduct&&Object(x.jsx)("span",{style:{marginRight:"30px"},children:ge(i.prixqttccvente*i.qttccpvente)+" x "+i.quantityParProduct+" "+i.type})})})]}):Object(x.jsx)("p",{className:"text-lowercase",children:Object(x.jsx)("strong",{children:0!=i.quantityParProduct&&Object(x.jsx)("span",{style:{marginRight:"30px"},children:ge(i.prixVente)+" x "+i.quantityParProduct+" "+i.type})})}),Object(x.jsx)("p",{className:"text-lowercase",children:Object(x.jsx)("strong",{children:0!=i.qttByCC&&Object(x.jsx)("span",{style:{marginRight:"30px"},children:ge(i.prixParCC)+" x "+i.qttByCC+" ML"})})})]}),0!==i.condml&&0!==i.qttccpvente&&Object(x.jsxs)("div",{className:"text-inline text-center mr-3",children:[Object(x.jsx)("h5",{className:"mb-1 text-uppercase",children:"Litre"}),Object(x.jsx)(Sd,{product:i,setState:c,state:t,index:n,realQttLitre:f,setRealQttLitre:g,maxRealQttByLitre:R})," "]}),Object(x.jsxs)("div",{className:"d-flex  justify-content-between align-items-center ",children:[Object(x.jsxs)("div",{className:"text-center mr-2",children:[Object(x.jsx)("h5",{className:"mb-1",children:i.type}),Object(x.jsx)(hd,{index:n,state:t,setState:c,product:i,setRealQtt:v,realQtt:m,maxRealQtt:y})]}),"FLACON"===i.type&&Object(x.jsxs)("div",{className:"text-inline text-center",children:[Object(x.jsx)("h5",{className:"mb-1",children:3==i.categoryId?"DOSE":"ML"}),Ce(i.name,"ita new")&&Object(x.jsx)(pd,{product:i,index:n,state:t,setState:c,setRealQttCC:u,realQttCC:o,maxRealQttCC:E}),Ce(i.name,"sovax")&&Object(x.jsx)(gd,{index:n,state:t,setState:c,realQttCC:o,setRealQttCC:u,product:i,maxRealQttCC:E}),0==i.condml&&0==i.qttccpvente&&!Ce(i.name,"sovax")&&!Ce(i.name,"ita new")&&Object(x.jsx)(Ad,{index:n,realQttCC:o,setRealQttCC:u,state:t,setState:c,product:i,maxRealQttCC:E}),0!==i.condml&&0!==i.qttccpvente&&Object(x.jsx)(Ed,{product:i,state:t,realQttCC:o,setRealQttCC:u,maxRealQttCC:E,setState:c,index:n})]})]})]})})},Rd=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0};function Fd(e){var t,n,c;for(c in t=Array.isArray(e)?[]:{},e)n=e[c],t[c]="object"===typeof n?Fd(n):n;return t}var Dd=function(e){var t=e.state,n=(e.meta,e.setState),c=e.disabled,a=e.products,i=e.commandes,s=Object(r.useState)("direct"),d=Object(O.a)(s,2),u=d[0],j=(d[1],Object(r.useState)(1)),b=Object(O.a)(j,2),m=(b[0],b[1],Object(r.useState)(null)),v=Object(O.a)(m,2),h=(v[0],v[1],Object(r.useState)(null)),p=Object(O.a)(h,2),f=(p[0],p[1]),g=Object(o.g)(),N=Object(r.useState)([]),C=Object(O.a)(N,2),y=C[0],q=C[1],A=Object(ie.d)((function(e){return{fromdepots:e.fromdepots}})),S=A.fromdepots;Object(r.useEffect)((function(){q(null===i||void 0===i?void 0:i.contenu)}),[i]);var E=Object(ie.c)(),w=Object(ie.d)(vn("emprunters").value),P=new Date,V=Object(r.useState)(P),R=Object(O.a)(V,2),F=R[0],D=R[1];Object(r.useEffect)((function(){E(xn("emprunters").fetch())}),[]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(Bc.a,{children:[Object(x.jsx)(Bc.a.Header,{className:" bg-dark py-3 text-white d-flex justify-content-between align-items-center",children:Object(x.jsx)("div",{style:{width:"60%"},children:"BON DE SORTIE"})}),Object(x.jsxs)("div",{className:"commande-vente",children:[Object(x.jsxs)(Bc.a.Body,{style:{padding:12,marginTop:3,marginRight:2,marginLeft:2},children:[Object(x.jsx)("div",{className:"d-flex justify-content-end",children:Object(x.jsx)(l.b,{className:"btn btn-primary mb-2 btn-sm",to:Q,children:"Voir l'historique de vente"})}),Object(x.jsxs)("div",{style:{overflowY:"auto",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(x.jsxs)("div",{class:"form-group",children:[Object(x.jsxs)("label",{children:["Date de sortie : ",fe(F)]}),Object(x.jsx)("div",{children:Object(x.jsx)("input",{type:"date",disabled:c,onChange:function(e){return D(e.target.value)},value:F,className:"form-control"})})]}),"credit"===u&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("label",{children:"Crediteur:"}),Object(x.jsxs)("select",{disabled:c,className:"form-control",onChange:function(e){f(e.target.value)},children:[Object(x.jsx)("option",{value:""}),w.map((function(e){return Object(x.jsx)("option",{value:e.id,children:e.name})}))]})]}),(null===t||void 0===t?void 0:t.length)<=0&&Object(x.jsx)("div",{className:"alert alert-success ",children:"Aucune enregistrement trouv\xe9"}),null===t||void 0===t?void 0:t.sort((function(e,t){return t.quantityBruteCVA-e.quantityBruteCVA})).map((function(e,c){var r;return Object(x.jsx)(Vd,{product:e,realcommande:null===(r=i[0])||void 0===r?void 0:r.find((function(t){return t.id==e.id})),state:t,index:c,products:null===a||void 0===a?void 0:a.find((function(t){return t.id==e.id})),setState:n,basket:S,dispatch:E},"".concat(null===e||void 0===e?void 0:e.id,"_").concat(c))}))]})]}),(null===t||void 0===t?void 0:t.length)>0&&Object(x.jsxs)(Bc.a.Footer,{className:"d-flex align-items-center justify-content-between",children:[Object(x.jsx)("div",{style:{width:"40%"},children:Object(x.jsx)("h2",{className:"p-2 text-uppercase bg-primary",children:Object(x.jsxs)("strong",{"data-test-id":"total-price-orders",children:["Total:",ge(Rd(null===t||void 0===t?void 0:t.map((function(e){return gi(e)?e.prixqttccvente*e.quantityParProduct*e.qttccpvente+e.prixVente*e.qttbylitre:e.prixVente*e.quantityParProduct})))+Rd(null===t||void 0===t?void 0:t.map((function(e){return e.prixParCC*e.qttByCC}))))]})})}),Object(x.jsx)("div",{style:{width:"60%"},children:(null===t||void 0===t?void 0:t.length)>0&&Object(x.jsxs)("div",{className:"d-flex text-right align-items-end justify-content-end",children:[Object(x.jsx)("button",{className:"btn btn-green btn-sm mr-2",disabled:0===(null===t||void 0===t?void 0:t.length),onClick:function(){var e,n=function(){var e=Fd(y).filter((function(e){return!t.find((function(t){return e.id===t.id}))})),n=Fd(y).filter((function(e){return!t.find((function(t){return e.id===t.id}))}));return{exist:Fd(y).map((function(e){return t.find((function(t){return t.id===e.id}))})).filter((function(e){return null!=e})),added:n,missing:e}}(),c=n.exist,r=n.added,a=n.missing;Si(t)?alert("modification non conforme,veuillez verifier"):(E(xn("commandes").updateTransaction((e={id:null===i||void 0===i?void 0:i.id,contenu:t,commande:t,type:"vente-cva",sorte:"sortie"},Object(Ge.a)(e,"sorte","sortie"),Object(Ge.a)(e,"status",!0),Object(Ge.a)(e,"dateCom",null!=F?F:P),Object(Ge.a)(e,"exist",c),Object(Ge.a)(e,"added",r),Object(Ge.a)(e,"missing",a),e),"update-from-magasin")),g.push(Q))},type:"button",children:"Valider l'operation"}),Object(x.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(){return g.goBack()},type:"button",children:Object(x.jsx)("span",{children:"Annuler"})})]})})]})]})]})})},Md=function(){var e=Object(o.i)().id,t=Object(r.useState)(!1),n=Object(O.a)(t,2),c=n[0],i=n[1],s=Object(ie.c)(),d=Object(ie.d)(vn("commandes").value),l=Object(ie.d)(vn("commandes").meta),u=Object(ie.d)(vn("products").value),j=Object(ie.d)(vn("products").meta),b=Object(r.useState)([]),m=Object(O.a)(b,2),v=m[0],h=m[1];a.a.useEffect((function(){s(xn("commandes").get(e))}),[e]);var p=Object(r.useState)(""),f=Object(O.a)(p,2),g=f[0],N=f[1],C=Object(r.useState)([]),y=Object(O.a)(C,2),q=y[0],A=y[1];a.a.useEffect((function(){return 1==c&&(s(xn("products").fetch()),i(!1)),function(){i(!1)}}),[c]);var S=Object(r.useState)(),E=Object(O.a)(S,2);E[0],E[1];return a.a.useEffect((function(){h(lr(u,g))}),[g]),a.a.useEffect((function(){s(xn("products").fetch())}),[]),a.a.useEffect((function(){var e;l.isFetching||A(null===(e=d[0])||void 0===e?void 0:e.contenu)}),[l]),a.a.useEffect((function(){j.isFetching||h(u)}),[j]),Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{className:"bg-dark text-white p-3 d-flex justify-content-center align-items-center",children:Object(x.jsx)("h1",{className:"",children:"CABINET VETERINAIRE AMBALAVAO"})}),Object(x.jsx)(ir.a,{className:"mt-3",children:Object(x.jsxs)(Kc.a,{children:[Object(x.jsx)(Gc.a,{xs:6,children:Object(x.jsx)(zc.a,{children:Object(x.jsxs)(Bc.a,{children:[Object(x.jsx)(Bc.a.Header,{className:"d-flex justify-content-between align-items-center bg-dark text-white",children:"Produits"}),Object(x.jsxs)(Bc.a.Body,{children:[Object(x.jsx)("input",{type:"text",onChange:function(e){N(e.target.value)},placeholder:"Rechercher un produit",className:"form-control mb-2"}),Object(x.jsxs)("div",{style:{overflowY:"auto",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(x.jsxs)(x.Fragment,{children:[v.map((function(e){return Object(x.jsx)(vd,{state:q,realproduct:u,setState:A,product:e})})),0==v.length&&"Aucune enregistrement trouv\xe9"]})," "]})]})]})})}),Object(x.jsx)(Gc.a,{xs:6,children:Object(x.jsx)(Dd,{state:q,meta:l,disabled:j.isFetching,setState:A,products:u,commandes:d[0]})})]})})]})},Bd=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0};Object(o.j)((function(e){Object(o.h)();var t,n,c,a,i,s,d,l,u=Object(o.i)().id,j=Object(ie.d)(vn("commandes").value),b=Object(ie.c)();return Object(r.useEffect)((function(){b(xn("commandes").get(u))}),[u]),Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"D\xe9tail de vente du magasin",children:Object(x.jsx)(je,{title:"D\xe9tail de vente du magasin"})}),Object(x.jsxs)(xe,{children:[Object(x.jsxs)("div",{children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("p",{children:"credit-cva"==(null===(t=j[0])||void 0===t?void 0:t.type)&&Object(x.jsx)("p",{children:"Credit"})}),"credit-cva"==(null===(n=j[0])||void 0===n?void 0:n.type)&&Object(x.jsx)("div",{className:"border",children:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("h3",{children:null===(c=j[0])||void 0===c?void 0:c.emprunter.name}),Object(x.jsx)("h5",{children:null===(a=j[0])||void 0===a?void 0:a.emprunter.contact})]})}),j.length>0&&Object(x.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(x.jsxs)("h2",{className:"my-2",children:["Date : ",fe(null===(i=j[0])||void 0===i?void 0:i.dateCom)]}),Object(x.jsx)("div",{className:"d-flex justify-content-end",children:Object(x.jsxs)("div",{className:"bg-thead p-1 mb-1",children:[Object(x.jsx)("strong",{children:"Recette:"}),":",Object(x.jsx)("h3",{className:"text-lg",children:ge(Bd(null===(s=j[0])||void 0===s?void 0:s.contenu.map((function(e){return sa(e)?e.prixlitre*e.quantityParProduct:e.prixVente*e.quantityParProduct})))+Bd(null===(d=j[0])||void 0===d?void 0:d.contenu.map((function(e){return e.prixParCC*e.qttByCC}))))})]})})]}),Object(x.jsxs)("table",{className:"table table-bordered",children:[Object(x.jsxs)("tr",{className:"bg-thead",children:[Object(x.jsx)("td",{children:"Nom de l'article"}),Object(x.jsx)("td",{children:"Quantit\xe9"}),Object(x.jsx)("td",{children:"Sous total"})]}),j.length>0&&(null===(l=j[0])||void 0===l?void 0:l.contenu.map((function(e){return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{style:{width:"40%"},children:e.name}),Object(x.jsx)(x.Fragment,{children:0!=e.quantityParProduct&&Object(x.jsxs)("div",{className:"d-flex align-items-center py-0",children:[Object(x.jsxs)("strong",{children:[e.type,":"]}),ge(e.prixVente)," (","x"," ",e.quantityParProduct,") "," = ",ge(e.prixVente*e.quantityParProduct)]})}),"FLACON"==e.type&&Object(x.jsx)(x.Fragment,{children:0!=e.qttByCC&&Object(x.jsxs)("div",{className:"d-flex align-items-center  py-0",children:[Object(x.jsx)("strong",{children:"ML:"})," ",ge(e.prixParCC)," ","x"," ",0!=e.qttyspecificmirror?e.qttyspecificmirror+" Dose":e.qttByCC+" Ml"," "," = "," ",ge(e.prixParCC*e.qttByCC)]})}),Object(x.jsx)("td",{children:ge(e.prixVente*e.quantityParProduct+e.prixParCC*e.qttByCC)})]})})))]})]})," "]})," "]})]})}));var Td=function(e){var t,n=e.state,c=e.setState,r=e.product,i=(Object(ie.c)(),!!(null===n||void 0===n?void 0:n.find((function(e){return(null===e||void 0===e?void 0:e.id)===r.id})))),s=a.a.useCallback((function(){return r.quantityBruteCVA>15&&r.quantityBruteCVA<=20?"yellow":r.quantityBruteCVA>10&&r.quantityBruteCVA<=15?"#ffdb4c":r.quantityBruteCVA>5&&r.quantityBruteCVA<=10?" orange":r.quantityBruteCVA>0&&r.quantityBruteCVA<=5?"#c44e14b8":0==r.quantityBruteCVA?"red":"green"}),[r]),d=a.a.useCallback((function(){return r.quantityCCCVA>15&&r.quantityCCCVA<=20?"yellow":r.quantityCCCVA>10&&r.quantityCCCVA<=15?"#ffdb4c":r.quantityCCCVA>5&&r.quantityCCCVA<=10?" orange":r.quantityCCCVA>0&&r.quantityCCCVA<=5?"#c44e14b8":0==r.quantityCCCVA?"red":"green"}),[r]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(zc.a.Item,{className:"mb-2 mr-3",style:{width:"100%",border:"1px solid gray",background:"whitesmoke",borderLeft:"10px solid ".concat(s())},children:Object(x.jsxs)("div",{className:" d-flex justify-content-between align-items-center",children:[Object(x.jsxs)("div",{className:" ".concat(r.id?"":"product-loading"),style:{boxShadow:r&&i?"15px 10px 15px rgba(0, 0, 0, .07)":"none"},children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{style:{width:10,height:4,background:"".concat(d())}}),Object(x.jsxs)("div",{children:[r.name," "]}),Object(x.jsx)("div",{class:"badge badge-primary",children:null===r||void 0===r||null===(t=r.fournisseur)||void 0===t?void 0:t.name}),Object(x.jsx)("br",{})]})," "]}),Object(x.jsx)("div",{children:(null===r||void 0===r?void 0:r.id)&&Object(x.jsx)(x.Fragment,{children:i?Object(x.jsx)("button",{disabled:0===r.quantityBruteCVA&&(0==r.quantityCCCVA||null==r.quantityCCCVA),className:"btn btn-danger btn-sm",onClick:function(){!function(e){c(n.filter((function(t){return t.id!==e})))}(null===r||void 0===r?void 0:r.id)},children:"Retirer"}):Object(x.jsx)("button",{disabled:0===r.quantityBruteCVA&&(0==r.quantityCCCVA||null==r.quantityCCCVA),className:"btn btn-green btn-sm",onClick:function(){c(n.some((function(e){return e.id===r.id}))?n:[r].concat(Object(ce.a)(n)))},children:"Ajouter"})})})]})})})},kd=function(e){var t=e.product,n=e.index,c=e.state,r=e.setState,a=e.setRealQtt,i=e.realQtt,s=(e.maxRealQtt,function(e){!function(e,t,n){var a=Object(ce.a)(c);a[e]=Object(Se.a)(Object(Se.a)({},a[e]),{},Object(Ge.a)({},t,n)),r(a)}(n,"quantityParProduct",e)});return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Cc.c,{inputMode:"numeric",w:28,bg:"whitesmoke",onChange:function(e){""==e?(a(null===t||void 0===t?void 0:t.quantityParProduct),s(null===t||void 0===t?void 0:t.quantityParProduct)):(a(Number(e)),s(Number(e)))},min:0,value:i,defaultValue:null===t||void 0===t?void 0:t.quantityParProduct,children:[Object(x.jsx)(Cc.d,{}),Object(x.jsxs)(Cc.e,{children:[Object(x.jsx)(Cc.b,{}),Object(x.jsx)(Cc.a,{})]})]})})},_d=function(e){var t=e.product,n=e.setRealQttCC,c=e.realQttCC,r=e.maxRealQttCC,a=Object(ie.c)();return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Cc.c,{inputMode:"decimal",w:28,step:1,bg:"whitesmoke",onChange:function(e){!function(e){a(ii(t.id,e))}(e),n(e)},min:0,value:c,defaultValue:null===t||void 0===t?void 0:t.qttByCC,max:r,children:[Object(x.jsx)(Cc.d,{}),Object(x.jsxs)(Cc.e,{children:[Object(x.jsx)(Cc.b,{}),Object(x.jsx)(Cc.a,{})]})]})})},Id=function(e){var t=e.product,n=e.setRealQttCC,c=e.realQttCC,r=e.maxRealQttCC,a=Object(ie.c)(),i=function(e){a(di(t.id,e))};return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Cc.c,{inputMode:"decimal",w:28,bg:"whitesmoke",onChange:function(e){""==e?(i(0),n(0)):(i(Number(e)),n(Number(e)))},min:0,value:c,defaultValue:null===t||void 0===t?void 0:t.qttByCC,max:r,children:[Object(x.jsx)(Cc.d,{}),Object(x.jsxs)(Cc.e,{children:[Object(x.jsx)(Cc.b,{}),Object(x.jsx)(Cc.a,{})]})]})})},Qd=function(e){var t=e.product,n=e.setRealQttCC,c=e.maxRealQttCC,r=e.realQttCC,a=Object(ie.c)();return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Cc.c,{inputMode:"numeric",w:28,step:1,bg:"whitesmoke",onChange:function(e){!function(e){a(si(t.id,e))}(Number(e)),n(Number(e))},min:0,value:r,defaultValue:null===t||void 0===t?void 0:t.qttByCC,max:c,children:[Object(x.jsx)(Cc.d,{}),Object(x.jsxs)(Cc.e,{children:[Object(x.jsx)(Cc.b,{}),Object(x.jsx)(Cc.a,{})]})]})})},Ld=function(e){var t=e.product,n=e.setRealQttCC,c=(e.maxRealQttCC,e.index),r=e.setState,a=e.state,i=e.realQttCC,s=function(e){!function(e,t,n){var c=Object(ce.a)(a);c[e]=Object(Se.a)(Object(Se.a)({},c[e]),{},Object(Ge.a)({},t,n)),r(c)}(c,"qttByCC",e)};return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Cc.c,{inputMode:"numeric",w:28,bg:"whitesmoke",onChange:function(e){""==e?(s(null===t||void 0===t?void 0:t.qttByCC),n(null===t||void 0===t?void 0:t.qttByCC)):(n(1*e),s(1*e))},min:0,value:i,children:[Object(x.jsx)(Cc.d,{}),Object(x.jsxs)(Cc.e,{children:[Object(x.jsx)(Cc.b,{}),Object(x.jsx)(Cc.a,{})]})]})})},Hd=function(e){var t=e.product,n=e.setRealQttLitre,c=e.setState,r=e.state,a=e.realQttLitre,i=e.index,s=function(e){!function(e,t,n){var a=Object(ce.a)(r);a[e]=Object(Se.a)(Object(Se.a)({},a[e]),{},Object(Ge.a)({},t,n)),c(a)}(i,"qttbylitre",e)};return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Cc.c,{inputMode:"numeric",w:28,step:1,bg:"whitesmoke",min:0,value:a,defaultValue:null===t||void 0===t?void 0:t.qttbylitre,onChange:function(e){""==e?(n(null===t||void 0===t?void 0:t.qttbylitre),s(null===t||void 0===t?void 0:t.qttbylitre)):(n(Number(e)),s(Number(e)))},children:[Object(x.jsx)(Cc.d,{}),Object(x.jsxs)(Cc.e,{children:[Object(x.jsx)(Cc.b,{}),Object(x.jsx)(Cc.a,{})]})]})})},Ud=function(e){var t=e.product,n=e.state,c=e.setState,r=e.realQttCC,a=e.setRealQttCC,i=(e.maxRealQttCC,e.index),s=(Object(ie.c)(),function(e){!function(e,t,r){var a=Object(ce.a)(n);a[e]=Object(Se.a)(Object(Se.a)({},a[e]),{},Object(Ge.a)({},t,r)),c(a)}(i,"qttByCC",e)});return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Cc.c,{inputMode:"decimal",w:28,bg:"whitesmoke",onChange:function(e){""==e?(s(0),a(0)):(a(Number(e)),s(Number(e)))},min:0,value:r,defaultValue:null===t||void 0===t?void 0:t.qttByCC,children:[Object(x.jsx)(Cc.d,{}),Object(x.jsxs)(Cc.e,{children:[Object(x.jsx)(Cc.b,{}),Object(x.jsx)(Cc.a,{})]})]})})},Yd=function(e){return!(0==e.condml||0==e.condsize||0==e.qttccpvente||0==e.prixqttccvente)},zd=function(e){return 1==e.correctiontype?{text:"plus (+"+e.correction+") et ("+e.correctionml+")",textStyle:"text text-info",date:fe(e.datedecorrection),style:"badge badge-info"}:2==e.correctiontype?{text:"moins (-"+e.correction+")  et ("+e.correctionml+")",textStyle:"text text-warning",date:fe(e.datedecorrection),style:"badge badge-warning"}:3==e.correctiontype?{text:"ajouter au commande ( + "+e.correction+")  et ("+e.correctionml+")",textStyle:"text text-success",date:fe(e.datedecorrection),style:"badge badge-success"}:4==e.correctiontype?{text:"supprimer du commande ( - "+e.correction+")  et ("+e.correctionml+")",textStyle:"text text-danger",date:fe(e.datedecorrection),style:"badge badge-danger"}:void 0},Kd=function(e){var t=e.state,n=e.index,c=e.setState,i=e.product,s=e.products,d=(Object(ie.c)(),Object(r.useState)(null===i||void 0===i?void 0:i.qttByCC)),l=Object(O.a)(d,2),o=l[0],u=l[1],j=Object(r.useState)(null===i||void 0===i?void 0:i.quantityParProduct),b=Object(O.a)(j,2),m=b[0],v=b[1],h=Object(r.useState)(null===i||void 0===i?void 0:i.qttbylitre),p=Object(O.a)(h,2),f=p[0],g=p[1],N=Object(r.useState)(2e3),C=Object(O.a)(N,2),y=C[0],q=C[1],A=Object(r.useState)(2e3),S=Object(O.a)(A,2),E=S[0],w=S[1],P=Object(r.useState)(2e3),V=Object(O.a)(P,2),R=V[0],F=V[1],D=Object(ie.d)(vn("commandes").value);return a.a.useEffect((function(){if(void 0!=s&&void 0!=t&&D.length>0){var e=null===t||void 0===t?void 0:t.find((function(e){return null===i||void 0===i?void 0:i.id})),n=Cs(s,D[0],e),c=n.normalQtt,r=n.normalQttCC,a=n.normalQttLitre,d=n.isSpecific;0==n.isValid&&(alert("stock insuffisant :("),d?(g(a),F(a),v(c),q(c),u(r),w(r)):(v(c),q(c),u(r),w(r))),console.log(f)}}),[m,o,f,s]),Object(x.jsx)("div",{children:Object(x.jsxs)("div",{className:"d-flex justify-content-between align-items-center border mt-3  mb-2 p-2",children:[Object(x.jsxs)("div",{style:{width:"45%"},children:[i.correction>0&&Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{className:zd(i).style,children:Object(x.jsx)("p",{children:zd(i).text})}),Object(x.jsxs)("p",{className:zd(i).textStyle,children:["Date de modification:",zd(i).date]})]}),Object(x.jsx)("p",{className:"text-blue",children:i.name}),Yd(i)?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("p",{className:"text-lowercase",children:Object(x.jsx)("strong",{children:0!=i.qttbylitre&&Object(x.jsx)("span",{style:{marginRight:"30px"},children:ge(i.prixVente)+" x "+i.qttbylitre+" Litre(s)"})})}),Object(x.jsx)("p",{className:"text-lowercase",children:Object(x.jsx)("strong",{children:0!=i.quantityParProduct&&Object(x.jsx)("span",{style:{marginRight:"30px"},children:ge(i.prixqttccvente*i.qttccpvente)+" x "+i.quantityParProduct+" "+i.type})})})]}):Object(x.jsx)("p",{className:"text-lowercase",children:Object(x.jsx)("strong",{children:0!=i.quantityParProduct&&Object(x.jsx)("span",{style:{marginRight:"30px"},children:ge(i.prixVente)+" x "+i.quantityParProduct+" "+i.type})})}),Object(x.jsx)("p",{className:"text-lowercase",children:Object(x.jsx)("strong",{children:0!=i.qttByCC&&Object(x.jsx)("span",{style:{marginRight:"30px"},children:ge(i.prixParCC)+" x "+i.qttByCC+" ML"})})})]}),0!==i.condml&&0!==i.qttccpvente&&Object(x.jsxs)("div",{className:"text-inline text-center mr-3",children:[Object(x.jsx)("h5",{className:"mb-1 text-uppercase",children:"Litre"}),Object(x.jsx)(Hd,{product:i,setState:c,state:t,index:n,realQttLitre:f,setRealQttLitre:g,maxRealQttByLitre:R})," "]}),Object(x.jsxs)("div",{className:"d-flex  justify-content-between align-items-center ",children:[Object(x.jsxs)("div",{className:"text-center mr-2",children:[Object(x.jsx)("h5",{className:"mb-1",children:i.type}),Object(x.jsx)(kd,{index:n,state:t,setState:c,product:i,setRealQtt:v,realQtt:m,maxRealQtt:y})]}),"FLACON"===i.type&&Object(x.jsxs)("div",{className:"text-inline text-center",children:[Object(x.jsx)("h5",{className:"mb-1",children:3==i.categoryId?"DOSE":"ML"}),Ce(i.name,"ita new")&&Object(x.jsx)(_d,{product:i,index:n,state:t,setState:c,setRealQttCC:u,realQttCC:o,maxRealQttCC:E}),Ce(i.name,"sovax")&&Object(x.jsx)(Qd,{index:n,state:t,setState:c,realQttCC:o,setRealQttCC:u,product:i,maxRealQttCC:E}),0==i.condml&&0==i.qttccpvente&&!Ce(i.name,"sovax")&&!Ce(i.name,"ita new")&&Object(x.jsx)(Ld,{index:n,realQttCC:o,setRealQttCC:u,state:t,setState:c,product:i,maxRealQttCC:E}),0!==i.condml&&0!==i.qttccpvente&&Object(x.jsx)(Ud,{product:i,state:t,realQttCC:o,setRealQttCC:u,maxRealQttCC:E,setState:c,index:n})]})]})]})})},Gd=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0};function Wd(e){var t,n,c;for(c in t=Array.isArray(e)?[]:{},e)n=e[c],t[c]="object"===typeof n?Wd(n):n;return t}var Xd=function(e){var t=e.state,n=(e.meta,e.setState),c=e.disabled,a=e.products,i=e.commandes,s=Object(r.useState)("direct"),d=Object(O.a)(s,2),u=d[0],j=(d[1],Object(r.useState)(1)),b=Object(O.a)(j,2),m=(b[0],b[1],Object(r.useState)(null)),v=Object(O.a)(m,2),h=(v[0],v[1],Object(r.useState)(null)),p=Object(O.a)(h,2),f=(p[0],p[1]),g=Object(o.g)(),N=Object(r.useState)([]),C=Object(O.a)(N,2),y=C[0],q=C[1],A=Object(ie.d)((function(e){return{fromdepots:e.fromdepots}})),S=A.fromdepots;Object(r.useEffect)((function(){q(null===i||void 0===i?void 0:i.contenu)}),[i]);var E=Object(ie.c)(),w=Object(ie.d)(vn("emprunters").value),P=new Date,V=Object(r.useState)(P),R=Object(O.a)(V,2),F=R[0],D=R[1];Object(r.useEffect)((function(){E(xn("emprunters").fetch())}),[]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(Bc.a,{children:[Object(x.jsx)(Bc.a.Header,{className:" bg-dark py-3 text-white d-flex justify-content-between align-items-center",children:Object(x.jsx)("div",{style:{width:"60%"},children:"BON DE SORTIE"})}),Object(x.jsxs)("div",{className:"commande-vente",children:[Object(x.jsxs)(Bc.a.Body,{style:{padding:12,marginTop:3,marginRight:2,marginLeft:2},children:[Object(x.jsx)("div",{className:"d-flex justify-content-end",children:Object(x.jsx)(l.b,{className:"btn btn-primary mb-2 btn-sm",to:ee,children:"Voir l'historique de vente"})}),Object(x.jsxs)("div",{style:{overflowY:"auto",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(x.jsxs)("div",{class:"form-group",children:[Object(x.jsxs)("label",{children:["Date de sortie : ",fe(F)]}),Object(x.jsx)("div",{children:Object(x.jsx)("input",{type:"date",disabled:c,onChange:function(e){return D(e.target.value)},value:F,className:"form-control"})})]}),"credit"===u&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("label",{children:"Crediteur:"}),Object(x.jsxs)("select",{disabled:c,className:"form-control",onChange:function(e){f(e.target.value)},children:[Object(x.jsx)("option",{value:""}),w.map((function(e){return Object(x.jsx)("option",{value:e.id,children:e.name})}))]})]}),(null===t||void 0===t?void 0:t.length)<=0&&Object(x.jsx)("div",{className:"alert alert-success ",children:"Aucune enregistrement trouv\xe9"}),null===t||void 0===t?void 0:t.sort((function(e,t){return t.quantityBruteCVA-e.quantityBruteCVA})).map((function(e,c){var r;return Object(x.jsx)(Kd,{product:e,realcommande:null===(r=i[0])||void 0===r?void 0:r.find((function(t){return t.id==e.id})),state:t,index:c,products:null===a||void 0===a?void 0:a.find((function(t){return t.id==e.id})),setState:n,basket:S,dispatch:E},"".concat(null===e||void 0===e?void 0:e.id,"_").concat(c))}))]})]}),(null===t||void 0===t?void 0:t.length)>0&&Object(x.jsxs)(Bc.a.Footer,{className:"d-flex align-items-center justify-content-between",children:[Object(x.jsx)("div",{style:{width:"40%"},children:Object(x.jsx)("h2",{className:"p-2 text-uppercase bg-primary",children:Object(x.jsxs)("strong",{"data-test-id":"total-price-orders",children:["Total:",ge(Gd(null===t||void 0===t?void 0:t.map((function(e){return ps(e)?e.prixqttccvente*e.quantityParProduct*e.qttccpvente+e.prixlitre*e.qttbylitre:e.prixVente*e.quantityParProduct})))+Gd(null===t||void 0===t?void 0:t.map((function(e){return e.prixParCC*e.qttByCC}))))]})})}),Object(x.jsx)("div",{style:{width:"60%"},children:(null===t||void 0===t?void 0:t.length)>0&&Object(x.jsxs)("div",{className:"d-flex text-right align-items-end justify-content-end",children:[Object(x.jsx)("button",{className:"btn btn-green btn-sm mr-2",disabled:0===(null===t||void 0===t?void 0:t.length),onClick:function(){var e,n=function(){var e=Wd(y).filter((function(e){return!t.find((function(t){return e.id===t.id}))})),n=Wd(y).filter((function(e){return!t.find((function(t){return e.id===t.id}))}));return{exist:Wd(y).map((function(e){return t.find((function(t){return t.id===e.id}))})).filter((function(e){return null!=e})),added:n,missing:e}}(),c=n.exist,r=n.added,a=n.missing;qs(t)?alert("modification non conforme,veuillez verifier"):E(xn("commandes").updateTransaction((e={id:null===i||void 0===i?void 0:i.id,contenu:t,commande:t,type:"vente-cva",sorte:"sortie"},Object(Ge.a)(e,"sorte","sortie"),Object(Ge.a)(e,"status",!0),Object(Ge.a)(e,"dateCom",null!=F?F:P),Object(Ge.a)(e,"exist",c),Object(Ge.a)(e,"added",r),Object(Ge.a)(e,"missing",a),e),"update-from-magasin"))},type:"button",children:"Valider l'operation"}),Object(x.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(){return g.goBack()},type:"button",children:Object(x.jsx)("span",{children:"Annuler"})})]})})]})]})]})})},Jd=function(){var e=Object(o.i)().id,t=Object(r.useState)(!1),n=Object(O.a)(t,2),c=n[0],i=n[1],s=Object(ie.c)(),d=Object(ie.d)(vn("commandes").value),l=Object(ie.d)(vn("commandes").meta),u=Object(ie.d)(vn("products").value),j=Object(ie.d)(vn("products").meta),b=Object(r.useState)([]),m=Object(O.a)(b,2),v=m[0],h=m[1];a.a.useEffect((function(){s(xn("commandes").get(e))}),[e]);var p=Object(r.useState)(""),f=Object(O.a)(p,2),g=f[0],N=f[1],C=Object(r.useState)([]),y=Object(O.a)(C,2),q=y[0],A=y[1];a.a.useEffect((function(){return 1==c&&(s(xn("products").fetch()),i(!1)),function(){i(!1)}}),[c]);var S=Object(r.useState)(),E=Object(O.a)(S,2);E[0],E[1];return a.a.useEffect((function(){h(lr(u,g))}),[g]),a.a.useEffect((function(){s(xn("products").fetch())}),[]),a.a.useEffect((function(){var e;l.isFetching||A(null===(e=d[0])||void 0===e?void 0:e.contenu)}),[l]),a.a.useEffect((function(){j.isFetching||h(u)}),[j]),Object(x.jsx)("div",{children:Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Editer une vente du magasin",children:Object(x.jsx)(je,{title:"Editer une vente du magasin"})}),Object(x.jsx)(xe,{children:Object(x.jsxs)(Kc.a,{children:[Object(x.jsx)(Gc.a,{xs:6,children:Object(x.jsx)(zc.a,{children:Object(x.jsxs)(Bc.a,{children:[Object(x.jsx)(Bc.a.Header,{className:"d-flex justify-content-between align-items-center bg-dark text-white",children:"Produits"}),Object(x.jsxs)(Bc.a.Body,{children:[Object(x.jsx)("input",{type:"text",onChange:function(e){N(e.target.value)},placeholder:"Rechercher un produit",className:"form-control mb-2"}),Object(x.jsxs)("div",{style:{overflowY:"auto",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(x.jsxs)(x.Fragment,{children:[v.map((function(e){return Object(x.jsx)(Td,{state:q,realproduct:u,setState:A,product:e})})),0==v.length&&"Aucune enregistrement trouv\xe9"]})," "]})]})]})})}),Object(x.jsx)(Gc.a,{xs:6,children:Object(x.jsx)(Xd,{state:q,meta:l,disabled:j.isFetching,setState:A,products:u,commandes:d[0]})})]})})]})})},Zd=function(e){var t=e.product,n=e.index,c=e.state,r=e.setState,a=(e.setRealQttCC,e.setRealQtt),i=e.stock,s=e.realcommand,d=(e.realQtt,e.realQttCC,function(e){console.log(e),function(e,t,n){var a=Object(ce.a)(c);a[e]=Object(Se.a)(Object(Se.a)({},a[e]),{},Object(Ge.a)({},t,n)),console.log(a),r(a)}(n,"quantityParProduct",e)});return Object(x.jsx)("div",{className:"basket-item-control",children:(null===i||void 0===i?void 0:i.quantityBruteCVA)<(null===s||void 0===s?void 0:s.quantityParProduct)?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{children:Object(x.jsxs)(Cc.c,{inputMode:"numeric",w:28,step:1,disabled:!0,bg:"whitesmoke",onChange:function(e){d(Number(e)),a(Number(e)),(null===i||void 0===i?void 0:i.quantityBruteCVA)-(null===s||void 0===s?void 0:s.quantityParProduct)<0&&alert("Le stock ne satisfait pas votre commande")},defaultValue:null===s||void 0===s?void 0:s.quantityParProduct,children:[Object(x.jsx)(Cc.d,{}),Object(x.jsxs)(Cc.e,{children:[Object(x.jsx)(Cc.b,{}),Object(x.jsx)(Cc.a,{})]})]})}),4==(null===s||void 0===s?void 0:s.correctiontype)?Object(x.jsx)("div",{children:Object(x.jsx)(Bs.a,{textTransform:"uppercase",className:"text text-danger",children:"CE PRODUIT A ETE RETIR\xc9"})}):Object(x.jsxs)("div",{children:[Object(x.jsx)(Bs.a,{textTransform:"uppercase",children:"Restituable"}),Object(x.jsxs)(Cc.c,{inputMode:"numeric",w:28,step:1,bg:"whitesmoke",min:0,onChange:function(e){d(Number(e)),a(Number(e))},defaultValue:null===i||void 0===i?void 0:i.quantityBruteCVA,max:null===i||void 0===i?void 0:i.quantityBrute,children:[Object(x.jsx)(Cc.d,{}),Object(x.jsxs)(Cc.e,{children:[Object(x.jsx)(Cc.b,{}),Object(x.jsx)(Cc.a,{})]})]})]})]}):Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(Cc.c,{inputMode:"numeric",w:28,step:1,bg:"whitesmoke",onChange:function(e){d(Number(e)),a(Number(e)),(null===i||void 0===i?void 0:i.quantityBruteCVA)-(null===s||void 0===s?void 0:s.quantityParProduct)<0&&alert("Le stock ne satisfait pas votre commande")},min:0,defaultValue:null===t||void 0===t?void 0:t.quantityParProduct,max:null===i||void 0===i?void 0:i.quantityBrute,children:[Object(x.jsx)(Cc.d,{}),Object(x.jsxs)(Cc.e,{children:[Object(x.jsx)(Cc.b,{}),Object(x.jsx)(Cc.a,{})]})]})})})},$d=function(e){return 1==e.correctiontype?{text:"plus (+"+e.correction+")",textStyle:"text text-info",date:fe(e.datedecorrection),style:"badge badge-info"}:2==e.correctiontype?{text:"moins (-"+e.correction+")",textStyle:"text text-warning",date:fe(e.datedecorrection),style:"badge badge-warning"}:3==e.correctiontype?{text:"ajouter au commande ( + "+e.correction+")",textStyle:"text text-success",date:fe(e.datedecorrection),style:"badge badge-success"}:4==e.correctiontype?{text:"supprimer du commande ( - "+e.correction+")",textStyle:"text text-danger",date:fe(e.datedecorrection),style:"badge badge-danger"}:void 0},el=function(e){var t=e.state,n=e.index,c=e.setState,a=e.cloneCommandes,i=e.product,s=e.realstock,d=(e.realcommand,Object(r.useState)(null)),l=Object(O.a)(d,2),o=l[0],u=l[1],j=Object(r.useState)(null),b=Object(O.a)(j,2),m=b[0],v=b[1],h=s.find((function(e){return e.id==i.id})),p=null===a||void 0===a?void 0:a.contenu.find((function(e){return e.id==i.id}));return Object(x.jsxs)("div",{className:" mb-2 p-2",style:{opacity:(null===h||void 0===h?void 0:h.quantityBruteCVA)<(null===p||void 0===p?void 0:p.quantityParProduct)?.8:1,border:(null===h||void 0===h?void 0:h.quantityBruteCVA)<(null===p||void 0===p?void 0:p.quantityParProduct)?"1px solid red":"1px solid gray"},children:[(null===h||void 0===h?void 0:h.quantityBruteCVA)<(null===p||void 0===p?void 0:p.quantityParProduct)&&Object(x.jsx)("div",{className:"text-danger text-sm",children:"** Des operations ont \xeate d\xe9ja faite apres la sortie vers magasin et vous ne pourrez pas retourner tous les produits au dep\xf4t**"}),Object(x.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(x.jsxs)("div",{style:{width:"45%"},children:[i.correction>0&&Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{className:$d(i).style,children:Object(x.jsx)("p",{children:$d(i).text})}),Object(x.jsxs)("p",{className:$d(i).textStyle,children:["Date de modification:",$d(i).date]})]}),Object(x.jsx)("p",{className:"text-blue",children:i.name}),Object(x.jsx)("span",{className:"text-lowercase",children:Object(x.jsxs)("strong",{children:[0!=i.quantityParProduct&&ge(i.prixVente),0==i.quantityParProduct&&0!=i.prixParCC&&Object(x.jsx)(x.Fragment,{children:null!=i.prixqttccvente&&0!=i.prixqttccvente?ge(i.prixqttccvente):ge(i.prixParCC)}),0!=i.quantityParProduct&&" x "+i.quantityParProduct+" "+i.type," ",null==i.prixqttccvente&&0==i.prixqttccvente&&Object(x.jsx)(x.Fragment,{children:0!=i.qttByCC&&(0==i.quantityParProduct?" x ":"+")+i.qttByCC+"ML"})]})})]}),Object(x.jsxs)("div",{className:"text-inline text-center",children:[Object(x.jsx)("h5",{className:"mb-1",children:i.type}),Object(x.jsx)(Zd,{index:n,state:t,setState:c,product:i,realcommand:p,setRealQttCC:u,setRealQtt:v,realQtt:m,stock:h,realQttCC:o})]})]})]})},tl=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0};function nl(e){var t,n,c;for(c in t=Array.isArray(e)?[]:{},e)n=e[c],t[c]="object"===typeof n?nl(n):n;return t}var cl=function(e){var t,n,c=e.state,a=(e.meta,e.setState),i=e.realstock,s=e.disabled,d=e.cloneCommandes,l=e.commandes,u=Object(r.useState)("direct"),j=Object(O.a)(u,2),b=j[0],m=(j[1],Object(r.useState)(1)),v=Object(O.a)(m,2),h=(v[0],v[1],Object(r.useState)(null)),p=Object(O.a)(h,2),f=(p[0],p[1],Object(r.useState)(null)),g=Object(O.a)(f,2),N=(g[0],g[1]),C=Object(o.g)(),y=Object(r.useState)([]),q=Object(O.a)(y,2),A=q[0],S=q[1],E=Object(ie.d)((function(e){return{tomagasins:e.tomagasins}})),w=E.tomagasins;Object(r.useEffect)((function(){S(null===l||void 0===l?void 0:l.contenu)}),[l]);var P=Object(ie.c)(),V=Object(ie.d)(vn("emprunters").value),R=new Date,F=Object(r.useState)(R),D=Object(O.a)(F,2),M=D[0],B=D[1];Object(r.useEffect)((function(){}),[]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(Bc.a,{children:[Object(x.jsx)(Bc.a.Header,{className:" bg-dark py-3 text-white d-flex justify-content-between align-items-center",children:Object(x.jsx)("div",{style:{width:"60%"},children:"BON DE SORTIE"})}),Object(x.jsxs)("div",{className:"commande-vente",children:[Object(x.jsx)(Bc.a.Body,{style:{padding:12,marginTop:3,marginRight:2,marginLeft:2},children:Object(x.jsxs)("div",{style:{overflowY:"auto",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(x.jsxs)("div",{className:"alert alert-warning",children:[Object(x.jsx)("span",{className:"text-uppercase",children:"Attention !!!"})," , la modification d'un bon de sortie entraine aussi la mis \xe0 jour de stock du produit"]}),Object(x.jsxs)("div",{class:"form-group",children:[Object(x.jsxs)("label",{children:["Date de sortie : ",fe(M)]}),Object(x.jsx)("div",{children:Object(x.jsx)("input",{disabled:s,type:"date",onChange:function(e){return B(e.target.value)},value:M,className:"form-control"})})]}),"credit"===b&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("label",{children:"Crediteur:"}),Object(x.jsxs)("select",{disabled:s,className:"form-control",onChange:function(e){N(e.target.value)},children:[Object(x.jsx)("option",{value:""}),V.map((function(e){return Object(x.jsx)("option",{value:e.id,children:e.name})}))]})]}),(null===c||void 0===c?void 0:c.length)<=0&&Object(x.jsx)("div",{className:"alert alert-success ",children:"Aucune enregistrement trouv\xe9"}),null===c||void 0===c?void 0:c.map((function(e,t){return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(el,{product:zt.a.cloneDeep(e),state:c,index:t,realcommand:e,cloneCommandes:d,realstock:i,setState:a,basket:w,dispatch:P},"".concat(null===e||void 0===e?void 0:e.id,"_").concat(t))})}))]})}),(null===c||void 0===c?void 0:c.length)>0&&Object(x.jsxs)(Bc.a.Footer,{className:"d-flex align-items-center justify-content-between",children:[Object(x.jsx)("div",{style:{width:"30%"},children:Object(x.jsx)("h2",{className:"p-2 text-uppercase bg-primary",children:Object(x.jsxs)("strong",{"data-test-id":"total-price-orders",children:["Total:",ge(tl(null===c||void 0===c?void 0:c.map((function(e){return e.prixVente*e.quantityParProduct})))+tl(null===c||void 0===c||null===(t=c.state)||void 0===t?void 0:t.map((function(e){return e.prixParCC*e.qttByCC}))))]})})}),Object(x.jsx)("div",{style:{width:"70%"},children:(null===c||void 0===c?void 0:c.length)>0&&Object(x.jsxs)("div",{className:"d-flex text-right align-items-end justify-content-end",children:[Object(x.jsx)("button",(n={disabled:s,className:"btn btn-green btn-sm mr-2"},Object(Ge.a)(n,"disabled",0===(null===c||void 0===c?void 0:c.length)),Object(Ge.a)(n,"onClick",(function(){var e=function(){var e=nl(A).filter((function(e){return!c.find((function(t){return e.id===t.id}))})),t=c.filter((function(e){return!nl(A).find((function(t){return e.id===t.id}))}));return{exist:nl(A).map((function(e){return c.find((function(t){return t.id===e.id}))})).filter((function(e){return null!=e})),added:t,missing:e}}(),t=e.exist,n=e.added,r=e.missing;P(xn("commandes").updateTransaction({id:null===l||void 0===l?void 0:l.id,contenu:c,type:"cva",sorte:"sortie",status:!0,dateCom:null!=M?M:R,exist:t,added:n,missing:r},"update-to-magasin")),C.push(I)})),Object(Ge.a)(n,"type","button"),Object(Ge.a)(n,"children","Valider l'operation"),n)),Object(x.jsx)("button",{disabled:s,className:"btn btn-danger btn-sm",onClick:function(){null===c||void 0===c||c.forEach((function(e){e.quantityParProduct=0,e.qttByCC=0})),P(Ya())},type:"button",children:Object(x.jsx)("span",{children:"Annuler"})})]})})]})]})]})})},rl=function(e){var t,n=e.state,c=e.setState,r=e.product,a=e.cloneCommandes,i=(Object(ie.c)(),!!(null===n||void 0===n?void 0:n.find((function(e){return(null===e||void 0===e?void 0:e.id)===r.id})))),s=null===a||void 0===a?void 0:a.contenu.find((function(e){return e.id==r.id})),d=(null===r||void 0===r?void 0:r.quantityBruteCVA)<(null===s||void 0===s?void 0:s.quantityParProduct);return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(zc.a.Item,{className:"mb-2 mr-3",style:{border:"1px solid gray"},children:Object(x.jsx)("div",{className:" d-flex justify-content-between align-items-center",children:Object(x.jsxs)("div",{className:" ".concat(r.id?"":"product-loading"),style:{boxShadow:r&&i?"15px 10px 15px rgba(0, 0, 0, .07)":"none"},children:[Object(x.jsxs)("div",{children:[4==(null===s||void 0===s?void 0:s.correctiontype)&&Object(x.jsx)("div",{className:"badge badge-danger",children:Object(x.jsx)("h2",{textTransform:"uppercase",children:"CE PRODUIT A ETE RETIR\xc9"})}),Object(x.jsxs)("div",{children:[r.name," "]}),Object(x.jsx)("div",{class:"badge badge-primary",children:null===r||void 0===r||null===(t=r.fournisseur)||void 0===t?void 0:t.name}),Object(x.jsx)("br",{})]})," ",Object(x.jsx)("div",{children:(null===r||void 0===r?void 0:r.id)&&Object(x.jsx)(x.Fragment,{children:i?Object(x.jsx)("button",{disabled:d,className:"btn btn-danger btn-sm",onClick:function(){return function(e){c(n.filter((function(t){return t.id!==e})))}(null===r||void 0===r?void 0:r.id)},children:"Retirer"}):Object(x.jsx)("button",{className:"btn btn-green btn-sm",onClick:function(){c(n.some((function(e){return e.id===r.id}))?n:[r].concat(Object(ce.a)(n)))},children:"Ajouter"})})})]})})})})},al=function(){var e=Object(o.i)().id,t=(Object(o.g)(),Object(r.useState)(!1)),n=Object(O.a)(t,2),c=n[0],i=n[1],s=Object(ie.c)(),d=Object(ie.d)(vn("commandes").value),l=Object(ie.d)(vn("commandesclone").value),u=Object(ie.d)(vn("commandes").meta),j=Object(ie.d)(vn("products").value),b=Object(ie.d)(vn("products").meta),m=Object(r.useState)([]),v=Object(O.a)(m,2),h=v[0],p=v[1];a.a.useEffect((function(){s(xn("commandesclone").get(e)),s(xn("commandes").get(e))}),[e]);var f=Object(r.useState)(""),g=Object(O.a)(f,2),N=g[0],C=g[1],y=Object(r.useState)([]),q=Object(O.a)(y,2),A=q[0],S=q[1];a.a.useEffect((function(){return 1==c&&(s(xn("products").fetch()),i(!1)),function(){i(!1)}}),[c]);var E=Object(r.useState)(),w=Object(O.a)(E,2),P=w[0],V=w[1];a.a.useEffect((function(){p(null!=P?xa(j,N,P):lr(j,N))}),[N]),a.a.useEffect((function(){p(""!=N?xa(j,N,P):ba(j,P))}),[P]),a.a.useEffect((function(){s(xn("products").fetch())}),[]),a.a.useEffect((function(){}),[P]),a.a.useEffect((function(){var e;u.isFetching||S(null===(e=d[0])||void 0===e?void 0:e.contenu)}),[u]),a.a.useEffect((function(){b.isFetching||p(j)}),[b]);return Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Edition d'un sortie vers magasin",children:Object(x.jsx)(je,{title:"Edition d'un sortie vers magasin"})}),Object(x.jsx)(xe,{children:Object(x.jsxs)(Kc.a,{className:"py-2",children:[Object(x.jsx)(Gc.a,{xs:6,children:Object(x.jsx)(zc.a,{children:Object(x.jsxs)(Bc.a,{children:[Object(x.jsx)(Bc.a.Header,{className:"d-flex justify-content-between align-items-center bg-dark text-white",children:"Produits"}),Object(x.jsxs)(Bc.a.Body,{children:[Object(x.jsx)("input",{type:"text",onChange:function(e){C(e.target.value)},placeholder:"Rechercher un produit",className:"form-control mb-2"}),Object(x.jsx)(Ra,{model:"fournisseurs",children:Object(x.jsx)(Fa,{children:function(e){var t=e.data;e.meta;return Object(x.jsx)("div",{className:"my-2",children:Object(x.jsxs)("select",{className:"form-control",selected:2==P,onChange:function(e){V(e.target.value)},children:[Object(x.jsx)("option",{value:"",children:"Selectionner un fournisseur"}),t.map((function(e){return Object(x.jsx)("option",{value:e.id,children:e.name})}))]})})}})}),Object(x.jsxs)("div",{style:{overflowY:"auto",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(x.jsxs)(x.Fragment,{children:[h.map((function(e){return Object(x.jsx)(rl,{state:A,setState:S,cloneCommandes:l[0],product:e})})),0==h.length&&"Aucune enregistrement trouv\xe9"]})," "]})]})]})})}),Object(x.jsx)(Gc.a,{xs:6,children:Object(x.jsx)(cl,{disabled:b.isFetching,state:A,meta:u,cloneCommandes:l[0],setState:S,realstock:j,commandes:d[0]})})]})})]})},il=function(e,t){var n=function(t){return!!(null===e||void 0===e?void 0:e.find((function(e){return(null===e||void 0===e?void 0:e.id)===t})))};return{frommagasin:e,isItemFromMagasin:n,addFromMagasin:function(e){n(e.id)?t(function(e){return{type:Wa,payload:e}}(e.id)):t(function(e){return{type:Ga,payload:e}}(e))}}},sl=function(e){var t,n=e.product,c=Object(ie.d)((function(e){return e.frommagasins})),r=Object(ie.c)(),i=il(c,r),s=i.isItemFromMagasin,d=i.addFromMagasin,l=!!s&&s(n.id),o=a.a.useCallback((function(){return n.quantityBruteCVA>15&&n.quantityBruteCVA<=20?"yellow":n.quantityBruteCVA>10&&n.quantityBruteCVA<=15?"#ffdb4c":n.quantityBruteCVA>5&&n.quantityBruteCVA<=10?" orange":n.quantityBruteCVA>0&&n.quantityBruteCVA<=5?"#c44e14b8":0==n.quantityBruteCVA?"red":"green"}),[n]);a.a.useCallback((function(){return n.quantityCCCVA>15&&n.quantityCCCVA<=20?"yellow":n.quantityCCCVA>10&&n.quantityCCCVA<=15?"#ffdb4c":n.quantityCCCVA>5&&n.quantityCCCVA<=10?" orange":n.quantityCCCVA>0&&n.quantityCCCVA<=5?"#c44e14b8":0==n.quantityCCCVA?"red":"green"}),[n]),a.a.useCallback((function(){return sa(n)?0==n.quantityBruteCVA&&(0==n.quantityCCCVA||null==n.quantityCCCVA)&&0==n.condval:0==n.quantityBruteCVA&&(0==n.quantityCCCVA||null==n.quantityCCCVA)}),[n]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(zc.a.Item,{className:"mb-2",style:{width:"100%",border:"1px solid gray",padding:"10px",background:"whitesmoke",borderLeft:"10px solid ".concat(o())},children:Object(x.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(x.jsx)("div",{className:" ".concat(n.id?"":"product-loading"),style:{boxShadow:n&&l?"15px 10px 15px rgba(0, 0, 0, .07)":"none"},children:Object(x.jsxs)("div",{className:"d-flex justify-content-center align-items-center",children:[Object(x.jsxs)("div",{className:"d-flex flex-column mr-2 align-items-center w-20",children:[Object(x.jsx)("div",{class:"badge badge-success mb-1",style:{borderRadius:"100%"},children:n.quantityBruteCVA}),Object(x.jsx)("div",{class:"badge badge-warning mb-1",style:{borderRadius:"100%"},children:n.condval}),Object(x.jsx)("div",{class:"badge badge-info mb-1",style:{borderRadius:"100%"},children:n.quantityCC})]}),Object(x.jsx)("div",{children:Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{children:n.name}),Object(x.jsx)("div",{class:"badge badge-primary",children:null===n||void 0===n||null===(t=n.fournisseur)||void 0===t?void 0:t.name})]})})]})}),Object(x.jsx)("div",{children:n.id&&Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("button",{disabled:Ai(n),className:"mt-3 ".concat(l?"btn btn-danger btn-sm":"btn btn-green btn-sm"),onClick:function(){d&&d(n)},children:l?"Retirer":"Ajouter"})})})]})})})},dl=a.a.memo(sl),ll=function(e){var t=e.product,n=e.setRealQtt,c=(e.maxRealQtt,e.realQtt),r=Object(ie.c)(),a=function(e){r(Cd(t.id,e))};return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Cc.c,{inputMode:"numeric",w:28,bg:"whitesmoke",min:0,value:c,defaultValue:null===t||void 0===t?void 0:t.quantityParProduct,onChange:function(e){""==e?(n(0),a(0)):(n(e),a(e))},children:[Object(x.jsx)(Cc.d,{}),Object(x.jsxs)(Cc.e,{children:[Object(x.jsx)(Cc.b,{}),Object(x.jsx)(Cc.a,{})]})]})})},ol=function(e){var t=e.product,n=e.setRealQttCC,c=(e.setRealQtt,e.setMaxRealQttCC,e.maxRealQttCC,e.realQtt,e.realQttCC),a=Object(ie.c)(),i=(Object(r.useRef)(),Object(ie.d)((function(e){return{frommagasins:e.frommagasins}})).frommagasins,function(e){a(qd(t.id,e))});return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Cc.c,{inputMode:"numeric",w:28,bg:"whitesmoke",onChange:function(e){""==e?(i(0),n(0)):(n(1*e),i(1*e))},min:0,value:c,defaultValue:null===t||void 0===t?void 0:t.qttByCC,children:[Object(x.jsx)(Cc.d,{}),Object(x.jsxs)(Cc.e,{children:[Object(x.jsx)(Cc.b,{}),Object(x.jsx)(Cc.a,{})]})]})})},ul=function(e){var t=e.product,n=e.setRealQttLitre,c=e.realQttLitre,r=e.maxRealQttByLitre,a=Object(ie.c)(),i=function(e){a(yd(t.id,e))};return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Cc.c,{inputMode:"numeric",w:28,step:1,bg:"whitesmoke",min:0,value:c,defaultValue:0,onChange:function(e){""==e?(n(0),i(0)):(n(Number(e)),i(Number(e)))},max:r,children:[Object(x.jsx)(Cc.d,{}),Object(x.jsxs)(Cc.e,{children:[Object(x.jsx)(Cc.b,{}),Object(x.jsx)(Cc.a,{})]})]})})},jl=function(e){var t=e.product,n=Object(r.useState)(null===t||void 0===t?void 0:t.qttByCC),c=Object(O.a)(n,2),a=c[0],i=c[1],s=Object(r.useState)(null===t||void 0===t?void 0:t.quantityParProduct),d=Object(O.a)(s,2),l=d[0],o=d[1],u=Object(r.useState)(0),j=Object(O.a)(u,2),b=j[0],m=j[1],v=Object(r.useState)(2e3),h=Object(O.a)(v,2),p=h[0],f=h[1],g=Object(r.useState)(2e3),N=Object(O.a)(g,2),C=N[0],y=N[1],q=Object(r.useState)(2e3),A=Object(O.a)(q,2),S=A[0],E=A[1],w=Object(ie.d)((function(e){return e.frommagasins})),P=Object(ie.c)(),V=il(w,P),R=V.isItemFromMagasin,F=V.addFromMagasin;Object(r.useEffect)((function(){var e=function(e,t,n,c){var r=!1;if(gi(c)){r=!0;var a=e,i=t,s=n,d=c.condval,l=c.quantityCCCVA,o=c.quantityBruteCVA,u=c.condsize,j=c.doseDefault,b=c.condml,m=!0;if(s>0&&0==a&&0==i&&s>o&&(m=!1,d=a,l=i),0==s&&a>0&&0==i){var O=0;Number(a)>Number(u)&&(O=Math.floor(Number(a)/Number(u)),d-(Number(a)-Number(u)*O)<0&&(O+=1)),o-O<0&&(m=!1,o=s,l=i)}if(0==s&&0==a&&i>0&&l-i<0){var x=0,v=0;Number(i)>Number(j)&&(x=Math.floor(Number(i)/Number(j)),l-(Number(i)-Number(j)*x)<0&&(x+=1)),Number(x)>Number(u)&&(v=Math.floor(Number(x)/Number(u)),d-(Number(x)-Number(u)*x)<0&&(v+=1)),o-v<0&&(m=!1,o=s,d=a)}if(0==s&&a>0&&i>0){var h=0,p=0;Number(i)>Number(b)?(h=Math.floor(Number(i)/Number(b)),l-(Number(i)-Number(b)*h)<0&&(h+=1)):l-Number(i)<0&&(h=1);var f=Number(a)+h;f>Number(u)?(p=Math.floor(f/Number(u)),d-(f-Number(u)*p)<0&&(p+=1)):d-f<0&&(p=1),o-p<0&&(m=!1,o=s,d=a)}if(s>0&&a>0&&0==i){var g=0;Number(a)>Number(u)?(g=Math.floor(Number(a)/Number(u)),d-(Number(a)-Number(u)*g+a)<0&&(g+=1)):d-Number(a)<0&&(g=1),o-(g+s)<0&&(m=!1,o=s,d=a)}if(s>0&&0==a&&i>0){var N=0,C=0;Number(i)>Number(b)?(N=Math.floor(Number(i)/Number(b)),l-(Number(i)-Number(b)*N)<0&&(N+=1)):l-Number(i)<0&&(N=1),Number(N)>Number(u)?(C=Math.floor(Number(N)/Number(u)),d-(Number(N)-Number(u)*C)<0&&(C+=1)):d-N<0&&(C=1),o-(C+s)<0&&(m=!1,d=a)}if(s>0&&a>0&&i>0){var y=0,q=0;Number(i)>Number(b)?(y=Math.floor(Number(i)/Number(b)),l-(Number(i)-Number(b)*y)<0&&(y+=1)):l-Number(i)<0&&(y=1);var A=Number(y)+Number(a);A>Number(u)?(q=Math.floor(A/Number(u)),d-(A-Number(u)*q)<0&&(q+=1)):d-A<0&&(q=1),o-(q+s)<0&&(m=!1)}return{normalQtt:d,normalQttCC:l,normalQttLitre:o,isSpecific:r,isValid:m}}var S=e,E=t,w=c.quantityBruteCVA,P=c.quantityCCCVA,V=c.doseDefault,R=c.quantityBruteCVA;r=!1;var F=!0;if(0==S&&E>0){var D=0,M=0;Number(E)>Number(V)?(D=Math.floor(Number(E)/Number(V)),M=Number(E)-Number(V)*D,console.log(M),P-M<0&&(D+=1)):P-Number(E)<0&&(D=1),E>P&&w-D<0&&(F=!1,w=S)}if(S>0&&0==E&&S>w&&(F=!1,P=E),S>0&&E>0){var B,T=0;Number(E)>Number(V)?(B=Math.floor(Number(E)/Number(V)),T=Number(E)-Number(V)*B,console.log(T),P-T<0&&(B+=1)):P-Number(E)<0&&(B=1),Number(w)-(Number(B)+Number(S))<0&&(F=!1),S>w&&(F=!1,P=E)}return{normalQtt:w,normalQttCC:P,normalQttLitre:R,isValid:F,isSpecific:r}}(l,a,b,t),n=e.normalQtt,c=e.normalQttCC,r=e.normalQttLitre,s=e.isSpecific;e.isValid||(alert("stock insuffisant :("),s?(m(r),E(r),o(n),f(n),i(c),y(c)):(o(n),f(n),i(c),y(c)))}),[l,a,b]);var D=!!R&&R(t.id);return Object(x.jsx)("div",{children:Object(x.jsxs)("div",{className:"d-flex justify-content-between align-items-center border   mb-2 p-2",children:[Object(x.jsxs)("div",{style:{width:"45%"},children:[Object(x.jsx)("p",{className:"text-blue",children:t.name}),gi(t)?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("p",{className:"text-lowercase",children:Object(x.jsx)("strong",{children:0!=t.qttbylitre&&Object(x.jsx)("span",{style:{marginRight:"30px"},children:ge(t.prixlitre)+" x "+t.qttbylitre+" Litre(s)"})})}),Object(x.jsx)("p",{className:"text-lowercase",children:Object(x.jsx)("strong",{children:0!=t.quantityParProduct&&Object(x.jsx)("span",{style:{marginRight:"30px"},children:ge(t.prixqttccvente*t.qttccpvente)+" x "+t.quantityParProduct+" "+t.type})})})]}):Object(x.jsx)("p",{className:"text-lowercase",children:Object(x.jsx)("strong",{children:0!=t.quantityParProduct&&Object(x.jsx)("span",{style:{marginRight:"30px"},children:ge(t.prixVente)+" x "+t.quantityParProduct+" "+t.type})})}),Object(x.jsx)("p",{className:"text-lowercase",children:Object(x.jsx)("strong",{children:0!=t.qttByCC&&Object(x.jsx)("span",{style:{marginRight:"30px"},children:ge(t.prixParCC)+" x "+t.qttByCC+" ML"})})})]}),0!==t.condml&&0!==t.qttccpvente&&Object(x.jsxs)("div",{className:"text-inline text-center mr-3",children:[Object(x.jsx)("h5",{className:"mb-1 text-uppercase",children:"Litre"}),Object(x.jsx)(ul,{product:t,setRealQttLitre:m,realQttLitre:b,maxRealQttByLitre:S})," "]}),Object(x.jsxs)("div",{className:"text-inline text-center mr-2",children:[Object(x.jsx)("h5",{className:"mb-1",children:t.type}),Object(x.jsx)(ll,{product:t,setRealQtt:o,setMaxRealQtt:f,maxRealQtt:p,realQtt:l})]}),"FLACON"===t.type&&Object(x.jsxs)("div",{className:"text-inline text-center",children:[Object(x.jsx)("h5",{className:"mb-1",children:3==t.categoryId?"DOSE":"ML"}),Ce(t.name,"ita new")&&Object(x.jsx)(pd,{product:t,setRealQttCC:i,realQttCC:a}),Ce(t.name,"sovax")&&Object(x.jsx)(gd,{setRealQttCC:i,realQttCC:a,product:t}),0==t.condml&&0==t.qttccpvente&&!Ce(t.name,"sovax")&&!Ce(t.name,"ita new")&&Object(x.jsx)(ol,{setRealQttCC:i,realQttCC:a,maxRealQttCC:C,product:t}),0!==t.condml&&0!==t.qttccpvente&&Object(x.jsx)(fd,{product:t,setRealQttCC:i,realQttCC:a,maxRealQttCC:C})]}),Object(x.jsx)("div",{className:"ml-2",children:D&&Object(x.jsx)("button",{onClick:function(){F&&F(t)},className:"btn btn-danger btn-xs text-right",children:"X"})})]})})},bl={fromMagasin:{emptyOrder:"Aucune commande"}},ml=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0},Ol=function(){var e=Object(r.useState)("vente-cva"),t=Object(O.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(null),i=Object(O.a)(a,2),s=i[0],d=(i[1],Object(r.useState)(null)),l=Object(O.a)(d,2),u=l[0],j=l[1],b=Object(o.g)(),m=Object(ie.d)((function(e){return{frommagasins:e.frommagasins}})).frommagasins,v=Object(ie.c)(),h=Object(ie.d)(vn("emprunters").value),p=Object(r.useState)(!1),f=Object(O.a)(p,2),g=(f[0],f[1],new Date),N=Object(r.useState)(g),C=Object(O.a)(N,2),y=C[0],q=C[1];Object(r.useEffect)((function(){v(xn("emprunters").fetch())}),[]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(Bc.a,{children:[Object(x.jsxs)(Bc.a.Header,{className:" bg-dark py-2 text-white d-flex justify-content-between align-items-center",children:[Object(x.jsxs)("div",{style:{width:"60%"},children:["BON DE SORTIE ("," ".concat(null===m||void 0===m?void 0:m.length," ").concat((null===m||void 0===m?void 0:m.length)>1?"articles":"article"),")"]}),Object(x.jsx)("div",{style:{width:"40%"},className:"text-right",children:Object(x.jsxs)("select",{className:"form-control input-sm",onChange:function(e){c(e.target.value)},children:[Object(x.jsx)("option",{value:"vente-cva",selected:!0,children:"Comptant"}),Object(x.jsx)("option",{value:"credit-cva",children:"Credit"})]})})]}),Object(x.jsxs)("div",{className:"commande-vente",children:[Object(x.jsxs)(Bc.a.Body,{style:{padding:2,marginTop:3,marginRight:2,marginLeft:2},children:[Object(x.jsx)("div",{className:"d-flex justify-content-end"}),Object(x.jsxs)("div",{style:{overflowY:"auto",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(x.jsxs)("div",{class:"form-group",children:[Object(x.jsx)("label",{children:"Date de sortie :"}),Object(x.jsx)("div",{children:Object(x.jsx)("input",{type:"date",onChange:function(e){return q(e.target.value)},value:y,className:"form-control"})})]}),"credit-cva"===n&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("label",{children:"Crediteur:"}),Object(x.jsxs)("select",{className:"form-control",onChange:function(e){j(e.target.value)},children:[Object(x.jsx)("option",{value:""}),h.map((function(e){return Object(x.jsx)("option",{value:e.id,children:e.name})}))]})]}),(null===m||void 0===m?void 0:m.length)<=0&&Object(x.jsx)("div",{className:"alert alert-success ",children:bl.fromMagasin.emptyOrder}),null===m||void 0===m?void 0:m.map((function(e,t){return Object(x.jsx)(jl,{product:e,basket:m,dispatch:v},"".concat(null===e||void 0===e?void 0:e.id,"_").concat(t))}))]})]}),(null===m||void 0===m?void 0:m.length)>0&&Object(x.jsxs)(Bc.a.Footer,{className:"d-flex align-items-center justify-content-between",children:[Object(x.jsx)("div",{style:{width:"40%"},children:Object(x.jsx)("h2",{className:"p-2 text-uppercase bg-primary",children:Object(x.jsxs)("strong",{"data-test-id":"total-price-orders",children:["Total:",ge(ml(m.map((function(e){return sa(e)?e.prixqttccvente*e.quantityParProduct*e.qttccpvente+e.prixlitre*e.qttbylitre:e.prixVente*e.quantityParProduct})))+ml(m.map((function(e){return e.prixParCC*e.qttByCC}))))]})})}),Object(x.jsx)("div",{style:{width:"60%"},children:m.length>0&&Object(x.jsxs)("div",{className:"d-flex text-right align-items-end justify-content-end",children:[Object(x.jsx)("button",{className:"btn btn-green btn-sm mr-2",disabled:0===m.length,onClick:function(){Si(m)?alert("commande non-conforme,veuillez verifier!!"):(m.forEach((function(e){!function(e){if(wd(e)){var t=e.quantityParProduct,n=e.qttByCC,c=e.qttbylitre,r=e.condval,a=e.quantityCCCVA,i=e.condsize,s=(e.doseDefault,e.condml);if(c>0&&0==t&&0==n&&(e.quantityBruteCVA-=c),0==c&&t>0&&0==n){var d=0,l=0;if(Number(t)>=Number(i))if(d=Math.floor(Number(t)/Number(i)),r-(l=Number(t)-Number(i)*d)<0){var o=Number(l)-Number(r);e.condval=Number(i)-Number(o),d+=1}else e.condval=r-l;else if(e.condval-Number(t)<0){var u=Number(t)-Number(e.condval),j=Number(i)-Number(u);e.condval=j,d+=1}else e.condval-=Number(t);e.quantityBruteCVA-=d}if(0==c&&0==t&&n>0){var b=0,m=0,O=0,x=0;if(Number(n)>=Number(s))if(b=Math.floor(Number(n)/Number(s)),a-(x=Number(n)-Number(s)*b)<0){var v=Number(x)-Number(a);e.quantityCCCVA=Number(s)-Number(v),b+=1}else e.quantityCCCVA=a-x;else if(Number(n)>=e.quantityCCCVA){b+=1;var h=Number(n)-e.quantityCCCVA;e.quantityCCCVA=Number(s)-h}else e.quantityCCCVA-=Number(n);if(Number(b)>=Number(i))if(m=Math.floor(Number(b)/Number(i)),r-(O=Number(b)-Number(i)*O)<0){var p=Number(O)-Number(r);e.condval=Number(i)-Number(p),m+=1}else e.condval=r-O;else if(e.condval-Number(b)<0){var f=Number(b)-Number(e.condval),g=Number(i)-Number(f);e.condval=g,m+=1}else e.condval-=Number(b);e.quantityBruteCVA-=m}if(0==c&&t>0&&n>0){var N=0,C=0,y=0,q=0;if(Number(n)>=Number(s))if(N=Math.floor(Number(n)/Number(s)),a-(q=Number(n)-Number(s)*N)<0){var A=Number(q)-Number(a);e.quantityCCCVA=Number(s)-Number(A),N+=1}else e.quantityCCCVA=Number(a)-q;else if(Number(n)>=e.quantityCCCVA){N+=1;var S=Number(n)-e.quantityCCCVA;e.quantityCCCVA=Number(s)-S}else e.quantityCCCVA-=Number(n);var E=Number(t)+N;if(E>=Number(i))if(C=Math.floor(E/Number(i)),r-(y=E-Number(i)*N)<0){var w=Number(y)-Number(r);e.condval=Number(i)-Number(w),C+=1}else e.condval=r-y;else if(e.condval-Number(E)<0){var P=Number(E)-Number(e.condval),V=Number(i)-Number(P);e.condval=V,C+=1}else e.condval-=Number(E);e.quantityBruteCVA-=C}if(c>0&&t>0&&0==n){var R=0,F=0;if(Number(t)>=Number(i))if(R=Math.floor(Number(t)/Number(i)),r-(F=Number(t)-Number(i)*R)<0){var D=Number(F)-Number(r);e.condval=Number(i)-Number(D),R+=1}else e.condval=r-F;else if(e.condval-Number(t)<0){var M=Number(t)-Number(e.condval),B=Number(i)-Number(M);e.condval=B,R+=1}else e.condval-=Number(t);e.quantityBruteCVA-=R+c}if(c>0&&0==t&&n>0){var T=0,k=0,_=0,I=0;if(Number(n)>=Number(s))if(T=Math.floor(Number(n)/Number(s)),a-(I=Number(n)-Number(s)*T)<0){var Q=Number(I)-Number(a);e.quantityCCCVA=Number(s)-Number(Q),T+=1}else e.quantityCCCVA=a-I;else if(Number(n)>=e.quantityCCCVA){T+=1;var L=Number(n)-e.quantityCCCVA;e.quantityCCCVA=Number(s)-L}else e.quantityCCCVA-=Number(n);if(Number(T)>=Number(i))if(k=Math.floor(Number(T)/Number(i)),r-(_=Number(T)-Number(i)*k)<0){var H=Number(_)-Number(r);e.condval=Number(i)-Number(H),k+=1}else e.condval=r-I;else if(e.condval-Number(T)<0){var U=Number(T)-Number(e.condval),Y=Number(i)-Number(U);e.condval=Y,k+=1}else e.condval-=Number(T);e.quantityBruteCVA-=k+c}if(c>0&&t>0&&n>0){var z=0,K=0,G=0,W=0;if(Number(n)>=Number(s))if(z=Math.floor(Number(n)/Number(s)),a-(W=Number(n)-Number(s)*z)<0){var X=Number(W)-Number(a);e.quantityCCCVA=Number(s)-Number(X),z+=1}else e.quantityCCCVA=a-W;else if(Number(n)>=e.quantityCCCVA){z+=1;var J=Number(n)-e.quantityCCCVA;e.quantityCCCVA=Number(s)-J}else e.quantityCCCVA-=Number(n);var Z=Number(z)+Number(t);if(Z>=Number(i))if(K=Math.floor(Z/Number(i)),r-(G=Z-Number(i)*K)<0){var $=Number(G)-Number(r);e.condval=Number(i)-Number($),K+=1}else e.condval=r-W;else if(e.condval-Number(Z)<0){var ee=Number(Z)-Number(e.condval),te=Number(i)-Number(ee);e.condval=te,K+=1}else e.condval-=Number(Z);e.quantityBruteCVA-=K+c}}else{var ne=e.quantityParProduct,ce=e.qttByCC,re=(e.quantityBruteCVA,e.quantityCCCVA),ae=e.doseDefault;if(0==ne&&ce>0){var ie=0,se=0;if(Number(ce)>=Number(ae))if(ie=Math.floor(Number(ce)/Number(ae)),re-(se=Number(ce)-Number(ae)*ie)<0){var de=Number(se)-Number(re);e.quantityCCCVA=Number(ae)-Number(de),ie+=1}else e.quantityCCCVA=Number(re)-se;else if(e.quantityCCCVA-Number(ce)<0){var le=Number(ce)-Number(e.quantityCCCVA);e.quantityCCCVA=Number(ae)-Number(le),ie+=1}else e.quantityCCCVA-=Number(ce);console.log(ie),e.quantityBruteCVA-=ie}if(ne>0&&0==ce&&(e.quantityBruteCVA-=ne),ne>0&&ce>0){var oe=0,ue=0;if(Number(ce)>=Number(ae))if(oe=Math.floor(Number(ce)/Number(ae)),re-(ue=Number(ce)-Number(ae)*oe)<0){var je=Number(ue)-Number(re);e.quantityCCCVA=Number(ae)-Number(je),oe+=1}else e.quantityCCCVA=Number(re)-ue;else if(e.quantityCCCVA-Number(ce)<0){var be=Number(ce)-Number(e.quantityCCCVA);e.quantityCCCVA=Number(ae)-Number(be),oe+=1}else e.quantityCCCVA-=Number(ce);var me=oe+Number(ne);e.quantityBruteCVA-=me}}}(e)})),v(xn("commandes").createTransaction({id:Math.floor(Date.now()/1e3),contenu:m,type:n,sorte:"sortie",vaccinateurId:s,status:"vente-cva"===n,emprunterId:u,dateCom:null!=y?y:g},"add-from-magasin")),v(Nd()),b.push(Q))},type:"button",children:"Valider l'operation"}),Object(x.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(){m.forEach((function(e){e.quantityParProduct=0,e.qttByCC=0})),v(js()),v(Nd())},type:"button",children:Object(x.jsx)("span",{children:"Annuler"})})]})})]})]})]})})},xl=function(){var e=Object(ie.d)(vn("products").value),t=Object(ie.d)(vn("products").meta),n=Object(ie.c)(),c=Object(r.useState)(""),a=Object(O.a)(c,2),i=a[0],s=a[1],d=Object(r.useState)(2),l=Object(O.a)(d,2),o=(l[0],l[1],Object(r.useState)(!1)),u=Object(O.a)(o,2),j=u[0],b=u[1],m=(Object(r.useRef)(null),Object(r.useRef)(null),Object(r.useState)([])),v=Object(O.a)(m,2),h=v[0],p=v[1];Object(r.useEffect)((function(){n(xn("products").fetch())}),[]),Object(r.useEffect)((function(){return 1==j&&(n(xn("products").fetch()),b(!1)),function(){b(!1)}}),[j]),Object(r.useEffect)((function(){t.isFetching||p(e.filter((function(e){return!Ai(e)})))}),[t]),Object(r.useEffect)((function(){p(lr(e.filter((function(e){return!Ai(e)})),i))}),[i]);return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(ir.a,{children:Object(x.jsx)(xs,{})}),Object(x.jsxs)(ir.a,{children:[Object(x.jsxs)("div",{className:"d-flex align-items-center flex-row mr-2",children:[Object(x.jsx)("div",{class:"badge badge-success",style:{borderRadius:"100%"},children:"30"}),Object(x.jsx)("div",{className:"mx-2",children:":Quantit\xe9"}),Object(x.jsx)("div",{class:"badge badge-warning",style:{borderRadius:"100%"},children:"3"}),Object(x.jsx)("div",{className:"mx-2",children:":Conditionnement (ML)"}),Object(x.jsx)("div",{class:"badge badge-info",style:{borderRadius:"100%"},children:"200"}),Object(x.jsx)("div",{className:"mx-2",children:":Reste en ML"})]}),Object(x.jsxs)(Kc.a,{children:[Object(x.jsx)(Gc.a,{xs:6,children:Object(x.jsxs)(Bc.a,{className:"mt-2",children:[Object(x.jsxs)(Bc.a.Header,{className:"bg-dark p-2 text-white d-flex text-uppercase justify-content-between align-items-center",children:[Object(x.jsx)("div",{style:{width:"60%"},children:"Produits"}),Object(x.jsx)("div",{children:Object(x.jsx)("button",{className:"btn btn-green btn-sm",onClick:function(){b(!0)},children:"Mettre \xe0 jour"})})]}),Object(x.jsxs)(Bc.a.Body,{children:[Object(x.jsx)("div",{class:"d-flex justify-content-between align-items-center",children:Object(x.jsx)("input",{type:"text",onChange:function(e){s(e.target.value)},placeholder:"Nom du produit",className:"form-control mb-2"})}),Object(x.jsx)(zc.a,{children:Object(x.jsxs)("div",{style:{overflowY:"auto",width:"100%",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(x.jsxs)("div",{class:"d-flex justify-content-start flex-wrap",children:[h.sort((function(e,t){return t.quantityBruteCVA-e.quantityBruteCVA})).map((function(e){return Object(x.jsx)(dl,{product:e})})),0==h.length&&"Aucune enregistrement trouv\xe9"]})," "]})})]})]})}),Object(x.jsx)(Gc.a,{xs:6,children:Object(x.jsx)("div",{className:" py-2",children:Object(x.jsx)(Ol,{setRegenerate:b})})})]})]})]})},vl=function(){return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(xl,{})})},hl=function(e){var t,n=e.product,c=Object(ie.d)((function(e){return e.frommagasins})),r=Object(ie.c)(),i=il(c,r),s=i.isItemFromMagasin,d=i.addFromMagasin,l=!!s&&s(n.id),o=a.a.useCallback((function(){return n.quantityBruteCVA>15&&n.quantityBruteCVA<=20?"yellow":n.quantityBruteCVA>10&&n.quantityBruteCVA<=15?"#ffdb4c":n.quantityBruteCVA>5&&n.quantityBruteCVA<=10?" orange":n.quantityBruteCVA>0&&n.quantityBruteCVA<=5?"#c44e14b8":0==n.quantityBruteCVA?"red":"green"}),[n]),u=a.a.useCallback((function(){return n.quantityCCCVA>15&&n.quantityCCCVA<=20?"yellow":n.quantityCCCVA>10&&n.quantityCCCVA<=15?"#ffdb4c":n.quantityCCCVA>5&&n.quantityCCCVA<=10?" orange":n.quantityCCCVA>0&&n.quantityCCCVA<=5?"#c44e14b8":0==n.quantityCCCVA?"red":"green"}),[n]);a.a.useCallback((function(){return sa(n)?0==n.quantityBruteCVA&&(0==n.quantityCCCVA||null==n.quantityCCCVA)&&0==n.condval:0==n.quantityBruteCVA&&(0==n.quantityCCCVA||null==n.quantityCCCVA)}),[n]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(zc.a.Item,{className:"mb-2 mr-3",style:{width:"100%",border:"1px solid gray",background:"whitesmoke",borderLeft:"10px solid ".concat(o())},children:Object(x.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(x.jsxs)("div",{className:" ".concat(n.id?"":"product-loading"),style:{boxShadow:n&&l?"15px 10px 15px rgba(0, 0, 0, .07)":"none"},children:[Object(x.jsx)("div",{style:{width:10,height:4,background:"".concat(u())}}),Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{children:n.name}),Object(x.jsx)("div",{class:"badge badge-primary",children:null===n||void 0===n||null===(t=n.fournisseur)||void 0===t?void 0:t.name}),Object(x.jsx)("br",{})]})," "]}),Object(x.jsx)("div",{children:n.id&&Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("button",{className:"mt-3 ".concat(l?"btn btn-danger btn-sm":"btn btn-green btn-sm"),onClick:function(){d&&d(n)},children:l?"Retirer":"Ajouter"})})})]})})})},pl=a.a.memo(hl),fl=function(e){var t=e.product,n=(e.setRealQttCC,e.setRealQtt),c=(e.realQtt,e.realQttCC,Object(ie.c)()),r=function(e){c(Cd(t.id,e))};return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Cc.c,{inputMode:"numeric",w:28,bg:"whitesmoke",min:0,defaultValue:sa(t)?null===t||void 0===t?void 0:t.condval:null===t||void 0===t?void 0:t.quantityBruteCVA,onChange:function(e){""==e?(n(sa(t)?null===t||void 0===t?void 0:t.condval:null===t||void 0===t?void 0:t.quantityBruteCVA),r(sa(t)?null===t||void 0===t?void 0:t.condval:null===t||void 0===t?void 0:t.quantityBruteCVA)):(n(e),r(e))},children:[Object(x.jsx)(Cc.d,{}),Object(x.jsxs)(Cc.e,{children:[Object(x.jsx)(Cc.b,{}),Object(x.jsx)(Cc.a,{})]})]})})},gl=function(e){var t=e.product,n=e.setRealQttCC,c=(e.setRealQtt,e.realQtt,e.realQttCC,Object(ie.c)()),a=Object(r.useRef)(),i=(Object(ie.d)((function(e){return{frommagasins:e.frommagasins}})).frommagasins,function(e){c(qd(t.id,e))});return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Cc.c,{inputMode:"numeric",w:28,step:1,ref:a,bg:"whitesmoke",defaultValue:t.quantityCCCVA,onChange:function(e){""==e?(i(t.quantityCCCVA),n(t.quantityCCCVA)):(n(1*e),i(1*e))},min:0,max:gi(t)?null===t||void 0===t?void 0:t.condml:null===t||void 0===t?void 0:t.doseDefault,children:[Object(x.jsx)(Cc.d,{}),Object(x.jsxs)(Cc.e,{children:[Object(x.jsx)(Cc.b,{}),Object(x.jsx)(Cc.a,{})]})]})})},Nl=function(e){var t=e.product,n=e.setRealQttCC,c=(e.setRealQtt,e.realQtt,e.realQttCC,Object(ie.c)());return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Cc.c,{inputMode:"decimal",w:28,step:1,bg:"whitesmoke",onChange:function(e){!function(e){c(ii(t.id,e))}(e),n(e)},min:0,defaultValue:t.quantityCCCVA,children:[Object(x.jsx)(Cc.d,{}),Object(x.jsxs)(Cc.e,{children:[Object(x.jsx)(Cc.b,{}),Object(x.jsx)(Cc.a,{})]})]})})},Cl=function(e){var t=e.product,n=Object(ie.c)();return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Cc.c,{inputMode:"decimal",w:28,bg:"whitesmoke",onChange:function(e){!function(e){n(di(t.id,e))}(e)},min:0,defaultValue:t.quantityCCCVA,children:[Object(x.jsx)(Cc.d,{}),Object(x.jsxs)(Cc.e,{children:[Object(x.jsx)(Cc.b,{}),Object(x.jsx)(Cc.a,{})]})]})})},yl=function(e){var t=e.product,n=e.setRealQttCC,c=(e.setRealQtt,e.realQtt,e.realQttCC,Object(ie.c)());return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Cc.c,{inputMode:"numeric",w:28,step:1,bg:"whitesmoke",onChange:function(e){!function(e){c(si(t.id,e))}(e),n(e)},min:0,defaultValue:t.quantityCCCVA,children:[Object(x.jsx)(Cc.d,{}),Object(x.jsxs)(Cc.e,{children:[Object(x.jsx)(Cc.b,{}),Object(x.jsx)(Cc.a,{})]})]})})},ql=function(e){var t=e.product,n=(e.setRealQttCC,e.setRealQtt,e.realQtt,e.realQttCC,Object(ie.c)()),c=function(e){n(yd(t.id,e))};return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Cc.c,{inputMode:"numeric",w:28,step:1,bg:"whitesmoke",min:0,defaultValue:null===t||void 0===t?void 0:t.quantityBruteCVA,onChange:function(e){c(""==e?0:e)},children:[Object(x.jsx)(Cc.d,{}),Object(x.jsxs)(Cc.e,{children:[Object(x.jsx)(Cc.b,{}),Object(x.jsx)(Cc.a,{})]})]})})},Al=function(e){var t,n=e.product,c=Object(r.useState)(null),a=Object(O.a)(c,2),i=a[0],s=a[1],d=Object(r.useState)(null),l=Object(O.a)(d,2),o=l[0],u=l[1],j=Object(ie.d)((function(e){return e.frommagasins})),b=Object(ie.c)(),m=il(j,b),v=m.isItemFromMagasin,h=m.addFromMagasin,p=!!v&&v(n.id);return Object(x.jsx)("div",{children:Object(x.jsxs)("div",{className:"d-flex justify-content-between align-items-center border   mb-2 p-2",children:[Object(x.jsxs)("div",{style:{width:"45%"},children:[Object(x.jsx)("p",{className:"text-blue",children:n.name}),Object(x.jsx)("div",{class:"badge badge-primary",children:null===n||void 0===n||null===(t=n.fournisseur)||void 0===t?void 0:t.name})]}),0!==n.condml&&0!==n.qttccpvente&&Object(x.jsxs)("div",{className:"text-inline text-center mr-3",children:[Object(x.jsx)("h5",{className:"mb-1 text-uppercase",children:"Litre"}),Object(x.jsx)(ql,{product:n,setRealQttCC:s,setRealQtt:u,realQtt:o,realQttCC:i})," "]}),Object(x.jsxs)("div",{className:"text-inline text-center mr-2",children:[Object(x.jsx)("h5",{className:"mb-1",children:n.type}),Object(x.jsx)(fl,{product:n,setRealQttCC:s,setRealQtt:u,realQtt:o,realQttCC:i})]}),"FLACON"===n.type&&Object(x.jsxs)("div",{className:"text-inline text-center",children:[Object(x.jsx)("h5",{className:"mb-1",children:3==n.categoryId?"DOSE":"ML"}),Ce(n.name,"ita new")&&Object(x.jsx)(Nl,{product:n,setRealQttCC:s,setRealQtt:u,realQtt:o,realQttCC:i}),Ce(n.name,"sovax")&&Object(x.jsx)(yl,{setRealQttCC:s,setRealQtt:u,realQtt:o,realQttCC:i,product:n}),0==n.condml&&0==n.qttccpvente&&!Ce(n.name,"sovax")&&!Ce(n.name,"ita new")&&Object(x.jsx)(gl,{setRealQttCC:s,setRealQtt:u,realQtt:o,realQttCC:i,product:n}),0!==n.condml&&0!==n.qttccpvente&&Object(x.jsx)(Cl,{product:n})]}),Object(x.jsx)("div",{className:"ml-2",children:p&&Object(x.jsx)("button",{onClick:function(){h&&h(n)},className:"btn btn-danger btn-xs text-right",children:"X"})})]})})},Sl=function(){var e=Object(r.useState)("vente-cva"),t=Object(O.a)(e,2),n=t[0],c=(t[1],Object(r.useState)(1)),a=Object(O.a)(c,2),i=(a[0],a[1],Object(r.useState)(null)),s=Object(O.a)(i,2),d=s[0],l=(s[1],Object(r.useState)(null)),u=Object(O.a)(l,2),j=u[0],b=u[1],m=Object(o.g)(),v=Object(ie.d)((function(e){return{frommagasins:e.frommagasins}})).frommagasins,h=Object(ie.c)(),p=Object(ie.d)(vn("emprunters").value),f=(Object(ie.d)(vn("commandes").meta),Object(ie.d)(vn("commandes").value),new Date),g=Object(r.useState)(f),N=Object(O.a)(g,2),C=N[0],y=N[1];Object(r.useEffect)((function(){h(xn("commandes").fetch()),h(xn("emprunters").fetch())}),[]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(Bc.a,{children:[Object(x.jsx)(Bc.a.Header,{className:" bg-dark py-2 text-white d-flex justify-content-between align-items-center",children:Object(x.jsxs)("div",{style:{width:"60%"},children:["Correction("," ".concat(null===v||void 0===v?void 0:v.length," ").concat((null===v||void 0===v?void 0:v.length)>1?"articles":"article"),")"]})}),Object(x.jsxs)("div",{className:"commande-vente",children:[Object(x.jsx)(Bc.a.Body,{style:{padding:2,marginTop:3,marginRight:2,marginLeft:2},children:Object(x.jsxs)("div",{style:{overflowY:"auto",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(x.jsxs)("div",{class:"form-group",children:[Object(x.jsx)("label",{children:"Date de correction :"}),Object(x.jsx)("div",{children:Object(x.jsx)("input",{type:"date",onChange:function(e){return y(e.target.value)},value:C,className:"form-control"})})]}),"credit-cva"===n&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("label",{children:"Crediteur:"}),Object(x.jsxs)("select",{className:"form-control",onChange:function(e){b(e.target.value)},children:[Object(x.jsx)("option",{value:""}),p.map((function(e){return Object(x.jsx)("option",{value:e.id,children:e.name})}))]})]}),(null===v||void 0===v?void 0:v.length)<=0&&Object(x.jsx)("div",{className:"alert alert-success ",children:bl.fromMagasin.emptyOrder}),null===v||void 0===v?void 0:v.map((function(e,t){return Object(x.jsx)(Al,{product:e,basket:v,dispatch:h},"".concat(null===e||void 0===e?void 0:e.id,"_").concat(t))}))]})}),(null===v||void 0===v?void 0:v.length)>0&&Object(x.jsxs)(Bc.a.Footer,{className:"d-flex align-items-center justify-content-between",children:[Object(x.jsx)("div",{style:{width:"30%"}}),Object(x.jsx)("div",{style:{width:"70%"},children:v.length>0&&Object(x.jsxs)("div",{className:"d-flex text-right align-items-end justify-content-end",children:[Object(x.jsx)("button",{className:"btn btn-green btn-sm mr-2",disabled:0===v.length,onClick:function(){h(xn("commandes").createTransaction({id:Math.floor(Date.now()/1e3),contenu:v,commande:v,type:"correction-cva",sorte:"sortie",vaccinateurId:d,status:!0,emprunterId:j,dateCom:null!=C?C:f},"add-to-correction")),h(Nd()),m.push(U)},type:"button",children:"Valider l'operation"}),Object(x.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(){v.forEach((function(e){e.quantityParProduct=0,e.qttByCC=0})),h(js()),h(Nd())},type:"button",children:Object(x.jsx)("span",{children:"Annuler"})})]})})]})]})]})})};function El(){var e=Object(ie.d)(vn("products").value),t=Object(ie.d)(vn("products").meta),n=Object(ie.c)(),c=Object(r.useState)(""),a=Object(O.a)(c,2),i=a[0],s=a[1],d=Object(r.useState)(2),l=Object(O.a)(d,2),o=(l[0],l[1],Object(r.useState)(!1)),u=Object(O.a)(o,2),j=u[0],b=u[1],m=(Object(r.useRef)(null),Object(r.useRef)(null),Object(r.useState)([])),v=Object(O.a)(m,2),h=v[0],p=v[1];Object(r.useEffect)((function(){n(xn("products").fetch())}),[]),Object(r.useEffect)((function(){return 1==j&&(n(xn("products").fetch()),b(!1)),function(){b(!1)}}),[j]),Object(r.useEffect)((function(){t.isFetching||p(e)}),[t]),Object(r.useEffect)((function(){p(lr(e,i))}),[i]);return Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Correction",children:Object(x.jsx)(je,{title:"Correction"})}),Object(x.jsx)(xe,{children:Object(x.jsxs)(Kc.a,{children:[Object(x.jsx)(Gc.a,{xs:6,children:Object(x.jsxs)(Bc.a,{className:"mt-2",children:[Object(x.jsxs)(Bc.a.Header,{className:"bg-dark p-2 text-white d-flex text-uppercase justify-content-between align-items-center",children:[Object(x.jsx)("div",{style:{width:"60%"},children:"Produits"}),Object(x.jsx)("div",{children:Object(x.jsx)("button",{className:"btn btn-green btn-sm",onClick:function(){s(""),b(!0)},children:"Mettre \xe0 jour"})})]}),Object(x.jsxs)(Bc.a.Body,{children:[Object(x.jsxs)("div",{class:"d-flex justify-content-between align-items-center",children:[Object(x.jsx)("input",{type:"text",onChange:function(e){s(e.target.value)},placeholder:"Nom du produit",className:"form-control mb-2"})," "]}),Object(x.jsx)(zc.a,{children:Object(x.jsxs)("div",{style:{overflowY:"auto",width:"100%",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(x.jsxs)("div",{class:"d-flex justify-content-start flex-wrap",children:[h.sort((function(e,t){return t.quantityBruteCVA-e.quantityBruteCVA})).map((function(e){return Object(x.jsx)(pl,{product:e})})),0==h.length&&"Aucune enregistrement trouv\xe9"]})," "]})})]})]})}),Object(x.jsx)(Gc.a,{xs:6,children:Object(x.jsx)("div",{className:" py-2",children:Object(x.jsx)(Sl,{setRegenerate:b})})})]})})]})}var wl=function(e){for(var t=0;t<e.length;++t)return e[t].correction>0||e[t].correctionml>0},Pl=function(){var e=Object(ie.d)((function(e){return e.searchbydate}));console.log(e);var t=Object(r.useState)([e.deb,e.fin]),n=Object(O.a)(t,2),c=n[0],i=n[1],s=(Object(r.useRef)(null),Object(r.useRef)(null),Object(ie.d)(vn("commandes").value)),d=Object(ie.d)(vn("commandes").meta),o=Object(ie.c)();Object(r.useEffect)((function(){var t,n;o((t=e.deb,n=e.fin,sn("commandes",{path:"/vente-correction?deb=".concat(t,"&fin=").concat(n),replace:!0})))}),[e.deb,e.fin]),Object(r.useEffect)((function(){null!==c&&c[0]&&o(us(c[0],c[1]))}),[c]);var u=a.a.useMemo((function(){return[{Header:"Date",Cell:function(e){var t;return Object(x.jsx)(x.Fragment,{children:fe(null===(t=e.row.original)||void 0===t?void 0:t.dateCom)})}},{Header:"Produits",Cell:function(e){var t,n,c,r,a,i;return Object(x.jsxs)("div",{style:{width:"350px"},children:[1==(null===(t=e.row.original)||void 0===t?void 0:t.isdeleted)&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"badge badge-danger",children:"Supprim\xe9"}),Object(x.jsxs)("div",{className:"text text-danger",children:["Date de suppression :"," ",fe(null===(n=e.row.original)||void 0===n?void 0:n.deletedat)]})]}),null==(null===(c=e.row.original)||void 0===c?void 0:c.isdeleted)&&Object(x.jsx)("p",{children:wl(null===(r=e.row.original)||void 0===r?void 0:r.contenu)&&Object(x.jsx)("div",{className:"badge badge-warning",children:"Modifi\xe9"})}),null===(a=e.row.original)||void 0===a||null===(i=a.contenu)||void 0===i?void 0:i.map((function(t){var n,c;return Object(x.jsxs)("tr",{children:[Object(x.jsx)("span",{style:{background:"white",color:1==(null===(n=e.row.original)||void 0===n?void 0:n.isdeleted)?"red":"inherit",padding:2},children:t.name}),Object(x.jsxs)("span",{style:{color:1==(null===(c=e.row.original)||void 0===c?void 0:c.isdeleted)?"red":"inherit"},children:[" ","  "]})]})}))]})}},{Header:"Actions",Cell:function(e){var t;return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(l.b,{to:"/detailcorrection/".concat(null===(t=e.row.original)||void 0===t?void 0:t.id),className:"btn btn-green btn-sm mr-2",children:"D\xe9tails"})})}}]}),[]);return Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Historique de correction",children:Object(x.jsx)(je,{title:"Historique de correction"})}),Object(x.jsxs)(xe,{children:[Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-lg-6",children:Object(x.jsxs)("div",{children:[Object(x.jsx)("h3",{className:"text-uppercase",children:"Historique de correction"}),Object(x.jsx)("p",{children:"".concat(fe(e.deb)," ->  ").concat(fe(e.fin))})]})}),Object(x.jsx)("div",{className:"col-lg-6 text-right",children:Object(x.jsx)(ur.a,{locale:"fr-FR",onChange:i,value:c})})," "]}),Object(x.jsx)(Qc,{data:s.sort((function(e,t){return t.id-e.id})),meta:d,columns:u})]})]})};var Vl=Object(o.j)((function(e){Object(o.h)();var t,n,c=Object(o.i)().id,a=Object(ie.d)(vn("commandes").value),i=Object(ie.c)();return Object(r.useEffect)((function(){i(xn("commandes").get(c))}),[c]),Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Historique de correction",children:Object(x.jsx)(je,{title:"Historique de correction"})}),Object(x.jsx)(xe,{children:Object(x.jsxs)("div",{children:[a.length>0&&Object(x.jsx)("div",{className:"d-flex justify-content-between",children:Object(x.jsx)("div",{className:"my-2",children:Object(x.jsxs)("h2",{className:"my-2",children:["Date : ",fe(null===(t=a[0])||void 0===t?void 0:t.dateCom)]})})}),Object(x.jsxs)("table",{className:"table table-bordered",children:[Object(x.jsxs)("tr",{className:"bg-thead",children:[Object(x.jsx)("td",{children:"Nom de l'article"}),Object(x.jsx)("td",{children:"Quantit\xe9"}),Object(x.jsx)("td",{children:"Sous total"})]}),a.length>0&&(null===(n=a[0])||void 0===n?void 0:n.contenu.map((function(e){return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{style:{width:"40%"},children:e.name}),Object(x.jsxs)(x.Fragment,{children:[0!=e.qttbybrute&&Object(x.jsxs)("div",{className:"d-flex align-items-center py-0",children:[Object(x.jsx)("strong",{className:"text-lowercase",children:"Depot:"}),ge(e.prixVente)," (","x"," ",e.qttbybrute,") "," = ",ge(e.prixVente*e.qttbybrute)]}),sa(e)&&Object(x.jsx)(x.Fragment,{children:0!=e.qttbylitre&&Object(x.jsxs)("div",{className:"d-flex align-items-center py-0 px-2",children:[Object(x.jsx)("strong",{children:"Litre :"}),ge(e.prixlitre)," (","x"," ",e.qttbylitre,")"," "," = ",ge(e.prixlitre*e.qttbylitre)]})}),0!=e.quantityParProduct&&Object(x.jsxs)("div",{className:"d-flex align-items-center py-0",children:[Object(x.jsxs)("strong",{className:"text-lowercase",children:[e.type,":"]}),ge(e.prixVente)," (","x"," ",e.quantityParProduct,") "," = ",ge(e.prixVente*e.quantityParProduct)]})]}),"FLACON"==e.type&&Object(x.jsx)(x.Fragment,{children:0!=e.qttByCC&&Object(x.jsxs)("div",{className:"d-flex align-items-center  py-0",children:[Object(x.jsx)("strong",{children:"ml:"})," ",ge(e.prixParCC)," ","x"," ",0!=e.qttyspecificmirror?e.qttyspecificmirror+" Dose":e.qttByCC+" ml"," "," = "," ",ge(e.prixParCC*e.qttByCC)]})}),Object(x.jsx)("td",{children:sa(e)?ge(e.prixqttccvente*e.quantityParProduct*e.qttccpvente+e.prixlitre*e.qttbylitre+e.prixParCC*e.qttByCC):ge(e.prixVente*e.quantityParProduct+e.prixParCC*e.qttByCC)})]})})))]})]})})]})}));function Rl(){return Cr.b().shape({name:Cr.c().required("Le champ est requis")})}var Fl=function(){Object(ie.d)(vn("fournisseurs").value);var e=Object(ie.c)(),t=Object(o.g)();return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Ajouter un fournisseur",children:Object(x.jsx)(je,{title:"Ajouter un fournisseur"})}),Object(x.jsx)(xe,{children:Object(x.jsx)(Rc,{id:"add-form-fournisseur",enableReinitialize:!0,initialValues:{name:""},validations:Rl,onSubmit:function(n,c){var r=n.name;e(xn("fournisseurs").create({name:r})),t.push(z)},render:function(e){e.values;return Object(x.jsx)(Rc.Element,{children:Object(x.jsx)("div",{className:"row",children:Object(x.jsx)("div",{className:"col-lg-6",children:Object(x.jsxs)("div",{className:"card",children:[Object(x.jsx)("div",{className:"card-header bg-dark text-white",children:"Information g\xe9n\xe9rale"}),Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsx)(Rc.Field.Input,{name:"name",label:"Nom",placeholder:"Nom"}),Object(x.jsxs)("div",{className:"mt-3",children:[Object(x.jsx)("button",{className:"btn btn-green  btn-sm ",type:"submit",children:"Ajouter"}),Object(x.jsx)("button",{className:"btn btn-danger ml-2  btn-sm ",type:"reset",children:"Annuler"})]})]})]})})})})}})})]})})};var Dl=function(){var e=Object(o.i)().id,t=Object(ie.d)(vn("fournisseurs").value),n=Object(ie.d)(vn("fournisseurs").meta),c=Object(r.useState)({name:""}),a=Object(O.a)(c,2),i=a[0],s=a[1],d=Object(o.g)(),l=Object(ie.c)(),u=Object(r.useState)({}),j=Object(O.a)(u,2);return j[0],j[1],Object(r.useEffect)((function(){l(xn("fournisseurs").fetch())}),[e]),Object(r.useEffect)((function(){n.isFetching||s(null===t||void 0===t?void 0:t.find((function(t){return t.id==e})))}),[n]),Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Editer un fournisseur",children:Object(x.jsx)(je,{title:"Editer un fournisseur"})}),Object(x.jsx)(xe,{children:Object(x.jsx)(Rc,{id:"add-form-fournisseur",initialValues:{name:i.name},validations:Rl,onSubmit:function(e,t){var n=e.name;l(xn("fournisseurs").update({id:i.id,name:n})),d.push(z)},render:function(e){var t=e.values;return Object(x.jsx)(Rc.Element,{children:Object(x.jsx)("div",{className:"row",children:Object(x.jsx)("div",{className:"col-lg-6",children:Object(x.jsxs)("div",{className:"card",children:[Object(x.jsx)("div",{className:"card-header bg-dark text-white",children:"Information g\xe9n\xe9rale"}),Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsx)(Rc.Field.Input,{name:"name",value:null===t||void 0===t?void 0:t.name,label:"Nom",placeholder:"Nom"}),Object(x.jsxs)("div",{className:"mt-3",children:[Object(x.jsx)("button",{className:"btn btn-green  btn-sm ",type:"submit",children:"Editer"}),Object(x.jsx)("button",{className:"btn btn-danger ml-2 btn-sm ",type:"reset",children:"Annuler"})]})]})]})})})})}})})]})};function Ml(){return Cr.b().shape({name:Cr.c().required("Le champ est requis")})}var Bl=function(){Object(ie.d)(vn("categories").value);var e=Object(ie.c)(),t=Object(o.g)();return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Ajouter un categorie",children:Object(x.jsx)(je,{title:"Ajouter un categorie"})}),Object(x.jsx)(xe,{children:Object(x.jsx)(Rc,{id:"add-form-categorie",enableReinitialize:!0,initialValues:{name:""},validations:Ml,onSubmit:function(n,c){var r=n.name;e(xn("categories").create({name:r})),t.push(G)},render:function(e){e.values;return Object(x.jsx)(Rc.Element,{children:Object(x.jsx)("div",{className:"row",children:Object(x.jsx)("div",{className:"col-lg-6",children:Object(x.jsxs)("div",{className:"card",children:[Object(x.jsx)("div",{className:"card-header bg-dark text-white",children:"Information g\xe9n\xe9rale"}),Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsx)(Rc.Field.Input,{name:"name",label:"Nom",placeholder:"Nom"}),Object(x.jsxs)("div",{className:"mt-3",children:[Object(x.jsx)("button",{className:"btn btn-green  btn-sm ",type:"submit",children:"Ajouter"}),Object(x.jsx)("button",{className:"btn btn-danger ml-2  btn-sm ",type:"reset",children:"Annuler"})]})]})]})})})})}})})]})})};var Tl=function(){var e=Object(o.i)().id,t=Object(ie.d)(vn("categories").value),n=Object(ie.d)(vn("categories").meta),c=Object(r.useState)({name:""}),a=Object(O.a)(c,2),i=a[0],s=a[1],d=Object(o.g)(),l=Object(ie.c)(),u=Object(r.useState)({}),j=Object(O.a)(u,2);return j[0],j[1],Object(r.useEffect)((function(){l(xn("categories").fetch())}),[e]),Object(r.useEffect)((function(){n.isFetching||s(null===t||void 0===t?void 0:t.find((function(t){return t.id==e})))}),[n]),Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Editer un categorie",children:Object(x.jsx)(je,{title:"Editer un categorie"})}),Object(x.jsx)(xe,{children:Object(x.jsx)(Rc,{id:"add-form-categorie",initialValues:{name:i.name},validations:Ml,onSubmit:function(e,t){var n=e.name;l(xn("categories").update({id:i.id,name:n})),d.push(G)},render:function(e){var t=e.values;return Object(x.jsx)(Rc.Element,{children:Object(x.jsx)("div",{className:"row",children:Object(x.jsx)("div",{className:"col-lg-6",children:Object(x.jsxs)("div",{className:"card",children:[Object(x.jsx)("div",{className:"card-header bg-dark text-white",children:"Information g\xe9n\xe9rale"}),Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsx)(Rc.Field.Input,{name:"name",value:null===t||void 0===t?void 0:t.name,label:"Nom",placeholder:"Nom"}),Object(x.jsxs)("div",{className:"mt-3",children:[Object(x.jsx)("button",{className:"btn btn-green  btn-sm ",type:"submit",children:"Editer"}),Object(x.jsx)("button",{className:"btn btn-danger ml-2 btn-sm ",type:"reset",children:"Annuler"})]})]})]})})})})}})})]})};function kl(){return Cr.b().shape({name:Cr.c().required("Le champ est requis")})}var _l=function(){Object(ie.d)(vn("emprunters").value);var e=Object(ie.c)(),t=Object(o.g)();return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Ajouter un personne",children:Object(x.jsx)(je,{title:"Ajouter un personne"})}),Object(x.jsx)(xe,{children:Object(x.jsx)(Rc,{id:"add-form-emprunters",enableReinitialize:!0,initialValues:{name:"",contact:""},validations:kl,onSubmit:function(n,c){var r=n.name,a=n.contact;e(xn("emprunters").create({name:r,contact:a})),t.goBack()},render:function(e){e.values;return Object(x.jsx)(Rc.Element,{children:Object(x.jsx)("div",{className:"row",children:Object(x.jsx)("div",{className:"col-lg-6",children:Object(x.jsxs)("div",{className:"card",children:[Object(x.jsx)("div",{className:"card-header bg-dark text-white",children:"Information g\xe9n\xe9rale"}),Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsx)(Rc.Field.Input,{name:"name",label:"Nom",placeholder:"Nom"}),Object(x.jsx)(Rc.Field.Input,{name:"contact",label:"T\xe9l\xe9phone",placeholder:"T\xe9l\xe9phone"}),Object(x.jsxs)("div",{className:"mt-3",children:[Object(x.jsx)("button",{className:"btn btn-green  btn-sm ",type:"submit",children:"Ajouter"}),Object(x.jsx)("button",{className:"btn btn-danger ml-2  btn-sm ",type:"reset",children:"Annuler"})]})]})]})})})})}})})]})})};var Il=function(){var e=Object(o.i)().id,t=Object(ie.d)(vn("emprunters").value),n=Object(ie.d)(vn("emprunters").meta),c=Object(r.useState)({name:"",contact:""}),a=Object(O.a)(c,2),i=a[0],s=a[1],d=Object(o.g)(),l=Object(ie.c)(),u=Object(r.useState)({}),j=Object(O.a)(u,2);return j[0],j[1],Object(r.useEffect)((function(){l(xn("emprunters").fetch())}),[e]),Object(r.useEffect)((function(){n.isFetching||s(null===t||void 0===t?void 0:t.find((function(t){return t.id==e})))}),[n]),Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Editer une personne",children:Object(x.jsx)(je,{title:"Editer une personne"})}),Object(x.jsx)(xe,{children:Object(x.jsx)(Rc,{id:"add-form-emprunteur",initialValues:{name:null===i||void 0===i?void 0:i.name,contact:null===i||void 0===i?void 0:i.contact},validations:kl,onSubmit:function(e,t){var n=e.name,c=e.contact;l(xn("emprunters").update({id:i.id,name:n,contact:c})),d.goBack()},render:function(e){var t=e.values;return Object(x.jsx)(Rc.Element,{children:Object(x.jsx)("div",{className:"row",children:Object(x.jsx)("div",{className:"col-lg-6",children:Object(x.jsxs)("div",{className:"card",children:[Object(x.jsx)("div",{className:"card-header bg-dark text-white",children:"Information g\xe9n\xe9rale"}),Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsx)(Rc.Field.Input,{name:"name",value:null===t||void 0===t?void 0:t.name,label:"Nom",placeholder:"Nom"}),Object(x.jsx)(Rc.Field.Input,{name:"contact",value:null===t||void 0===t?void 0:t.contact,label:"T\xe9l\xe9phone",placeholder:"T\xe9l\xe9phone"}),Object(x.jsxs)("div",{className:"mt-3",children:[Object(x.jsx)("button",{className:"btn btn-green  btn-sm ",type:"submit",children:"Editer"}),Object(x.jsx)("button",{className:"btn btn-danger ml-2 btn-sm ",type:"reset",children:"Annuler"})]})]})]})})})})}})})]})};function Ql(){return Cr.b().shape({name:Cr.c().required("Le champ est requis")})}var Ll=function(){Object(ie.d)(vn("vaccinateurs").value);var e=Object(ie.c)(),t=Object(o.g)();return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Ajouter un vaccinateur",children:Object(x.jsx)(je,{title:"Ajouter un vaccinateur"})}),Object(x.jsx)(xe,{children:Object(x.jsx)(Rc,{id:"add-form-vaccinateurs",enableReinitialize:!0,initialValues:{name:"",contact:""},validations:Ql,onSubmit:function(n,c){var r=n.name,a=n.contact;e(xn("vaccinateurs").create({name:r,contact:a})),t.goBack()},render:function(e){e.values;return Object(x.jsx)(Rc.Element,{children:Object(x.jsx)("div",{className:"row",children:Object(x.jsx)("div",{className:"col-lg-6",children:Object(x.jsxs)("div",{className:"card",children:[Object(x.jsx)("div",{className:"card-header bg-dark text-white",children:"Information g\xe9n\xe9rale"}),Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsx)(Rc.Field.Input,{name:"name",label:"Nom",placeholder:"Nom"}),Object(x.jsx)(Rc.Field.Input,{name:"contact",label:"T\xe9l\xe9phone",placeholder:"T\xe9l\xe9phone"}),Object(x.jsxs)("div",{className:"mt-3",children:[Object(x.jsx)("button",{className:"btn btn-green  btn-sm ",type:"submit",children:"Ajouter"}),Object(x.jsx)("button",{className:"btn btn-danger ml-2  btn-sm ",type:"reset",children:"Annuler"})]})]})]})})})})}})})]})})};var Hl=function(){var e=Object(o.i)().id,t=Object(ie.d)(vn("vaccinateurs").value),n=Object(ie.d)(vn("vaccinateurs").meta),c=Object(r.useState)({name:"",contact:""}),a=Object(O.a)(c,2),i=a[0],s=a[1],d=Object(o.g)(),l=Object(ie.c)(),u=Object(r.useState)({}),j=Object(O.a)(u,2);return j[0],j[1],Object(r.useEffect)((function(){l(xn("vaccinateurs").fetch())}),[e]),Object(r.useEffect)((function(){n.isFetching||s(null===t||void 0===t?void 0:t.find((function(t){return t.id==e})))}),[n]),Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Editer un vaccinateur",children:Object(x.jsx)(je,{title:"Editer un vaccinateur"})}),Object(x.jsx)(xe,{children:Object(x.jsx)(Rc,{id:"add-form-vaccinateur",initialValues:{name:i.name,contact:i.contact},validations:Ql,onSubmit:function(e,t){var n=e.name,c=e.contact;l(xn("vaccinateurs").update({id:i.id,name:n,contact:c})),d.goBack()},render:function(e){var t=e.values;return Object(x.jsx)(Rc.Element,{children:Object(x.jsx)("div",{className:"row",children:Object(x.jsx)("div",{className:"col-lg-6",children:Object(x.jsxs)("div",{className:"card",children:[Object(x.jsx)("div",{className:"card-header bg-dark text-white",children:"Information g\xe9n\xe9rale"}),Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsx)(Rc.Field.Input,{name:"name",value:null===t||void 0===t?void 0:t.name,label:"Nom",placeholder:"Nom"}),Object(x.jsx)(Rc.Field.Input,{name:"contact",value:null===t||void 0===t?void 0:t.contact,label:"T\xe9l\xe9phone",placeholder:"T\xe9l\xe9phone"}),Object(x.jsxs)("div",{className:"mt-3",children:[Object(x.jsx)("button",{className:"btn btn-green  btn-sm ",type:"submit",children:"Editer"}),Object(x.jsx)("button",{className:"btn btn-danger ml-2 btn-sm ",type:"reset",children:"Annuler"})]})]})]})})})})}})})]})},Ul=function(e){var t,n=e.product,c=Object(ie.d)((function(e){return e.frommagasins})),r=Object(ie.c)(),i=il(c,r),s=i.isItemFromMagasin,d=i.addFromMagasin,l=!!s&&s(n.id),o=a.a.useCallback((function(){return n.quantityBruteCVA>15&&n.quantityBruteCVA<=20?"yellow":n.quantityBruteCVA>10&&n.quantityBruteCVA<=15?"#ffdb4c":n.quantityBruteCVA>5&&n.quantityBruteCVA<=10?" orange":n.quantityBruteCVA>0&&n.quantityBruteCVA<=5?"#c44e14b8":0==n.quantityBruteCVA?"red":"green"}),[n]),u=a.a.useCallback((function(){return n.quantityCCCVA>15&&n.quantityCCCVA<=20?"yellow":n.quantityCCCVA>10&&n.quantityCCCVA<=15?"#ffdb4c":n.quantityCCCVA>5&&n.quantityCCCVA<=10?" orange":n.quantityCCCVA>0&&n.quantityCCCVA<=5?"#c44e14b8":0==n.quantityCCCVA?"red":"green"}),[n]);a.a.useCallback((function(){return sa(n)?0==n.quantityBruteCVA&&(0==n.quantityCCCVA||null==n.quantityCCCVA)&&0==n.condval:0==n.quantityBruteCVA&&(0==n.quantityCCCVA||null==n.quantityCCCVA)}),[n]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(zc.a.Item,{className:"mb-2 mr-3",style:{width:"100%",border:"1px solid gray",background:"whitesmoke",borderLeft:"10px solid ".concat(o())},children:Object(x.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(x.jsxs)("div",{className:" ".concat(n.id?"":"product-loading"),style:{boxShadow:n&&l?"15px 10px 15px rgba(0, 0, 0, .07)":"none"},children:[Object(x.jsx)("div",{style:{width:10,height:4,background:"".concat(u())}}),Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{children:n.name}),Object(x.jsx)("div",{class:"badge badge-primary",children:null===n||void 0===n||null===(t=n.fournisseur)||void 0===t?void 0:t.name}),Object(x.jsx)("br",{})]})," "]}),Object(x.jsx)("div",{children:n.id&&Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("button",{disabled:ys(n),className:"mt-3 ".concat(l?"btn btn-danger btn-sm":"btn btn-green btn-sm"),onClick:function(){d&&d(n)},children:l?"Retirer":"Ajouter"})})})]})})})},Yl=a.a.memo(Ul),zl=function(e){var t=e.product,n=e.setRealQtt,c=(e.maxRealQtt,e.realQtt),r=Object(ie.c)(),a=function(e){r(Cd(t.id,e))};return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Cc.c,{inputMode:"numeric",w:28,bg:"whitesmoke",min:0,value:c,defaultValue:null===t||void 0===t?void 0:t.quantityParProduct,onChange:function(e){""==e?(n(0),a(0)):(n(e),a(e))},children:[Object(x.jsx)(Cc.d,{}),Object(x.jsxs)(Cc.e,{children:[Object(x.jsx)(Cc.b,{}),Object(x.jsx)(Cc.a,{})]})]})})},Kl=function(e){var t=e.product,n=e.setRealQttCC,c=(e.setRealQtt,e.setMaxRealQttCC,e.maxRealQttCC,e.realQtt,e.realQttCC),a=Object(ie.c)(),i=(Object(r.useRef)(),Object(ie.d)((function(e){return{frommagasins:e.frommagasins}})).frommagasins,function(e){a(qd(t.id,e))});return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Cc.c,{inputMode:"numeric",w:28,bg:"whitesmoke",onChange:function(e){""==e?(i(0),n(0)):(n(1*e),i(1*e))},min:0,value:c,defaultValue:null===t||void 0===t?void 0:t.qttByCC,children:[Object(x.jsx)(Cc.d,{}),Object(x.jsxs)(Cc.e,{children:[Object(x.jsx)(Cc.b,{}),Object(x.jsx)(Cc.a,{})]})]})})},Gl=function(e){var t=e.product,n=e.setRealQttLitre,c=e.realQttLitre,r=e.maxRealQttByLitre,a=Object(ie.c)(),i=function(e){a(yd(t.id,e))};return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Cc.c,{inputMode:"numeric",w:28,step:1,bg:"whitesmoke",min:0,value:c,defaultValue:0,onChange:function(e){""==e?(n(0),i(0)):(n(Number(e)),i(Number(e)))},max:r,children:[Object(x.jsx)(Cc.d,{}),Object(x.jsxs)(Cc.e,{children:[Object(x.jsx)(Cc.b,{}),Object(x.jsx)(Cc.a,{})]})]})})},Wl=function(e){var t=e.product,n=Object(r.useState)(null===t||void 0===t?void 0:t.qttByCC),c=Object(O.a)(n,2),a=c[0],i=c[1],s=Object(r.useState)(null===t||void 0===t?void 0:t.quantityParProduct),d=Object(O.a)(s,2),l=d[0],o=d[1],u=Object(r.useState)(0),j=Object(O.a)(u,2),b=j[0],m=j[1],v=Object(r.useState)(2e3),h=Object(O.a)(v,2),p=h[0],f=h[1],g=Object(r.useState)(2e3),N=Object(O.a)(g,2),C=N[0],y=N[1],q=Object(r.useState)(2e3),A=Object(O.a)(q,2),S=A[0],E=A[1],w=Object(ie.d)((function(e){return e.frommagasins})),P=Object(ie.c)(),V=il(w,P),R=V.isItemFromMagasin,F=V.addFromMagasin;Object(r.useEffect)((function(){var e=function(e,t,n,c){var r=!1;if(ps(c)){r=!0;var a=e,i=t,s=n,d=c.condval,l=c.quantityCCCVA,o=c.quantityBruteCVA,u=c.condsize,j=c.doseDefault,b=c.condml,m=!0;if(s>0&&0==a&&0==i&&s>o&&(m=!1,d=a,l=i),0==s&&a>0&&0==i){var O=0;Number(a)>Number(u)&&(O=Math.floor(Number(a)/Number(u)),d-(Number(a)-Number(u)*O)<0&&(O+=1)),o-O<0&&(m=!1,o=s,l=i)}if(0==s&&0==a&&i>0&&l-i<0){var x=0,v=0;Number(i)>Number(j)&&(x=Math.floor(Number(i)/Number(j)),l-(Number(i)-Number(j)*x)<0&&(x+=1)),Number(x)>Number(u)&&(v=Math.floor(Number(x)/Number(u)),d-(Number(x)-Number(u)*x)<0&&(v+=1)),o-v<0&&(m=!1,o=s,d=a)}if(0==s&&a>0&&i>0){var h=0,p=0;Number(i)>Number(b)?(h=Math.floor(Number(i)/Number(b)),l-(Number(i)-Number(b)*h)<0&&(h+=1)):l-Number(i)<0&&(h=1);var f=Number(a)+h;f>Number(u)?(p=Math.floor(f/Number(u)),d-(f-Number(u)*p)<0&&(p+=1)):d-f<0&&(p=1),o-p<0&&(m=!1,o=s,d=a)}if(s>0&&a>0&&0==i){var g=0;Number(a)>Number(u)?(g=Math.floor(Number(a)/Number(u)),d-(Number(a)-Number(u)*g+a)<0&&(g+=1)):d-Number(a)<0&&(g=1),o-(g+s)<0&&(m=!1,o=s,d=a)}if(s>0&&0==a&&i>0){var N=0,C=0;Number(i)>Number(b)?(N=Math.floor(Number(i)/Number(b)),l-(Number(i)-Number(b)*N)<0&&(N+=1)):l-Number(i)<0&&(N=1),Number(N)>Number(u)?(C=Math.floor(Number(N)/Number(u)),d-(Number(N)-Number(u)*C)<0&&(C+=1)):d-N<0&&(C=1),o-(C+s)<0&&(m=!1,d=a)}if(s>0&&a>0&&i>0){var y=0,q=0;Number(i)>Number(b)?(y=Math.floor(Number(i)/Number(b)),l-(Number(i)-Number(b)*y)<0&&(y+=1)):l-Number(i)<0&&(y=1);var A=Number(y)+Number(a);A>Number(u)?(q=Math.floor(A/Number(u)),d-(A-Number(u)*q)<0&&(q+=1)):d-A<0&&(q=1),o-(q+s)<0&&(m=!1)}return{normalQtt:d,normalQttCC:l,normalQttLitre:o,isSpecific:r,isValid:m}}var S=e,E=t,w=c.quantityBruteCVA,P=c.quantityCCCVA,V=c.doseDefault,R=c.quantityBruteCVA;r=!1;var F=!0;if(0==S&&E>0){var D=0,M=0;Number(E)>Number(V)?(D=Math.floor(Number(E)/Number(V)),M=Number(E)-Number(V)*D,console.log(M),P-M<0&&(D+=1)):P-Number(E)<0&&(D=1),E>P&&w-D<0&&(F=!1,w=S)}if(S>0&&0==E&&S>w&&(F=!1,P=E),S>0&&E>0){var B,T=0;Number(E)>Number(V)?(B=Math.floor(Number(E)/Number(V)),T=Number(E)-Number(V)*B,console.log(T),P-T<0&&(B+=1)):P-Number(E)<0&&(B=1),Number(w)-(Number(B)+Number(S))<0&&(F=!1),S>w&&(F=!1,P=E)}return{normalQtt:w,normalQttCC:P,normalQttLitre:R,isValid:F,isSpecific:r}}(l,a,b,t),n=e.normalQtt,c=e.normalQttCC,r=e.normalQttLitre,s=e.isSpecific;e.isValid||(alert("stock insuffisant :("),s?(m(r),E(r),o(n),f(n),i(c),y(c)):(o(n),f(n),i(c),y(c)))}),[l,a,b]);var D=!!R&&R(t.id);return Object(x.jsx)("div",{children:Object(x.jsxs)("div",{className:"d-flex justify-content-between align-items-center border   mb-2 p-2",children:[Object(x.jsxs)("div",{style:{width:"45%"},children:[Object(x.jsx)("p",{className:"text-blue",children:t.name}),ps(t)?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("p",{className:"text-lowercase",children:Object(x.jsx)("strong",{children:0!=t.qttbylitre&&Object(x.jsx)("span",{style:{marginRight:"30px"},children:ge(t.prixlitre)+" x "+t.qttbylitre+" Litre(s)"})})}),Object(x.jsx)("p",{className:"text-lowercase",children:Object(x.jsx)("strong",{children:0!=t.quantityParProduct&&Object(x.jsx)("span",{style:{marginRight:"30px"},children:ge(t.prixqttccvente*t.qttccpvente)+" x "+t.quantityParProduct+" "+t.type})})})]}):Object(x.jsx)("p",{className:"text-lowercase",children:Object(x.jsx)("strong",{children:0!=t.quantityParProduct&&Object(x.jsx)("span",{style:{marginRight:"30px"},children:ge(t.prixVente)+" x "+t.quantityParProduct+" "+t.type})})}),Object(x.jsx)("p",{className:"text-lowercase",children:Object(x.jsx)("strong",{children:0!=t.qttByCC&&Object(x.jsx)("span",{style:{marginRight:"30px"},children:ge(t.prixParCC)+" x "+t.qttByCC+" ML"})})})]}),0!==t.condml&&0!==t.qttccpvente&&Object(x.jsxs)("div",{className:"text-inline text-center mr-3",children:[Object(x.jsx)("h5",{className:"mb-1 text-uppercase",children:"Litre"}),Object(x.jsx)(Gl,{product:t,setRealQttLitre:m,realQttLitre:b,maxRealQttByLitre:S})," "]}),Object(x.jsxs)("div",{className:"text-inline text-center mr-2",children:[Object(x.jsx)("h5",{className:"mb-1",children:t.type}),Object(x.jsx)(zl,{product:t,setRealQtt:o,setMaxRealQtt:f,maxRealQtt:p,realQtt:l})]}),"FLACON"===t.type&&Object(x.jsxs)("div",{className:"text-inline text-center",children:[Object(x.jsx)("h5",{className:"mb-1",children:3==t.categoryId?"DOSE":"ML"}),Ce(t.name,"ita new")&&Object(x.jsx)(_d,{product:t,setRealQttCC:i,realQttCC:a}),Ce(t.name,"sovax")&&Object(x.jsx)(Qd,{setRealQttCC:i,realQttCC:a,product:t}),0==t.condml&&0==t.qttccpvente&&!Ce(t.name,"sovax")&&!Ce(t.name,"ita new")&&Object(x.jsx)(Kl,{setRealQttCC:i,realQttCC:a,maxRealQttCC:C,product:t}),0!==t.condml&&0!==t.qttccpvente&&Object(x.jsx)(Id,{product:t,setRealQttCC:i,realQttCC:a,maxRealQttCC:C})]}),Object(x.jsx)("div",{className:"ml-2",children:D&&Object(x.jsx)("button",{onClick:function(){F&&F(t)},className:"btn btn-danger btn-xs text-right",children:"X"})})]})})},Xl=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0},Jl=function(){var e=Object(r.useState)("vente-cva"),t=Object(O.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(null),i=Object(O.a)(a,2),s=i[0],d=(i[1],Object(r.useState)(null)),u=Object(O.a)(d,2),j=u[0],b=u[1],m=Object(o.g)(),v=Object(ie.d)((function(e){return{frommagasins:e.frommagasins}})).frommagasins,h=Object(ie.c)(),p=Object(ie.d)(vn("emprunters").value),f=Object(r.useState)(!1),g=Object(O.a)(f,2),N=(g[0],g[1],new Date),C=Object(r.useState)(N),y=Object(O.a)(C,2),q=y[0],A=y[1];Object(r.useEffect)((function(){h(xn("emprunters").fetch())}),[]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(Bc.a,{children:[Object(x.jsxs)(Bc.a.Header,{className:" bg-dark py-2 text-white d-flex justify-content-between align-items-center",children:[Object(x.jsxs)("div",{style:{width:"60%"},children:["BON DE SORTIE ("," ".concat(null===v||void 0===v?void 0:v.length," ").concat((null===v||void 0===v?void 0:v.length)>1?"articles":"article"),")"]}),Object(x.jsx)("div",{style:{width:"40%"},className:"text-right",children:Object(x.jsxs)("select",{className:"form-control input-sm",onChange:function(e){c(e.target.value)},children:[Object(x.jsx)("option",{value:"vente-cva",selected:!0,children:"Comptant"}),Object(x.jsx)("option",{value:"credit-cva",children:"Credit"})]})})]}),Object(x.jsxs)("div",{className:"commande-vente",children:[Object(x.jsxs)(Bc.a.Body,{style:{padding:2,marginTop:3,marginRight:2,marginLeft:2},children:[Object(x.jsxs)("div",{className:"d-flex justify-content-end",children:[Object(x.jsx)(l.b,{className:"btn btn-danger mb-2 mr-2 btn-sm",to:"/historique/vente/vendeur/credit-cva",children:"CREDITS"}),Object(x.jsx)(l.b,{className:"btn btn-primary mb-2 btn-sm text-uppercase",to:"/historique/vente/vendeur/vente-cva",children:"Voir l'historique de vente"})]}),Object(x.jsxs)("div",{style:{overflowY:"auto",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(x.jsxs)("div",{class:"form-group",children:[Object(x.jsx)("label",{children:"Date de sortie :"}),Object(x.jsx)("div",{children:Object(x.jsx)("input",{type:"date",onChange:function(e){return A(e.target.value)},value:q,className:"form-control"})})]}),"credit-cva"===n&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("label",{children:"Crediteur:"}),Object(x.jsxs)("select",{className:"form-control",onChange:function(e){b(e.target.value)},children:[Object(x.jsx)("option",{value:""}),p.map((function(e){return Object(x.jsx)("option",{value:e.id,children:e.name})}))]})]}),(null===v||void 0===v?void 0:v.length)<=0&&Object(x.jsx)("div",{className:"alert alert-success ",children:bl.fromMagasin.emptyOrder}),null===v||void 0===v?void 0:v.map((function(e,t){return Object(x.jsx)(Wl,{product:e,basket:v,dispatch:h},"".concat(null===e||void 0===e?void 0:e.id,"_").concat(t))}))]})]}),(null===v||void 0===v?void 0:v.length)>0&&Object(x.jsxs)(Bc.a.Footer,{className:"d-flex align-items-center justify-content-between",children:[Object(x.jsx)("div",{style:{width:"40%"},children:Object(x.jsx)("h2",{className:"p-2 text-uppercase bg-primary",children:Object(x.jsxs)("strong",{"data-test-id":"total-price-orders",children:["Total:",ge(Xl(v.map((function(e){return sa(e)?e.prixqttccvente*e.quantityParProduct*e.qttccpvente+e.prixlitre*e.qttbylitre:e.prixVente*e.quantityParProduct})))+Xl(v.map((function(e){return e.prixParCC*e.qttByCC}))))]})})}),Object(x.jsx)("div",{style:{width:"60%"},children:v.length>0&&Object(x.jsxs)("div",{className:"d-flex text-right align-items-end justify-content-end",children:[Object(x.jsx)("button",{className:"btn btn-green btn-sm mr-2",disabled:0===v.length,onClick:function(){qs(v)?alert("commande non-conforme,veuillez verifier!!"):(v.forEach((function(e){!function(e){if(Yd(e)){var t=e.quantityParProduct,n=e.qttByCC,c=e.qttbylitre,r=e.condval,a=e.quantityCCCVA,i=e.condsize,s=(e.doseDefault,e.condml);if(c>0&&0==t&&0==n&&(e.quantityBruteCVA-=c),0==c&&t>0&&0==n){var d=0,l=0;if(Number(t)>=Number(i))if(d=Math.floor(Number(t)/Number(i)),r-(l=Number(t)-Number(i)*d)<0){var o=Number(l)-Number(r);e.condval=Number(i)-Number(o),d+=1}else e.condval=r-l;else if(e.condval-Number(t)<0){var u=Number(t)-Number(e.condval),j=Number(i)-Number(u);e.condval=j,d+=1}else e.condval-=Number(t);e.quantityBruteCVA-=d}if(0==c&&0==t&&n>0){var b=0,m=0,O=0,x=0;if(Number(n)>=Number(s))if(b=Math.floor(Number(n)/Number(s)),a-(x=Number(n)-Number(s)*b)<0){var v=Number(x)-Number(a);e.quantityCCCVA=Number(s)-Number(v),b+=1}else e.quantityCCCVA=a-x;else if(Number(n)>=e.quantityCCCVA){b+=1;var h=Number(n)-e.quantityCCCVA;e.quantityCCCVA=Number(s)-h}else e.quantityCCCVA-=Number(n);if(Number(b)>=Number(i))if(m=Math.floor(Number(b)/Number(i)),r-(O=Number(b)-Number(i)*O)<0){var p=Number(O)-Number(r);e.condval=Number(i)-Number(p),m+=1}else e.condval=r-O;else if(e.condval-Number(b)<0){var f=Number(b)-Number(e.condval),g=Number(i)-Number(f);e.condval=g,m+=1}else e.condval-=Number(b);e.quantityBruteCVA-=m}if(0==c&&t>0&&n>0){var N=0,C=0,y=0,q=0;if(Number(n)>=Number(s))if(N=Math.floor(Number(n)/Number(s)),a-(q=Number(n)-Number(s)*N)<0){var A=Number(q)-Number(a);e.quantityCCCVA=Number(s)-Number(A),N+=1}else e.quantityCCCVA=Number(a)-q;else if(Number(n)>=e.quantityCCCVA){N+=1;var S=Number(n)-e.quantityCCCVA;e.quantityCCCVA=Number(s)-S}else e.quantityCCCVA-=Number(n);var E=Number(t)+N;if(E>=Number(i))if(C=Math.floor(E/Number(i)),r-(y=E-Number(i)*N)<0){var w=Number(y)-Number(r);e.condval=Number(i)-Number(w),C+=1}else e.condval=r-y;else if(e.condval-Number(E)<0){var P=Number(E)-Number(e.condval),V=Number(i)-Number(P);e.condval=V,C+=1}else e.condval-=Number(E);e.quantityBruteCVA-=C}if(c>0&&t>0&&0==n){var R=0,F=0;if(Number(t)>=Number(i))if(R=Math.floor(Number(t)/Number(i)),r-(F=Number(t)-Number(i)*R)<0){var D=Number(F)-Number(r);e.condval=Number(i)-Number(D),R+=1}else e.condval=r-F;else if(e.condval-Number(t)<0){var M=Number(t)-Number(e.condval),B=Number(i)-Number(M);e.condval=B,R+=1}else e.condval-=Number(t);e.quantityBruteCVA-=R+c}if(c>0&&0==t&&n>0){var T=0,k=0,_=0,I=0;if(Number(n)>=Number(s))if(T=Math.floor(Number(n)/Number(s)),a-(I=Number(n)-Number(s)*T)<0){var Q=Number(I)-Number(a);e.quantityCCCVA=Number(s)-Number(Q),T+=1}else e.quantityCCCVA=a-I;else if(Number(n)>=e.quantityCCCVA){T+=1;var L=Number(n)-e.quantityCCCVA;e.quantityCCCVA=Number(s)-L}else e.quantityCCCVA-=Number(n);if(Number(T)>=Number(i))if(k=Math.floor(Number(T)/Number(i)),r-(_=Number(T)-Number(i)*k)<0){var H=Number(_)-Number(r);e.condval=Number(i)-Number(H),k+=1}else e.condval=r-I;else if(e.condval-Number(T)<0){var U=Number(T)-Number(e.condval),Y=Number(i)-Number(U);e.condval=Y,k+=1}else e.condval-=Number(T);e.quantityBruteCVA-=k+c}if(c>0&&t>0&&n>0){var z=0,K=0,G=0,W=0;if(Number(n)>=Number(s))if(z=Math.floor(Number(n)/Number(s)),a-(W=Number(n)-Number(s)*z)<0){var X=Number(W)-Number(a);e.quantityCCCVA=Number(s)-Number(X),z+=1}else e.quantityCCCVA=a-W;else if(Number(n)>=e.quantityCCCVA){z+=1;var J=Number(n)-e.quantityCCCVA;e.quantityCCCVA=Number(s)-J}else e.quantityCCCVA-=Number(n);var Z=Number(z)+Number(t);if(Z>=Number(i))if(K=Math.floor(Z/Number(i)),r-(G=Z-Number(i)*K)<0){var $=Number(G)-Number(r);e.condval=Number(i)-Number($),K+=1}else e.condval=r-W;else if(e.condval-Number(Z)<0){var ee=Number(Z)-Number(e.condval),te=Number(i)-Number(ee);e.condval=te,K+=1}else e.condval-=Number(Z);e.quantityBruteCVA-=K+c}}else{var ne=e.quantityParProduct,ce=e.qttByCC,re=(e.quantityBruteCVA,e.quantityCCCVA),ae=e.doseDefault;if(0==ne&&ce>0){var ie=0,se=0;if(Number(ce)>=Number(ae))if(ie=Math.floor(Number(ce)/Number(ae)),re-(se=Number(ce)-Number(ae)*ie)<0){var de=Number(se)-Number(re);e.quantityCCCVA=Number(ae)-Number(de),ie+=1}else e.quantityCCCVA=Number(re)-se;else if(e.quantityCCCVA-Number(ce)<0){var le=Number(ce)-Number(e.quantityCCCVA);e.quantityCCCVA=Number(ae)-Number(le),ie+=1}else e.quantityCCCVA-=Number(ce);console.log(ie),e.quantityBruteCVA-=ie}if(ne>0&&0==ce&&(e.quantityBruteCVA-=ne),ne>0&&ce>0){var oe=0,ue=0;if(Number(ce)>=Number(ae))if(oe=Math.floor(Number(ce)/Number(ae)),re-(ue=Number(ce)-Number(ae)*oe)<0){var je=Number(ue)-Number(re);e.quantityCCCVA=Number(ae)-Number(je),oe+=1}else e.quantityCCCVA=Number(re)-ue;else if(e.quantityCCCVA-Number(ce)<0){var be=Number(ce)-Number(e.quantityCCCVA);e.quantityCCCVA=Number(ae)-Number(be),oe+=1}else e.quantityCCCVA-=Number(ce);var me=oe+Number(ne);e.quantityBruteCVA-=me}}}(e)})),h(xn("commandes").createTransaction({id:Math.floor(Date.now()/1e3),contenu:v,type:n,sorte:"sortie",vaccinateurId:s,status:"vente-cva"===n,emprunterId:j,dateCom:null!=q?q:N},"add-from-magasin")),h(Nd()),m.push(Q))},type:"button",children:"Valider l'operation"}),Object(x.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(){v.forEach((function(e){e.quantityParProduct=0,e.qttByCC=0})),h(js()),h(Nd())},type:"button",children:Object(x.jsx)("span",{children:"Annuler"})})]})})]})]})]})})},Zl=new Date;function $l(){var e=Object(r.useState)({hours:Zl.getHours(),minutes:Zl.getMinutes(),seconds:Zl.getSeconds()}),t=Object(O.a)(e,2),n=t[0],c=t[1];return Object(r.useEffect)((function(){var e=setInterval((function(){var e=new Date;c({hours:e.getHours()<10?"0"+e.getHours():e.getHours(),minutes:e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes(),seconds:e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds()})}),1e3);return function(){return clearInterval(e)}}),[]),Object(x.jsxs)("div",{className:"bg-dark py-1 px-4 text-center",children:[Object(x.jsxs)("h1",{style:{fontSize:"20px"},children:[n.hours," : ",n.minutes," : ",n.seconds]}),Object(x.jsx)("h4",{className:"bg-thead p-1",children:fe(Zl)})]})}se.reactFastCompare;var eo=function(){var e=Object(ie.d)(vn("products").value),t=Object(ie.d)(vn("products").meta),n=Object(ie.c)(),c=Object(r.useState)(""),a=Object(O.a)(c,2),i=a[0],s=a[1],d=Object(r.useState)(2),l=Object(O.a)(d,2),o=(l[0],l[1],Object(r.useState)(!1)),u=Object(O.a)(o,2),j=u[0],b=u[1],m=(Object(r.useRef)(null),Object(r.useRef)(null),Object(r.useState)([])),v=Object(O.a)(m,2),h=v[0],p=v[1];Object(r.useEffect)((function(){n(xn("products").fetch())}),[]),Object(r.useEffect)((function(){return 1==j&&(n(xn("products").fetch()),b(!1)),function(){b(!1)}}),[j]),Object(r.useEffect)((function(){t.isFetching||p(e.filter((function(e){return!ys(e)})))}),[t]),Object(r.useEffect)((function(){p(lr(e.filter((function(e){return!ys(e)})),i))}),[i]);return Object(x.jsxs)(x.Fragment,{children:[" ",Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Vente du magasin",children:Object(x.jsx)(je,{title:"Vente du magasin"})}),Object(x.jsx)(xe,{children:Object(x.jsxs)(Kc.a,{children:[Object(x.jsx)(Gc.a,{xs:6,children:Object(x.jsxs)(Bc.a,{className:"mt-2",children:[Object(x.jsxs)(Bc.a.Header,{className:"bg-dark p-2 text-white d-flex text-uppercase justify-content-between align-items-center",children:[Object(x.jsx)("div",{style:{width:"60%"},children:"Produits"}),Object(x.jsx)("div",{children:Object(x.jsx)("button",{className:"btn btn-green btn-sm",onClick:function(){b(!0)},children:"Mettre \xe0 jour"})})]}),Object(x.jsxs)(Bc.a.Body,{children:[Object(x.jsxs)("div",{class:"d-flex justify-content-between align-items-center",children:[Object(x.jsx)("input",{type:"text",onChange:function(e){s(e.target.value)},placeholder:"Nom du produit",className:"form-control mb-2"})," "]}),Object(x.jsx)(zc.a,{children:Object(x.jsxs)("div",{style:{overflowY:"auto",width:"100%",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(x.jsxs)("div",{class:"d-flex justify-content-start flex-wrap",children:[h.sort((function(e,t){return t.quantityBruteCVA-e.quantityBruteCVA})).map((function(e){return Object(x.jsx)(Yl,{product:e})})),0==h.length&&"Aucune enregistrement trouv\xe9"]})," "]})})]})]})}),Object(x.jsx)(Gc.a,{xs:6,children:Object(x.jsx)("div",{className:" py-2",children:Object(x.jsx)(Jl,{setRegenerate:b})})})]})})]})]})},to=function(){return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(eo,{})})};function no(){return Cr.b().shape({prices:Cr.a().of(Cr.b().shape({}))})}var co=function(){var e=Object(Fn.e)(),t=e.values;e.setValues;return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("table",{className:"table table-bordered",children:[Object(x.jsx)("thead",{className:" bg-thead",children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"Date debut"}),Object(x.jsx)("th",{children:"Date fin"}),Object(x.jsx)("th",{style:{width:"60%"},children:"Prix"}),Object(x.jsx)("th",{children:"Actions"})]})}),Object(x.jsxs)("tbody",{children:[0==(null===t||void 0===t?void 0:t.prices.length)&&Object(x.jsx)("tr",{children:Object(x.jsx)("td",{colspan:4,className:"text-center",children:"Aucun prix ajout\xe9"})}),Object(x.jsx)(Fn.b,{name:"prices",render:function(e){var n;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("tr",{children:Object(x.jsx)("td",{colspan:4,children:Object(x.jsx)("button",{className:"bg-primary py-1 px-2",onClick:function(){return e.push("")},children:"Ajouter plus"})})}),(null===t||void 0===t?void 0:t.prices)&&(null===t||void 0===t||null===(n=t.prices)||void 0===n?void 0:n.map((function(t,n){return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:Object(x.jsx)(Rc.Field.Date,{placeholder:"date de debut.",name:"prices.".concat(n,".deb")})}),Object(x.jsx)("td",{children:Object(x.jsx)(Rc.Field.Date,{placeholder:"date de debut.",name:"prices.".concat(n,".fin")})}),Object(x.jsxs)("td",{className:"d-flex flex-row justify-content-between",children:[Object(x.jsx)("div",{className:"mr-2",children:Object(x.jsx)(Rc.Field.Input,{placeholder:"Prix du litre",name:"prices.".concat(n,".prixlitre")})}),Object(x.jsx)("div",{className:"mr-2",children:Object(x.jsx)(Rc.Field.Input,{placeholder:"prix par quantit\xe9",name:"prices.".concat(n,".montant")})}),Object(x.jsx)(Rc.Field.Input,{placeholder:"prix par cc",name:"prices.".concat(n,".prixparcc")})]}),Object(x.jsx)("td",{className:"text-center",children:Object(x.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(){return e.remove(n)},children:"Retirer"})})]})})))]})}})]})]})})};function ro(){var e,t,n=Object(o.i)().id,c=Object(ie.c)(),i=Object(r.useState)("vente-magasin"),s=Object(O.a)(i,2),d=(s[0],s[1],Object(ie.d)(vn("products").value)),l=Object(ie.d)(vn("commandes").meta);Object(r.useEffect)((function(){c(xn("products").get(n))}),[]);var u=Object(r.useCallback)((function(e){c(xn("commandes").createTransaction(Object(Se.a)(Object(Se.a)({},e),{},{id:n}),"get-commande-bw"))}),[]),j=a.a.useMemo((function(){return[{Header:"Date D\xe9but",accessor:"deb"},{Header:"Date Fin",accessor:"fin"},{Header:"Informations",Cell:function(e){var t;return Object(x.jsxs)("table",{className:"table text-center",children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"Date"}),Object(x.jsx)("th",{children:"Ancien prix du litre"}),Object(x.jsx)("th",{children:"Nouvel prix du litre "}),Object(x.jsx)("th",{children:"Ancien prix en quantit\xe9"}),Object(x.jsx)("th",{children:"Nouvel prix en quantit\xe9"}),Object(x.jsx)("th",{children:"Ancien prix en ML"}),Object(x.jsx)("th",{children:"Nouvel prix en ML"})]})}),Object(x.jsx)("tbody",{children:null===(t=e.row.original)||void 0===t?void 0:t.data.map((function(e,t){return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:fe(e.createdAt)}),Object(x.jsx)("td",{children:"no"!=e.lastPriceLitre?ge(""!=e.lastPriceLitre?e.lastPriceLitre:0):""}),Object(x.jsx)("td",{children:"no"!=e.newPriceLitre?ge(e.newPriceLitre):""}),Object(x.jsx)("td",{children:ge(e.lastPrice)}),Object(x.jsx)("td",{children:ge(e.newPrice)}),Object(x.jsx)("td",{children:"no"!=e.lastPriceCC?ge(e.lastPriceCC):""}),Object(x.jsx)("td",{children:"no"!=e.newPriceCC?ge(e.newPriceCC):""})]},t)}))})]})}}]}),[]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Rectification de prix",children:Object(x.jsx)(je,{title:"Rectification de prix"})}),Object(x.jsxs)(xe,{children:[Object(x.jsxs)("div",{className:"d-flex flex-row justify-content-between",children:[Object(x.jsx)("h2",{className:"mb-2",style:{fontSize:20},children:null===(e=d[0])||void 0===e?void 0:e.name}),Object(x.jsx)("div",{})]}),Object(x.jsx)(Rc,{enableReinitialize:!0,initialValues:{type:"vente-magasin",prices:[]},validations:no,onSubmit:u,render:function(e){e.values;return Object(x.jsxs)(Rc.Element,{children:[Object(x.jsx)("div",{style:{width:"30%"},children:Object(x.jsx)(Rc.Field.Select,{name:"type",label:"Type de sortie",emptyValue:!1,valueKey:"name",disabled:!1,defaultValue:1,options:[{id:1,name:"Vente du Magasin"},{id:2,name:"Facture"}]})}),Object(x.jsx)(co,{}),Object(x.jsxs)("div",{className:"mt-3",children:[Object(x.jsx)("button",{className:"btn btn-green  btn-sm ",type:"submit",children:"Appliquer les changements"}),Object(x.jsx)("button",{className:"btn btn-danger ml-2  btn-sm ",type:"reset",children:"Annuler"})]})]})}}),Object(x.jsx)("h2",{className:"my-3",children:"Recapitulatif des changements"}),Object(x.jsx)(Qc,{filter:!1,data:null===l||void 0===l||null===(t=l.data)||void 0===t?void 0:t.recap,meta:l,columns:j})]})]})})}var ao=function(){var e=Object(ie.d)(vn("products").value),t=Object(ie.d)(vn("products").meta),n=Object(ie.c)();Object(r.useEffect)((function(){n(xn("products").fetch())}),[]);var c=a.a.useMemo((function(){return[{Header:"Nom de l'article",accessor:"name"},{Header:"Fournisseur",Cell:function(e){var t,n;return Object(x.jsx)("div",{children:Object(x.jsx)("h3",{className:"badge badge-primary",children:null===(t=e.row.original)||void 0===t||null===(n=t.fournisseur)||void 0===n?void 0:n.name})})}},{Header:"Quantit\xe9",accessor:"quantityBruteCVA"},{Header:"Conditionnement (ML)",accessor:"condval"},{Header:"Reste en ML",accessor:"quantityCC",Cell:function(e){var t,n;return Object(x.jsx)("div",{children:null==(null===(t=e.row.original)||void 0===t?void 0:t.quantityCCCVA)?0:null===(n=e.row.original)||void 0===n?void 0:n.quantityCCCVA})}}]}));return Object(x.jsxs)(ir.a,{children:[Object(x.jsx)(xs,{}),Object(x.jsx)("div",{className:"row",children:Object(x.jsx)("div",{className:"col-lg-6 text-right"})}),Object(x.jsx)(Qc,{data:e,meta:t,columns:c})]})};var io=function(e){for(var t=0;t<e.length;++t)return e[t].correction>0||e[t].correctionml>0},so=function(){var e=ae()().isoWeekday(1).startOf("week"),t=ae()().endOf("week"),n=Object(r.useState)(e),c=Object(O.a)(n,2),i=c[0],s=c[1],d=Object(r.useState)(t),l=Object(O.a)(d,2),o=l[0],u=l[1],j=(Object(r.useRef)(null),Object(r.useRef)(null),Object(ie.d)(vn("commandes").value)),b=Object(ie.d)(vn("commandes").meta),m=Object(r.useState)([e,t]),v=Object(O.a)(m,2),h=v[0],p=v[1],f=Object(ie.c)();Object(r.useEffect)((function(){f(function(e,t,n){return sn("commandes",{path:"/operation-vente-cva?deb=".concat(e,"&fin=").concat(t),replace:!0})}(i,o))}),[i,o]),Object(r.useEffect)((function(){null!==h?(h[0]&&s(h[0]),h[1]&&u(h[1])):(s(e),u(t))}),[h]);var g,N=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0},C=function(e){return N(null===e||void 0===e?void 0:e.map((function(e){return gi(e)?e.prixqttccvente*e.quantityParProduct*e.qttccpvente+e.prixVente*e.qttbylitre:e.prixVente*e.quantityParProduct})))+N(null===e||void 0===e?void 0:e.map((function(e){return e.prixParCC*e.qttByCC})))},y=a.a.useMemo((function(){return[{Header:"Date",Cell:function(e){var t;return Object(x.jsx)(x.Fragment,{children:fe(null===(t=e.row.original)||void 0===t?void 0:t.dateCom)})}},{Header:"Produits",Cell:function(e){var t,n,c,r,a,i;return Object(x.jsxs)("div",{style:{width:"350px"},children:[1==(null===(t=e.row.original)||void 0===t?void 0:t.isdeleted)&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"badge badge-danger",children:"Supprim\xe9"}),Object(x.jsxs)("div",{className:"text text-danger",children:["Date de suppression :"," ",fe(null===(n=e.row.original)||void 0===n?void 0:n.deletedat)]})]}),null==(null===(c=e.row.original)||void 0===c?void 0:c.isdeleted)&&Object(x.jsx)("p",{children:io(null===(r=e.row.original)||void 0===r?void 0:r.contenu)&&Object(x.jsx)("div",{className:"badge badge-warning",children:"Modifi\xe9"})}),null===(a=e.row.original)||void 0===a||null===(i=a.contenu)||void 0===i?void 0:i.map((function(t){var n,c;return Object(x.jsxs)("span",{children:[Object(x.jsx)("span",{style:{background:"white",color:1==(null===(n=e.row.original)||void 0===n?void 0:n.isdeleted)?"red":"inherit",padding:2},children:t.name}),Object(x.jsxs)("span",{style:{color:1==(null===(c=e.row.original)||void 0===c?void 0:c.isdeleted)?"red":"inherit"},children:[" "," || "]})]})}))]})}},{Header:"Total",Cell:function(e){var t;return Object(x.jsx)("div",{children:ge(C(null===(t=e.row.original)||void 0===t?void 0:t.contenu))})}}]}),[]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Operations sur les commandes",children:Object(x.jsx)(je,{title:"Operations sur les commandes"})}),Object(x.jsxs)(xe,{children:[Object(x.jsxs)("div",{className:"row my-2",children:[Object(x.jsx)("div",{className:"col-lg-8",children:Object(x.jsxs)("div",{children:[i&&o&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("h2",{children:"Operations sur les commandes"}),Object(x.jsxs)("span",{children:["Du: ",fe(i)," Au ",fe(o)]})]})," "]})}),Object(x.jsx)("div",{className:"col-lg-4 text-right",children:Object(x.jsx)("div",{children:Object(x.jsx)(he.a,{locale:"fr-FR",onChange:p,value:h})})})]}),Object(x.jsx)(Qc,{filter:!1,data:(g=j,g.filter((function(e){return e.deletedat!=ae()("2021-01-01")}))),meta:b,columns:y})]})]})})};var lo,oo=function(){return Object(ie.c)(),Object(x.jsx)(l.a,{children:Object(x.jsxs)(o.d,{children:[Object(x.jsx)(Hi,{path:"/",exact:!0,component:vl}),Object(x.jsx)(_s,{path:g,component:rd}),Object(x.jsx)(_s,{path:f,component:ld}),Object(x.jsx)(_s,{path:p,component:ud}),Object(x.jsx)(Hi,{path:"/vendeur",component:vl}),Object(x.jsx)(Hi,{path:"/stock-cva",component:ao}),Object(x.jsx)(Hi,{path:"/detailvendeur/:id",component:Fs}),Object(x.jsx)(Hi,{path:"/vendeur-commande/:id",component:Md}),Object(x.jsx)(Hi,{path:Q,component:hs}),Object(x.jsx)(_s,{path:"/vendre/in/admin",component:to}),Object(x.jsx)(_s,{path:"/detailvendeuradmin/:id",component:Ms}),Object(x.jsx)(_s,{path:"/vendeur-admin-commande/:id",component:Jd}),Object(x.jsx)(_s,{path:ee,component:Es}),Object(x.jsx)(_s,{path:"/changer/prix/:id",component:ro}),Object(x.jsx)(_s,{path:"/approv",component:Rn}),Object(x.jsx)(_s,{path:y,component:Nr}),Object(x.jsx)(_s,{path:"/para/suppl",component:gr}),Object(x.jsx)(_s,{path:C,component:Mr}),Object(x.jsx)(_s,{path:"/bon-commande-depot",component:$s}),Object(x.jsx)(_s,{path:"/product/edit/:id",component:Rr}),Object(x.jsx)(_s,{path:N,component:Pr}),Object(x.jsx)(_s,{path:"/journal",component:fr}),Object(x.jsx)(_s,{path:q,component:kr}),Object(x.jsx)(_s,{path:A,component:br}),Object(x.jsx)(_s,{path:w,component:wa}),Object(x.jsx)(_s,{path:S,component:mr}),Object(x.jsx)(_s,{path:E,component:pr}),Object(x.jsx)(_s,{path:D,component:$s}),Object(x.jsx)(_s,{path:P,component:Tr}),Object(x.jsx)(_s,{path:V,component:Br}),Object(x.jsx)(_s,{path:F,component:Pa}),Object(x.jsx)(_s,{path:"/editer/commande/:id",component:Ri}),Object(x.jsx)(_s,{path:R,component:Ir}),Object(x.jsx)(_s,{path:"/detail/:id",component:xr}),Object(x.jsx)(_s,{path:"/depot/detail/:id",exact:!0,component:hr}),Object(x.jsx)(_s,{path:"/product/detail/:id",component:Vr}),Object(x.jsx)(_s,{path:"/b/sortie",component:Yc}),Object(x.jsx)(_s,{path:"/add/prod",component:Fc}),Object(x.jsx)(_s,{path:M,component:Na}),Object(x.jsx)(_s,{path:"/editer/facture/:id",exact:!0,component:Gs}),Object(x.jsx)(_s,{path:B,component:Uc}),Object(x.jsx)(_s,{path:"/approvis/detail/:id",exact:!0,component:Tc}),Object(x.jsx)(_s,{path:T,component:_i}),Object(x.jsx)(_s,{path:k,component:Ii}),Object(x.jsx)(_s,{path:_,component:rs}),Object(x.jsx)(_s,{path:"/depot/to/magasin/edit/:id",component:al}),Object(x.jsx)(_s,{path:I,component:ss}),Object(x.jsx)(_s,{path:"/depot/to/magasin/detail/:id",component:md}),Object(x.jsx)(_s,{path:H,component:ws}),Object(x.jsx)(_s,{path:L,component:Vs}),Object(x.jsx)(_s,{path:"/magasin/detail/vente/:id",component:xd}),Object(x.jsx)(_s,{path:U,component:El}),Object(x.jsx)(_s,{path:Y,component:Pl}),Object(x.jsx)(_s,{path:"/detailcorrection/:id",component:Vl}),Object(x.jsx)(_s,{path:z,component:Aa}),Object(x.jsx)(_s,{path:K,component:Fl}),Object(x.jsx)(_s,{path:"/fournisseurs/edit/:id",component:Dl}),Object(x.jsx)(_s,{path:G,component:qa}),Object(x.jsx)(_s,{path:W,component:Bl}),Object(x.jsx)(_s,{path:"/categories/edit/:id",component:Tl}),Object(x.jsx)(_s,{path:X,component:Ea}),Object(x.jsx)(_s,{path:J,component:_l}),Object(x.jsx)(_s,{path:"/emprunters/edit/:id",component:Il}),Object(x.jsx)(_s,{path:Z,component:Sa}),Object(x.jsx)(_s,{path:"/opcommandes",component:so}),Object(x.jsx)(_s,{path:$,component:Ll}),Object(x.jsx)(_s,{path:"/vaccinateurs/edit/:id",component:Hl})]})})},uo=(c(933),c(506)),jo=On("products",{key:"id"}),bo=JSON.parse(localStorage.getItem("user")),mo=bo?{isLoggedIn:!0,user:bo}:{isLoggedIn:!1,user:null},Oo=On("commandes"),xo=On("fournisseurs"),vo=On("emprunters"),ho=On("vaccinateurs"),po=On("categories"),fo=On("approvis"),go=On("parametres"),No={shipping:{},payment:{type:"",name:"",cardnumber:"",expiry:"",ccv:""}},Co=On("sortiedepots"),yo=Object(un.b)({searchbydate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{deb:ae()().isoWeekday(1).startOf("week"),fin:ae()().endOf("week")},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ls:return t.payload;case os:return{deb:ae()().isoWeekday(1).startOf("week"),fin:ae()().endOf("week")};default:return e}},count:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{counter:0},t=arguments.length>1?arguments[1]:void 0;return"ADD"===t.type?Object(Se.a)(Object(Se.a)({},e),{},{counter:e.counter+1}):e},auth:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mo,c=arguments.length>1?arguments[1]:void 0,r=c.type,a=c.payload;switch(r){case yn:return Object(Se.a)(Object(Se.a)({},n),{},{isLoggedIn:!0,user:null===(e=a.user)||void 0===e?void 0:e.user,success:a.success,error:null});case qn:return Object(Se.a)(Object(Se.a)({},n),{},{isLoggedIn:!1,user:null,success:null,error:a.error});case An:return Object(Se.a)(Object(Se.a)({},n),{},{isLoggedIn:!0,user:null===(t=a.user)||void 0===t?void 0:t.user,success:a.success,error:null});case Sn:return Object(Se.a)(Object(Se.a)({},n),{},{isLoggedIn:!1,user:null,token:null,success:null,error:a.error});case En:return Object(Se.a)(Object(Se.a)({},n),{},{isLoggedIn:!1,user:null,token:null});default:return n}},products:jo,realproducts:jo,categories:po,fournisseurs:xo,emprunters:vo,vaccinateurs:ho,commandes:Oo,commandesclone:Oo,basket:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Wc:return t.payload;case Xc:return e.some((function(e){return e.id===t.payload.id}))?e:[t.payload].concat(Object(ce.a)(e));case Jc:return e.filter((function(e){return e.id!==t.payload}));case Zc:return[];case $c:return e.map((function(e){return e.id==t.payload.id&&(e.quantityParProduct+=1),e.id==t.payload.id&&e.doseRestantEnMg>=1e3*e.doseDefault?e.doseRestantEnMg+=1e3*e.doseDefault:e.doseRestantEnMg=e.doseRestantEnMg,e}));case tr:return e.map((function(e){return e.id==t.payload.id&&(e.qttByCC+=1),e.id==t.payload.id&&e.doseRestantEnMg>=1e3*e.doseDefault?e.doseRestantEnMg+=1e3:e.doseRestantEnMg=e.doseRestantEnMg,e}));case er:return e.map((function(e){return e.id==t.payload.id&&(e.quantityParProduct-=1),e.id==t.payload.id&&e.doseRestantEnMg>=1e3*e.doseDefault?e.doseRestantEnMg-=1e3*e.doseDefault:e.doseRestantEnMg=e.doseRestantEnMg,e}));case nr:return e.map((function(e){return e.id==t.payload.id&&(e.qttByCC-=1),e.id==t.payload.id&&e.doseRestantEnMg>=e.doseDefault?e.doseRestantEnMg-=1e3:e.doseRestantEnMg=e.doseRestantEnMg,e}));default:return e}},approvisionnements:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ur:return t.payload;case Yr:return e.some((function(e){return e.id===t.payload.id}))?e:[t.payload].concat(Object(ce.a)(e));case zr:return e.filter((function(e){return e.id!==t.payload}));case Kr:return[];case Gr:return e.map((function(e){return e.id==t.payload.id&&(e.quantityParProduct+=1),e}));case Xr:return e.map((function(e){return e.id==t.payload.id&&(e.quantityParProduct=Number(t.payload.qtt)),e}));case Wr:return e.map((function(e){return e.id==t.payload.id&&(e.quantityParProduct-=1),e}));case Jr:return e.map((function(e){return e.id===t.payload.id&&(e.quantityParProduct=t.payload.value),e}));case Zr:return e.map((function(e){return e.id===t.payload.id&&(e.remise=t.payload.value),e}));case $r:return e.map((function(e){return e.id===t.payload.id&&(e.remisePerProduct=t.payload.value),e}));default:return e}},approvis:fo,fromdepots:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Da:return t.payload;case Ma:return e.some((function(e){return e.id===t.payload.id}))?e:[t.payload].concat(Object(ce.a)(e));case Ba:return e.filter((function(e){return e.id!==t.payload}));case Ta:return[];case ka:return e.map((function(e){return e.id===t.payload.id&&(e.quantityParProductDepot=Number(t.payload.qtt)),e}));case _a:case Ha:return e.map((function(e){return e.id==t.payload.id&&(e.qttByCCDepot=Number(t.payload.value)),e}));case Ia:return e.map((function(e){return e.id===t.payload.id&&(e.quantityParProductDepot=Number(t.payload.value)),e}));case Qa:return e.map((function(e){return e.id===t.payload.id&&(e.qttyspecificmirrordepot=Number(t.payload.value),e.qttByCCDepot=1*t.payload.value/2),e}));case La:return e.map((function(e){return e.id===t.payload.id&&(e.qttyspecificmirrordepot=Number(t.payload.value),e.qttByCCDepot=1*t.payload.value*2),e}));case Ua:return e.map((function(e){return e.id===t.payload.id&&(e.qttByCCDepot-=t.payload.qttccpventedepot),e}));default:return e}},stock:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=(t.type,t.payload);switch(t.type){case wn:return Object(Se.a)(Object(Se.a)({},e),t.payload);case Pn:return n;default:return e}},checkout:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:No,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case cr:return Object(Se.a)(Object(Se.a)({},e),{},{shipping:t.payload});case rr:return Object(Se.a)(Object(Se.a)({},e),{},{payment:t.payload});case ar:return No;default:return e}},parametres:go,tomagasins:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ui:return t.payload;case Yi:return e.some((function(e){return e.id===t.payload.id}))?e:[t.payload].concat(Object(ce.a)(e));case zi:return e.filter((function(e){return e.id!==t.payload}));case Ki:return[];case Gi:return e.map((function(e){return e.id===t.payload.id&&(e.quantityParProduct+=1),e}));case Gi:return e.map((function(e){return e.id===t.payload.id&&(e.quantityParProduct=Number(t.payload.qtt)),e}));case Wi:return e.map((function(e){return e.id===t.payload.id&&(e.quantityParProduct-=1),e}));case Xi:return e.map((function(e){return e.id===t.payload.id&&(e.quantityParProduct=t.payload.value),e}));default:return e}},frommagasins:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ka:return t.payload;case Ga:return e.some((function(e){return e.id===t.payload.id}))?e:[t.payload].concat(Object(ce.a)(e));case Wa:return e.filter((function(e){return e.id!==t.payload}));case Xa:return[];case Ja:return e.map((function(e){return e.id===t.payload.id&&(e.quantityParProduct=Number(t.payload.qtt)),e}));case ai:return e.map((function(e){return e.id==t.payload.id&&(e.qttbybrute=Number(t.payload.value)),e}));case Za:case ni:return e.map((function(e){return e.id==t.payload.id&&(e.qttByCC=Number(t.payload.value)),e}));case $a:return e.map((function(e){return e.id===t.payload.id&&(e.quantityParProduct=Number(t.payload.value)),e}));case ri:return e.map((function(e){return e.id===t.payload.id&&(e.qttbylitre=Number(t.payload.value)),e}));case ei:return e.map((function(e){return e.id===t.payload.id&&(e.qttyspecificmirror=Number(t.payload.value),e.qttByCC=1*t.payload.value),e}));case ti:return e.map((function(e){return e.id===t.payload.id&&(e.qttyspecificmirror=Number(t.payload.value),e.qttByCC=1*t.payload.value*2),e}));case ci:return e.map((function(e){return e.id===t.payload.id&&(e.qttByCC-=t.payload.qttccpvente),e}));default:return e}},sortiedepots:Co}),qo=c(1e3),Ao=qo.persistStore,So=(0,qo.persistReducer)({key:"root",whitelist:["auth","profile","basket","approvisionnement","searchbydate"],storage:c(934).default},yo),Eo=Object(un.c)(So,(lo=[uo.a],un.a.apply(void 0,Object(ce.a)(lo)))),wo=Ao(Eo),Po=c(507),Vo=c(1051),Ro=(c(937),c(938),c(939),c(940),c(1047)),Fo=Object(Ro.a)({fontSizes:{lg:"18px"},fonts:{heading:"Montserrat",body:"Montserrat"},styles:{global:function(e){return{"html, body":{fontSize:"sm",lineHeight:"tall"}}}},components:{Button:{baseStyle:{fontWeight:"bold"},sizes:{xl:{h:"56px",fontSize:"sm",px:"13px"}},variants:{"with-shadow":{bg:"#2c5282"},solid:function(e){return{bg:(e.colorMode,"#2c5282")}}}}}}),Do=c(229);s.a.render(Object(Do.jsx)(Vo.a,{theme:Fo,children:Object(Do.jsx)(ie.a,{store:Eo,children:Object(Do.jsx)(Po.a,{loading:null,persistor:wo,children:Object(Do.jsx)(oo,{})})})}),document.getElementById("root")),d()}},[[998,1,2]]]);
//# sourceMappingURL=main.f52086bc.chunk.js.map